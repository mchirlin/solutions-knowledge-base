{
  "_metadata": {
    "bundle_id": "CMGT_WFL_CFG_ReferenceTask_-_urnappiantranslation-stringv1a2299fa0-257f-401b-98b"
  },
  "objects": {
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3603367": {
      "name": "CMGT_WFL_EmailTemplate_RecordAction_CreateUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!CMGT_CB_UTIL_LoadBrandingMap(),\n  local!isCreate: rule!CMGT_UTIL_IsBlank(\n    value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n  ),\n  local!referencedTaskNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailReferenceTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTask.nameLabel,\n    null()\n  ),\n  local!referencedTaskBlockNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailTaskBlockTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask.taskBlock.label,\n    null()\n  ),\n  local!referencedCaseTypeTaskNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailCaseTypeWorkflowTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask.caseType.name,\n    null()\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n          items: {\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_stampField\"(\n                icon: \"envelope-open-text\",\n                contentColor: local!brandingMap.StandardStampContentColor,\n                backgroundColor: local!brandingMap.StandardStampBackgroundColor,\n                size: \"TINY\",\n                shape: local!brandingMap.StandardStampShape\n              ),\n              width: \"MINIMIZE\"\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_headingField\"(\n                text: if(\n                  local!isCreate,\n                  #\"urn:appian:translation-string:v1:46b8e7eb-9250-4bc1-87ba-785b0eb505a2\",\n                  #\"urn:appian:translation-string:v1:5f22d685-37f9-42d5-b1b1-bda7f782cf18\"\n                ),\n                headingTag: \"H1\",\n                fontWeight: \"SEMI_BOLD\",\n                size: local!brandingMap.H1Size,\n                marginAbove: \"STANDARD\"\n              )\n            )\n          },\n          alignVertical: \"MIDDLE\",\n          spacing: \"STANDARD\",\n          marginBelow: \"NONE\",\n          marginAbove: \"NONE\"\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n            color: local!brandingMap.secondaryTextColor,\n            size: \"SMALL\"\n          )\n        )\n      },\n      padding: \"STANDARD\",\n      showBorder: false()\n    ),\n\n    showTitleBarDivider: true(),\n    contentsWidth: \"FULL\",\n    contents: {\n      rule!CMGT_WFL_DisplayInfoBanner_EmailTemplate(\n        brandingMap: local!brandingMap,\n        primaryMessage: #\"urn:appian:translation-string:v1:352e8f93-81ec-4882-a059-01abdbe209b1\",\n        showWhen: not(local!isCreate),\n        caseTypeWorkFlowNames: local!referencedCaseTypeTaskNames,\n        referenceTaskNames: local!referencedTaskNames,\n        taskBlockNames: local!referencedTaskBlockNames\n      ),\n      rule!CMGT_WFL_EmailTemplate_Details(emailTemplate: ri!emailTemplate)\n    },\n    buttons: {\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: if(\n            local!isCreate,\n            #\"urn:appian:translation-string:v1:b8033487-0a9e-4a1b-8970-b49eb8ad8cc7\",\n            #\"urn:appian:translation-string:v1:06dbafc7-e085-40de-a68a-c83054c1d7ec\"\n          ),\n          submit: true,\n          style: \"SOLID\",\n          validate: true\n        ),\n        secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:edd4df67-d878-46d6-ab67-732a3700a588\",\n          saveInto: {\n            a!save(\n              ri!documentsToDelete,\n              rule!CMGT_UTIL_Filter(\n                records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n                field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateAttachmentId,\n                value: null\n              )[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n            ),\n            a!save(ri!emailTemplate, null)\n          },\n          submit: true,\n          style: \"OUTLINE\",\n          validate: false\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000eb88-676f-8000-9c81-011c48011c48_1925601": {
      "name": "CMGT_CB_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_MergeMaps(\n  map1: rule!CMGT_UTIL_LoadBrandingMap(),\n  map2: a!localVariables(\n    local!branding: getbrandingconfig(\n      cons!CMGT_WFL_DOC_DEFAULT_BRANDING_CONFIG,\n      true\n    ),\n    local!output: reduce(\n      #\"urn:appian:function:v1:a:update\"(_, _, _),\n      a!map(),\n      merge(\n        {\n          local!branding.defaultBranding.key,\n          local!branding.customBranding.key\n        },\n        {\n          local!branding.defaultBranding.value,\n          local!branding.customBranding.value\n        }\n      )\n    ),\n    local!output\n  )\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673375": {
      "name": "CMGT_WFL_MTR_UserCreatesReferenceTask",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ea01-8773-8000-9bde-011c48011c48_356157": {
      "name": "CMGT_UTIL_CardGroupHandler",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!maxPerRow: a!defaultValue(ri!maxPerRow, count(ri!cardLayouts)),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: enumerate(\n      ceiling(\n        count(ri!cardLayouts) / local!maxPerRow,\n        1\n      )\n    ),\n    expression: a!localVariables(\n      local!rowIndex: fv!index,\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        marginBelow: ri!marginBelow,\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            showWhen: contains({ \"RIGHT\", \"CENTER\" }, ri!align)\n          ),\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: enumerate(local!maxPerRow),\n            expression: a!localVariables(\n              local!adjustedIndex: (local!rowIndex - 1) * local!maxPerRow + fv!index,\n              local!cardLayout: a!refreshVariable(\n                value: index(ri!cardLayouts, local!adjustedIndex, {}),\n                refreshAlways: true\n              ),\n              #\"SYSTEM_SYSRULES_columnLayout\"(\n                width: ri!columnWidth,\n                contents: local!cardLayout\n              )\n            )\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            showWhen: contains({ \"LEFT\", \"CENTER\" }, ri!align)\n          )\n        },\n        stackWhen: ri!stackWhen,\n        spacing: a!defaultValue(ri!spacing,\"DENSE\")\n      )\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604784": {
      "name": "CMGT_WFL_QR_GetSendEmailTaskBlockTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.sendEmailTaskBlockTaskId,\n      operator: \"in\",\n      value: ri!sendEmailTaskBlockTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTaskId,\n      operator: \"in\",\n      value: ri!taskBlockTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604833": {
      "name": "CMGT_WFL_EmailTemplateAttachment_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!emailTemplateAttachments,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.documentName,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"name\"\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"extension\"\n        )\n      ),\n      a!map(\n        field:  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.size,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"size\"\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604771": {
      "name": "CMGT_WFL_QR_GetSendEmailReferenceTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailReferenceTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.sendEmailReferenceTaskId,\n      operator: \"in\",\n      value: ri!sendEmailReferenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTaskId,\n      operator: \"in\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTask,\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604826": {
      "name": "CMGT_WFL_EmailTemplate_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!emailTemplates,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments,\n        value: rule!CMGT_WFL_EmailTemplateAttachment_SetMetaData(\n          emailTemplateAttachments: fv!item[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_63958": {
      "name": "CMGT_QR_GetTaskBehaviorType",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  executeWhen: ri!executeWhen,\n  recordType: recordType!CMGT_CFG_TaskBehaviorType,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_TaskBehaviorType.isSystemOnly,\n      operator: \"=\",\n      value: ri!isSystemOnly\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_TaskBehaviorType.taskBehaviorTypeId,\n      operator: \"in\",\n      value: ri!taskBehaviorTypeId\n    )\n  },\n  returnType: ri!returnType,\n  fields: ri!fields,\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "000dea29-56ba-8000-02de-7f0000014e7a": {
      "name": "CMGT_WFL_ReferenceTask_CreateUpdate",
      "type": "Process Model",
      "sail_code": "// Input: ?\n= rule!CMGT_WFL_MTR_ReferenceTaskWrapper(referenceTask: pv!referenceTasks)\n\n// Output: ?\nrule!CMGT_WFL_ReferenceTask_SetMetaData(\n  referenceTasks: pv!referenceTasks,\n  initiator: pp!initiator\n)\n\n// Input: ?\n=pv!referenceTasks\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_ReferenceTask\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\n=documentsToDelete\n\n// Input: ?\n=newEmailTemplates\n\n// Input: ?\n= pv!documentsToDelete[tp!instanceindex]"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180568": {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "sail_code": "not(rule!CMGT_UTIL_IsBlank(ri!input))"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673723": {
      "name": "CMGT_WFL_MTR_UserEditsReferenceTask",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eaf1-7a52-8000-9c42-011c48011c48_1227353": {
      "name": "CMGT_UTIL_StripHtmlTags",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!replacedText: substitute(\n    substitute(ri!value, \"<p>\", \"\"),\n    \"</p>\",\n    \"\"\n  ),\n  if(\n    ri!isFormatted,\n    /*The striphtml() will automatically substitue char(10) for <br>*/striphtml(local!replacedText),\n    striphtml(\n      substitute(local!replacedText, \"<br>\", \" \")\n    )\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568168": {
      "name": "CMGT_WFL_ReferenceTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!referenceTasks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.isActive,\n        value: true\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions,\n        value: rule!CMGT_WFL_TaskResponseOption_SetMetaData(\n          taskResponseOptions: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask,\n        value: rule!CMGT_WFL_CreateCaseReferenceTask_SetMetaData(\n          createCaseReferenceTask: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask],\n          initiator: ri!initiator\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask,\n        value: rule!CMGT_WFL_SendEmailReferenceTask_SetMetaData(\n          sendEmailReferenceTask: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_19651": {
      "name": "CMGT_QR_GetCaseType",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_CFG_CaseType,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_CaseType.uuid,\n      operator: \"in\",\n      value: ri!caseTypeUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_CaseType.isCategory,\n      operator: \"=\",\n      value: ri!isCaseCategory\n    )\n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!excludeRelatedRecords,\n      {},\n      recordType!CMGT_CFG_CaseType.parentCaseType\n    )\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: {\n    ri!additionalLogicalExpression,\n    rule!CMGT_CaseTypeActiveLogicalExpression(includeInactive: ri!includeInactive)\n  },\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ece2-0128-8000-9bb8-011c48011c48_40224": {
      "name": "CMGT_UTIL_ContructSLAMap",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!slaJson),\n    isvalidjson(ri!slaJson)\n  ),\n  cast(\n    'type!{http://www.appian.com/ae/types/2009}Map',\n    #\"SYSTEM_SYSRULES_fromJson_v1\"(ri!slaJson)\n  ),\n  a!map(\n    days: a!defaultValue(ri!days, tostring(null())),\n    hours: a!defaultValue(ri!hours, tostring(null())),\n    minutes: a!defaultValue(ri!minutes, tostring(null())),\n    isBusinessDays: a!defaultValue(ri!isBusinessDays, false)\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604797": {
      "name": "CMGT_WFL_QR_GetSendEmailCaseTypeWorkflowTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTaskId,\n      operator: \"in\",\n      value: ri!sendEmailCaseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTaskId,\n      operator: \"in\",\n      value: ri!caseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673763": {
      "name": "CMGT_WFL_MTR_UserInitiatesReferenceTask",
      "type": "Expression Rule",
      "sail_code": "{}"
    },
    "_a-0000ed5b-d85c-8000-9d42-011c48011c48_3696853": {
      "name": "CMGT_QR_GetEmailTemplateAttachments",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_EmailTemplateAttachments,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field:recordType!CMGT_EmailTemplateAttachments.sendEmailTaskId,\n      operator: \"=\",\n      value: ri!sendEmailTaskId\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_EmailTemplateAttachments.createdByUser,\n    recordType!CMGT_EmailTemplateAttachments.modifiedByUser\n  },\n  pagingInfo: ri!pagingInfo,\n  sort: a!defaultValue(\n    value: ri!sort,\n    default: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field:recordType!CMGT_EmailTemplateAttachments.createdOn,\n      ascending: false\n    )\n  ),\n  relatedRecordData: ri!relatedRecordData,\n  groupByFields: ri!groupByFields,\n  logicalExpressions: ri!additionalLogicalExpression,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed08-c8b4-8000-9d25-011c48011c48_3441965": {
      "name": "CMGT_WFL_CreateCaseReferenceTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_SetRecordFields(\n  record: ri!createCaseReferenceTask,\n  /*Always set these fields with each update*/\n  alwaysOverwrite: {\n    a!map(\n      field: recordType!CMGT_WFL_CFG_CreateCaseReferenceTask.modifiedBy,\n      value: ri!initiator\n    ),\n    a!map(\n      field: recordType!CMGT_WFL_CFG_CreateCaseReferenceTask.modifiedOn,\n      value: now()\n    )\n  },\n  /*Only modify these fields if they are currently null*/\n  neverOverwrite: {\n    a!map(\n      field: recordType!CMGT_WFL_CFG_CreateCaseReferenceTask.createdBy,\n      value: ri!initiator\n    ),\n    a!map(\n      field: recordType!CMGT_WFL_CFG_CreateCaseReferenceTask.createdOn,\n      value: now()\n    ),\n    a!map(\n      field: recordType!CMGT_WFL_CFG_CreateCaseReferenceTask.isActive,\n      value: true\n    )\n  }\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568087": {
      "name": "CMGT_WFL_QR_GetReferenceTask",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_ReferenceTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_ReferenceTask.referenceTaskId,\n      operator: \"in\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_ReferenceTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType,\n    recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions,\n    recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask,\n    recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ea72-a399-8000-9c0d-011c48011c48_863909": {
      "name": "CMGT_UTIL_ValidateSLA",
      "type": "Expression Rule",
      "sail_code": "{\n  if(\n    /*Allows nulls & integers*/\n    regexmatch(\"^(-?(0|[1-9]\\d*)|)$\", ri!value) <> true(),\n    #\"urn:appian:translation-string:v1:0ab37401-6bd6-43b5-8b4a-484b1b1c7378\",\n    if(\n      and(\n        tointeger(ri!value) < 0,\n        a!isNotNullOrEmpty(ri!value)\n      ),\n      #\"urn:appian:translation-string:v1:f1ea8a38-1904-4cd0-80cc-1f1c119f5abe\",\n      if(\n        and(\n          tointeger(ri!value) > cons!CMGT_MAX_SLA_DAYS,\n          a!isNotNullOrEmpty(ri!value)\n        ),\n        #\"urn:appian:translation-string:v1:2cfd2a67-27ef-4dc4-b0d5-6fb08358e1ee\"(\n          #\"urn:appian:translation-variable:v1:9c7b4738-1840-4d1b-a7ab-0e41ce103e3e\": cons!CMGT_MAX_SLA_DAYS\n        ),\n        null\n      )\n    )\n  )\n}"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_576741": {
      "name": "CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch",
      "type": "Expression Rule",
      "sail_code": "if(\n  cons!CMGT_BOL_AUTOMATION_TESTING_LABEL_SWITCH,\n  ri!testingLabel,\n  ri!shipmentLabel\n)"
    },
    "_a-0000ed5b-d85c-8000-9d42-011c48011c48_3693036": {
      "name": "CMGT_Sub_EmailTemplateAttachmentsCard",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n            contents: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Document icon\"),\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: a!defaultValue(\n                    ri!attachment[recordType!CMGT_EmailTemplateAttachments.extensionIcon],\n                    ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extensionIcon]\n                  ),\n                  size: \"MEDIUM_PLUS\",\n                  color: rule!CMGT_Document_IconColorLogic(\n                    documentExtension: a!defaultValue(\n                      ri!attachment[recordType!CMGT_EmailTemplateAttachments.extension],\n                      ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension]\n                    ),\n                    brandingMap: ri!brandingMap\n                  )\n                )\n              },\n              marginBelow: \"NONE\"\n            ),\n            showBorder: false,\n            style: ri!brandingMap.CardBackgroundColor\n          ),\n          width: \"AUTO\",\n\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              contents: #\"SYSTEM_SYSRULES_forEach\"(\n                items: rule!CMGT_Sub_EmailTemplateAttachments_SummaryDisplay(\n                  attachment: ri!attachment,\n                  cfgAttachment: ri!cfgAttachment,\n                  brandingMap: ri!brandingMap,\n                  linkColor: ri!linkColor,\n                  isShowNoLink: true(),\n                  sizeAndExtensionColor: ri!sizeAndExtensionColor,\n                  nameStyle: \"STRONG\"\n                ),\n                expression: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(\n                    testingLabel: \"Email Template Attachment Details\"\n                  ),\n                  labelPosition: \"COLLAPSED\",\n                  value: fv!item,\n                  showWhen: or(\n                    not(fv!isLast),\n                    a!defaultValue(ri!showCreatedOn, true)\n                  ),\n                  preventWrapping: fv!isFirst,\n                  marginAbove: if(fv!isLast, \"LESS\", \"NONE\"),\n                  marginBelow: \"NONE\"\n                )\n              ),\n              style: ri!brandingMap.CardBackgroundColor,\n              showBorder: false\n            )\n          },\n          width: \"WIDE\"\n        )\n      },\n      spacing: \"NONE\",\n      stackWhen: \"NEVER\"\n    )\n  },\n  showWhen: a!isNotNullOrEmpty(\n    a!defaultValue(\n      ri!attachment[recordType!CMGT_EmailTemplateAttachments.appianDocumentId],\n      ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n    )\n  ),\n  link: #\"SYSTEM_SYSRULES_documentDownloadLink\"(\n    document: ri!attachment[recordType!CMGT_EmailTemplateAttachments.appianDocumentId],\n    showWhen: a!defaultValue(ri!showDocumentDownloadLink, false())\n  ),\n  shape: ri!brandingMap.CardShape,\n  showBorder: ri!brandingMap.CardShowBorder,\n  showShadow: ri!brandingMap.CardShowShadow,\n  padding: \"NONE\",\n  style: ri!brandingMap.CardBackgroundColor\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604539": {
      "name": "CMGT_WFL_DisplayInfoBanner_EmailTemplate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!isCollapsed: true(),\n  local!showWhenForTasks: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!referenceTaskNames),\n    local!isCollapsed = false()\n  ),\n  local!showWhenForTaskBlocks: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!taskBlockNames),\n    local!isCollapsed = false()\n  ),\n  local!showWhenForCaseTypeWorkflows: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!caseTypeWorkFlowNames),\n    local!isCollapsed = false()\n  ),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"info-circle\",\n                  color: ri!brandingMap.InfoAccentColor\n                ),\n                \" \",\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: ri!primaryMessage)\n              }\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: if(\n                  local!isCollapsed,\n                  \"angle-down-bold\",\n                  \"angle-up-bold\"\n                ),\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: a!save(\n                    local!isCollapsed,\n                    not(local!isCollapsed)\n                  )\n                ),\n                linkStyle: \"STANDALONE\",\n                color: ri!brandingMap.StandardTextColor,\n                size: \"MEDIUM\"\n              ),\n              align: \"RIGHT\"\n            )\n          )\n        },\n        marginBelow: \"NONE\"\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!referenceTaskNames) = 1,\n              #\"urn:appian:translation-string:v1:0fd1b5e8-27d7-435b-af55-17db70deff8c\",\n              #\"urn:appian:translation-string:v1:b3937399-62c6-489c-9594-fc51cb8074f0\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!referenceTaskNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForTasks,\n        marginBelow: if(\n          or(\n            local!showWhenForCaseTypeWorkflows,\n            local!showWhenForTaskBlocks\n          ),\n          \"NONE\",\n          \"EVEN_LESS\"\n        ),\n        marginAbove: \"NONE\"\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!taskBlockNames) = 1,\n              #\"urn:appian:translation-string:v1:179fc44d-752c-4185-8e1f-775a538abd8d\",\n              #\"urn:appian:translation-string:v1:34b0c22a-1b36-4741-98ff-fffca01ee0e3\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!taskBlockNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForTaskBlocks,\n        marginBelow: if(\n          local!showWhenForCaseTypeWorkflows,\n          \"NONE\",\n          \"EVEN_LESS\"\n        )\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!caseTypeWorkFlowNames) = 1,\n              #\"urn:appian:translation-string:v1:b8af0998-cbb6-4bc1-bfde-d4c65953ab10\",\n              #\"urn:appian:translation-string:v1:c9e8165d-aed0-40d7-a023-d0903986c59c\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!caseTypeWorkFlowNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForCaseTypeWorkflows,\n        marginBelow: \"EVEN_LESS\"\n      )\n    },\n    showWhen: and(\n      ri!showWhen,\n      any(\n        rule!CMGT_UTIL_IsNotBlank,\n        {\n          ri!caseTypeWorkFlowNames,\n          ri!referenceTaskNames,\n          ri!taskBlockNames\n        }\n      )\n    ),\n    style: ri!brandingMap.InfoBackgroundColor,\n    marginBelow: \"STANDARD\",\n    marginAbove: \"NONE\",\n    showBorder: false(),\n    decorativeBarPosition: \"START\"\n  )\n)"
    },
    "0002ed4a-bade-8000-1ea3-7f0000014e7a": {
      "name": "CMGT_WFL_EmailTemplate_CreateUpdate",
      "type": "Process Model",
      "sail_code": "// Input: ?\n= pv!documentsToDelete[tp!instanceindex]\n\n// Input: ?\n=pv!emailTemplates\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_EmailTemplate\n\n// Output: ?\nAC!RecordsUpdated\n\n// Output: ?\nrule!CMGT_WFL_EmailTemplate_SetMetaData(\n  initiator: pp!initiator,\n  emailTemplates: pv!emailTemplates\n)\n\n// Output: ?\na!match(\n  value: pv!documentsToDelete,\n  whenTrue: rule!CMGT_UTIL_IsNotBlank(input: fv!value),\n  then: pv!documentsToDelete,\n  whenTrue: rule!CMGT_UTIL_IsNotBlank(\n    input: a!flatten(\n      pv!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n    )\n  ),\n  then: rule!CMGT_UTIL_Filter(\n    records: a!flatten(\n      pv!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n    ),\n    field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n    value: false\n  )[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n  default: null()\n)"
    },
    "_a-0000e9fa-aa45-8000-9bda-011c48011c48_301090": {
      "name": "CMGT_UTIL_DisplayUser",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!user,\n  expression: a!localVariables(\n    local!currentUserRecord: if(\n      isusernametaken(fv!item),\n      rule!CMGT_UTIL_Filter(\n        records: ri!userRecord,\n        field: #\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_username\",\n        value: fv!item\n      ),\n      null()\n    ),\n    cast(\n      'type!{http://www.appian.com/ae/types/2009}Text',\n      if(\n        rule!CMGT_UTIL_IsNotBlank(input: local!currentUserRecord),\n        if(\n          or(\n            local!currentUserRecord[#\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_isServiceAccount\"] = true,\n            #\"urn:appian:function:v1:a:isusermemberofgroup?okey=a!isUserMemberOfGroup\"(\n              username: fv!item,\n              groups: cons!CMGT_GRP_SERVICE_ACCOUNTS\n            )\n          ),\n          cons!CMGT_TXT_AUTOMATED_SYSTEM,\n          local!currentUserRecord[#\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_firstAndLastName\"]\n        ),\n        if(\n          isnull(fv!item),\n          if(\n            ri!returnNullForEmpty,\n            null,\n            cons!CMGT_TXT_EMPTY_VALUE\n          ),\n          fv!item\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_566567": {
      "name": "CMGT_WFL_ReferenceTask_RecordAction_CreateUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!isUpdate: a!isNotNullOrEmpty(\n    ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.referenceTaskId]\n  ),\n  local!brandingMap:rule!CMGT_CB_UTIL_LoadBrandingMap(),\n  local!defaultDecisionResponseOption: recordType!CMGT_WFL_CFG_TaskResponseOption(\n    recordType!CMGT_WFL_CFG_TaskResponseOption.referenceTask: ri!referenceTask,\n    recordType!CMGT_WFL_CFG_TaskResponseOption.isActive: true,\n    recordType!CMGT_WFL_CFG_TaskResponseOption.label: \"\"\n  ),\n  /* Metrics*/\n  local!metric: rule!CMGT_WFL_MTR_UserInitiatesReferenceTask(),\n  local!sla: rule!CMGT_UTIL_ContructSLAMap(\n    slaJson: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla]\n  ),\n  local!currentForm: \"REFERENCE_TASK\",\n  local!emailTemplates: rule!CMGT_WFL_QR_GetEmailTemplates(\n    returnType: \"OBJECT_ARRAY\",\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!CMGT_WFL_CFG_EmailTemplate.templateName,\n      ascending: true()\n    )\n  ),\n  local!isPreview: false(),\n  local!newEmailTemplates: rule!CMGT_UTIL_Filter(\n    records: local!emailTemplates,\n    field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId,\n    value: null,\n\n  ),\n  local!selectedEmailTemplate: rule!CMGT_UTIL_Filter(\n    records: local!emailTemplates,\n    field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n    value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid]\n  ),\n  local!documentsToDelete,\n  local!nonMappedNewEmailTemplateUuids,\n  local!caseType: rule!CMGT_QR_GetCaseType(\n    caseTypeUuid: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.caseTypeUuid],\n    fields: {\n      recordType!CMGT_CFG_CaseType.isActive,\n      recordType!CMGT_CFG_CaseType.areParentsActive\n    },\n    includeInactive: true(),\n    returnType: \"SINGLE_OBJECT\",\n    executeWhen: rule!CMGT_UTIL_IsNotBlank(\n      input: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.caseTypeUuid]\n    )\n  ),\n  local!isActiveCaseType: and(\n    local!caseType[recordType!CMGT_CFG_CaseType.isActive],\n    local!caseType[recordType!CMGT_CFG_CaseType.areParentsActive]\n  ),\n  a!match(\n    value: local!currentForm,\n    equals: \"CREATE_NEW_EMAIL_TEMPLATE\",\n    then: rule!CMGT_WFL_SUB_CreateEmailTemplate(\n      brandingMap: local!brandingMap,\n      emailTemplates: local!emailTemplates,\n      documentsToDelete: local!documentsToDelete,\n      submitSaveInto: {\n        a!save(\n          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid],\n          save!value[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid]\n        ),\n        a!save(local!currentForm, \"REFERENCE_TASK\")\n      },\n      cancelSaveInto: {\n        a!save(local!currentForm, \"REFERENCE_TASK\")\n      }\n    ),\n    whenTrue: local!isPreview,\n    then: rule!CMGT_EmailTemplate_Preview(\n      emailTemplateName: local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n      subject: local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      body: local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.body],\n      isPreview: local!isPreview,\n      cfgAttachments: rule!CMGT_UTIL_RejectBlank(\n        local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n      ),\n      brandingMap: local!brandingMap\n    ),\n    default: #\"SYSTEM_SYSRULES_formLayout_v2\"(\n      titleBar: #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_stampField\"(\n                  icon: \"tasks-alt\",\n                  contentColor: local!brandingMap.StandardStampContentColor,\n                  backgroundColor: local!brandingMap.StandardStampBackgroundColor,\n                  size: \"TINY\",\n                  shape: local!brandingMap.StandardStampShape\n                ),\n                width: \"MINIMIZE\"\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_headingField\"(\n                  text: if(\n                    local!isUpdate,\n                    #\"urn:appian:translation-string:v1:a2299fa0-257f-401b-98b7-ee280826474b\",\n                    #\"urn:appian:translation-string:v1:fa9f85e9-0345-4f20-8252-5686f8d7955e\"\n                  ),\n                  size: local!brandingMap.H1Size,\n                  headingTag: \"H1\",\n                  fontWeight: \"SEMI_BOLD\",\n                  marginAbove: \"STANDARD\"\n                )\n              )\n            },\n            alignVertical: \"MIDDLE\",\n            spacing: \"STANDARD\",\n            marginBelow: \"NONE\",\n            marginAbove: \"NONE\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n              color: local!brandingMap.secondaryTextColor,\n              size: \"SMALL\"\n            )\n          )\n        },\n        padding: \"STANDARD\",\n        showBorder: false()\n      ),\n      showTitleBarDivider: true(),\n      contents: {\n        #\"SYSTEM_SYSRULES_columnsLayout\"(\n          columns: {\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                  items: {\n                    /* Name */\n                    #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                      item: #\"SYSTEM_SYSRULES_textField\"(\n                        label: #\"urn:appian:translation-string:v1:0bae9b3f-5ddd-4c6a-a4cf-abe8702dac9e\",\n                        value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.nameLabel],\n                        saveInto: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.nameLabel],\n                        characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n                        required: true,\n                        requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                          #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\"\n                        )\n                      )\n                    ),\n                    #\"SYSTEM_SYSRULES_sideBySideItem\"(item: {})\n                  }\n                ),\n                /* Description */\n                rule!CMGT_UTIL_RichTextField(\n                  value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.description],\n                  readOnly: false(),\n                  label: #\"urn:appian:translation-string:v1:6ae27e88-ca52-4cde-831a-a6e6c2cd57e9\",\n                  helpTooltip: #\"urn:appian:translation-string:v1:1540dd99-3992-4217-b534-43440de2fc7f\"\n                ),\n                #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                  items: {\n                    /* Group Picker */\n                    #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                      item: #\"SYSTEM_SYSRULES_pickerFieldGroups\"(\n                        label: #\"urn:appian:translation-string:v1:6f42b039-c079-45f1-806f-cbf4104e8037\",\n                        helpTooltip: if(\n                          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.isAutomated],\n                          #\"urn:appian:translation-string:v1:bc958819-24af-4576-866e-3141056afc9d\",\n                          {}\n                        ),\n                        placeholder: #\"urn:appian:translation-string:v1:1fac909d-a6aa-4a91-9ade-2ff52163b94e\",\n                        maxSelections: 1,\n                        groupFilter: cons!CMGT_GRP_BUSINESS_GROUPS,\n                        value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultGroupAssignee],\n                        saveInto: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultGroupAssignee],\n                        disabled: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.isAutomated]\n                      )\n                    )\n                  },\n                  marginBelow: \"NONE\"\n                ),\n                /*Default SLA Section*/\n                {\n                  /*Default SLA Section*/\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: #\"urn:appian:translation-string:v1:7994796a-c989-4edf-a48a-2c5a838f1c16\",\n                      style: \"STRONG\"\n                    ),\n                    marginBelow: \"NONE\",\n                    marginAbove: if(\n                      and(\n                        a!isNotNullOrEmpty(\n                          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                        ),\n                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                        count(\n                          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions]\n                        ) < 5\n                      ),\n                      \"NONE\",\n                      \"EVEN_LESS\"\n                    )\n                  ),\n                  #\"SYSTEM_SYSRULES_columnsLayout\"(\n                    columns: {\n                      #\"SYSTEM_SYSRULES_columnLayout\"(\n                        contents: {\n                          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: #\"urn:appian:translation-string:v1:4794decc-5e8c-4cb6-bf94-0696d49b4fa5\",\n                              color: local!brandingMap.SecondaryTextColor\n                            )\n                          ),\n                          #\"SYSTEM_SYSRULES_textField\"(\n                            label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Days\"),\n                            labelPosition: \"COLLAPSED\",\n                            value: local!sla.days,\n                            saveInto: {\n                              a!save(\n                                local!sla,\n                                rule!CMGT_UTIL_ContructSLAMap(\n                                  hours: index(local!sla, \"hours\", \"\"),\n                                  minutes: index(local!sla, \"minutes\", \"\"),\n                                  days: save!value,\n                                  isBusinessDays: index(local!sla, \"isBusinessDays\", \"\"),\n\n                                )\n                              ),\n                              if(\n                                rule!CMGT_UTIL_isEmptySLA(local!sla),\n                                a!save(local!sla, null),\n                                {}\n                              ),\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla],\n                                if(\n                                  rule!CMGT_UTIL_IsNotBlank(local!sla),\n                                  #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                                  null\n                                )\n                              ),\n\n                            },\n                            validations: rule!CMGT_UTIL_ValidateSLA(value: index(local!sla, \"days\", \"\"))\n                          )\n                        }\n                      ),\n                      #\"SYSTEM_SYSRULES_columnLayout\"(\n                        contents: {\n                          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: #\"urn:appian:translation-string:v1:befd59bf-3568-4c2b-9afd-71b7d6f7060a\",\n                              color: local!brandingMap.SecondaryTextColor\n                            )\n                          ),\n                          #\"SYSTEM_SYSRULES_textField\"(\n                            label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Hours\"),\n                            labelPosition: \"COLLAPSED\",\n                            value: local!sla.hours,\n                            saveInto: {\n                              /*We are storing the value of Business Days to be false if atleast one\n                                  of the value is given*/\n                              a!save(\n                                local!sla,\n                                rule!CMGT_UTIL_ContructSLAMap(\n                                  hours: save!value,\n                                  minutes: index(local!sla, \"minutes\", \"\"),\n                                  days: index(local!sla, \"days\", \"\"),\n                                  isBusinessDays: index(local!sla, \"isBusinessDays\", \"\"),\n\n                                )\n                              ),\n                              if(\n                                rule!CMGT_UTIL_isEmptySLA(local!sla),\n                                a!save(local!sla, null),\n                                {}\n                              ),\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla],\n                                if(\n                                  rule!CMGT_UTIL_IsNotBlank(local!sla),\n                                  #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                                  null\n                                )\n                              ),\n\n                            },\n                            validations: rule!CMGT_UTIL_ValidateSLA(value: index(local!sla, \"hours\", \"\"))\n                          )\n                        }\n                      ),\n                      #\"SYSTEM_SYSRULES_columnLayout\"(\n                        contents: {\n                          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: #\"urn:appian:translation-string:v1:8011a7b9-c1f3-45f4-9f16-99471296e83d\",\n                              color: local!brandingMap.SecondaryTextColor\n                            )\n                          ),\n                          #\"SYSTEM_SYSRULES_textField\"(\n                            label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Minutes\"),\n                            labelPosition: \"COLLAPSED\",\n                            value: local!sla.minutes,\n                            saveInto: {\n                              a!save(\n                                local!sla,\n                                rule!CMGT_UTIL_ContructSLAMap(\n                                  hours: index(local!sla, \"hours\", \"\"),\n                                  minutes: save!value,\n                                  days: index(local!sla, \"days\", \"\"),\n                                  isBusinessDays: index(local!sla, \"isBusinessDays\", \"\"),\n\n                                )\n                              ),\n                              if(\n                                rule!CMGT_UTIL_isEmptySLA(local!sla),\n                                a!save(local!sla, null),\n                                {}\n                              ),\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla],\n                                if(\n                                  rule!CMGT_UTIL_IsNotBlank(local!sla),\n                                  #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                                  null\n                                )\n                              ),\n\n                            },\n                            validations: rule!CMGT_UTIL_ValidateSLA(value: index(local!sla, \"minutes\", \"\"))\n                          )\n                        }\n                      ),\n                      #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n                      #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n                    }\n                  ),\n                  #\"SYSTEM_SYSRULES_checkboxField_v1\"(\n                    choiceLabels: #\"urn:appian:translation-string:v1:759245e6-9b85-4710-831f-f11ad593d08a\",\n                    choiceValues: true,\n                    label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Calculate the due date using business days\"),\n                    labelPosition: \"COLLAPSED\",\n                    value: if(\n                      a!isNotNullOrEmpty(index(local!sla, \"isBusinessDays\", null)),\n                      if(\n                        index(local!sla, \"isBusinessDays\", null),\n                        true(),\n                        null\n                      ),\n                      null\n                    ),\n                    saveInto: {\n                      a!save(\n                        local!sla,\n                        rule!CMGT_UTIL_ContructSLAMap(\n                          days: local!sla.days,\n                          hours: local!sla.hours,\n                          minutes: local!sla.minutes,\n                          isBusinessDays: a!defaultValue(value: save!value, default: false)\n                        )\n                      ),\n                      a!save(\n                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla],\n                        if(\n                          rule!CMGT_UTIL_IsNotBlank(local!sla),\n                          #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                          null\n                        )\n                      )\n                    },\n                    disabled: rule!CMGT_UTIL_isEmptySLA(slaMap: local!sla),\n                    marginBelow: \"LESS\"\n                  )\n                },\n                /* Task Details */\n                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:815d242c-4bcb-4550-a6e3-ac4fbbd46728\",\n                    style: \"STRONG\"\n                  )\n                ),\n                #\"SYSTEM_SYSRULES_cardLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                      items: {\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                          item: /* Task Type */\n                          #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                            data: #\"SYSTEM_SYSRULES_recordData\"(\n                              recordType: recordType!CMGT_CFG_TaskBehaviorType,\n                              filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                                operator: \"AND\",\n                                filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n                                  field: recordType!CMGT_CFG_TaskBehaviorType.taskBehaviorTypeId,\n                                  operator: \"<>\",\n                                  value: cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION\n                                )\n                              )\n                            ),\n                            choiceLabels: recordType!CMGT_CFG_TaskBehaviorType.label,\n                            choiceValues: recordType!CMGT_CFG_TaskBehaviorType.taskBehaviorTypeId,\n                            label: #\"urn:appian:translation-string:v1:87b80513-1e00-457f-92aa-c7df18190cd5\",\n                            placeholder: #\"urn:appian:translation-string:v1:88737b77-6273-41ec-bcc3-c41bacb44d4a\",\n                            value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId],\n                            saveInto: /*Need to clear out other data that might have been set before changing task type*/\n                            {\n                              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId],\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType],\n                                rule!CMGT_QR_GetTaskBehaviorType(\n                                  returnType: \"SINGLE_OBJECT\",\n                                  taskBehaviorTypeId: save!value\n                                )\n                              ),\n                              /*Clear the response options out if the task type is not decision*/\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                if(\n                                  and(\n                                    ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                                    rule!CMGT_UTIL_IsBlank(\n                                      ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions]\n                                    )\n                                  ),\n                                  #\"SYSTEM_SYSRULES_forEach\"(\n                                    items: enumerate(2) + 1,\n                                    expression: local!defaultDecisionResponseOption\n                                  ),\n                                  null\n                                )\n                              ),\n                              /*Clear the question out if the task type is not decision*/\n                              if(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] <> cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                                a!save(\n                                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.questionLabel],\n                                  null\n                                ),\n                                {}\n                              ),\n                              /*Clear the group assignee out if the task type is automated*/\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultGroupAssignee],\n                                if(\n                                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.isAutomated],\n                                  null,\n                                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultGroupAssignee]\n                                )\n                              ),\n                              /*Clear the SLA days out if the task type is automated*/\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla],\n                                if(\n                                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.isAutomated],\n                                  null,\n                                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla]\n                                )\n                              ),\n                              /*Clear the Case type & Relationship, if the Task behavior type is not Create Case*/\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask],\n                                null\n                              ),\n                              /*Clear the send email reference task relationship, if the Task behavior type is not send email*/\n                              a!save(\n                                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask],\n                                null\n                              ),\n                              if(\n                                rule!CMGT_UTIL_IsNotBlank(input: local!newEmailTemplates),\n                                {\n                                  /* Append the newly created email templates attachmentIds to documentsToDelete */\n                                  a!save(\n                                    local!documentsToDelete,\n                                    append(\n                                      local!documentsToDelete,\n                                      rule!CMGT_UTIL_RejectBlank(\n                                        array: index(\n                                          local!newEmailTemplates,\n                                          recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId,\n                                          null\n                                        )\n                                      )\n                                    )\n                                  ),\n                                  /* Clear all the newly created email Templates */\n                                  a!save(\n                                    local!emailTemplates,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: local!emailTemplates,\n                                      field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n                                      value: local!newEmailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n                                      filterType: \"REJECT\"\n                                    )\n                                  ),\n                                  /* Clear new email templates */\n                                  a!save(local!newEmailTemplates, null)\n                                },\n                                {}\n                              )\n                            },\n                            required: true,\n                            requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                              #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:87b80513-1e00-457f-92aa-c7df18190cd5\"\n                            ),\n                            disabled: local!isUpdate\n                          ),\n                          width: \"6X\"\n                        ),\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(item: {})\n                      }\n                    ),\n                    #\"SYSTEM_SYSRULES_columnsLayout\"(\n                      marginBelow: \"NONE\",\n                      marginAbove: \"STANDARD\",\n                      columns: {\n                        #\"SYSTEM_SYSRULES_columnLayout\"(\n                          contents: {\n                            {\n                              #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                                items: {\n                                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                    /* Question */\n                                    item: #\"SYSTEM_SYSRULES_textField\"(\n                                      label: #\"urn:appian:translation-string:v1:1d75c2e0-04ea-4b38-97fd-62fb1a14f0f4\",\n                                      helpTooltip: #\"urn:appian:translation-string:v1:2d58f145-74bd-433d-b33b-2d4f0568704b\",\n                                      value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.questionLabel],\n                                      saveInto: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.questionLabel],\n                                      characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n                                      showWhen: and(\n                                        a!isNotNullOrEmpty(\n                                          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                                        ),\n                                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION\n                                      ),\n                                      required: true,\n                                      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                                        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:1d75c2e0-04ea-4b38-97fd-62fb1a14f0f4\"\n                                      )\n                                    ),\n                                    width: \"6X\"\n                                  ),\n                                  #\"SYSTEM_SYSRULES_sideBySideItem\"(item: {}),\n\n                                },\n                                marginBelow: \"NONE\"\n                              ),\n                              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                  text: #\"urn:appian:translation-string:v1:773c4e60-8a60-4dbf-834c-bb4ef201b786\",\n                                  style: \"STRONG\"\n                                ),\n                                marginAbove: \"EVEN_LESS\"\n                              ),\n                              #\"SYSTEM_SYSRULES_forEach\"(\n                                items: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                expression: {\n                                  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                                    alignVertical: \"MIDDLE\",\n                                    items: {\n                                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                        width: \"MINIMIZE\",\n                                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: fv!index, style: \"STRONG\")\n                                        )\n                                      ),\n                                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                        item: #\"SYSTEM_SYSRULES_textField\"(\n                                          label: #\"urn:appian:translation-string:v1:9731a5c4-f9d3-439e-9256-2bead6cb98b7\"(\n                                            #\"urn:appian:translation-variable:v1:e5dab292-88a7-4032-b649-3c55fcb88189\": fv!index\n                                          ),\n                                          labelPosition: \"COLLAPSED\",\n                                          requiredMessage: #\"urn:appian:translation-string:v1:91314f57-1a7a-4999-88b8-7e6bab124c67\",\n                                          value: fv!item[recordType!CMGT_WFL_CFG_TaskResponseOption.label],\n                                          saveInto: fv!item[recordType!CMGT_WFL_CFG_TaskResponseOption.label],\n                                          characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM\n                                        ),\n                                        width: \"5X\"\n                                      ),\n                                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                          labelPosition: \"COLLAPSED\",\n                                          value: {\n                                            #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                              showWhen: rule!CMGT_UTIL_IsBlank(\n                                                fv!item[recordType!CMGT_WFL_CFG_TaskResponseOption.taskResponseOptionId]\n                                              ),\n                                              icon: \"times\",\n                                              color: \"NEGATIVE\",\n                                              size: \"MEDIUM\",\n                                              linkStyle: \"STANDALONE\",\n                                              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                                saveInto: if(\n                                                  a!isNullOrEmpty(\n                                                    fv!item[recordType!CMGT_WFL_CFG_TaskResponseOption.taskResponseOptionId]\n                                                  ),\n                                                  a!save(\n                                                    ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                                    remove(\n                                                      ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                                      fv!index\n                                                    )\n                                                  ),\n                                                  a!save(\n                                                    fv!item,\n                                                    #\"urn:appian:function:v1:a:update\"(\n                                                      fv!item,\n                                                      recordType!CMGT_WFL_CFG_TaskResponseOption.isActive,\n                                                      false\n                                                    )\n                                                  )\n                                                )\n                                              ),\n                                              altText: #\"urn:appian:translation-string:v1:2a483bf9-c1f6-41dc-9d02-b9e65747a006\"(\n                                                #\"urn:appian:translation-variable:v1:ee534079-3e08-4c59-ae4d-ef3d8cfb6155\": fv!index\n                                              )\n                                            )\n                                          }\n                                        )\n                                      )\n                                    }\n                                  )\n                                }\n                              ),\n                              #\"SYSTEM_SYSRULES_ButtonLayout\"(\n                                showWhen: count(\n                                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions]\n                                ) < 5,\n                                secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                                  style: \"LINK\",\n                                  size: \"SMALL\",\n                                  icon: \"plus-circle\",\n                                  label: #\"urn:appian:translation-string:v1:3efef77c-5d03-4add-b1a2-6fdf7f39d690\",\n                                  saveInto: a!save(\n                                    ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                    append(\n                                      ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                      local!defaultDecisionResponseOption\n                                    )\n                                  ),\n                                  accessibilityText: #\"urn:appian:translation-string:v1:9e159048-eba6-486b-9a68-0a8e9f01b555\"\n                                )\n                              )\n                            },\n\n                          }\n                        )\n                      },\n                      showWhen: and(\n                        a!isNotNullOrEmpty(\n                          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                        ),\n                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION\n                      )\n                    ),\n                    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                      items: {\n                        /* Email Template */\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                          item: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                            choiceLabels: local!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n                            choiceValues: local!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n                            label: #\"urn:appian:translation-string:v1:9ee41a2b-9ebc-4f9a-8581-138e2e348ba3\",\n                            placeholder: #\"urn:appian:translation-string:v1:6deffc1a-e4be-4a1b-a899-02820e6ca2bd\",\n                            value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid],\n                            saveInto: {\n                              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid]\n                            },\n                            required: true,\n                            requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                              #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:9ee41a2b-9ebc-4f9a-8581-138e2e348ba3\"\n                            )\n                          ),\n                          width: \"5X\"\n                        ),\n                        /* Preview */\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                          item: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                            buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                              label: #\"urn:appian:translation-string:v1:8081c5e8-c2e7-4294-af43-28e7a98658e6\",\n                              saveInto: a!save(local!isPreview, true()),\n                              disabled: rule!CMGT_UTIL_IsBlank(\n                                value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid],\n\n                              )\n                            ),\n                            align: \"START\",\n                            marginBelow: \"NONE\",\n                            marginAbove: \"LESS\"\n                          ),\n                          width: \"MINIMIZE\"\n                        ),\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(item: {})\n                      },\n                      marginBelow: \"NONE\",\n                      marginAbove: \"STANDARD\",\n                      alignVertical: \"BOTTOM\",\n                      showWhen: tointeger(\n                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                      ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_SEND_EMAIL\n                    ),\n                    /* Create Template */\n                    #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                      buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                        label: #\"urn:appian:translation-string:v1:e2e5d9f2-a4d2-45e2-8011-e195eaeb07f7\",\n                        style: \"LINK\",\n                        icon: \"plus-circle\",\n                        saveInto: a!save(\n                          local!currentForm,\n                          \"CREATE_NEW_EMAIL_TEMPLATE\"\n                        ),\n                        showWhen: tointeger(\n                          ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                        ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_SEND_EMAIL\n                      ),\n                      align: \"START\",\n                      marginBelow: \"NONE\",\n                      marginAbove: \"LESS\"\n                    ),\n                    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                      items: {\n                        /* Case Type */\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                          item: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                            label: #\"urn:appian:translation-string:v1:28ea68dc-457f-4863-9e77-b36020dbeb4b\",\n                            data: #\"SYSTEM_SYSRULES_recordData\"(\n                              recordType: recordType!CMGT_CFG_CaseType,\n                              filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                                operator: \"AND\",\n                                filters: {\n                                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                                    field: recordType!CMGT_CFG_CaseType.isCategory,\n                                    operator: \"=\",\n                                    value: false()\n                                  ),\n                                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                                    field: recordType!CMGT_CFG_CaseType.isActive,\n                                    operator: \"=\",\n                                    value: true()\n                                  ),\n                                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                                    field: recordType!CMGT_CFG_CaseType.parentCaseType.isActive,\n                                    operator: \"=\",\n                                    value: true()\n                                  )\n                                }\n                              )\n                            ),\n                            placeholder: #\"urn:appian:translation-string:v1:d91269ae-78f6-4736-b22a-ea742a59e80d\",\n                            choiceLabels: recordType!CMGT_CFG_CaseType.fullLabel,\n                            choiceValues: recordType!CMGT_CFG_CaseType.uuid,\n                            value: if(\n                              local!isActiveCaseType,\n                              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.caseTypeUuid],\n                              null\n                            ),\n                            saveInto: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.caseTypeUuid],\n                            required: true(),\n                            requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                              #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:28ea68dc-457f-4863-9e77-b36020dbeb4b\"\n                            )\n                          ),\n                          width: \"6X\"\n                        ),\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(item: {})\n                      },\n                      showWhen: tointeger(\n                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                      ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE\n                    ),\n                    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                      items: {\n                        /* Relationship to original Case */\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                          item: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                            label: #\"urn:appian:translation-string:v1:f967743d-71a3-4f23-8107-b8f1ebc38396\",\n                            data: #\"SYSTEM_SYSRULES_recordData\"(\n                              recordType: recordType!CMGT_CFG_RelationshipMapType,\n                              filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                                operator: \"AND\",\n                                filters: {\n                                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                                    field: recordType!CMGT_CFG_RelationshipMapType.type,\n                                    operator: \"=\",\n                                    value: \"CASE_TO_CASE\"\n                                  ),\n                                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                                    field: recordType!CMGT_CFG_RelationshipMapType.isActive,\n                                    operator: \"=\",\n                                    value: true()\n                                  )\n                                }\n                              )\n                            ),\n                            placeholder: #\"urn:appian:translation-string:v1:3831f890-1fc6-41e0-8732-dedfe0749174\",\n                            choiceLabels: recordType!CMGT_CFG_RelationshipMapType.relationship.label,\n                            choiceValues: recordType!CMGT_CFG_RelationshipMapType.relationshipMapTypeId,\n                            value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.relationshipToOriginalCase],\n                            saveInto: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.relationshipToOriginalCase]\n                          ),\n                          width: \"6X\"\n                        ),\n                        /* Case Type */\n                        #\"SYSTEM_SYSRULES_sideBySideItem\"(item: {})\n                      },\n                      showWhen: tointeger(\n                        ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId]\n                      ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE\n                    ),\n\n                  },\n                  showBorder: false(),\n                  shape: \"SEMI_ROUNDED\",\n                  style: local!brandingMap.StandardStampBackgroundColor\n                )\n              }\n            )\n          }\n        )\n      },\n      contentsWidth: \"FULL\",\n      buttons: {\n        #\"SYSTEM_SYSRULES_ButtonLayout\"(\n          primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: if(\n              local!isUpdate,\n              #\"urn:appian:translation-string:v1:06dbafc7-e085-40de-a68a-c83054c1d7ec\",\n              #\"urn:appian:translation-string:v1:8109f456-b575-47d2-8f0f-097db1743e6b\"\n            ),\n            style: \"SOLID\",\n            submit: true,\n            validate: true,\n            saveInto: {\n              /*Write new email templates only if it is mapped to any task*/\n              a!save(\n                ri!newEmailTemplates,\n                rule!CMGT_UTIL_Filter(\n                  records: local!newEmailTemplates,\n                  field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n                  value: ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid]\n                )\n              ),\n              a!save(\n                local!nonMappedNewEmailTemplateUuids,\n                difference(\n                  touniformstring(\n                    local!newEmailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid]\n                  ),\n                  ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid]\n                )\n              ),\n              if(\n                rule!CMGT_UTIL_IsNotBlank(local!nonMappedNewEmailTemplateUuids),\n                a!save(\n                  local!documentsToDelete,\n                  append(\n                    local!documentsToDelete,\n                    a!flatten(\n                      rule!CMGT_UTIL_Filter(\n                        records: local!newEmailTemplates,\n                        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n                        value: local!nonMappedNewEmailTemplateUuids\n                      )[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId]\n                    )\n                  )\n                ),\n                {}\n              ),\n              a!save(\n                ri!newEmailTemplates,\n                rule!CMGT_UTIL_Filter(\n                  records: local!newEmailTemplates,\n                  field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n                  value: local!nonMappedNewEmailTemplateUuids,\n                  filterType: \"REJECT\"\n                )\n              ),\n              a!save(\n                ri!documentsToDelete,\n                local!documentsToDelete\n              )\n            }\n          ),\n          secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: #\"urn:appian:translation-string:v1:651cf177-f30b-485b-900f-8aaf47805737\",\n            style: \"OUTLINE\",\n            submit: true,\n            validate: false,\n            saveInto: {\n              a!save(ri!referenceTask, null),\n              a!save(\n                ri!documentsToDelete,\n                append(\n                  local!documentsToDelete,\n                  rule!CMGT_UTIL_RejectBlank(\n                    array: index(\n                      local!newEmailTemplates,\n                      recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId,\n                      null\n                    )\n                  )\n                )\n              ),\n              a!save(ri!newEmailTemplates, null)\n            }\n          )\n        )\n      },\n      validations: {\n        /*Validation thrown when:\n      there is a blank response option\n      or\n      only one response option\n      */\n        #\"SYSTEM_SYSRULES_validationMessage\"(\n          message: #\"urn:appian:translation-string:v1:d402c5b7-0888-4e49-8599-5ac3a6edacab\",\n          validateAfter: \"SUBMIT\",\n          showWhen: and(\n            a!isNotNullOrEmpty(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions]\n            ),\n            length(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions.label]\n            ) <> count(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions.label]\n            )\n          )\n        ),\n        #\"SYSTEM_SYSRULES_validationMessage\"(\n          message: #\"urn:appian:translation-string:v1:db902d02-f822-4eaf-a0c2-07944110b684\",\n          validateAfter: \"SUBMIT\",\n          showWhen: and(\n            a!defaultValue(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId],\n              0\n            ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n            count(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions.label]\n            ) < 2\n          )\n        ),\n        #\"SYSTEM_SYSRULES_validationMessage\"(\n          message: #\"urn:appian:translation-string:v1:b6df6f51-cd36-4d95-bfe4-e7be13e4dc7f\",\n          validateAfter: \"SUBMIT\",\n          showWhen: and(\n            a!defaultValue(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId],\n              0\n            ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n            count(\n              rule!CMGT_UTIL_Distinct(\n                ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions.label]\n              )\n            ) <> count(\n              ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions.label]\n            )\n          )\n        )\n      }\n    )\n  )\n)"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_56349": {
      "name": "CMGT_UTIL_FormatDateTime",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!dateTime),\n  \"\",\n  a!localVariables(\n    /*Converting dateTime to system time zone if  convertToSystemTimeZone is passed true */\n    local!dateTimeToFormat: if(\n      ri!convertToSystemTimeZone,\n      rule!CMGT_UTIL_ConvertDateTimeToTimezone(\n        dateTime: ri!dateTime,\n        timezone: rule!CMGT_UTIL_SystemTimezone()\n      ),\n      ri!dateTime\n    ),\n    if(\n      ri!returnTime,\n      text(local!dateTimeToFormat, \"h:mm a\"),\n      if(\n        ri!includeTime,\n        text(\n          local!dateTimeToFormat,\n          \"mmm d, yyyy h:mm a\"\n        ),\n        if(\n          ri!returnMonthAndDay,\n          text(local!dateTimeToFormat, \"mmm.d\"),\n          text(local!dateTimeToFormat, \"mmm d, yyyy\")\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_145917": {
      "name": "CMGT_UTIL_Distinct",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(ri!value),\n  union(\n    a!flatten(ri!value),\n    a!flatten(ri!value)\n  )\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673741": {
      "name": "CMGT_WFL_MTR_ReferenceTaskWrapper",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(\n    ri!referenceTask[recordType!CMGT_WFL_CFG_ReferenceTask.referenceTaskId]\n  ),\n  rule!CMGT_WFL_MTR_UserCreatesReferenceTask(),\n  rule!CMGT_WFL_MTR_UserEditsReferenceTask()\n)"
    },
    "_a-0000edf8-ac88-8000-9d80-011c48011c48_4290472": {
      "name": "CMGT_Document_IconLogic",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: lower(\n   ri!documentExtension\n  ),\n  equals: \"doc\",\n  equals: \"docx\",\n  then: \"file-word-o\",\n  equals: \"txt\",\n  then: \"file-text-o\",\n  equals: \"png\",\n  equals: \"jpg\",\n  then: \"file-image-o\",\n  equals: \"mov\",\n  equals: \"mp4\",\n  then: \"file-movie-o\",\n  equals: \"xls\",\n  equals: \"xlsx\",\n  equals: \"xlsm\",\n  then: \"file-excel-o\",\n  equals: \"pptx\",\n  then: \"file-powerpoint-o\",\n  equals: \"pdf\",\n  then: \"file-pdf-o\",\n  equals: \"zip\",\n  then: \"file-archive-o\",\n  default: \"file-o\"\n),"
    },
    "_a-0000ece2-0128-8000-9bb8-011c48011c48_40321": {
      "name": "CMGT_UTIL_isEmptySLA",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    a!isNullOrEmpty(ri!slaMap.days),\n    a!isNullOrEmpty(ri!slaMap.hours),\n    a!isNullOrEmpty(ri!slaMap.minutes)\n  ),\n  true,\n  false\n)"
    },
    "_a-0000e9f4-1323-8000-9bd3-011c48011c48_267840": {
      "name": "CMGT_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!branding: getbrandingconfig(\n    cons!CMGT_DOC_DEFAULT_BRANDING_CONFIG,\n    true\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!branding.defaultBranding.key,\n        local!branding.customBranding.key\n      },\n      {\n        local!branding.defaultBranding.value,\n        local!branding.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3602456": {
      "name": "CMGT_WFL_QR_GetEmailTemplates",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_EmailTemplate,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId,\n      operator: \"in\",\n      value: ri!emailTemplateId\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailCaseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailReferenceTasks,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailTaskBlockTasks\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3619696": {
      "name": "CMGT_WFL_SendEmailReferenceTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!sendEmailReferenceTask,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.isActive,\n        value: true\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplate,\n        value: rule!CMGT_WFL_EmailTemplate_SetMetaData(\n          emailTemplates: fv!item[recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplate],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612864": {
      "name": "CMGT_WFL_EmailTemplate_Details",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: #\"SYSTEM_SYSRULES_textField\"(\n            label: #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\",\n            labelPosition: \"ABOVE\",\n            value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n            saveInto: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n            characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n            required: true,\n            requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n              #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\"\n            )\n          ),\n\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\"),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n\n      }\n    ),\n    #\"SYSTEM_SYSRULES_textField\"(\n      label: #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\",\n      labelPosition: \"ABOVE\",\n      value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      saveInto: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n      required: true,\n      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\"\n      )\n    ),\n    rule!CMGT_UTIL_RichTextField(\n      label: #\"urn:appian:translation-string:v1:8af4d705-f521-4a97-a2b3-0eb63aff4217\",\n      labelPosition: \"ABOVE\",\n      value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.body],\n      maxSize: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE,\n      required: true,\n      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:8af4d705-f521-4a97-a2b3-0eb63aff4217\"\n      )\n    ),\n    #\"SYSTEM_SYSRULES_fileUploadField_v1\"(\n      label: #\"urn:appian:translation-string:v1:83b3fbbe-7b13-4700-97e6-d9c1c99d26a9\",\n      labelPosition: \"ABOVE\",\n      target: cons!CMGT_WFL_FLD_EMAIL_TEMPLATE_ATTACHMENTS,\n      value: index(\n        rule!CMGT_UTIL_Filter(\n          records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n          value: true\n        ),\n        recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n        null()\n      ),\n      saveInto: {\n        a!save(\n          ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          a!localVariables(\n            local!allExistingEmailAttachments: rule!CMGT_UTIL_Filter(\n              records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n              field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateAttachmentId,\n              value: null,\n              filterType: \"REJECT\"\n            ),\n            local!newEmailAttachments: #\"SYSTEM_SYSRULES_forEach\"(\n              items: difference(\n                tointeger(save!value),\n                tointeger(\n                  local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n                )\n              ),\n              expression: a!localVariables(\n                local!documentContent: property(\n                  property(\n                    #\"SYSTEM_SYSRULES_fileUploadField_v1\"(value:fv!item),\n                    \"contents\",\n                    null\n                  ),\n                  \"value\",\n                  null\n                ),\n                local!documentSize: property(\n                  local!documentContent,\n                  \"fileSizeDisplay\",\n                  null\n                ),\n                local!documentExtension: property(local!documentContent, \"extension\", null),\n                local!documentName: property(local!documentContent, \"name\", null),\n                recordType!CMGT_WFL_CFG_EmailTemplateAttachments(\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateId: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId],\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId: fv!item,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.fullName: local!documentName,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.sizeDisplay: local!documentSize,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension: local!documentExtension,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extensionIcon: rule!CMGT_Document_IconLogic(local!documentExtension[1]),\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive: true\n                )\n              )\n            ),\n            local!deletedAttachmentsDocIds: difference(\n              tointeger(\n                local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              ),\n              tointeger(save!value)\n            ),\n            local!deletedEmailAttachments: if(\n              rule!CMGT_UTIL_IsNotBlank(local!deletedAttachmentsDocIds),\n              #\"urn:appian:function:v1:a:update\"(\n                rule!CMGT_UTIL_Filter(\n                  records: local!allExistingEmailAttachments,\n                  field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n                  value: local!deletedAttachmentsDocIds\n                ),\n                recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n                false()\n              ),\n              null()\n            ),\n            local!unmodifiedAttachmentDocsIds: difference(\n              tointeger(\n                local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              ),\n              tointeger(\n                local!deletedEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              )\n            ),\n            local!unmodifiedEmailAttachments: rule!CMGT_UTIL_Filter(\n              records: local!allExistingEmailAttachments,\n              field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n              value: local!unmodifiedAttachmentDocsIds\n            ),\n            /*Flatten back the maps we modified*/\n            rule!CMGT_UTIL_RejectBlank(\n              a!flatten(\n                {\n                  local!deletedEmailAttachments,\n                  local!unmodifiedEmailAttachments,\n                  local!newEmailAttachments\n                }\n              )\n            )\n          )\n        )\n      },\n      validations: {\n        if(\n          sum(fv!files.size) > 10000000,\n          #\"urn:appian:translation-string:v1:a1087a9c-a240-49a1-9c4b-0bad6508d7e7\",\n          \"\"\n        ),\n        if(\n          contains(upper(fv!files.extension), \"EXE\"),\n          #\"urn:appian:translation-string:v1:5c813578-8c25-4776-ab40-324949c19c6b\"(\n            #\"urn:appian:translation-variable:v1:35c1a6e6-523c-4c14-8060-a99ae8ad0c95\": joinarray(\n              index(\n                fv!files,\n                \"name\",\n                wherecontains(\"EXE\", upper(fv!files.extension))\n              ),\n              \", \"\n            )\n          ),\n          \"\"\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000ed5b-d85c-8000-9d42-011c48011c48_3693313": {
      "name": "CMGT_Sub_EmailTemplateAttachments_SummaryDisplay",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!richTextItems: {\n    /*email template attachments*/\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: a!defaultValue(\n        ri!attachment[recordType!CMGT_EmailTemplateAttachments.fullName],\n        ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.fullName]\n      ),\n      link: if(\n        ri!isShowNoLink,\n        null,\n        #\"SYSTEM_SYSRULES_documentDownloadLink\"(\n          document: ri!attachment[recordType!CMGT_EmailTemplateAttachments.appianDocumentId]\n        ),\n\n      ),\n      color: if(\n        ri!doNoColoring,\n        null,\n        a!defaultValue(\n          ri!linkColor,\n          ri!brandingMap.AccentColor\n        )\n      ),\n      style: a!defaultValue(ri!nameStyle, \"PLAIN\"),\n      linkStyle: \"STANDALONE\",\n      size: a!defaultValue(ri!size, \"STANDARD\")\n    ),\n    /*type and size*/\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: {\n        a!defaultValue(\n          ri!attachment[recordType!CMGT_EmailTemplateAttachments.sizeDisplay],\n          ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.sizeDisplay]\n        )\n      },\n      color: if(\n        ri!doNoColoring,\n        null,\n        a!defaultValue(\n          ri!sizeAndExtensionColor,\n          ri!brandingMap.SecondaryTextColor\n        )\n      ),\n      size: a!defaultValue(ri!size, \"SMALL\")\n    ),\n    /*created on and by*/\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: {\n        #\"urn:appian:translation-string:v1:4d275ec1-1668-4931-8cb0-d98659946f9e\"(\n          #\"urn:appian:translation-variable:v1:d81439e1-2f47-4876-ba7e-558207d3f9e2\": rule!CMGT_UTIL_FormatDateTime(\n            dateTime: ri!attachment[recordType!CMGT_EmailTemplateAttachments.createdOn]\n          ),\n          #\"urn:appian:translation-variable:v1:0d790051-dbdb-4b06-a22d-793703034e08\": rule!CMGT_UTIL_DisplayUser(\n            user: ri!attachment[recordType!CMGT_EmailTemplateAttachments.createdBy],\n            userRecord: ri!attachment[recordType!CMGT_EmailTemplateAttachments.createdByUser]\n          )\n        )\n      },\n      color: if(\n        ri!doNoColoring,\n        null,\n        ri!brandingMap.SecondaryTextColor\n      ),\n      size: a!defaultValue(ri!size, \"SMALL\")\n    )\n  },\n  if(\n    ri!isSingleRichTextField,\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Document Details\"),\n      labelPosition: \"COLLAPSED\",\n      value: #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!richTextItems,\n        expression: { fv!item, char(10) }\n      )\n    ),\n    local!richTextItems\n  )\n)"
    },
    "_a-0000ec7e-4d3b-8000-9ce6-011c48011c48_2997534": {
      "name": "CMGT_Document_IconColorLogic",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: lower(ri!documentExtension),\n  /* red4*/\n  equals: \"pdf\",\n  then: ri!brandingMap.NegativeTextColor,\n  equals: \"img\",\n  equals: \"png\",\n  equals: \"mov\",\n  equals: \"jpg\",\n  /* red3*/\n  then: ri!brandingMap.NegativeAccentColor,\n  equals: \"xlsx\",\n  equals: \"xls\",\n  equals: \"xlsm\",\n  /* green4*/\n  then: ri!brandingMap.PositiveTextColor,\n  equals: \"ppt\",\n  equals: \"pptx\",\n  /* orange3*/\n  then: ri!brandingMap.TaskStatusInProgressAccentColor,\n  equals: \"doc\",\n  equals: \"docx\",\n  equals: \"txt\",\n  equals: \"properties\",\n  /* blue3*/\n  then: ri!brandingMap.InfoAccentColor,\n  default: ri!brandingMap.SecondaryTextColor\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180481": {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(a!flatten(ri!array)),\n  reject(a!isNullOrEmpty(_), a!flatten(ri!array))\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612621": {
      "name": "CMGT_EmailTemplate_Preview",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_paneLayout\"(\n  panes: {\n    #\"SYSTEM_SYSRULES_pane\"(\n      backgroundColor: ri!brandingMap.TertiaryBackgroundColor,\n      accessibilityText: #\"urn:appian:translation-string:v1:25a115a1-c8b3-436c-981c-0e111a5a1275\",\n      padding: \"MORE\",\n      contents: {\n        #\"SYSTEM_SYSRULES_columnsLayout\"(\n          columns: {\n            #\"SYSTEM_SYSRULES_columnLayout\"(width: \"2X\"),\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              width: \"WIDE\",\n              contents: {\n                #\"SYSTEM_SYSRULES_cardLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_cardLayout\"(\n                      showBorder: false,\n                      padding: \"NONE\",\n                      marginBelow: \"NONE\",\n                      contents: {\n                        #\"SYSTEM_SYSRULES_headingField\"(\n                        text: #\"urn:appian:translation-string:v1:fda6abad-ccd8-4f13-8a77-1ae7e871680c\"(\n                        #\"urn:appian:translation-variable:v1:7d7177ba-ec92-4d05-8b0d-665eba6cd2f9\": ri!emailTemplateName\n                        ),\n                        size: \"MEDIUM\",\n                        headingTag: \"H4\",\n                        marginBelow: \"LESS\",\n                        marginAbove: \"STANDARD\",\n                        fontWeight: \"BOLD\",\n                        color: ri!brandingMap.StandardTextColor\n                        ),\n\n                        #\"SYSTEM_SYSRULES_horizontalLine\"(),\n                        /* Subject */\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Preview Email Template\"),\n                          labelPosition: \"COLLAPSED\",\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: {\n                                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                  icon: \"envelope\",\n                                  color: ri!BrandingMap.SecondaryTextColor,\n                                  caption: #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\"\n                                ),\n                                char(32),\n                                ri!subject\n                              },\n                              style: \"STRONG\"\n                            )\n                          }\n                        ),\n                        /* Body */\n                        rule!CMGT_UTIL_RichTextField(value: ri!body, readOnly: true),\n                        /* Attachments */\n                        rule!CMGT_UTIL_CardGroupHandler(\n                          maxPerRow: 3,\n                          cardLayouts: {\n                            #\"SYSTEM_SYSRULES_forEach\"(\n                              items: a!defaultValue(ri!attachments, ri!cfgAttachments),\n                              expression: rule!CMGT_Sub_EmailTemplateAttachmentsCard(\n                                brandingMap: ri!brandingMap,\n                                linkColor: ri!brandingMap.StandardTextColor,\n                                attachment: if(\n                                  rule!CMGT_UTIL_IsBlank(ri!attachments),\n                                  null,\n                                  fv!item\n                                ),\n                                cfgAttachment: if(\n                                  rule!CMGT_UTIL_IsBlank(ri!cfgAttachments),\n                                  null,\n                                  fv!item\n                                ),\n                                showCreatedOn: false\n                              )\n                            )\n                          }\n                        ),\n                        #\"SYSTEM_SYSRULES_horizontalLine\"(),\n                        #\"SYSTEM_SYSRULES_ButtonLayout\"(\n                          primaryButtons: {\n                            #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                              label: #\"urn:appian:translation-string:v1:5fff53df-8d97-4610-a492-2c37db32f302\",\n                              saveInto: a!save(ri!isPreview, false()),\n                              style: \"SOLID\",\n                              loadingIndicator: true\n                            )\n                          }\n                        )\n                      }\n                    )\n                  },\n                  style: ri!brandingMap.CardBackgroundColor,\n                  shape: ri!brandingMap.CardShape,\n                  marginBelow: \"NONE\",\n                  showBorder: false,\n                  showShadow: ri!brandingMap.CardShowShadow\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_columnLayout\"(width: \"2X\")\n          }\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612963": {
      "name": "CMGT_WFL_SUB_CreateEmailTemplate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!emailTemplate: cast(\n    recordType!CMGT_WFL_CFG_EmailTemplate,\n    null()\n  ),\n  #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n    labelColor: \"STANDARD\",\n    labelSize: \"LARGE\",\n    contents: {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_stampField\"(\n                  icon: \"envelope-open-text\",\n                  contentColor: ri!brandingMap.StandardStampContentColor,\n                  backgroundColor: ri!brandingMap.StandardStampBackgroundColor,\n                  size: \"TINY\",\n                  shape: ri!brandingMap.StandardStampShape\n                ),\n                width: \"MINIMIZE\"\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_headingField\"(\n                  text: #\"urn:appian:translation-string:v1:46b8e7eb-9250-4bc1-87ba-785b0eb505a2\",\n                  headingTag: \"H1\",\n                  fontWeight: \"SEMI_BOLD\",\n                  size: ri!brandingMap.H1Size,\n                  marginAbove: \"STANDARD\"\n                )\n              )\n            },\n            alignVertical: \"MIDDLE\",\n            spacing: \"STANDARD\",\n            marginAbove: \"NONE\",\n            marginBelow: \"NONE\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n              color: ri!brandingMap.secondaryTextColor,\n              size: \"SMALL\"\n            )\n          )\n        },\n        showBorder: false(),\n        padding: \"NONE\",\n        marginBelow: \"STANDARD\"\n      ),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      rule!CMGT_WFL_EmailTemplate_Details(emailTemplate: local!emailTemplate),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:8109f456-b575-47d2-8f0f-097db1743e6b\",\n          /* Setting uuids for the new generated templates */\n          value: #\"urn:appian:function:v1:a:update\"(\n            local!emailTemplate,\n            recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n            rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n          ),\n          saveInto: {\n            a!save(\n              ri!emailTemplates,\n              rule!CMGT_UTIL_RejectBlank(\n                array: append(ri!emailTemplates, save!value)\n              )\n            ),\n            ri!submitSaveInto,\n            a!save(\n              local!emailTemplate,\n              cast(\n                recordType!CMGT_WFL_CFG_EmailTemplate,\n                null()\n              )\n            )\n          },\n          style: \"SOLID\",\n          validate: true\n        ),\n        secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:edd4df67-d878-46d6-ab67-732a3700a588\",\n          saveInto: {\n            a!save(\n              ri!documentsToDelete,\n              append(\n                ri!documentsToDelete,\n                local!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId]\n              )\n            ),\n            ri!cancelSaveInto,\n            a!save(\n              local!emailTemplate,\n              cast(\n                recordType!CMGT_WFL_CFG_EmailTemplate,\n                null()\n              )\n            )\n          },\n          style: \"OUTLINE\",\n          validate: false\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ea1d-36f5-8000-9bef-011c48011c48_538451": {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "sail_code": "/*Reference:\nhttps://community.appian.com/w/the-appian-playbook/846/generating-uuids-guids*/\nfn!lower(\n  concat(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "af326a29-a1c8-4399-a28d-996f85819d9e": {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    apply(\n      rule!CMGT_UTIL_Filter_CreateFieldValuePair(\n        field: _,\n        value: ri!value,\n        allFields: a!flatten(ri!field)\n      ),\n      a!flatten(ri!field)\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!CMGT_UTIL_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "bd8f3e49-406c-4eab-a3a4-ce119dfbb5ce": {
      "name": "CMGT_UTIL_RichTextField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*\n  This should never be above 4000 characters as it will go over the amount allowed in synced records\n  If using the RTE in other places for customization, the field length should be 4000 characters to allow for additional HTML to be added.\n  The RTE calculates the max length allowed on the front end for the end-user, but will not go over that amount on the back-end\n  */\n  local!maxSize: a!defaultValue(\n    value: ri!maxSize,\n    default: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE\n  ),\n  if(\n    cons!CMGT_BOL_AUTOMATION_TESTING_LABEL_SWITCH,\n    #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: ri!label,\n      labelPosition: if(rule!CMGT_UTIL_IsBlank(ri!label),\"COLLAPSED\",ri!labelPosition),\n      instructions: ri!instructions,\n      helpTooltip: ri!helpToolTip,\n      placeholder: ri!placeholder,\n      value: rule!CMGT_UTIL_StripHtmlTags(value: ri!value, isFormatted: true),\n      saveInto: a!save(\n        ri!value,\n        \"<p>\" & substitute(save!value, char(10), \"<br>\") & \"</p>\"\n      ),\n      refreshAfter: ri!refreshAfter,\n      characterLimit: local!maxSize,\n      height: ri!height,\n      showWhen: ri!showWhen,\n      required: ri!required,\n      requiredMessage: ri!requiredMessage,\n      readOnly: ri!readOnly,\n      disabled: ri!disabled\n    ),\n    #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n      label: ri!label,\n      labelPosition: if(rule!CMGT_UTIL_IsBlank(ri!label),\"COLLAPSED\",ri!labelPosition),\n      instructions: ri!instructions,\n      helpTooltip: ri!helpToolTip,\n      placeholder: ri!placeholder,\n      value: ri!value,\n      saveInto: {\n        ri!value,\n        ri!additionalSaves\n      },\n      sizeLimit: local!maxSize,\n      height: a!defaultValue(ri!height, \"SHORT_PLUS\"),\n      showWhen: ri!showWhen,\n      required: ri!required,\n      requiredMessage: ri!requiredMessage,\n      readOnly: ri!readOnly,\n      disabled: ri!disabled,\n      validations: ri!validations\n    )\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568343": {
      "name": "CMGT_WFL_TaskResponseOption_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskResponseOptions,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskResponseOption.sortOrder,\n        value: fv!index\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskResponseOption.isActive,\n        value: true\n      )\n    }\n  )\n)"
    }
  }
}