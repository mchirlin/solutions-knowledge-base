{
  "uuid": "_a-0000ed16-a792-8000-9c64-011c48011c48_267405",
  "name": "AIA_RULE_DynamicComponents",
  "type": "Interface",
  "description": "Interface that displays one or multiple components based on the type and context passed in.",
  "sail_code": "a!localVariables(\n  /*The parameters of the first component*/\n  local!parameters: index(\n    ri!components,\n    1,\n    null\n  ),\n  local!dynamicField: a!defaultValue(\n    value: local!parameters.dynamicFieldId,\n    default: \"fieldType\"\n  ),\n  a!match(\n    value: lower(\n      local!parameters.type\n    ),\n    /*Make recursive if there are multiple components*/\n    whenTrue: count(\n      ri!components\n    ) > 1,\n    then: #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!components,\n      expression: rule!AIA_RULE_DynamicComponents(\n        components: fv!item,\n        data: ri!data\n      )\n    ),\n    /*Integer Field*/\n    equals: \"integer\",\n    then: #\"SYSTEM_SYSRULES_integerField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      readOnly: local!parameters.readOnly,\n      disabled: local!parameters.disabled,\n      placeholder: local!parameters.placeholder,\n      masked: local!parameters.masked,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Decimal Field*/\n    equals: \"decimal\",\n    then: #\"SYSTEM_SYSRULES_floatingPointField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      readOnly: local!parameters.readOnly,\n      disabled: local!parameters.disabled,\n      placeholder: local!parameters.placeholder,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Boolean*/\n    equals: \"boolean\",\n    then: #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n      label: local!parameters.label,\n      labelPosition: local!parameters.labelPosition,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      choiceStyle: local!parameters.choiceStyle,\n      choiceLabels: {\n        \"True\",\n        \"False\"\n      },\n      choiceValues: {\n        true,\n        false\n      },\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      ),\n      choiceLayout: \"COMPACT\"\n    ),\n    /*Text Field*/\n    equals: \"text\",\n    then: #\"SYSTEM_SYSRULES_textField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      readOnly: local!parameters.readOnly,\n      disabled: local!parameters.disabled,\n      placeholder: local!parameters.placeholder,\n      characterLimit: local!parameters.characterLimit,\n      masked: local!parameters.masked,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Paragraph Field*/\n    equals: \"paragraph\",\n    then: #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      readOnly: local!parameters.readOnly,\n      height: local!parameters.height,\n      disabled: local!parameters.disabled,\n      placeholder: local!parameters.placeholder,\n      characterLimit: local!parameters.characterLimit,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Date Field*/\n    equals: \"date\",\n    then: #\"SYSTEM_SYSRULES_dateField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      readOnly: local!parameters.readOnly,\n      disabled: local!parameters.disabled,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Datetime Field*/\n    equals: \"datetime\",\n    then: #\"SYSTEM_SYSRULES_dateTimeField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      readOnly: local!parameters.readOnly,\n      disabled: local!parameters.disabled,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Dropdown Field*/\n    equals: \"dropdown\",\n    then: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n      label: local!parameters.label,\n      labelPosition: local!parameters.labelPosition,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      placeholder: local!parameters.placeholder,\n      choiceLabels: local!parameters.choiceLabels,\n      choiceValues: local!parameters.choiceValues,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Radio Button Field*/\n    equals: \"radio\",\n    then: #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n      label: local!parameters.label,\n      labelPosition: local!parameters.labelPosition,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      choiceLabels: local!parameters.choiceLabels,\n      choiceValues: local!parameters.choiceValues,\n      choiceLayout: local!parameters.choiceLayout,\n      choiceStyle: local!parameters.choiceStyle,\n      spacing: local!parameters.spacing,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Checkbox Field*/\n    equals: \"checkbox\",\n    then: #\"SYSTEM_SYSRULES_checkboxField_v1\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      choiceLabels: local!parameters.choiceLabels,\n      choiceValues: local!parameters.choiceValues,\n      choiceLayout: local!parameters.choiceLayout,\n      choiceStyle: local!parameters.choiceStyle,\n      spacing: local!parameters.spacing,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Styled Text Editor Field*/\n    equals: \"styledtexteditor\",\n    then: #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      placeholder: local!parameters.placeholder,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      height: local!parameters.height,\n      sizeLimit: local!parameters.sizeLimit,\n      allowedFormats: local!parameters.allowedFormats,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Columns Layout*/\n    equals: \"columns\",\n    then: #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!parameters.columns,\n        expression: #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: rule!AIA_RULE_DynamicComponents(\n            components: fv!item.contents,\n            data: ri!data\n          ),\n          width: fv!item.width,\n          showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n            parameters: fv!item.showWhen,\n            data: ri!data\n          )\n        )\n      ),\n      alignVertical: local!parameters.alignVertical,\n      spacing: local!parameters.spacing,\n      showDividers: local!parameters.showDividers,\n      marginAbove: local!parameters.marginAbove,\n      marginBelow: local!parameters.marginBelow,\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Dynamic Field - based on the value from another field (dynamicFieldId)*/\n    equals: \"dynamic\",\n    then: if(\n      /*Error handling - Infinite loop*/\n      ri!data[local!dynamicField] = \"dynamic\",\n      {},\n      rule!AIA_RULE_DynamicComponents(\n        components: #\"urn:appian:function:v1:a:update\"(\n          data: local!parameters,\n          index: \"type\",\n          value: ri!data[local!dynamicField]\n        ),\n        data: ri!data\n      )\n    ),\n    /*Dynamic Operator Dropdown Field - based on the value from another field (dynamicFieldId)*/\n    equals: \"operatordropdown\",\n    then: rule!AIA_RULE_DynamicOperatorDropdown(\n      dataTypeId: a!defaultValue(\n        value: local!parameters.dataTypeId,\n        default: ri!data.dataTypeId,\n        default: ri!data[local!dynamicField]\n      ),\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      disableNullCheckOperators: local!parameters.disableNullCheckOperators,\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: a!save(\n        ri!data[local!parameters.id],\n        save!value\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    equals: \"fieldtype\",\n    then: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      /*label: \"Type\",*/\n      align: \"RIGHT\",\n      value: a!localVariables(\n        local!value: a!defaultValue(\n          value: ri!data[local!parameters.id],\n          default: local!parameters.value\n        ),\n        reject(\n          fn!isnull,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            rule!AIA_RULE_ENUM_InputTypes(),\n            if(\n              contains(touniformstring(local!parameters.hideTypes), tostring(fv!item.value)),\n              null,\n              {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: fv!item.icon,\n                  caption: fv!item.label,\n                  altText: fv!item.label,\n                  color: if(\n                    local!value = fv!item.value,\n                    \"ACCENT\",\n                    \"SECONDARY\"\n                  ),\n                  link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                    showWhen: local!value <> fv!item.value,\n                    value: fv!item.value,\n                    saveInto: {\n                      a!save(\n                        ri!data[local!parameters.id],\n                        save!value\n                      ),\n                      a!save(\n                        ri!data,\n                        rule!AIA_RULE_NullifyFields(\n                          fields: local!parameters.nullifyFieldIdsOnChange,\n                          data: ri!data\n                        )\n                      )\n                    }\n                  ),\n                  linkStyle: \"STANDALONE\"\n                ),\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: char(10),\n                  showWhen: not(fv!isLast)\n                )\n              }\n            )\n          )\n        )\n      ),\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    /*Dynamic Field - based on the value from another field (dynamicFieldId)*/\n    equals: \"dynamicdatatype\",\n    /* TODO - here */\n    then: a!localVariables(\n      local!dataTypeId: a!defaultValue(\n        value: local!parameters.dataTypeId,\n        default: ri!data.dataTypeId,\n        default: tointeger('type!{http://www.appian.com/ae/types/2009}Text')\n      ),\n      local!singleDataTypeId: if(\n        rule!SHRD_IsList(\n          value: local!dataTypeId\n        ),\n        index(local!dataTypeId, 1, null),\n        local!dataTypeId\n      ),\n      if(\n        /*Error handling - Empty datatypeid*/\n        a!isNullOrEmpty(local!singleDataTypeId),\n        {},\n        rule!AIA_RULE_DynamicComponents(\n          components: a!localVariables(\n            local!datatype: displayvalue(\n              local!singleDataTypeId,\n              rule!AIA_RULE_ENUM_DataTypes().id,\n              rule!AIA_RULE_ENUM_DataTypes().key,\n              null\n            ),\n            #\"urn:appian:function:v1:a:update\"(\n              data: local!parameters,\n              index: {\n                \"type\",\n                \"label\"\n              },\n              value: {\n                local!datatype,\n                local!parameters.label & \" (\" & local!datatype &\")\"\n              }\n            )\n          ),\n          data: ri!data\n        )\n      )\n    ),\n    /*Dynamic Model Version Dropdown Field - Returns a modelVersion.fieldId */\n    equals: \"modelversionfielddropdown\",\n    then: rule!AIA_RULE_ModelVersionFieldDropdown(\n      modelVersionId: a!defaultValue(\n        value: local!parameters.modelVersionId,\n        default: ri!data.modelVersionId,\n      ),\n      label: local!parameters.label,\n      instructions: local!parameters.instructions,\n      helpTooltip: local!parameters.helpTooltip,\n      required: local!parameters.required,\n      disabled: local!parameters.disabled,\n      requiredMessage: local!parameters.requiredMessage,\n      accessibilityText: local!parameters.accessibilityText,\n      searchDisplay: local!parameters.searchDisplay,\n      placeholder: local!parameters.placeholder,\n      returnDataTypeId: local!parameters.returnDataTypeId,\n      dataTypeId: if(\n        local!parameters.returnDataTypeId,\n        ri!data.dataTypeId,\n        a!defaultValue(\n          value: local!parameters.dataTypeId,\n          default: ri!data.dataTypeId\n        )\n      ),\n      value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      saveInto: {\n        a!save(\n          ri!data[local!parameters.id],\n          save!value\n        ),\n        a!save(\n          ri!data,\n          rule!AIA_RULE_NullifyFields(\n            fields: local!parameters.nullifyFieldIdsOnChange,\n            data: ri!data\n          )\n        )\n      },\n      configureFieldColumns: a!isNotNullOrEmpty(local!parameters.docFieldColumnId),\n      columnValue: a!defaultValue(\n        value: ri!data[local!parameters.docFieldColumnId],\n        default: local!parameters.columnValue\n      ),\n      saveIntoColumn: {\n        a!save(\n          ri!data[local!parameters.docFieldColumnId],\n          save!value\n        ),\n        a!save(\n          ri!data,\n          rule!AIA_RULE_NullifyFields(\n            fields: local!parameters.nullifyFieldIdsOnChange,\n            data: ri!data\n          )\n        )\n      },\n      showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n        parameters: local!parameters.showWhen,\n        data: ri!data\n      )\n    ),\n    equals: \"rulepicker\",\n    then: a!localVariables(\n      local!value: a!defaultValue(\n        value: ri!data[local!parameters.id],\n        default: local!parameters.value\n      ),\n      rule!SHRD_RulePicker(\n        label: #\"urn:appian:translation-string:v1:af1495f1-ddf0-446b-a3f4-5bacc9101672\",\n        labelPosition: \"ABOVE\",\n        returnType: \"NAME\",\n        placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\",\n        required: local!parameters.required,\n        value: local!value,\n        saves: {\n          a!save(\n            ri!data[local!parameters.id],\n            index(save!value, 1, null)\n          ),\n          a!save(\n            ri!data,\n            rule!AIA_RULE_NullifyFields(\n              fields: local!parameters.nullifyFieldIdsOnChange,\n              data: ri!data\n            )\n          )\n        },\n        showWhen: rule!AIA_RULE_DynamicBooleanOperation(\n          parameters: local!parameters.showWhen,\n          data: ri!data\n        ),\n        ruleInputs: {\n          {name: \"parameters\"}\n        },\n        ruleOutputRequired: false,\n        instructions: if(\n          a!isNotNullOrEmpty(local!value),\n          #\"urn:appian:translation-string:v1:a953c7bf-2ead-485b-9a6f-bd717cd57c28\"(#\"urn:appian:translation-variable:v1:f420a13a-4709-4cd7-a6c2-23437df1b123\": tostring(rulebyname(local!value).description)),\n          null\n        )\n      )\n    ),\n    default: rule!AIA_RULE_CustomDynamicComponent(\n      parameters: local!parameters,\n      data: ri!data\n    )\n  )\n)",
  "calls": [
    {
      "name": "AIA_RULE_DynamicBooleanOperation",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AIA_RULE_DynamicOperatorDropdown",
      "type": "Interface",
      "dep_type": "CALLS"
    },
    {
      "name": "AIA_RULE_ENUM_InputTypes",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AIA_RULE_NullifyFields",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "SHRD_IsList",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AIA_RULE_ENUM_DataTypes",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AIA_RULE_ModelVersionFieldDropdown",
      "type": "Interface",
      "dep_type": "CALLS"
    },
    {
      "name": "SHRD_RulePicker",
      "type": "Interface",
      "dep_type": "CALLS"
    },
    {
      "name": "AIA_RULE_CustomDynamicComponent",
      "type": "Interface",
      "dep_type": "CALLS"
    },
    {
      "name": "Rule",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Select expression rule",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Description: {text}",
      "type": "Translation String",
      "dep_type": "CALLS"
    }
  ],
  "called_by": [
    {
      "name": "AIA_RULE_RuleDynamicComponents",
      "type": "Interface",
      "dep_type": "CALLS"
    }
  ]
}