{
  "uuid": "_a-0000e5da-a251-8000-9bbe-011c48011c48_1024497",
  "name": "AS_GSS_UT_defaultFilterForEvaluationsInHomeTab",
  "type": "Expression Rule",
  "description": "Filter rule for evaluations in home tab based on logged in user",
  "sail_code": "/*Note: This rule cannot have assertion*/\na!localVariables(\n  local!loggedInUser: loggedInUser(),\n  local!criterias: rule!AS_GSS_QE_getEvaluationCriteriaWithSelection(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY,\n    logicalExpression: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n      operator: \"OR\",\n      filters: {\n        #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: \"criteriaChair.username\",\n          operator: \"=\",\n          value: local!loggedInUser\n        ),\n        #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: \"criteriaId\",\n          operator: \"in\",\n          value: ri!criteriaAssignmentCriteriaIds\n        )\n      }\n    ),\n    selectionColumns: \"evaluation.evaluationId\"\n  ),\n  #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n    operator: \"OR\",\n    logicalExpressions: {\n      /* Get evaluations user created */\n      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n        operator: \"AND\",\n        filters: {\n          #\"SYSTEM_SYSRULES_queryFilter\"(\n            field: \"isActive\",\n            operator: \"=\",\n            value: true\n          ),\n          #\"SYSTEM_SYSRULES_queryFilter\"(\n            field: \"createdBy\",\n            operator: \"=\",\n            value: touser(local!loggedInUser)\n          ),\n          #\"SYSTEM_SYSRULES_queryFilter\"(\n            field: \"evaluationStatus.refDataId\",\n            operator: \"in\",\n            value: {\n              cons!AS_GSS_REF_ID_EVALUATION_STATUS_INPROGRESS,\n              cons!AS_GSS_REF_ID_EVALUATION_STATUS_SETTING_UP\n            }\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n        operator: \"AND\",\n        filters: {\n          #\"SYSTEM_SYSRULES_queryFilter\"(\n            field: \"isActive\",\n            operator: \"=\",\n            value: true\n          ),\n          #\"SYSTEM_SYSRULES_queryFilter\"(\n            field: \"evaluationStatus.refDataId\",\n            operator: \"=\",\n            value: cons!AS_GSS_REF_ID_EVALUATION_STATUS_INPROGRESS\n          )\n        },\n        logicalexpressions: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n          operator: \"OR\",\n          /* Get evaluations user is assigned to as CO/CS/EC */\n          logicalExpressions: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"OR\",\n            filters: {\n              #\"SYSTEM_SYSRULES_queryFilter\"(\n                field: \"contractingOfficer.username\",\n                operator: \"=\",\n                value: local!loggedInUser\n              ),\n              #\"SYSTEM_SYSRULES_queryFilter\"(\n                field: \"contractingSpecialist.username\",\n                operator: \"=\",\n                value: local!loggedInUser\n              ),\n              #\"SYSTEM_SYSRULES_queryFilter\"(\n                field: \"evaluationChief.username\",\n                operator: \"=\",\n                value: local!loggedInUser\n              )\n            }\n          ),\n          filters: {\n            /* Get evaluations user is assigned to as FC/evaluator */\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: \"evaluationId\",\n              operator: \"in\",\n              value: local!criterias.evaluation.evaluationId\n            ),\n            /* Get evaluations that the user started consensus for */\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: \"evaluationId\",\n              operator: \"in\",\n              value: tointeger(ri!consensusEvaluationIds)\n            )\n          }\n        )\n      )\n    }\n  )\n)",
  "calls": [
    {
      "name": "AS_GSS_QE_getEvaluationCriteriaWithSelection",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_REF_ID_EVALUATION_STATUS_INPROGRESS",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_REF_ID_EVALUATION_STATUS_SETTING_UP",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    }
  ],
  "called_by": []
}