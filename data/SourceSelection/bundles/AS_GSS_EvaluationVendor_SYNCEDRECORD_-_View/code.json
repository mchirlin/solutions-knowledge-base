{
  "_metadata": {
    "bundle_id": "AS_GSS_EvaluationVendor_SYNCEDRECORD_-_View"
  },
  "objects": {
    "_a-0000e6a4-3c85-8000-9ba5-011c48011c48_45984": {
      "name": "AS_CO_UT_indexWhere",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(value: ri!initialArray),\n  {},\n  if(\n    ri!isRemove,\n    remove(\n      ri!finalArray,\n      wherecontains(\n        cast(typeof({ \"\" }), ri!value),\n        cast(typeof({ \"\" }), ri!initialArray)\n      )\n    ),\n    index(\n      ri!finalArray,\n      wherecontains(\n        cast(typeof({ \"\" }), ri!value),\n        cast(typeof({ \"\" }), ri!initialArray)\n      ),\n      {}\n    )\n  )\n)"
    },
    "_a-0000eed7-628f-8000-9e56-011c48011c48_17633647": {
      "name": "AS_GSS_CRD_consensusRatingPerFactor",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  shape: \"SEMI_ROUNDED\",\n  contents: {\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: concat(\n            ri!item.factorId,\n            \" \",\n            cons!AS_GSS_CO_TXT_SPLIT_TAG,\n            \" \",\n            ri!item.factorName,\n            \" \",\n            cons!AS_GSS_CO_NULL_REPLACEABLE_TEXT,\n            \" \",\n            a!defaultValue(\n              value: ri!item.consensusRating,\n              default: \"No Ratings Provided\"\n            )\n          ),\n          style: \"STRONG\"\n        )\n      },\n      marginBelow: \"NONE\"\n    ),\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: ri!item.ratingType,\n          size: \"SMALL\",\n          style: \"PLAIN\"\n        )\n      },\n      marginBelow: \"STANDARD\"\n    ),\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n        text: \"Comments\",\n        color: \"SECONDARY\",\n        size: \"SMALL\",\n        style: \"PLAIN\"\n      ),\n      marginBelow: \"NONE\"\n    ),\n    rule!AS_GSS_CPS_richTextWithShowMoreLess(\n      showHyphen: true,\n      text: ri!item.finalComments,\n      shortenToLen: cons!AS_GSS_ENUM_TEXT_LIMIT_FOR_CONSENSUS_REPORT_SUMMARY,\n      i18nData: ri!bundle,\n      marginBelow: \"LESS\"\n    )\n  },\n  style: rule!AS_GSS_BrandingValueByKey(\n    brandingKey: \"DefaultBackground\",\n    useSuiteBranding: true\n  ),\n  marginBelow: \"STANDARD\",\n  showBorder: true\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782": {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  not(rule!AS_CO_UT_isBlank(ri!input))\n)"
    },
    "_a-0000eed7-628f-8000-9e56-011c48011c48_17651628": {
      "name": "AS_GSS_SEC_consensusRatingBreakdownEmptyState",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(width: \"3X\"),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              images: #\"SYSTEM_SYSRULES_documentImage\"(\n                document: cons!AS_GSS_CONSENSUS_RATING_BREAKDOWN_EMPTY_STATE_IMAGE\n              ),\n              align: \"CENTER\",\n              size: \"GALLERY\",\n              marginAbove: \"EVEN_MORE\"\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: \"No consensus ratings provided for this vendor\"\n              ),\n              align: \"CENTER\"\n            )\n          },\n          showBorder: false,\n          style: rule!AS_GSS_BrandingValueByKey(\n            brandingKey: \"WhiteOne\",\n            useSuiteBranding: true\n          ),\n          height: \"MEDIUM\",\n          shape: \"SEMI_ROUNDED\"\n        )\n      },\n      width: \"10X\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(width: \"3X\")\n  },\n  marginAbove: \"MORE\"\n)"
    },
    "_a-0000ec62-ac34-8000-9d9a-011c48011c48_13134000": {
      "name": "AS_GSS_UT_queryRecordByIdentifier",
      "type": "Expression Rule",
      "sail_code": "/*\n\nPLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE\n\nPlease DO NOT auto-format this rule\n\n*/\na!localVariables(\n  /*Determine the castResultToType*/\n  local!castResultToType: a!defaultValue(ri!castToCdtType, ri!recordType),\n  /*Execute the query*/\n  local!queryResult: a!refreshVariable(\n    value: if(\n      ri!executeWhen = false,\n      null(ri!recordType),\n      #\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n        recordType: ri!recordType,\n        identifier: ri!identifier,\n        fields: {\n          ri!fields,\n          ri!relatedRecordData.relationship\n        },\n        relatedRecordData: ri!relatedRecordData\n      )\n    ),\n    refreshOnVarChange: ri!triggerRefresh,\n    refreshAfter: { \"RECORD_ACTION\" }\n  ),\n  rule!AS_CO_UT_cast(\n    type: local!castResultToType,\n    value: local!queryResult\n  )\n)/*\n\nDOCUMENTATION\n\nThis rule is designed to minimize the overhead with querying data and then casting the result\n\n\nRequired Inputs:\n\n1. recordType\n- This is a recordtype! input of the data type to be queried against\n\n2. identifier\n- The primary key of the record type which needs to be queried\n\nOptional Inputs:\n\n3. executeWhen\n- The query will not execute if this is false, the query will execute if this is true or null\n-- This is meant to operate in a similar manner to the showWhen parameter of components\n- Use this to skip execution of a query without needing to wrap if() statements around the rule\n-- Examples of this would be to skip querying if your filter value is a null ID\n- If the query does not execute, this will return a null value whose type is based on the returnType input\n\n4. triggerRefresh\n- By default, the query will always re-execute whenever any inputs change\n- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change (e.g. after a record action)\n\n5. castToCdtType\n- Any cdt type to the cast the result set. \n\n6. fields\n- The record fields that need to be queried\n\n7. relatedRecordData\n- the relatedRecordData in which the filters and limit can be specified for each relationship\n\n*/"
    },
    "_a-0000ea13-fcbd-8000-9c86-011c48011c48_6430545": {
      "name": "AS_GSS_QR_getCriteria",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS_GSS_Criteria_SYNCEDRECORD,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaId,\n      operator: \"in\",\n      value: ri!criteriaId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Criteria_SYNCEDRECORD.evaluationId,\n      operator: \"in\",\n      value: ri!evaluationId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Criteria_SYNCEDRECORD.parentCriteriaId,\n      operator: a!match(\n        value: ri!isParent,\n        equals: true,\n        then: \"is null\",\n        equals: false,\n        then: \"not null\",\n        default: \"in\"\n      ),\n      value: ri!parentCriteriaId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Criteria_SYNCEDRECORD.isActive,\n      operator: \"in\",\n      value: a!defaultValue(\n        value: ri!isActive,\n        default: {true}\n      )\n    ),\n    ri!additionalfilters\n  },\n  relatedRecordData: ri!relatedRecordData,\n  fields: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      ri!fields,\n      if(\n        ri!includeRelatedRecords,\n        {\n          recordType!AS_GSS_Criteria_SYNCEDRECORD.CriteriaAssignment,\n          recordType!AS_GSS_Criteria_SYNCEDRECORD.EvaluatorTeam,\n          recordType!AS_GSS_Criteria_SYNCEDRECORD.Rating,\n          recordType!AS_GSS_Criteria_SYNCEDRECORD.evaluation,\n          recordType!AS_GSS_Criteria_SYNCEDRECORD.SubCriteria\n        },\n        {}\n      )\n    }\n  ),\n  sort: ri!sortInfo,\n  pagingInfo: ri!pagingInfo,\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpression: ri!logicalExpression,\n  aggregationFields: ri!aggregationFields\n)"
    },
    "_a-0000e643-f7f1-8000-9bca-011c48011c48_1319026": {
      "name": "AS_GSS_CO_UT_loadBundleFromFolder",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!lang: \"en_US\",\n  /* below is deprecated for now, uncomment to support multi-language display */\n  /*if(*/\n  /*isnull(ri!langISOCode),*/\n  /*userlocale(loggedInUser()),*/\n  /*ri!langISOCode*/\n  /*),*/\n  local!bundleName: /*rule!AS_GCM_determineValueBySolutionFlavor(\n    options: cons!AS_GCM_TXT_VALID_SOLUTION_FLAVORS\n  )*/\"AS.GSS.General\",\n  /*local!bundleName*/\n  local!output: loadbundlepropertiesfile(\n    cons!AS_GSS_FLD_PROPERTIES_FILES,\n    local!lang,\n    local!bundleName\n  )[local!bundleName],\n  local!output\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73980": {
      "name": "AS_CO_UT_replaceNull",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(ri!nullableValue),\n  ri!replacementValue,\n  ri!nullableValue\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75618": {
      "name": "AS_CO_UT_left",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  if(\n    rule!AS_CO_UT_isBlank(ri!text),\n    \"\",\n    left(\n      ri!text,\n      rule!AS_CO_UT_replaceNull(nullableValue: ri!numChars, replacementValue: len(ri!text))\n    )\n  )\n)"
    },
    "_a-0000ed52-a319-8000-9df0-011c48011c48_15017709": {
      "name": "AS_GSS_QR_getEvaluationVendorByIdentifier",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_checkIsNullOrEmpty(value: ri!vendorId),\n  recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD(),\n  rule!AS_GSS_UT_queryRecordByIdentifier(\n    recordType: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD,\n    identifier: ri!vendorId,\n    executeWhen: ri!executeWhen,\n    triggerRefresh: ri!triggerRefresh,\n    fields: ri!fields,\n    relatedRecordData: ri!relatedRecordData\n  )\n)"
    },
    "_a-0000e6cd-618a-8000-9bd9-011c48011c48_1688557": {
      "name": "AS_CO_UT_checkIsNullOrEmpty",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    isnull(\n      ri!value\n    ),\n    trim(\n      ri!value\n    ) = \"\"\n  ),\n  true(),\n  if(\n    length(\n      ri!value\n    ) = 0,\n    true(),\n    false()\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76367": {
      "name": "AS_CO_UT_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AS_CO_UT_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536": {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    },
    "_a-0000e3e6-fb42-8000-9ba5-011c48011c48_157603": {
      "name": "AS_CO_UT_cast",
      "type": "Expression Rule",
      "sail_code": "with(  \n  local!typeNumber: rule!AS_CO_UT_returnTypeNumber(\n    type: ri!type,\n    typeOf: ri!typeOf\n  ),\n\n  /* If the object is empty, use null or {} depending on if it is array type or not */\n  local!objectToCast: if(\n    rule!AS_CO_UT_isNotBlank(ri!value),\n    ri!value,\n    rule!AS_CO_UT_checkIfSingleType(\n      type: ri!type,\n      typeOf: ri!typeOf\n    ),\n    null,\n    {}\n  ),\n\n  cast(\n    local!typeNumber,\n    local!objectToCast\n  )\n  \n)"
    },
    "_a-0000eb4d-def5-8000-9d18-011c48011c48_10111164": {
      "name": "AS_GSS_CPS_richTextWithShowMoreLess",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!shortenIfLongerThanLen: a!defaultValue(\n    value: ri!shortenIfLongerThanLen,\n    default: ri!shortenToLen\n  ),\n  local!showLess: true,\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    label: a!defaultValue(ri!label, null),\n    labelPosition: a!defaultValue(ri!labelPosition, \"COLLAPSED\"),\n    instructions: ri!instructions,\n    helpTooltip: ri!helpToolTip,\n    value: a!match(\n      value: ri!text,\n      whenTrue: and(\n        a!isNullorEmpty(fv!value),\n        ri!showHyphen = true\n      ),\n      then: #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: \"-\", color: \"STANDARD\"),\n      whenTrue: a!isNullorEmpty(fv!value),\n      then: #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: \"\", color: \"STANDARD\"),\n      whenTrue: or(\n        a!isNullorEmpty(ri!shortenToLen),\n        ri!shortenToLen = 0\n      ),\n      then: #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: fv!value, color: \"STANDARD\"),\n      default: if(\n        len(ri!text) <= local!shortenIfLongerThanLen,\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: ri!text,\n          color: \"STANDARD\",\n          size: ri!textSize\n        ),\n        if(\n          local!showLess = true,\n          {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: trim(\n                rule!AS_CO_UT_left(text: ri!text, numChars: ri!shortenToLen)\n              ) & \"... \",\n              color: ri!textColor,\n              size: ri!textSize\n            ),\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              color: ri!linkColor,\n              text: \"More\",\n              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                label: if(\n                  cons!AS_GSS_TOGGLE_AUTOMATION_TESTING_ENABLED,\n                  \"Show More\",\n                  null\n                ),\n                saveInto: a!save(local!showLess, false)\n              ),\n              style: \"STRONG\",\n              size: ri!textSize\n            )\n          },\n          {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!text & \" \",\n              color: ri!textColor,\n              size: ri!textSize\n            ),\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              color: ri!linkColor,\n              text: \"Less\",\n              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                label: if(\n                  cons!AS_GSS_TOGGLE_AUTOMATION_TESTING_ENABLED,\n                  \"Show Less\",\n                  null\n                ),\n                saveInto: a!save(local!showLess, true)\n              ),\n              style: \"STRONG\",\n              size: ri!textSize\n            )\n          }\n        )\n      )\n    ),\n    preventWrapping: ri!preventWrapping,\n    tooltip: ri!tooltip,\n    showWhen: ri!showWhen,\n    align: ri!align,\n    marginAbove: ri!marginAbove,\n    marginBelow: a!defaultValue(ri!marginBelow, \"NONE\"),\n  )\n)"
    },
    "_a-0000eed7-628f-8000-9e56-011c48011c48_17632873": {
      "name": "AS_GSS_FM_consensusRatingBreakdown",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!triggerRefresh: now(),\n  local!bundle: rule!AS_GSS_CO_UT_loadBundleFromFolder(langISOCode: null),\n  local!ratingsInfo: rule!AS_GSS_constructConsensusRatingForGivenVendor(\n    evaluationVendor: ri!evaluationVendor,\n    triggerRefresh: local!triggerRefresh\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n      title: concat(\n        \"Consensus Rating Breakdown\",\n        \" \",\n        cons!AS_GSS_CO_TXT_SPLIT_TAG,\n        \" \",\n        ri!evaluationVendor[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.legalName]\n      ),\n      secondaryText: \"How the final rating was determined and factor type\",\n      secondaryTextColor: rule!AS_GSS_BrandingValueByKey(\n        brandingKey: \"GrayThree\",\n        useSuiteBranding: true\n      )\n    ),\n    focusOnFirstInput: false(),\n    contentsWidth: \"FULL\",\n    showTitleBarDivider: true(),\n    isTitleBarFixed: true(),\n    contents: {\n      if(\n        rule!AS_CO_UT_checkIsNullOrEmpty(value: local!ratingsInfo),\n        rule!AS_GSS_SEC_consensusRatingBreakdownEmptyState(bundle: local!bundle),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!ratingsInfo,\n          expression: {\n            rule!AS_GSS_CRD_consensusRatingPerFactor(item: fv!item, bundle: local!bundle),\n            #\"SYSTEM_SYSRULES_columnsLayout\"(\n              showDividers: true(),\n              showWhen: rule!AS_CO_UT_isNotBlank(input: fv!item.subFactors),\n              columns: {\n                #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"1X\", showWhen: true()),\n                #\"SYSTEM_SYSRULES_columnLayout\"(\n                  width: \"10X\",\n                  contents: {\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: fv!item.subFactors,\n                      expression: rule!AS_GSS_CRD_consensusRatingPerFactor(item: fv!item, bundle: local!bundle)\n                    )\n                  }\n                )\n              }\n            )\n          }\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000e643-f7f1-8000-9bca-011c48011c48_1369557": {
      "name": "AS_GSS_BrandingValueByKey",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!output: if(\n    rule!AS_CO_UT_replaceNull(\n      nullableValue: ri!useSuiteBranding,\n      replacementValue: false\n    ),\n    rule!AS_FRM_getBrandingValueByKey(\n      defaultBrandingConfigDoc: cons!AS_GSS_DOC_BRANDING_DEFAULT,\n      brandingKey: ri!brandingKey\n    ),\n    rule!AS_FRM_getBrandingValueByKey(\n      defaultBrandingConfigDoc: cons!AS_GAM_DOC_BRANDING_DEFAULT,\n      brandingKey: ri!brandingKey\n    )\n  ),\n  if(\n    typename(typeof(local!output)) = cons!AS_GSS_TXT_DOCUMENT,\n    local!output,\n    tostring(local!output)\n  )\n)"
    },
    "_a-0000eed7-628f-8000-9e56-011c48011c48_17639707": {
      "name": "AS_GSS_constructConsensusRatingForGivenVendor",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Fetch all available factors for the vendor*/\n  local!factors: rule!AS_GSS_QR_getCriteria(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY,\n    fields: {\n      recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaId,\n      recordType!AS_GSS_Criteria_SYNCEDRECORD.factorNumber,\n      recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaName,\n      recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaDescription,\n      recordType!AS_GSS_Criteria_SYNCEDRECORD.parentCriteriaId,\n      recordType!AS_GSS_Criteria_SYNCEDRECORD.RatingType\n    },\n    evaluationId: ri!evaluationVendor[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.evaluationId],\n    triggerRefresh: ri!triggerRefresh,\n    includeRelatedRecords: false(),\n    additionalFilters: #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaStatusId,\n      operator: \"<>\",\n      value: cons!AS_GSS_REF_ID_EVALUATION_STATUS_TEMP\n    ),\n    executeWhen: rule!AS_CO_UT_isNotBlank(\n      input: ri!evaluationVendor[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.evaluationId]\n    )\n  ),\n  /*Fetch all non archived consensus entries for the vendor*/\n  local!allConsensusEntries: rule!AS_GSS_QR_getConsensusReport(\n    triggerRefresh: ri!triggerRefresh,\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY,\n    fields: {\n      recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.status,\n      recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.archivalReasonRefDetails,\n      recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.criteria,\n      recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.ratings\n    },\n    evaluationId: ri!evaluationVendor[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.evaluationId],\n    vendorId: ri!evaluationVendor[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.vendorId],\n    sortInfo: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.version,\n      ascending: false\n    ),\n    additionalFilters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.isArchived,\n        operator: \"=\",\n        value: false()\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.statusId,\n        operator: \"=\",\n        value: cons!AS_GSS_REF_ID_CONSENSUS_REPORT_STATUS_COMPLETE\n      )\n    },\n    executeWhen: rule!AS_CO_UT_isNotBlank(input: local!factors)\n  ),\n  local!dataToDisplay: if(\n    rule!AS_CO_UT_checkIsNullOrEmpty(value: local!factors),\n    {},\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!factors,\n      expression: a!map(\n        factorId: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.factorNumber],\n        factorName: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaName],\n        description: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaDescription],\n        parentFactorId: a!defaultValue(\n          value: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.parentCriteriaId],\n          default: 0\n        ),\n        ratingType: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.RatingType.label],\n        consensusRating: tostring(\n          rule!AS_CO_UT_indexWhere(\n            value: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaId],\n            initialArray: local!allConsensusEntries[recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.factorId],\n            finalArray: local!allConsensusEntries[recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.ratings.label],\n            isRemove: {}\n          )\n        ),\n        finalComments: tostring(\n          rule!AS_CO_UT_indexWhere(\n            value: fv!item[recordType!AS_GSS_Criteria_SYNCEDRECORD.criteriaId],\n            initialArray: local!allConsensusEntries[recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.factorId],\n            finalArray: local!allConsensusEntries[recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.ratingJustification],\n            isRemove: {}\n          )\n        )\n      )\n    )\n  ),\n  if(\n    or(\n      rule!AS_CO_UT_checkIsNullOrEmpty(value: local!dataToDisplay),\n      rule!AS_CO_UT_checkIsNullOrEmpty(value: local!allConsensusEntries)\n    ),\n    {},\n    a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: rule!AS_CO_UT_indexWhere(\n          value: 0,\n          initialArray: local!dataToDisplay.parentFactorId,\n          finalArray: local!dataToDisplay,\n          isRemove: false()\n        ),\n        expression: #\"urn:appian:function:v1:a:update\"(\n          fv!item,\n          \"subFactors\",\n          rule!AS_CO_UT_indexWhere(\n            value: fv!item.factorId,\n            initialArray: local!dataToDisplay.parentFactorId,\n            finalArray: local!dataToDisplay,\n            isRemove: false()\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000e6c8-d132-8000-9bbe-011c48011c48_469266": {
      "name": "AS_CO_UT_queryRecord",
      "type": "Expression Rule",
      "sail_code": "/*\n\nPLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE\n\nPlease DO NOT auto-format this rule\n\n*/\n\n\n/*Error handling*/\nif(\n  rule!AS_CO_UT_isBlank(ri!returnType),\n  fn!error(concat(\"Null `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  not(contains(rule!AS_CO_CONS_QE_RETURN_TYPES(), ri!returnType)),\n  fn!error(concat(\"Unknown `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  rule!AS_CO_UT_isBlank(ri!recordType),\n  fn!error(concat(\"Null `recordType` passed to AS_CO_UT_queryRecord.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` is required (cannot be null) for `returnType` DATA_SUBSET\")),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isNotBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` must be null when the `returnType` is not DATA_SUBSET, instead use `sort` to pass custom-sorting and `startIndex` & `batchSize` will be automatically calculated for you\")),\n  and(\n    not(isnull(ri!pagingInfo)),\n    rule!AS_CO_UT_isNotBlank(ri!sort)\n  ),\n  fn!error(concat(\"`sort` parameter must be null when `pagingInfo` is provided.  Use the sort field of the provided `pagingInfo` instead.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You must provide an input for `aggregationFields` when `returnType` is AGGREGATION\"),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!fields)\n  ),\n  fn!error(\"You cannot provide an input for `fields` when `returnType` is AGGREGATION.  Use `aggregationFields` instead.\"),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You cannot provide an input for `aggregationFields` when `returnType` is not AGGREGATION.  Use `fields` instead.\"),\n  and(\n    rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n    not(contains(\n      {cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY, cons!AS_CO_ENUM_QE_RETURN_TYPE_SINGLE_OBJECT, cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET},\n      ri!returnType\n    )),\n  ),\n  fn!error(\"'castToCdtType' is only supported for SINGLE_OBJECT, OBJECT_ARRAY, and DATA_SUBSET return types\"),\n\n  a!localVariables(\n\n    /*Determine the castResultToType*/\n    local!castResultToType: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   'type!{http://www.appian.com/ae/types/2009}Map',\n        /*SINGLE_OBJECT*/ a!defaultValue(ri!castToCdtType, ri!recordType),\n        /*OBJECT_ARRAY*/  rule!AS_CO_UT_returnArrayTypeNumber(type: a!defaultValue(ri!castToCdtType, ri!recordType)),\n        /*AGGREGATION*/   'type!{http://www.appian.com/ae/types/2009}Map?list',\n        /*TOTAL_COUNT*/   'type!{http://www.appian.com/ae/types/2009}Integer',\n      }\n    ),\n\n    /*Determine the batchSize*/\n    local!batchSize: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   ri!pagingInfo.batchSize,\n        /*SINGLE_OBJECT*/ 1,\n        /*OBJECT_ARRAY*/  a!defaultValue(ri!pagingInfo.batchSize, cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE),\n        /*AGGREGATION*/   cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE,\n        /*TOTAL_COUNT*/   1,\n      }\n    ),\n\n    /*Determine the pagingInfo*/\n    local!pagingInfo: if(\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n      /*Use specific pagingInfo for DATA_SUBSET*/\n      ri!pagingInfo,\n      /*Otherwise calculate pagingInfo for all other returnTypes*/\n      #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: local!batchSize,\n        sort: ri!sort\n      )\n    ),\n\n    /*Determine the fetchTotalCount*/\n    local!fetchTotalCount: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   true,\n        /*SINGLE_OBJECT*/ false,\n        /*OBJECT_ARRAY*/  false,\n        /*AGGREGATION*/   false,\n        /*TOTAL_COUNT*/   true,\n      }\n    ),\n\n    /*Execute the query*/\n    local!queryResult: a!refreshVariable(\n      value: if(\n        ri!executeWhen = false,\n        null(\n          if(\n            ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n            rule!AS_CO_TYPE_Dictionary(),\n            ri!recordType\n          )\n        ),\n        #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n          recordType: ri!recordType,\n          fields: a!defaultValue(\n            ri!fields,\n            ri!aggregationFields\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            logicalExpressions: {\n              #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                operator: \"AND\",\n                ignoreFiltersWithEmptyValues: true,\n                filters: a!defaultValue(ri!filters, {})\n              ),\n              a!defaultValue(ri!logicalExpression, {})\n            }\n          ),\n          pagingInfo: local!pagingInfo,\n          fetchTotalCount: local!fetchTotalCount,\n          relatedRecordData: ri!relatedRecordData\n        )\n      ),\n      refreshOnVarChange: ri!triggerRefresh,\n      refreshAfter: {\"RECORD_ACTION\"}\n    ),\n\n    /*Parse the queryResult*/\n    local!queryResultParse: choose(\n      rule!AS_CO_UT_chooseWherecontainsHelper(\n        value: ri!returnType,\n        inArray: rule!AS_CO_CONS_QE_RETURN_TYPES()\n      ),\n      /*Default, required value based on how AS_CO_UT_chooseWherecontainsHelper operates*/ \"\",\n      /*DATA_SUBSET*/   if(\n        rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n        /*Note that for a data subset, the parent is a map, but we allow casting the child 'data' field as well*/\n        rule!AS_CO_UT_updateCdtFieldsByFieldValuePairs(\n          cdt: local!queryResult,\n          fieldValuePairs: {\n            field: \"data\",\n            value: cast(\n              rule!AS_CO_UT_returnArrayTypeNumber(type: ri!castToCdtType),\n              local!queryResult.data\n            )\n          }\n        ),\n        local!queryResult\n      ),\n      /*SINGLE_OBJECT*/ local!queryResult.data,\n      /*OBJECT_ARRAY*/  local!queryResult.data,\n      /*AGGREGATION*/   local!queryResult.data,\n      /*TOTAL_COUNT*/   local!queryResult.totalCount,\n    ),\n\n    rule!AS_CO_UT_cast(\n      type: local!castResultToType,\n      value: local!queryResultParse\n    )\n  )\n)\n\n/*\n\nDOCUMENTATION\n\nThis rule is designed to minimize the overhead with querying data and then casting the result\n\n\nRequired Inputs:\n\n1. recordType\n- This is a recordtype! input of the data type to be queried against\n\n2. returnType\n- This depends on the purpose for the query, and should be one of the returnTypes in rule!AS_CO_CONS_QE_RETURN_TYPES\n-- DATA_SUBSET - This will return a DataSubset; pagingInfo is required\n-- SINGLE_OBJECT - This will return a single record whose type is the recordType; pagingInfo must be null\n-- ARRAY_OBJECT - This will return an array of records whose type is an array of the recordType; pagingInfo must be null\n-- AGGREGATION - This will return an array of Dictionaries; pagingInfo must be null\n---- NOTE: If you need Aggregation with paging controls, such as for a grid, use returnType DATA_SUBSET\n-- TOTAL_COUNT - This will return an Integer of the total count; pagingInfo must be null\n\n\nOptional Inputs:\n\n3. executeWhen\n- The query will not execute if this is false, the query will execute if this is true or null\n-- This is meant to operate in a similar manner to the showWhen parameter of components\n- Use this to skip execution of a query without needing to wrap if() statements around the rule\n-- Examples of this would be to skip querying if your filter value is a null ID\n- If the query does not execute, this will return a null value whose type is based on the returnType input\n\n4. triggerRefresh\n- By default, the query will always re-execute whenever any inputs change\n- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change (e.g. after a record action)\n\n5. filters\n- Array of filters to apply to the query, built with a!queryFilter()\n- These filters will be applied with an AND operator\n- These filters will apply in addition to the logicalExpression input, combining both with an AND operator\n\n6. logicalExpression\n- A logical expression to apply to the query, built with a!queryLogicalExpression()\n- This logical expression will apply in addition to the filters input, combining both with an AND operator\n\n7. aggregationFields\n- Aggregation to apply to the query, built with a!aggregationField()\n\n8. fields\n- List of recordFields and relatedRecordFields to return.  When querying a record, any relatedRecordFields are not returned\nby default, and must be specifically requested.\n\n9. pagingInfo\n- Paging info to apply to the query, built with a!pagingInfo() or derived from fv!pagingInfo in grids\n- This is required if passing returnType DATA_SUBSET, otherwise it must be null\n- For returnTypes that are not DATA_SUBSET, the batch size will be automatically calculated depending on the returnType\n-- For example, passing SINGLE_OBJECT will automatically apply a batch size of 1, whereas ARRAY_OBJECT and AGGREGATION will automatically apply a batch size of the defined query batch size maximum\n\n10. sort\n- Array of sort to apply to the query, built with a!sortInfo()\n- This is meant to be used with returnType ARRAY_OBJECT and AGGREGATION, since pagingInfo is not required for these, but a specified sort may be used\n- Cannot be used in conjunction with pagingInfo.sort\n\n11. castToCdtType\n- Any cdt type to the cast the result set. \n- This is meant to be used with only returnType OBJECT_ARRAY and SINGLE_OBJECT.\n\n*/"
    },
    "_a-0000ecb5-bbc6-8000-9dba-011c48011c48_13899505": {
      "name": "AS_GSS_QR_getConsensusReport",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.consensusId,\n      operator: \"in\",\n      value: ri!consensusId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.evaluationId,\n      operator: \"in\",\n      value: ri!evaluationId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.factorId,\n      operator: \"in\",\n      value: ri!factorId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.vendorId,\n      operator: \"in\",\n      value: ri!vendorId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.statusId,\n      operator: \"in\",\n      value: ri!statusId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.startedBy,\n      operator: \"in\",\n      value: ri!startedBy\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.isActive,\n      operator: \"in\",\n      value: a!defaultValue(value: ri!isActive, default: { true })\n    ),\n    ri!additionalFilters\n  },\n  relatedRecordData: ri!relatedRecordData,\n  fields: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      ri!fields,\n      if(\n        ri!includeRelatedRecords,\n        {\n          recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.consensusResponses,\n          recordType!AS_GSS_ConsensusReport_SYNCEDRECORD.consensusSignatures\n        },\n        {}\n      )\n    }\n  ),\n  sort: ri!sortInfo,\n  pagingInfo: ri!pagingInfo,\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpression: ri!logicalExpression,\n  aggregationFields: ri!aggregationFields\n)"
    }
  }
}