{
  "_metadata": {
    "bundle_id": "AS_GSS_DRM_Data_Migration_Wrapper"
  },
  "objects": {
    "_a-0000ee30-1118-8000-9e27-011c48011c48_16437718": {
      "name": "AS_GSS_DRM_BL_updateVendorDetailsFromGSM",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!isSLGToggleOn: rule!AS_GSS_EnableOrDisableStateAndLocalGovernment_wrapper(),\n  local!GSMVendorData: if(\n    local!isSLGToggleOn,\n    rule!AS_GSS_APPREF_GSM_GETDATA_getVendorDetailsState(\n      tin: ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.tin],\n      returnAllData: true(),\n      status: { true, false }\n    )[1],\n    rule!AS_GSS_APPREF_GSM_GETDATA_getVendorDetailsFederal(\n      ueiCageCombo: rule!AS_GSS_UT_constructUeiCageCombo(\n        uei: ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.uniqueEntityId],\n        cageCode: ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.cageCode]\n      ),\n      status: { true, false }\n    )[1]\n  ),\n  local!updatedEvalVendors: if(\n    tostring(\n      index(local!GSMVendorData, \"error\", null)\n    ) = cons!AS_GSS_DRM_DATA_MIGRATION_API_ERROR_RESPONSE_VENDOR_NOT_FOUND,\n    {},\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!vendorsToUpdate,\n      expression: if(\n        contains(\n          {\n            cons!AS_GSS_REF_ID_EVALUATION_STATUS_INPROGRESS,\n            cons!AS_GSS_REF_ID_EVALUATION_STATUS_SETTING_UP\n          },\n          tointeger(\n            fv!item[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.evaluation.evaluationStatusId]\n          )\n        ),\n        rule!AS_GSS_UT_updateRecordsByModelRecord(\n          records: fv!item,\n          modelRecord: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD(\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.gsmVendorRefId: rule!AS_CO_UT_indexPath(\n              cdt: local!GSMVendorData,\n              field: \"vendor.vendorId\",\n              indexDefault: {}\n            ),\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.status: rule!AS_CO_UT_indexPath(\n              cdt: local!GSMVendorData,\n              field: \"vendor.registrationStatusId\",\n              indexDefault: fv!item[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.status]\n            ),\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.expirationDate: rule!AS_CO_UT_indexPath(\n              cdt: local!GSMVendorData,\n              field: \"vendor.registrationExpirationDate\",\n              indexDefault: fv!item[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.expirationDate]\n            ),\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.businessTypes: rule!AS_GSS_DRM_BL_handleBusinessTypeForEvalVendor(\n              GSMVendorData: local!GSMVendorData,\n              evalVendor: fv!item\n            ),\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.modifiedDatetime: now()\n          )\n        ),\n        rule!AS_GSS_UT_updateRecordsByModelRecord(\n          records: fv!item,\n          modelRecord: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD(\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.gsmVendorRefId: rule!AS_CO_UT_indexPath(\n              cdt: local!GSMVendorData,\n              field: \"vendor.vendorId\",\n              indexDefault: {}\n            ),\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.businessTypes: rule!AS_GSS_DRM_BL_handleBusinessTypeForEvalVendor(\n              GSMVendorData: local!GSMVendorData,\n              evalVendor: fv!item\n            ),\n            recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.modifiedDatetime: now()\n          )\n        )\n      )\n    )\n  ),\n  rule!AS_GSS_UT_updateRecordsByModelRecord(\n    records: ri!refVendor,\n    modelRecord: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD(\n      recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.gsmVendorRefId: rule!AS_CO_UT_indexPath(\n        cdt: local!GSMVendorData,\n        field: \"vendor.vendorId\",\n        indexDefault: {}\n      ),\n      recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.status: rule!AS_CO_UT_indexPath(\n        cdt: local!GSMVendorData,\n        field: \"vendor.registrationStatusId\",\n        indexDefault: ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.status]\n      ),\n      recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.expirationDate: rule!AS_CO_UT_indexPath(\n        cdt: local!GSMVendorData,\n        field: \"vendor.registrationExpirationDate\",\n        indexDefault: ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.expirationDate]\n      ),\n      recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.refVendorBusinessTypes: rule!AS_GSS_DRM_BL_handleBusinessTypeForRefVendor(\n        GSMVendorData: local!GSMVendorData,\n        refVendor: ri!refVendor\n      ),\n      recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.evaluationVendor: local!updatedEvalVendors,\n      recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.modifiedDatetime: now()\n    )\n  )\n)"
    },
    "0002ee35-a4aa-8000-d819-7f0000014e7a": {
      "name": "AS GSS DRM Migrate Vendor Data",
      "type": "Process Model",
      "sail_code": "// Input: ?\n={pv!refVendor}\n\n// Input: ?\n={recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD}\n\n// Input: ?\n= rule!AS_GSS_QR_getEvaluationVendors( returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT, executeWhen: true(), additionalFilters: { #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.vendorRefId, operator: \"=\", value: pv!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.vendorRefId] ) })\n\n// Output: ?\na!map(\n  totalVendorCount: ac!totalVendorCount,\n  iterationCount: 0,\n  batchSize: cons!AS_GSS_DRM_INT_BULK_BATCH_SIZE\n)\n\n// Input: ?\n= #\"SYSTEM_SYSRULES_pagingInfo\"( startIndex: product( pv!iterationInfo.iterationCount, pv!iterationInfo.batchSize ) + 1, batchSize: pv!iterationInfo.batchSize, sort: {})\n\n// Input: ?\n=#\"urn:appian:function:v1:a:update\"( pv!iterationInfo, \"iterationCount\", pv!iterationInfo.iterationCount + 1)\n\n// Output: ?\nrule!AS_GSS_DRM_BL_updateVendorDetailsFromGSM(\n  refVendor: pv!refVendor,\n  vendorsToUpdate: rule!AS_GSS_QR_getEvaluationVendors(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    executeWhen: true(),\n    fields: {\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.vendorRefId,\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.uniqueEntityId,\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.cageCode,\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.tin,\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.fein,\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.evaluation.evaluationStatusId,\n      recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.businessTypes\n    },\n    additionalFilters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.vendorRefId,\n        operator: \"=\",\n        value: pv!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.vendorRefId]\n      )\n    },\n    pagingInfo: ac!pagingInfo\n  ).data\n)\n\n// Output: ?\nac!iterationInfo"
    },
    "_a-0000e583-8ce5-8000-9bb7-011c48011c48_734490": {
      "name": "AS_CO_UT_castToMapList",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Map?list',\n  if(\n    rule!AS_CO_UT_isBlank(ri!value),\n    {},\n    ri!value\n  )\n)"
    },
    "_a-0000e571-774f-8000-b919-01ef9001ef90_28790": {
      "name": "AS_FRM_getRuleReferenceOrNoOp",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    cons!AS_FRM_BOOL_APPREF_ENTRYPOINT_FRAMEWORK_ENABLED,\n    rule!AS_FRM_doesRuleExist(ri!ruleName)\n  ),\n  rulereferencebyname(ruleName: ri!ruleName),\n  rule!AS_FRM_noOp\n)"
    },
    "_a-0001ed6e-54f1-8000-9df6-011c48011c48_15245604": {
      "name": "AS_GSS_EnableOrDisableStateAndLocalGovernment_wrapper",
      "type": "Expression Rule",
      "sail_code": "if(\n  cons!AS_GSS_TOGGLE_AUTOMATION_TESTING_ENABLED,\n  cons!AS_GSS_TOGGLE_SLG_CONFIG_FOR_AUTOMATION_TESTING,\n  a!localVariables(\n    /*Determine whether to execute the _default or _custom rule*/\n    local!runtimeRule: a!refreshVariable(\n      value: rule!AS_FRM_determineRuntimeRule(\n        defaultRuleReference: rule!AS_GSS_EnableOrDisableStateAndLocalGovernment_v1_default\n      ),\n      refreshAlways: true\n    ),\n    local!runtimeRule()\n  )\n)"
    },
    "_a-0000ee30-1118-8000-9e27-011c48011c48_16437749": {
      "name": "AS_GSS_APPREF_GSM_GETDATA_getVendorDetailsState",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /* Return the entry-point rule if it exists, or else returns a no-op */\n  /* Make sure you use a refreshAlways: true */\n  local!rule: a!refreshVariable(\n    value: rule!AS_FRM_getRuleReferenceOrNoOp(\n      ruleName: \"AS_GSM_ENTRYPOINT_GETDATA_getVendorDetails_Slg_v1\"\n    ),\n    refreshAlways: true\n  ),\n  /* Actually execute the rule */\n  local!rule(\n    /* This should always be passed in every app reference rule */\n    /* which returns a default value if the rule does not exist */\n    ifNull_default: {},\n    /* Entrypoint-specific inputs for that rule */\n    tin: ri!tin,\n    returnAllData: ri!returnAllData,\n    status: ri!status\n  )\n)"
    },
    "_a-0000ee42-8707-8000-9e2b-011c48011c48_16524669": {
      "name": "AS_GSS_DRM_BL_handleBusinessTypeForEvalVendor",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!gsmBusinessTypes: touniformstring(\n    rule!AS_CO_UT_indexPath(\n      cdt: ri!GSMVendorData,\n      field: \"vendor.business.businessTypeMapping.businessTypeRefId\",\n      indexDefault: {}\n    )\n  ),\n  local!newEntries: difference(\n    touniformstring(local!gsmBusinessTypes),\n    touniformstring(\n      ri!evalVendor[recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.businessTypes.typeCode]\n    )\n  ),\n  if(\n    rule!AS_CO_UT_checkIsNullOrEmpty(\n      value: ri!GSMVendorData\n    ),\n    {},\n    rule!AS_CO_UT_rejectNullValuesFromArray(\n      array: {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!newEntries,\n          expression: recordType!AS_GSS_EvaluationVendorBusinessType_SYNCEDRECORD(\n            recordType!AS_GSS_EvaluationVendorBusinessType_SYNCEDRECORD.typeCode: fv!item\n          )\n        )\n      }\n    )\n  )\n)"
    },
    "_a-0000eb16-753f-8000-9d01-011c48011c48_9522362": {
      "name": "AS_GSS_UT_updateRecordsByModelRecord",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(a!flatten(ri!records)),\n  a!localVariables(\n    local!fieldsToUpdate: a!keys(ri!modelRecord),\n    apply(\n      reduce(\n        rule!AS_GSS_UT_zINTERNAL_updateRecordsByModelRecord(\n          record: _,\n          fieldValuePair: _,\n        ),\n        _,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!fieldsToUpdate,\n          expression: a!map(\n            field: fv!item,\n            value: ri!modelRecord[fv!item]\n          )\n        )\n      ),\n      a!flatten(ri!records)\n    )\n  )\n)"
    },
    "_a-0000e3e6-fb42-8000-9ba5-011c48011c48_162769": {
      "name": "AS_CO_UT_typeCompare",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  typeof(ri!value1) = typeof(ri!value2)\n)"
    },
    "_a-0000eb69-8eb8-8000-9d24-011c48011c48_10389864": {
      "name": "AS_GSS_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "/*\nThis rule null checks below scenarios, \n\n-- null value\n-- an empty list\n-- an empty string\n-- list of null values\n-- all fields of the CDT are null\n      While passing a CDT, make sure ri!checkIfAllCdtFieldsAreNull is TRUE to handle\n    this scenario\n-- string with only spaces\n*/\na!localVariables(\n  local!checkIfAllCdtFieldsAreNull: a!defaultValue(\n    value: ri!checkIfAllCdtFieldsAreNull, \n    default: false\n  ),\n  local!keys: if(\n    local!checkIfAllCdtFieldsAreNull,\n    a!keys(value: index(ri!value, 1, null)),\n    null\n  ),\n  local!indicesOfCdtsWhereAllFieldsAreNull: if(\n    local!checkIfAllCdtFieldsAreNull,\n    rule!AS_CO_UT_rejectNullValuesFromArray(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        rule!AS_CO_UT_castToMapList(ri!value),\n        a!localVariables(\n          local!currentItem: fv!item,\n          local!currentIndex: fv!index,\n          if(\n            length(\n              a!flatten(\n                #\"SYSTEM_SYSRULES_forEach\"(\n                  local!keys,\n                  rule!AS_CO_UT_whereContains(\n                    values: null,\n                    array: rule!AS_CO_UT_indexPath(\n                      cdt: a!flatten(local!currentItem),\n                      field: fv!item\n                    )\n                  )\n                )\n              )\n            ) = length(local!keys),\n            local!currentIndex,\n            null\n          )\n        )\n      )\n    ),\n    null\n  ),\n  local!filteredCdt: if(\n    local!checkIfAllCdtFieldsAreNull,\n    remove(\n      a!flatten(ri!value),\n      local!indicesOfCdtsWhereAllFieldsAreNull\n    ),\n    null\n  ),\n  cast(\n    'type!{http://www.appian.com/ae/types/2009}Boolean',\n    or(\n      length(a!flatten(ri!value)) = 0,\n      a!isNullOrEmpty(\n        if(\n          local!checkIfAllCdtFieldsAreNull,\n          local!filteredCdt,\n          trim(ri!value)\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ece3-e0bc-8000-9dcb-011c48011c48_14341848": {
      "name": "AS_GSS_QR_getEvaluationVendors",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD,\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  aggregationFields: ri!aggregationFields,\n  fields: ri!fields,\n  relatedRecordData: ri!relatedRecordData,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_EvaluationVendor_SYNCEDRECORD.evaluationId,\n      operator: \"in\",\n      value: ri!evaluationId\n    ),\n    ri!additionalFilters\n  },\n  sort: ri!sort\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76433": {
      "name": "AS_CO_UT_indexPath",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldsAndIndices: rule!AS_CO_UT_zINTERNAL_indexPath_nestedFieldArrayHandler(field: ri!field),\n\n  reduce(\n    index(_, _, ri!indexDefault),\n    ri!cdt,\n    local!fieldsAndIndices\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536": {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    },
    "_a-0000ee70-ab52-8000-9e39-011c48011c48_16862817": {
      "name": "AS_GSS_UT_constructUeiCageCombo",
      "type": "Expression Rule",
      "sail_code": "concat(\n  ri!uei,\n  \"-\",\n  ri!cageCode\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76367": {
      "name": "AS_CO_UT_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AS_CO_UT_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000ee30-1118-8000-9e27-011c48011c48_16437741": {
      "name": "AS_GSS_APPREF_GSM_GETDATA_getVendorDetailsFederal",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /* Return the entry-point rule if it exists, or else returns a no-op */\n  /* Make sure you use a refreshAlways: true */\n  local!rule: a!refreshVariable(\n    value: rule!AS_FRM_getRuleReferenceOrNoOp(\n      ruleName: \"AS_GSM_ENTRYPOINT_GETDATA_getVendorDetails_Federal_v1\"\n    ),\n    refreshAlways: true\n  ),\n  /* Actually execute the rule */\n  local!rule(\n    /* This should always be passed in every app reference rule */\n    /* which returns a default value if the rule does not exist */\n    ifNull_default: {},\n    /* Entrypoint-specific inputs for that rule */\n    uei: ri!uei,\n    cageCode: ri!cage,\n    status: ri!status,\n    ueiCageCombo: ri!ueiCageCombo,\n    name: ri!name\n  )\n)"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39070": {
      "name": "AS_CO_UT_booleanDefaultFalse",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  if(\n    isnull(ri!boolean),\n    false,\n    ri!boolean\n  )\n)"
    },
    "_a-0000e6c8-d132-8000-9bbe-011c48011c48_469266": {
      "name": "AS_CO_UT_queryRecord",
      "type": "Expression Rule",
      "sail_code": "/*\n\nPLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE\n\nPlease DO NOT auto-format this rule\n\n*/\n\n\n/*Error handling*/\nif(\n  rule!AS_CO_UT_isBlank(ri!returnType),\n  fn!error(concat(\"Null `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  not(contains(rule!AS_CO_CONS_QE_RETURN_TYPES(), ri!returnType)),\n  fn!error(concat(\"Unknown `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  rule!AS_CO_UT_isBlank(ri!recordType),\n  fn!error(concat(\"Null `recordType` passed to AS_CO_UT_queryRecord.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` is required (cannot be null) for `returnType` DATA_SUBSET\")),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isNotBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` must be null when the `returnType` is not DATA_SUBSET, instead use `sort` to pass custom-sorting and `startIndex` & `batchSize` will be automatically calculated for you\")),\n  and(\n    not(isnull(ri!pagingInfo)),\n    rule!AS_CO_UT_isNotBlank(ri!sort)\n  ),\n  fn!error(concat(\"`sort` parameter must be null when `pagingInfo` is provided.  Use the sort field of the provided `pagingInfo` instead.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You must provide an input for `aggregationFields` when `returnType` is AGGREGATION\"),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!fields)\n  ),\n  fn!error(\"You cannot provide an input for `fields` when `returnType` is AGGREGATION.  Use `aggregationFields` instead.\"),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You cannot provide an input for `aggregationFields` when `returnType` is not AGGREGATION.  Use `fields` instead.\"),\n  and(\n    rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n    not(contains(\n      {cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY, cons!AS_CO_ENUM_QE_RETURN_TYPE_SINGLE_OBJECT, cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET},\n      ri!returnType\n    )),\n  ),\n  fn!error(\"'castToCdtType' is only supported for SINGLE_OBJECT, OBJECT_ARRAY, and DATA_SUBSET return types\"),\n\n  a!localVariables(\n\n    /*Determine the castResultToType*/\n    local!castResultToType: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   'type!{http://www.appian.com/ae/types/2009}Map',\n        /*SINGLE_OBJECT*/ a!defaultValue(ri!castToCdtType, ri!recordType),\n        /*OBJECT_ARRAY*/  rule!AS_CO_UT_returnArrayTypeNumber(type: a!defaultValue(ri!castToCdtType, ri!recordType)),\n        /*AGGREGATION*/   'type!{http://www.appian.com/ae/types/2009}Map?list',\n        /*TOTAL_COUNT*/   'type!{http://www.appian.com/ae/types/2009}Integer',\n      }\n    ),\n\n    /*Determine the batchSize*/\n    local!batchSize: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   ri!pagingInfo.batchSize,\n        /*SINGLE_OBJECT*/ 1,\n        /*OBJECT_ARRAY*/  a!defaultValue(ri!pagingInfo.batchSize, cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE),\n        /*AGGREGATION*/   cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE,\n        /*TOTAL_COUNT*/   1,\n      }\n    ),\n\n    /*Determine the pagingInfo*/\n    local!pagingInfo: if(\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n      /*Use specific pagingInfo for DATA_SUBSET*/\n      ri!pagingInfo,\n      /*Otherwise calculate pagingInfo for all other returnTypes*/\n      #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: local!batchSize,\n        sort: ri!sort\n      )\n    ),\n\n    /*Determine the fetchTotalCount*/\n    local!fetchTotalCount: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   true,\n        /*SINGLE_OBJECT*/ false,\n        /*OBJECT_ARRAY*/  false,\n        /*AGGREGATION*/   false,\n        /*TOTAL_COUNT*/   true,\n      }\n    ),\n\n    /*Execute the query*/\n    local!queryResult: a!refreshVariable(\n      value: if(\n        ri!executeWhen = false,\n        null(\n          if(\n            ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n            rule!AS_CO_TYPE_Dictionary(),\n            ri!recordType\n          )\n        ),\n        #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n          recordType: ri!recordType,\n          fields: a!defaultValue(\n            ri!fields,\n            ri!aggregationFields\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            logicalExpressions: {\n              #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                operator: \"AND\",\n                ignoreFiltersWithEmptyValues: true,\n                filters: a!defaultValue(ri!filters, {})\n              ),\n              a!defaultValue(ri!logicalExpression, {})\n            }\n          ),\n          pagingInfo: local!pagingInfo,\n          fetchTotalCount: local!fetchTotalCount,\n          relatedRecordData: ri!relatedRecordData\n        )\n      ),\n      refreshOnVarChange: ri!triggerRefresh,\n      refreshAfter: {\"RECORD_ACTION\"}\n    ),\n\n    /*Parse the queryResult*/\n    local!queryResultParse: choose(\n      rule!AS_CO_UT_chooseWherecontainsHelper(\n        value: ri!returnType,\n        inArray: rule!AS_CO_CONS_QE_RETURN_TYPES()\n      ),\n      /*Default, required value based on how AS_CO_UT_chooseWherecontainsHelper operates*/ \"\",\n      /*DATA_SUBSET*/   if(\n        rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n        /*Note that for a data subset, the parent is a map, but we allow casting the child 'data' field as well*/\n        rule!AS_CO_UT_updateCdtFieldsByFieldValuePairs(\n          cdt: local!queryResult,\n          fieldValuePairs: {\n            field: \"data\",\n            value: cast(\n              rule!AS_CO_UT_returnArrayTypeNumber(type: ri!castToCdtType),\n              local!queryResult.data\n            )\n          }\n        ),\n        local!queryResult\n      ),\n      /*SINGLE_OBJECT*/ local!queryResult.data,\n      /*OBJECT_ARRAY*/  local!queryResult.data,\n      /*AGGREGATION*/   local!queryResult.data,\n      /*TOTAL_COUNT*/   local!queryResult.totalCount,\n    ),\n\n    rule!AS_CO_UT_cast(\n      type: local!castResultToType,\n      value: local!queryResultParse\n    )\n  )\n)\n\n/*\n\nDOCUMENTATION\n\nThis rule is designed to minimize the overhead with querying data and then casting the result\n\n\nRequired Inputs:\n\n1. recordType\n- This is a recordtype! input of the data type to be queried against\n\n2. returnType\n- This depends on the purpose for the query, and should be one of the returnTypes in rule!AS_CO_CONS_QE_RETURN_TYPES\n-- DATA_SUBSET - This will return a DataSubset; pagingInfo is required\n-- SINGLE_OBJECT - This will return a single record whose type is the recordType; pagingInfo must be null\n-- ARRAY_OBJECT - This will return an array of records whose type is an array of the recordType; pagingInfo must be null\n-- AGGREGATION - This will return an array of Dictionaries; pagingInfo must be null\n---- NOTE: If you need Aggregation with paging controls, such as for a grid, use returnType DATA_SUBSET\n-- TOTAL_COUNT - This will return an Integer of the total count; pagingInfo must be null\n\n\nOptional Inputs:\n\n3. executeWhen\n- The query will not execute if this is false, the query will execute if this is true or null\n-- This is meant to operate in a similar manner to the showWhen parameter of components\n- Use this to skip execution of a query without needing to wrap if() statements around the rule\n-- Examples of this would be to skip querying if your filter value is a null ID\n- If the query does not execute, this will return a null value whose type is based on the returnType input\n\n4. triggerRefresh\n- By default, the query will always re-execute whenever any inputs change\n- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change (e.g. after a record action)\n\n5. filters\n- Array of filters to apply to the query, built with a!queryFilter()\n- These filters will be applied with an AND operator\n- These filters will apply in addition to the logicalExpression input, combining both with an AND operator\n\n6. logicalExpression\n- A logical expression to apply to the query, built with a!queryLogicalExpression()\n- This logical expression will apply in addition to the filters input, combining both with an AND operator\n\n7. aggregationFields\n- Aggregation to apply to the query, built with a!aggregationField()\n\n8. fields\n- List of recordFields and relatedRecordFields to return.  When querying a record, any relatedRecordFields are not returned\nby default, and must be specifically requested.\n\n9. pagingInfo\n- Paging info to apply to the query, built with a!pagingInfo() or derived from fv!pagingInfo in grids\n- This is required if passing returnType DATA_SUBSET, otherwise it must be null\n- For returnTypes that are not DATA_SUBSET, the batch size will be automatically calculated depending on the returnType\n-- For example, passing SINGLE_OBJECT will automatically apply a batch size of 1, whereas ARRAY_OBJECT and AGGREGATION will automatically apply a batch size of the defined query batch size maximum\n\n10. sort\n- Array of sort to apply to the query, built with a!sortInfo()\n- This is meant to be used with returnType ARRAY_OBJECT and AGGREGATION, since pagingInfo is not required for these, but a specified sort may be used\n- Cannot be used in conjunction with pagingInfo.sort\n\n11. castToCdtType\n- Any cdt type to the cast the result set. \n- This is meant to be used with only returnType OBJECT_ARRAY and SINGLE_OBJECT.\n\n*/"
    },
    "_a-0000eb72-c933-8000-9d28-011c48011c48_10457793": {
      "name": "AS_GSS_UT_checkIfNullOrZero",
      "type": "Expression Rule",
      "sail_code": "or(\n  rule!AS_GSS_UT_isBlank(value: ri!input),\n  ri!input = 0\n)"
    },
    "_a-0000ee42-8707-8000-9e2b-011c48011c48_16524795": {
      "name": "AS_GSS_DRM_BL_handleBusinessTypeForRefVendor",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!gsmBusinessTypes: touniformstring(\n    rule!AS_CO_UT_indexPath(\n      cdt: ri!GSMVendorData,\n      field: \"vendor.business.businessTypeMapping.businessTypeRefId\",\n      indexDefault: {}\n    )\n  ),\n  local!newEntries: difference(\n    touniformstring(local!gsmBusinessTypes),\n    touniformstring(\n      ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.refVendorBusinessTypes.typeCode]\n    )\n  ),\n  local!existingEntries: intersection(\n    touniformstring(local!gsmBusinessTypes),\n    touniformstring(\n      ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.refVendorBusinessTypes.typeCode]\n    )\n  ),\n  if(\n    rule!AS_CO_UT_checkIsNullOrEmpty(\n      value: ri!GSMVendorData\n    ),\n    {},\n    rule!AS_CO_UT_rejectNullValuesFromArray(\n      array: {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!refVendor[recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.refVendorBusinessTypes],\n          expression: if(\n            contains(\n              touniformstring(local!existingEntries),\n              fv!item[recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.typeCode]\n            ),\n            #\"urn:appian:function:v1:a:update\"(\n              fv!item,\n              recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.isActive,\n              true()\n            ),\n            #\"urn:appian:function:v1:a:update\"(\n              fv!item,\n              recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.isActive,\n              false()\n            )\n          )\n        ),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!newEntries,\n          expression: recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD(\n            recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.typeCode: fv!item,\n            recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.createdBy: loggedInUser(),\n            recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.createdDatetime: now(),\n            recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.isActive: true(),\n            recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.modifiedBy: loggedInUser(),\n            recordType!AS_GSS_Ref_VendorBusinessType_SYNCEDRECORD.modifiedDatetime: now()\n          )\n        )\n      }\n    )\n  )\n)"
    },
    "0002ee35-76b7-8000-d80b-7f0000014e7a": {
      "name": "AS GSS DRM Data Migration Wrapper",
      "type": "Process Model",
      "sail_code": "// Output: ?\nrule!AS_GSS_UT_updateRecordsByModelRecord(\n  records: pv!migrationDetails,\n  modelRecord: recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD(\n    recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.statusId: cons!AS_GSS_DRM_INT_REF_ID_MIGRATION_PROCESS_STATUS_COMPLETED,\n    recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.completedOn: now()\n  )\n)\n\n// Input: ?\n={pv!migrationDetails}\n\n// Input: ?\n={recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD}\n\n// Input: ?\n={pv!migrationDetails}\n\n// Input: ?\n={recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD}\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\n= rule!AS_GSS_QR_getReferenceVendors( returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT, executeWhen: true(), fetchAll: true(), additionalFilters: { #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.reconciliationStatusId, operator: \"in\", value: { cons!AS_GSS_DRM_INT_REF_ID_RECONCILIATION_STATUS_PROCESSED, cons!AS_GSS_DRM_INT_REF_ID_RECONCILIATION_STATUS_SKIPPED } ), #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.gsmVendorRefId, operator: \"is null\" ) })\n\n// Output: ?\na!map(\n  totalVendorCount: ac!totalVendorCount,\n  iterationCount: 0,\n  batchSize: cons!AS_GSS_DRM_INT_BULK_BATCH_SIZE\n)\n\n// Output: ?\nrecordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD(\n  recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.statusId: cons!AS_GSS_DRM_INT_REF_ID_MIGRATION_PROCESS_STATUS_IN_PROGRESS,\n  recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.startedBy: pp!initiator,\n  recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.startedOn: pp!starttime,\n  recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.completedOn: null,\n  recordType!AS_GSS_DRM_MigrationDetails_SYNCEDRECORD.isActive: true()\n)\n\n// Input: ?\n= #\"SYSTEM_SYSRULES_pagingInfo\"( startIndex: 1, batchSize: pv!iterationInfo.batchSize, sort: {})\n\n// Input: ?\n=#\"urn:appian:function:v1:a:update\"( pv!iterationInfo, \"iterationCount\", pv!iterationInfo.iterationCount + 1)\n\n// Output: ?\nrule!AS_GSS_QR_getReferenceVendors(\n  returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n  executeWhen: true(),\n  fetchAll: true(),\n  fields: {\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.vendorRefId,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.legalName,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.uniqueEntityId,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.cageCode,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.tin,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.federalIdentifier,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.isActive,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.reconciliationStatusId,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.gsmVendorRefId,\n    recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.refVendorBusinessTypes\n  },\n  additionalFilters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.reconciliationStatusId,\n      operator: \"in\",\n      value: {\n        cons!AS_GSS_DRM_INT_REF_ID_RECONCILIATION_STATUS_PROCESSED,\n        cons!AS_GSS_DRM_INT_REF_ID_RECONCILIATION_STATUS_SKIPPED\n      }\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.gsmVendorRefId,\n      operator: \"is null\"\n    )\n  },\n  pagingInfo: ac!pagingInfo\n).data\n\n// Output: ?\nac!iterationInfo\n\n// Input: ?\n=pv!vendorsToMigrate[tp!instanceindex]"
    },
    "_a-0000e6cd-618a-8000-9bd9-011c48011c48_1688557": {
      "name": "AS_CO_UT_checkIsNullOrEmpty",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    isnull(\n      ri!value\n    ),\n    trim(\n      ri!value\n    ) = \"\"\n  ),\n  true(),\n  if(\n    length(\n      ri!value\n    ) = 0,\n    true(),\n    false()\n  )\n)"
    },
    "_a-0000ed36-f3bd-8000-9dea-011c48011c48_14825444": {
      "name": "AS_GSS_QR_getReferenceVendors",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD,\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  aggregationFields: ri!aggregationFields,\n  fields: ri!fields,\n  relatedRecordData: ri!relatedRecordData,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.vendorRefId,\n      operator: \"in\",\n      value: ri!vendorRefId\n    ),\n    if(\n      rule!AS_CO_UT_booleanDefaultFalse(boolean: ri!fetchAll),\n      {},\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AS_GSS_Ref_Vendor_SYNCEDRECORD.isActive,\n        operator: \"=\",\n        value: true()\n      )\n    ),\n    ri!additionalFilters\n  },\n  sort: ri!sort\n)"
    },
    "_a-0000e40a-de32-8000-9ba8-011c48011c48_272151": {
      "name": "AS_CO_UT_whereContains",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Integer?list',\n  with(\n    local!array: a!flatten(ri!array),\n  \n    if(\n    \n      /*Have to handle separately for document types due to how it casts to string*/\n      rule!AS_CO_UT_typeCompare(\n        value1: local!array,\n        value2: {todocument(null)}\n      ),\n      wherecontains(\n        todocument(ri!values),\n        local!array\n      ),\n    \n      /*Have to handle separately for group types due to how it casts to string*/\n      rule!AS_CO_UT_typeCompare(\n        value1: local!array,\n        value2: {togroup(null)}\n      ),\n      wherecontains(\n        togroup(ri!values),\n        local!array\n      ),\n    \n      /*Casting to string accounts for any primitive type (integer, boolean, ect.)*/\n      wherecontains(\n        if(\n          rule!AS_CO_UT_isBlank(ri!values),\n          touniformstring(ri!values),\n          touniformstring(a!flatten(ri!values))\n        ),\n        touniformstring(local!array)\n      )\n    )\n  )\n)"
    }
  }
}