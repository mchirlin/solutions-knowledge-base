{
  "_metadata": {
    "bundle_id": "AIA_Extraction_Model_-_urnappiantranslation-stringv152c8e812-5087-4517-848a-2989"
  },
  "objects": {
    "_a-0000ed5d-bd1b-8000-9c80-011c48011c48_329747": {
      "name": "AIA_Extraction_GeneratePromptEntities",
      "type": "Expression Rule",
      "sail_code": "\"## Output Format\n\nYour final output must be a single **JSON object** representing the extracted data, with each field enriched to include its location. The schema for the response is as follows:\n\n\" &\n/*\"```json\" &*/\n\"\n\" & rule!AIA_Extraction_CreateJsonSchema(\n  fields: ri!fields,\n  mode: ri!mode,\n  returnJson: true\n) & \"\n\"&\n/*\"```\"&*/\n\"\""
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_62359": {
      "name": "AIA_Extraction_ConfigureFieldReconciliationTableColumnGrid",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  accessibilityText: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(#\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:0c3b94d1-dae5-4644-a3e2-9c8e5ac0df5c\"),\n  label: #\"urn:appian:translation-string:v1:0c3b94d1-dae5-4644-a3e2-9c8e5ac0df5c\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:c917d5b3-b5d5-4155-830d-26af8fbe50f7\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:fe0291f3-cacb-4c7b-b121-8e0689c28629\",\n      align: \"CENTER\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:dc5596cf-675f-48ca-b808-4f194531c354\",\n      helpTooltip: #\"urn:appian:translation-string:v1:e6b6ba2e-5962-4d23-b849-300fd7cd0793\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:4e4df5f4-1f03-4482-8a9a-59d2184624b8\",\n      helpTooltip: #\"urn:appian:translation-string:v1:fc709dcd-d789-4b11-bd00-67c52b7d1db9\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:6512102e-3415-4732-92e5-d3a6a8f0e06b\",\n      helpTooltip: #\"urn:appian:translation-string:v1:6d3f5295-be99-476b-b005-e2fd18bacb96\",\n      align: \"CENTER\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:cb61f521-fb58-4d17-9671-05fb17ddcc99\",\n      helpTooltip: #\"urn:appian:translation-string:v1:016b656f-b9b1-42e7-9579-446feb3cd9c9\",\n      align: \"CENTER\"\n    )\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"MEDIUM\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\")\n  },\n  rows: #\"SYSTEM_SYSRULES_forEach\"(\n    items: if(\n      a!isNullOrEmpty(ri!fields),\n      null,\n      ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n    ),\n    expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n      id: fv!index,\n      contents: {\n        /* Label*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.label],\n          readOnly: true\n        ),\n        /* Required */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.required,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:fe0291f3-cacb-4c7b-b121-8e0689c28629\"\n        ),\n        /* Validation Rule */\n        rule!SHRD_RulePicker(\n          saves: {\n            fv!item[recordType!AIA Extraction Model Version Field.validationRule],\n            ri!fieldsSave\n          },\n          value: fv!item[recordType!AIA Extraction Model Version Field.validationRule],\n          returnType: \"NAME\",\n          ruleInputs: { \"value\" },\n          ruleReturnType: #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n            'type!{http://www.appian.com/ae/types/2009}Text'\n          ),\n          ruleOutputRequired: false,\n          placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\"\n        ),\n        /* Reconcile Instructions */\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.instructions],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.instructions],\n            ri!fieldsSave\n          },\n          characterLimit: 500,\n          showCharacterCount: false\n        ),\n        /* Is Hidden */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.isHidden,\n          defaultValue: false,\n          saveInto: {\n            a!save(\n              fv!item[recordType!AIA Extraction Model Version Field.isNotTracked],\n              if(\n                fv!item[recordType!AIA Extraction Model Version Field.isHidden],\n                true,\n                fv!item[recordType!AIA Extraction Model Version Field.isNotTracked],\n              )\n            ),\n            ri!fieldsSave\n          },\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:6512102e-3415-4732-92e5-d3a6a8f0e06b\"\n        ),\n        /* Is Not Tracked */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          color: if(\n            a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.isHidden], false()),\n            ri!brandingMap.Gray2,\n            null\n          ),\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.isNotTracked,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:5cca3b9f-5d5f-410e-a4e6-14bad0fa7b3a\",\n          linkShowWhen: not(a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.isHidden], false))\n        )\n      }\n    )\n  ),\n  /*height: \"SHORT_PLUS\",*/\n  addRowLink: if(\n    a!isNullOrEmpty(ri!fields),\n    {},\n    #\"SYSTEM_SYSRULES_dynamicLink\"(\n      label: #\"urn:appian:translation-string:v1:fff89312-b0aa-430c-a3e7-bfdc1ca93fcd\",\n      value: {\n        recordType!AIA Extraction Model Version.fields: {\n          recordType!AIA Extraction Model Version Field(\n            recordType!AIA Extraction Model Version Field.key: null(),\n            recordType!AIA Extraction Model Version Field.required: false,\n            recordType!AIA Extraction Model Version Field.type: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n            recordType!AIA Extraction Model Version Field.isMultiple: false,\n            recordType!AIA Extraction Model Version Field.order: if(\n              or(\n                a!isNullOrEmpty(\n                  ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n                ),\n                a!isNullOrEmpty(\n                  index(\n                    index(\n                      ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n                      length(\n                        ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n                      ),\n                      null\n                    ),\n                    recordType!AIA Extraction Model Version Field.order,\n                    null\n                  )\n                )\n              ),\n              1,\n              max(\n                ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n              ) + 1\n            )\n          )\n        }\n      },\n      saveInto: {\n        a!save(\n          ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n          append(\n            ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n            save!value\n          )\n        ),\n        ri!fieldsSave\n      }\n    )\n  ),\n  borderStyle: \"LIGHT\",\n  shadeAlternateRows: false,\n  spacing: \"DENSE\"\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24355": {
      "name": "AIA_ValidateDocumentForGenerateFields",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    a!isNullOrEmpty(ri!inputDocumentExtension),\n    a!isNullOrEmpty(ri!selectedDocumentType)\n  ),\n  \"\",\n  a!match(\n    value: ri!selectedDocumentType,\n    equals: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[1],\n    then: if(\n      or(lower(ri!inputDocumentExtension) = \"txt\"),\n      \"\",\n      #\"urn:appian:translation-string:v1:aa20fbd5-146b-4535-8fde-55341f64553c\"\n    ),\n    equals: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[2],\n    then: if(\n      lower(ri!inputDocumentExtension) = \"pdf\",\n      \"\",\n      #\"urn:appian:translation-string:v1:aa20fbd5-146b-4535-8fde-55341f64553c\"\n    ),\n    default: if(\n      or(\n        lower(ri!inputDocumentExtension) = \"xls\",\n        lower(ri!inputDocumentExtension) = \"xlsx\"\n      ),\n      \"\",\n      #\"urn:appian:translation-string:v1:aa20fbd5-146b-4535-8fde-55341f64553c\"\n    )\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92488": {
      "name": "AIA_MTR_ExtractionInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ecfe-3e3f-8000-9c58-011c48011c48_250488": {
      "name": "SHRD_CalculateSaveValue",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    isnull(ri!type),\n    isnull(ri!value)\n  ),\n  ri!value,\n  if(\n    ri!type = cons!SHRD_FIELD_TYPES[11],\n    cast(1, group(ri!value, \"id\")),\n    if(\n      ri!type = cons!SHRD_FIELD_TYPES[12],\n      cast(3, user(ri!value, \"username\")),\n      if(\n        ri!type = cons!SHRD_FIELD_TYPES[13],\n        cast(1, folder(ri!value, \"id\")),\n        if(\n          ri!type = cons!SHRD_FIELD_TYPES[14],\n          cast(1, document(ri!value, \"id\")),\n          ri!value\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_21089": {
      "name": "AIA_ExtractionModelVersion_Sub_ManageSections",
      "type": "Interface",
      "sail_code": "{\n  /*Model Version Section*/\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!extractionVersion[recordType!AIA Extraction Model Version.sections],\n    expression: a!localVariables(\n      local!sectionTypes: rule!AIA_ENUM_SectionRuleTypes(),\n      local!ruleType: a!refreshVariable(\n        value: if(\n          a!isNullOrEmpty(\n            fv!item[recordType!AIA Extraction Model Version Section.rule]\n          ),\n          cons!AIA_SECTION_RULE_TYPES[4],\n          index(\n            rule!AIA_ExtractJson(\n              json: fv!item[recordType!AIA Extraction Model Version Section.rule]\n            ),\n            \"type\",\n            null\n          )\n        ),\n        refreshOnReferencedVarChange: false()\n      ),\n      local!saveStartPageNum,\n      local!savePageRange,\n      local!currentSectionName: fv!item[recordType!AIA Extraction Model Version Section.name],\n      #\"SYSTEM_SYSRULES_boxLayout\"(\n        showBorder: false(),\n        showShadow: false,\n        style: ri!brandingMap.Blue1,\n        labelHeadingTag: \"H2\",\n        isCollapsible: true,\n        label: fv!item[recordType!AIA Extraction Model Version Section.name],\n        contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: #\"SYSTEM_SYSRULES_columnsLayout\"(\n            marginBelow: \"STANDARD\",\n            columns: {\n              #\"SYSTEM_SYSRULES_columnLayout\"(\n                contents: {\n                  #\"SYSTEM_SYSRULES_textField\"(\n                    validationGroup: \"Sections\",\n                    showCharacterCount: false(),\n                    characterLimit: 255,\n                    label: #\"urn:appian:translation-string:v1:97756af0-87ed-409e-9b21-48f8a868ed3f\",\n                    labelPosition: \"ABOVE\",\n                    value: fv!item[recordType!AIA Extraction Model Version Section.name],\n                    required: true,\n                    saveInto: {\n                      a!save(\n                        local!currentSectionName,\n                        fv!item[recordType!AIA Extraction Model Version Section.name]\n                      ),\n                      a!save(\n                        fv!item[recordType!AIA Extraction Model Version Section.name],\n                        trim(save!value)\n                      ),\n                      a!localVariables(\n                        local!currentSectionFieldIndices: wherecontains(\n                          tostring(local!currentSectionName),\n                          ri!extractionVersion[recordType!AIA Extraction Model Version.fields.section]\n                        ),\n                        if(\n                          a!isNullOrEmpty(local!currentSectionFieldIndices),\n                          {},\n                          a!save(\n                            ri!extractionVersion[recordType!AIA Extraction Model Version.fields][local!currentSectionFieldIndices],\n                            #\"urn:appian:function:v1:a:update\"(\n                              ri!extractionVersion[recordType!AIA Extraction Model Version.fields][local!currentSectionFieldIndices],\n                              recordType!AIA Extraction Model Version Field.section,\n                              save!value\n                            )\n                          )\n                        )\n                      )\n                    },\n                    validations: if(\n                      contains(\n                        touniformstring(\n                          remove(\n                            ri!extractionVersion[recordType!AIA Extraction Model Version.sections.name],\n                            fv!index\n                          )\n                        ),\n                        touniformstring(\n                          fv!item[recordType!AIA Extraction Model Version Section.name]\n                        )\n                      ),\n                      #\"urn:appian:translation-string:v1:b3eac73b-1b82-44e6-963f-01f29ad94be3\",\n                      \"\"\n                    )\n                  ),\n                  #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n                    choiceLayout: \"COMPACT\",\n                    required: true,\n                    label: #\"urn:appian:translation-string:v1:c17e5019-fb41-4029-a751-f40e8bdf8077\",\n                    labelPosition: \"ABOVE\",\n                    choiceLabels: local!sectionTypes.name,\n                    choiceValues: local!sectionTypes.id,\n                    saveInto: {\n                      a!save(local!ruleType, save!value),\n                      a!save(local!savePageRange, null),\n                      a!save(local!saveStartPageNum, null),\n                      a!save(\n                        fv!item[recordType!AIA Extraction Model Version Section.rule],\n                        a!match(\n                          value: save!value,\n                          equals: cons!AIA_SECTION_RULE_TYPES[4],\n                          then: \"\",\n                          default: #\"SYSTEM_SYSRULES_toJson_v1\"(a!map(\"type\": save!value, ))\n                        )\n                      )\n                    },\n                    value: local!ruleType\n                  ),\n                  if(\n                    a!isNotNullOrEmpty(local!ruleType),\n                    rule!SHRD_DynamicForm(\n                      parameters: displayvalue(\n                        local!ruleType,\n                        rule!AIA_ENUM_SectionRuleTypes().id,\n                        rule!AIA_ENUM_SectionRuleTypes().parameters,\n                        {}\n                      ),\n                      fillSettings: fv!item[recordType!AIA Extraction Model Version Section.rule],\n                      saveInto: a!save(\n                        fv!item[recordType!AIA Extraction Model Version Section.rule],\n                        #\"SYSTEM_SYSRULES_toJson_v1\"(\n                          #\"urn:appian:function:v1:a:update\"(\n                            #\"SYSTEM_SYSRULES_fromJson_v1\"(\n                              fv!item[recordType!AIA Extraction Model Version Section.rule]\n                            ),\n                            \"type\",\n                            local!ruleType\n                          )\n                        )\n                      )\n                    ),\n                    {}\n                  )\n                }\n              ),\n              #\"SYSTEM_SYSRULES_columnLayout\"(\n                contents: rule!AIA_Template_RichTextLinkAndIcon(\n                  icon: \"REMOVE\",\n                  altText: #\"urn:appian:translation-string:v1:64b628b1-b2d6-48b4-9f4a-1adf615ce1b1\",\n                  color: ri!brandingMap.Gray4,\n                  brandingMap: ri!brandingMap,\n                  saveInto: {\n                    if(\n                      a!isNotNullOrEmpty(\n                        fv!item[recordType!AIA Extraction Model Version Section.id]\n                      ),\n                      {\n                        a!save(\n                          ri!deletedSections,\n                          append(ri!deletedSections, fv!item)\n                        )\n                      },\n                      {}\n                    ),\n                    a!save(\n                      ri!extractionVersion[recordType!AIA Extraction Model Version.sections],\n                      /*should delete the removed items from the list here and update in the database accordingly*/\n                      remove(\n                        ri!extractionVersion[recordType!AIA Extraction Model Version.sections],\n                        fv!index\n                      )\n                    ),\n                    a!localVariables(\n                      local!currentSectionFieldIndices: wherecontains(\n                        tostring(local!currentSectionName),\n                        ri!extractionVersion[recordType!AIA Extraction Model Version.fields.section]\n                      ),\n                      if(\n                        a!isNullOrEmpty(local!currentSectionFieldIndices),\n                        {},\n                        a!save(\n                          ri!extractionVersion[recordType!AIA Extraction Model Version.fields][local!currentSectionFieldIndices],\n                          #\"urn:appian:function:v1:a:update\"(\n                            ri!extractionVersion[recordType!AIA Extraction Model Version.fields][local!currentSectionFieldIndices],\n                            recordType!AIA Extraction Model Version Field.section,\n                            null()\n                          )\n                        )\n                      )\n                    )\n                  },\n                  showWhen: not(fv!isFirst),\n                  align: \"RIGHT\"\n                ),\n                width: \"EXTRA_NARROW\"\n              )\n            }\n          ),\n          style: if(\n            ri!isForVersion = true(),\n            ri!brandingMap.White,\n            ri!brandingMap.AppianBackground\n          ),\n          showBorder: false\n        ),\n        marginBelow: \"STANDARD\",\n        padding: \"NONE\"\n      )\n    )\n  ),\n  /*Add New Section Link*/\n  rule!AIA_Template_RichTextLinkAndIcon(\n    icon: \"plus-circle\",\n    label: #\"urn:appian:translation-string:v1:9815d39a-6a67-42c6-bd4e-165c9706dab0\",\n    saveInto: a!save(\n      ri!extractionVersion[recordType!AIA Extraction Model Version.sections],\n      append(\n        ri!extractionVersion[recordType!AIA Extraction Model Version.sections],\n        rule!AIA_createRecordExtractionModelVersionSection(\n          sectionName: #\"urn:appian:translation-string:v1:ec83b849-20fb-4443-9da8-8aa081bf443a\"(\n            #\"urn:appian:translation-variable:v1:0e454704-cbd0-4e87-b7e2-1ed70a0869fc\": length(\n              ri!extractionVersion[recordType!AIA Extraction Model Version.sections]\n            ) + 1\n          ),\n          rule: \"\"\n        )\n      )\n    )\n  )\n}"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_203145": {
      "name": "AIA_EXTRACTION_MODEL_VERSION_FIELDS",
      "type": "Expression Rule",
      "sail_code": "{\n  /* Base */\n  recordType!AIA Extraction Model Version.status,\n  recordType!AIA Extraction Model Version.updates,\n  recordType!AIA Extraction Model Version.role,\n  recordType!AIA Extraction Model Version.instructions,\n  recordType!AIA Extraction Model Version.modelId,\n  recordType!AIA Extraction Model Version.versionId,\n  recordType!AIA Extraction Model Version.llm,\n  recordType!AIA Extraction Model Version.useAiReview,\n  recordType!AIA Extraction Model Version.aiReviewLlm,\n  recordType!AIA Extraction Model Version.aiReviewRole,\n  recordType!AIA Extraction Model Version.aiReviewInstructions,\n  recordType!AIA Extraction Model Version.useConfidence,\n  recordType!AIA Extraction Model Version.confidenceThreshold,\n  recordType!AIA Extraction Model Version.useSampling,\n  recordType!AIA Extraction Model Version.samplingRate,\n  recordType!AIA Extraction Model Version.instanceCount,\n  /* Fields */\n  recordType!AIA Extraction Model Version.fields.sectionId,\n  recordType!AIA Extraction Model Version.fields.section,\n  recordType!AIA Extraction Model Version.fields.order,\n  recordType!AIA Extraction Model Version.fields.key,\n  recordType!AIA Extraction Model Version.fields.label,\n  recordType!AIA Extraction Model Version.fields.type,\n  recordType!AIA Extraction Model Version.fields.isMultiple,\n  recordType!AIA Extraction Model Version.fields.description,\n  recordType!AIA Extraction Model Version.fields.instructions,\n  recordType!AIA Extraction Model Version.fields.extractionType,\n  recordType!AIA Extraction Model Version.fields.optionRule,\n  recordType!AIA Extraction Model Version.fields.validationRule,\n  recordType!AIA Extraction Model Version.fields.extractionRule,\n  recordType!AIA Extraction Model Version.fields.postProcessRule,\n  recordType!AIA Extraction Model Version.fields.required,\n  recordType!AIA Extraction Model Version.fields.useVision,\n  recordType!AIA Extraction Model Version.fields.isHidden,\n  recordType!AIA Extraction Model Version.fields.isNotTracked,\n  recordType!AIA Extraction Model Version.fields.useAiReview,\n  /* Columns */\n  recordType!AIA Extraction Model Version.fields.columns.order,\n  recordType!AIA Extraction Model Version.fields.columns.key,\n  recordType!AIA Extraction Model Version.fields.columns.label,\n  recordType!AIA Extraction Model Version.fields.columns.type,\n  recordType!AIA Extraction Model Version.fields.columns.isMultiple,\n  recordType!AIA Extraction Model Version.fields.columns.isHidden,\n  recordType!AIA Extraction Model Version.fields.columns.isNotTracked,\n  recordType!AIA Extraction Model Version.fields.columns.description,\n  recordType!AIA Extraction Model Version.fields.columns.instructions,\n  recordType!AIA Extraction Model Version.fields.columns.extractionType,\n  recordType!AIA Extraction Model Version.fields.columns.optionRule,\n  recordType!AIA Extraction Model Version.fields.columns.validationRule,\n  recordType!AIA Extraction Model Version.fields.columns.extractionRule,\n  recordType!AIA Extraction Model Version.fields.columns.postProcessRule,\n  recordType!AIA Extraction Model Version.fields.columns.required,\n  /* Examples */\n  recordType!AIA Extraction Model Version.examples,\n  /* Sections */\n  recordType!AIA Extraction Model Version.sections.name,\n  recordType!AIA Extraction Model Version.sections.description,\n  recordType!AIA Extraction Model Version.sections.rule,\n  /* Validation Rules */\n  recordType!AIA Extraction Model Version.validationRules.name,\n  recordType!AIA Extraction Model Version.validationRules.message,\n  recordType!AIA Extraction Model Version.validationRules.severity,\n  recordType!AIA Extraction Model Version.validationRules.validations,\n  /* Extraction Model */\n  recordType!AIA Extraction Model Version.extractionModel,\n}"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180867": {
      "name": "AIA_MTR_ExtractionInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_71856": {
      "name": "AIA_Template_RichTextLinkAndIcon",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: a!defaultValue(\n    ri!brandingMap,\n    rule!AIA_UTIL_LoadBrandingMap()\n  ),\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    align: a!defaultValue(ri!align, \"LEFT\"),\n    value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      color: ri!color,\n      text: {\n        #\"SYSTEM_SYSRULES_richTextIcon\"(\n          icon: ri!icon,\n          altText: a!defaultValue(ri!altText, ri!label),\n          caption: ri!label\n        ),\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          showWhen: a!isNotNullOrEmpty(ri!label),\n          text: \" \" & ri!label\n        )\n      },\n      link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n        saveInto: ri!saveInto\n      ),\n      linkStyle: \"STANDALONE\"\n    ),\n    showWhen: a!defaultValue(ri!showWhen, true)\n  )\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_181073": {
      "name": "AIA_GetExtractionOptions",
      "type": "Expression Rule",
      "sail_code": "todatasubset(\n  reject(\n    fn!isnull,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      rule!AIA_ENUM_ExtractionTypes(),\n      if(\n        and(\n          fv!item.enabled = true,\n          or(\n            a!isNullOrEmpty(ri!filterByOptions),\n            contains(ri!filterByOptions, tostring(fv!item.id))\n          )\n        ),\n        fv!item,\n        null\n      )\n    )\n  ),\n  #\"SYSTEM_SYSRULES_pagingInfo\"(\n    1, -1, #\"SYSTEM_SYSRULES_sortInfo\"(field: \"sort\", ascending: true)\n  )\n).data"
    },
    "_a-0000ed1d-549f-8000-9c66-011c48011c48_287313": {
      "name": "AIA_GetModelVersionExamples",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!isExtraction: runtimetypeof(ri!modelVersion) = typeof(\n    recordType!AIA Extraction Model Version()\n  ),\n  local!fields: if(\n    local!isExtraction,\n    a!map(\n      relationship: recordType!AIA Extraction Model Version.examples\n    ),\n    a!map(\n      relationship: recordType!AIA Classification Model Version.examples\n    )\n  ),\n  local!hasExamples: a!isNotNullOrEmpty(\n    reject(\n      fn!isnull,\n      {\n        ri!modelVersion[local!fields.relationship][recordType!AIA Model Version Example.id]\n      }\n    )\n  ),\n  if(\n    local!hasExamples,\n    reject(\n      fn!isnull,\n      #\"SYSTEM_SYSRULES_forEach\"(\n        cast(\n          #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n            recordType!AIA Model Version Example\n          ),\n          #\"SYSTEM_SYSRULES_queryEntity_v2\"(\n            entity: cons!AIA_DSE_MODEL_VERSION_EXAMPLE,\n            query: #\"SYSTEM_SYSRULES_query\"(\n              filter: #\"SYSTEM_SYSRULES_queryFilter\"(\n                field: \"id\",\n                operator: \"in\",\n                value: ri!modelVersion[local!fields.relationship][recordType!AIA Model Version Example.id]\n              ),\n              pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(1, 100)\n            ),\n            fetchTotalCount: false\n          ).data\n        ),\n        if(\n          or(\n            not(local!isExtraction),\n            a!match(\n              value: rule!AIA_ExtractJson(\n                json: fv!item[recordType!AIA Model Version Example.rule]\n              ),\n              whenTrue: or(\n                a!isNullOrEmpty(fv!value),\n                a!isNullOrEmpty(ri!fields)\n              ),\n              then: true,\n              whenTrue: tostring(index(fv!value,\"type\",null())) = \"FIELD\",\n              then: contains(\n                touniformstring(\n                  ri!fields[recordType!AIA Extraction Model Version Field.key]\n                ),\n                tostring(fv!value.field)\n              ),\n              default: true\n            )\n          ),\n          fv!item,\n          null\n        )\n      )\n    ),\n    null\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_79495": {
      "name": "AIA_Extraction_GetFieldOptions",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(\n    ri!ModelVersionField[recordType!AIA Extraction Model Version Field.optionRule]\n  ),\n  a!localVariables(\n    local!optionsRule: a!refreshVariable(\n      refreshAlways: true,\n      value: getrulereferencebyname(\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.optionRule]\n      )\n    ),\n    a!map(options: local!optionsRule())\n  ),\n  null\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_25299": {
      "name": "AIA_ExtractionModel_SaveForGenerateFields",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!blankRow: rule!AIA_Extraction_AddBlankField(\n    fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n    sections:  union(\n      touniformstring(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name]\n      ),\n      touniformstring({})\n    ),\n    extractionModel: ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel],\n    extractionModelVersion: ri!extractionModelVersion\n  ),\n  a!match(\n    value: ri!currentStep,\n    /*Extraction happens only when there is a change if the user navigates back to step 3 and then clicks next*/ \n    whenTrue: and(\n      ri!currentStep = 3,\n      contains(\n        index(cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE, {1,2}),\n        tostring(ri!currentGenerateFieldData.generationFieldType)\n      ),\n      or(\n        or(\n          a!isNotNullOrEmpty(\n            ri!currentGenerateFieldData.uploadedDocument\n          ),\n          a!isNotNullOrEmpty(\n            ri!currentGenerateFieldData.describeFieldDescription\n          )\n        )\n      ),\n      or(\n        tostring(\n          ri!currentGenerateFieldData.generationFieldType\n        ) <> tostring(\n          ri!oldGenerateFieldData.generationFieldType\n        ),\n        todocument(\n          ri!currentGenerateFieldData.uploadedDocument\n        ) <> todocument(\n          ri!oldGenerateFieldData.uploadedDocument\n        ),\n        tostring(\n          ri!currentGenerateFieldData.describeFieldDescription\n        ) <> tostring(\n          ri!oldGenerateFieldData.describeFieldDescription\n        )\n      )\n    ),\n    then: #\"SYSTEM_SYSRULES_startProcess3\"(\n      processModel: cons!AIA_PM_PREDICT_FIELDS,\n      processParameters: {\n        generateFieldData: ri!currentGenerateFieldData\n      },\n      isSynchronous: true,\n      onSuccess: {\n        a!save(\n          ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n          append(\n            ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: rule!AIA_ParseFieldResults(\n                response: fv!processInfo.pv.response,\n                model: ri!extractionModel\n              ),\n              expression: #\"urn:appian:function:v1:a:update\"(\n                fv!item,\n                recordType!AIA Extraction Model Version Field.order,\n                max(\n                  a!defaultValue(\n                    ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.order],\n                    0\n                  )\n                ) + fv!index\n              )\n            )\n          )\n        ),\n        a!save(\n          ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items:ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n            expression: a!localVariables(\n              local!sectionCount: length(\n                ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name]\n              ) > 1,\n              if(\n                local!sectionCount,\n                #\"urn:appian:function:v1:a:update\"(\n                  fv!item,\n                  recordType!AIA Extraction Model Version Field.section,\n                  null\n                ),\n                #\"urn:appian:function:v1:a:update\"(\n                  fv!item,\n                  recordType!AIA Extraction Model Version Field.section,\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name],\n                )\n              )\n            )\n          )\n        ),\n        /* Remove blank row */\n        a!save(\n          ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n          reject(\n            fn!isnull,\n            a!localVariables(\n              local!blankRow: rule!AIA_Extraction_AddBlankField(\n                fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                extractionModel: ri!extractionModel,\n                extractionModelVersion: ri!extractionModelVersion,\n                sections: union(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name],\n                  { \"\" }\n                )\n              ),\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                expression: if(\n                  rule!AIA_Extraction_DoFieldsMatch(\n                    field1: fv!item,\n                    field2: local!blankRow\n                  ),\n                  null,\n                  fv!item\n                )\n              )\n            )\n          )\n        ),\n        a!save(\n          ri!oldGenerateFieldData,\n          ri!currentGenerateFieldData\n        )\n      }\n    ),\n    /*If user submits `Manual Configuration` and has no fields, create a blank row*/\n    whenTrue: and(\n      ri!currentGenerateFieldData.generationFieldType = cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[3],\n      a!isNullOrEmpty(ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields])\n    ),\n    then: a!save(\n      ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n      {\n        local!blankRow\n      }\n    ), \n    default: null\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_76645": {
      "name": "SHRD_ReformatKeyAsLabel",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!removePrefix: regexreplaceall(\n    \"[A-Z]{3,4}[_ ](.*)\",\n    ri!key,\n    \"$1\"\n  ),\n  local!words: split(substitute(local!removePrefix, \"_\", \" \"), \" \"),\n  local!proper: trim(proper(joinarray(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!words,\n      expression: regexreplaceall(\n        \"([a-z])([A-Z])\",\n        fv!item,\n        \"$1 $2\"\n      )\n    ),\n    \" \"\n  ))),\n  regexreplaceall(\"(^Id$|(.* )Id|(.* )Id( .*))\", local!proper, \"$2ID$3\"), \n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_50191": {
      "name": "AIA_Extraction_AddBlankField",
      "type": "Expression Rule",
      "sail_code": "recordType!AIA Extraction Model Version Field(\n  recordType!AIA Extraction Model Version Field.section: if(\n    a!isNullOrEmpty(ri!fields),\n    index(ri!sections, 1, null),\n    index(\n      index(ri!fields, length(ri!fields), null),\n      recordType!AIA Extraction Model Version Field.section,\n      null\n    )\n  ),\n  recordType!AIA Extraction Model Version Field.extractionType: a!defaultValue(\n    ri!extractionModel[recordType!AIA Extraction Model.type],\n    ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel.type]\n  ),\n  recordType!AIA Extraction Model Version Field.key: null(),\n  recordType!AIA Extraction Model Version Field.required: false,\n  recordType!AIA Extraction Model Version Field.type: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n  recordType!AIA Extraction Model Version Field.isMultiple: false,\n  recordType!AIA Extraction Model Version Field.order: if(\n    or(\n      a!isNullOrEmpty(\n        ri!fields\n      ),\n      a!isNullOrEmpty(\n        index(\n          index(\n            ri!fields,\n            length(\n              ri!fields\n            ),\n            null\n          ),\n          recordType!AIA Extraction Model Version Field.order,\n          null\n        )\n      )\n    ),\n    1,\n    max(\n      ri!fields[recordType!AIA Extraction Model Version Field.order]\n    ) + 1\n  )\n)"
    },
    "_a-0000ecfe-3e3f-8000-9c58-011c48011c48_250439": {
      "name": "SHRD_DynamicForm",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*local!value,*/\n  local!output: if(\n    or(\n      a!isNullOrEmpty(ri!fillSettings),\n      ri!fillSettings = \"null\"\n    ),\n    #\"SYSTEM_SYSRULES_fromJson_v1\"(\"{}\"),\n    #\"SYSTEM_SYSRULES_fromJson_v1\"(ri!fillSettings)\n  ),\n  if(\n    a!isNullOrEmpty(ri!parameters),\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      accessibilityText: #\"urn:appian:translation-string:v1:f82ff7e1-f22c-40bd-8ad3-5691a8cd5628\",\n      label: #\"urn:appian:translation-string:v1:f82ff7e1-f22c-40bd-8ad3-5691a8cd5628\",\n      labelPosition: \"COLLAPSED\",\n      value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n        style: \"EMPHASIS\",\n        text: \"No parameters\"\n      )\n    ),\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!parameters,\n      expression: a!match(\n        value: fv!item.type,\n        equals: cons!SHRD_FIELD_TYPES[1],\n        /* String */\n        then: #\"SYSTEM_SYSRULES_textField\"(\n          label: fv!item.label,\n          instructions: fv!item.instructions,\n          required: fv!item.required,\n          saveInto: {\n            rule!SHRD_UpdateFieldSaves(\n              name: fv!item.name,\n              outputDictionary: local!output,\n              outputJson: ri!fillSettings,\n            ),\n            ri!saveInto\n          },\n          readOnly: if(toboolean(fv!item.readOnly) = true, true, false),\n          value: index(local!output, fv!item.name, \"\")\n        ),\n        /* String List */\n        /*rule!DG_UpdateParameterWeightedItem(*/\n          /*item: fv!item,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*output: local!output,*/\n        /*),*/\n        /* Integer */\n        equals: cons!SHRD_FIELD_TYPES[3],\n        then: #\"SYSTEM_SYSRULES_integerField\"(\n          label: fv!item.label,\n          instructions: fv!item.instructions,\n          required: fv!item.required,\n          saveInto: {\n            rule!SHRD_UpdateFieldSaves(\n              name: fv!item.name,\n              outputDictionary: local!output,\n              outputJson: ri!fillSettings,\n            ),\n            ri!saveInto\n          },\n          value: index(local!output, fv!item.name, \"\")\n        ),\n        /* Integer List */\n        /*rule!DG_UpdateParameterWeightedItem(*/\n          /*item: fv!item,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*output: local!output,*/\n        /*),*/\n        /* Double */\n        equals: cons!SHRD_FIELD_TYPES[5],\n        then: #\"SYSTEM_SYSRULES_floatingPointField\"(\n          label: fv!item.label,\n          instructions: fv!item.instructions,\n          required: fv!item.required,\n          saveInto: {\n            rule!SHRD_UpdateFieldSaves(\n              name: fv!item.name,\n              outputDictionary: local!output,\n              outputJson: ri!fillSettings,\n            ),\n            ri!saveInto\n          },\n          value: index(local!output, fv!item.name, \"\")\n        ),\n        /* Double List */\n        /*rule!DG_UpdateParameterWeightedItem(*/\n          /*item: fv!item,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*output: local!output,*/\n        /*),*/\n        /* Date */\n        equals: cons!SHRD_FIELD_TYPES[7],\n        then: #\"SYSTEM_SYSRULES_dateField\"(\n          label: fv!item.label,\n          instructions: fv!item.instructions,\n          required: fv!item.required,\n          saveInto: {\n            rule!SHRD_UpdateFieldSaves(\n              name: fv!item.name,\n              outputDictionary: local!output,\n              outputJson: ri!fillSettings,\n            ),\n            ri!saveInto\n          },\n          value: index(local!output, fv!item.name, \"\")\n        ),\n        /* Date List */\n        /*rule!DG_UpdateParameterWeightedItem(*/\n          /*item: fv!item,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*output: local!output,*/\n        /*),*/\n        /* DateTime */\n        equals: cons!SHRD_FIELD_TYPES[9],\n        then: #\"SYSTEM_SYSRULES_dateTimeField\"(\n          label: fv!item.label,\n          instructions: fv!item.instructions,\n          required: fv!item.required,\n          saveInto: {\n            rule!SHRD_UpdateFieldSaves(\n              name: fv!item.name,\n              outputDictionary: local!output,\n              outputJson: ri!fillSettings,\n            ),\n            ri!saveInto\n          },\n          value: index(local!output, fv!item.name, \"\")\n        ),\n        /* DateTime List */\n        /*rule!DG_UpdateParameterWeightedItem(*/\n          /*item: fv!item,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*output: local!output,*/\n        /*),*/\n        /* Group */\n        /*a!pickerFieldGroups(*/\n          /*label: fv!item.label,*/\n          /*instructions: fv!item.instructions,*/\n          /*required: fv!item.required,*/\n          /*maxSelections: 1,*/\n          /*value: if(*/\n            /*isnull(index(local!output, fv!item.name, null)),*/\n            /*null,*/\n            /*togroup(index(local!output, fv!item.name, null))*/\n          /*),*/\n          /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n            /*name: fv!item.name,*/\n            /*outputDictionary: local!output,*/\n            /*outputJson: ri!fillSettings,*/\n            /*table: ri!table,*/\n            /*column: ri!column,*/\n            /*type: \"group\",*/\n            /*applicationId: ri!applicationId*/\n          /*),*/\n        /*),*/\n        /* User */\n        /*a!pickerFieldUsers(*/\n          /*label: fv!item.label,*/\n          /*instructions: fv!item.instructions,*/\n          /*required: fv!item.required,*/\n          /*maxSelections: 1,*/\n          /*value: if(*/\n            /*isnull(index(local!output, fv!item.name, null)),*/\n            /*null,*/\n            /*touser(index(local!output, fv!item.name, null))*/\n          /*),*/\n          /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n            /*name: fv!item.name,*/\n            /*outputDictionary: local!output,*/\n            /*outputJson: ri!fillSettings,*/\n            /*table: ri!table,*/\n            /*column: ri!column,*/\n            /*type: \"user\",*/\n            /*applicationId: ri!applicationId*/\n          /*),*/\n        /*),*/\n        /* Folder */\n        /*a!pickerFieldFolders(*/\n          /*label: fv!item.label,*/\n          /*instructions: fv!item.instructions,*/\n          /*required: fv!item.required,*/\n          /*maxSelections: 1,*/\n          /*value: if(*/\n            /*isnull(index(local!output, fv!item.name, null)),*/\n            /*null,*/\n            /*tofolder(index(local!output, fv!item.name, null))*/\n          /*),*/\n          /*saveInto: {*/\n            /*a!save(*/\n              /*target: local!value,*/\n              /*value: if(*/\n                /*count(save!value) = 0,*/\n                /*\"null\",*/\n                /*save!value*/\n              /*)*/\n            /*),*/\n            /*rule!SHRD_UpdateFieldSaves(*/\n              /*name: fv!item.name,*/\n              /*outputDictionary: local!output,*/\n              /*outputJson: ri!fillSettings,*/\n              /*table: ri!table,*/\n              /*column: ri!column,*/\n              /*type: \"folder\",*/\n              /*applicationId: ri!applicationId*/\n            /*)*/\n          /*}*/\n        /*),*/\n        /* Document */\n        /*a!pickerFieldDocuments(*/\n          /*label: fv!item.label,*/\n          /*instructions: fv!item.instructions,*/\n          /*required: fv!item.required,*/\n          /*maxSelections: 1,*/\n          /*value: if(*/\n            /*isnull(index(local!output, fv!item.name, null)),*/\n            /*null,*/\n            /*todocument(index(local!output, fv!item.name, null))*/\n          /*),*/\n          /*saveInto: {*/\n            /*a!save(*/\n              /*target: local!value,*/\n              /*value: if(*/\n                /*count(save!value) = 0,*/\n                /*\"null\",*/\n                /*if(*/\n                  /*typeof(save!value) = 113,*/\n                  /*cast(13, save!value),*/\n                  /*save!value*/\n                /*)*/\n              /*)*/\n            /*),*/\n            /*rule!SHRD_UpdateFieldSaves(*/\n              /*value: local!value,*/\n              /*name: fv!item.name,*/\n              /*outputDictionary: local!output,*/\n              /*outputJson: ri!fillSettings,*/\n              /*table: ri!table,*/\n              /*column: ri!column,*/\n              /*type: \"document\",*/\n              /*applicationId: ri!applicationId*/\n            /*)*/\n          /*}*/\n        /*),*/\n        /* Boolean Slider */\n        /*rule!DG_BooleanSlider(*/\n          /*fillSettings: ri!fillSettings,*/\n          /*output: local!output,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId,*/\n          /*item: fv!item*/\n        /*),*/\n        /* Boolean */\n        /*a!radioButtonField_23r3(*/\n          /*label: fv!item.label,*/\n          /*instructions: fv!item.instructions,*/\n          /*choiceLabels: {\"True\", \"False\"},*/\n          /*choiceValues: {1, 0},*/\n          /*choiceLayout: \"COMPACT\",*/\n          /*required: fv!item.required,*/\n          /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n            /*name: fv!item.name,*/\n            /*outputDictionary: local!output,*/\n            /*outputJson: ri!fillSettings,*/\n            /*table: ri!table,*/\n            /*column: ri!column,*/\n            /*applicationId: ri!applicationId*/\n          /*),*/\n          /*value: index(local!output, fv!item.name, \"\")*/\n        /*),*/\n        /* Foreign Key Tables */\n        /*a!localVariables(*/\n          /*local!tables: rule!DG_GetTablesForApplication(*/\n            /*selection: a!querySelection(*/\n              /*columns: {*/\n                /*a!queryColumn(*/\n                  /*field: \"name\"*/\n                /*)*/\n              /*}*/\n            /*),*/\n            /*applicationId: ri!applicationId,*/\n            /*export: true,*/\n            /*pagingInfo: a!pagingInfo(*/\n              /*startIndex: 1,*/\n              /*batchSize: -1,*/\n              /*sort: a!sortInfo(*/\n                /*field: \"name\",*/\n                /*ascending: true*/\n              /*)*/\n            /*),*/\n            /*fetchTotalCount: true*/\n          /*),*/\n          /*if(*/\n            /*or(*/\n              /*local!tables.totalCount = 0,*/\n              /*and(*/\n                /*not(isnull(index(local!output, fv!item.name, null))),*/\n                /*not(contains(touniformstring(local!tables.data.name), tostring(index(local!output, fv!item.name, null))))*/\n              /*)*/\n            /*),*/\n            /*a!textField(*/\n              /*label: fv!item.label,*/\n              /*instructions: fv!item.instructions,*/\n              /*required: fv!item.required,*/\n              /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n                /*name: fv!item.name,*/\n                /*outputDictionary: local!output,*/\n                /*outputJson: ri!fillSettings,*/\n                /*table: ri!table,*/\n                /*column: ri!column,*/\n                /*applicationId: ri!applicationId*/\n              /*),*/\n              /*readOnly: if(toboolean(fv!item.readOnly) = true, true, false),*/\n              /*value: index(local!output, fv!item.name, \"\")*/\n            /*),*/\n            /*a!dropdownField_20r2(*/\n              /*label: fv!item.label,*/\n              /*instructions: fv!item.instructions,*/\n              /*required: fv!item.required,*/\n              /*choiceValues: local!tables.data.name,*/\n              /*choiceLabels: local!tables.data.name,*/\n              /*value: index(local!output, fv!item.name, null),*/\n              /*placeholder: \"--Select \" & fv!item.label & \"--\",*/\n              /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n                /*name: fv!item.name,*/\n                /*outputDictionary: local!output,*/\n                /*outputJson: ri!fillSettings,*/\n                /*table: ri!table,*/\n                /*column: ri!column,*/\n                /*applicationId: ri!applicationId*/\n              /*)*/\n            /*)*/\n          /*)*/\n        /*),*/\n        /* Foreign Key Columns */\n        /*a!localVariables(*/\n          /*local!table: index(a!fromJson(ri!fillSettings), \"table\", null),*/\n          /*local!results: if(*/\n            /*isnull(local!table),*/\n            /*null,*/\n            /*rule!DG_RetrieveColumnsForTable(*/\n              /*application: rule!DG_GetApplication(*/\n                /*applicationId: ri!applicationId*/\n              /*),*/\n              /*table: 'type!{urn:com:appian:types:DG}DG_Table'(name: local!table)*/\n            /*)*/\n          /*),*/\n          /*if(*/\n            /*or(*/\n              /*isnull(local!table),*/\n              /*length(local!results) = 0,*/\n              /*and(*/\n                /*not(isnull(index(local!output, fv!item.name, null))),*/\n                /*not(contains(touniformstring(local!results.field), tostring(index(local!output, fv!item.name, null))))*/\n              /*)*/\n            /*),*/\n            /*a!textField(*/\n              /*label: fv!item.label,*/\n              /*instructions: fv!item.instructions,*/\n              /*required: fv!item.required,*/\n              /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n                /*name: fv!item.name,*/\n                /*outputDictionary: local!output,*/\n                /*outputJson: ri!fillSettings,*/\n                /*table: ri!table,*/\n                /*column: ri!column,*/\n                /*applicationId: ri!applicationId*/\n              /*),*/\n              /*readOnly: if(toboolean(fv!item.readOnly) = true, true, false),*/\n              /*value: index(local!output, fv!item.name, \"\")*/\n            /*),*/\n            /*a!dropdownField_20r2(*/\n              /*label: fv!item.label,*/\n              /*instructions: fv!item.instructions,*/\n              /*required: fv!item.required,*/\n              /*choiceValues: local!results.field,*/\n              /*choiceLabels: local!results.field,*/\n              /*value: index(local!output, fv!item.name, null),*/\n              /*placeholder: \"--Select \" & fv!item.label & \"--\",*/\n              /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n                /*name: fv!item.name,*/\n                /*outputDictionary: local!output,*/\n                /*outputJson: ri!fillSettings,*/\n                /*table: ri!table,*/\n                /*column: ri!column,*/\n                /*applicationId: ri!applicationId*/\n              /*)*/\n            /*)*/\n          /*)*/\n        /*),*/\n        /* Constant Int */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 1,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Double */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 2,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant String */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 3,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Date */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 7,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Datetime */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 9,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Group */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 5,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Group */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 4,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Folder */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 12,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Constant Document */\n        /*rule!DG_SuggestConstantField(*/\n          /*value: local!value,*/\n          /*typeId: 13,*/\n          /*item: fv!item,*/\n          /*output: local!output,*/\n          /*fillSettings: ri!fillSettings,*/\n          /*table: ri!table,*/\n          /*column: ri!column,*/\n          /*applicationId: ri!applicationId*/\n        /*),*/\n        /* Dropdown List */\n        /*a!dropdownField_20r2(*/\n          /*label: fv!item.label,*/\n          /*instructions: fv!item.instructions,*/\n          /*required: fv!item.required,*/\n          /*choiceValues: a!forEach(*/\n            /*fv!item.items,*/\n            /*fv!item*/\n          /*),*/\n          /*choiceLabels: a!forEach(*/\n            /*fv!item.items,*/\n            /*fv!item*/\n          /*),*/\n          /*value: tostring(index(local!output, fv!item.name, null)),*/\n          /*placeholder: \"--Select \" & fv!item.label & \"--\",*/\n          /*saveInto: rule!SHRD_UpdateFieldSaves(*/\n            /*name: fv!item.name,*/\n            /*outputDictionary: local!output,*/\n            /*outputJson: ri!fillSettings,*/\n            /*table: ri!table,*/\n            /*column: ri!column,*/\n            /*applicationId: ri!applicationId*/\n          /*)*/\n        /*)*/\n        default: {},\n      )\n    )\n  )\n)"
    },
    "_a-0000ecea-6c5f-8000-9c4b-011c48011c48_190177": {
      "name": "AIA_Extraction_DisplayPromptField",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!mode,\n  whenTrue: a!isNullOrEmpty(ri!field[recordType!AIA Extraction Model Version Field.key]),\n  then: false,\n  equals: cons!AIA_SCHEMA_MODE_AI_REVIEW,\n  then: a!defaultValue(ri!field[recordType!AIA Extraction Model Version Field.useAiReview], false) = true,\n  equals: cons!AIA_PROMPT_MODE_CALCULATED,\n  then: or(\n    ri!field[recordType!AIA Extraction Model Version Field.extractionType] = cons!AIA_EXTRACTION_TYPES[4],\n    and(\n      ri!field[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n      contains(\n        touniformstring(\n          ri!field[recordType!AIA Extraction Model Version Field.columns.extractionType]\n        ),\n        cons!AIA_EXTRACTION_TYPES[4]\n      )\n    )\n  ),\n  default: and(\n    /* Filter out field by section */\n    or(\n      and(\n        a!isNullOrEmpty(ri!sectionFilter),\n        a!isNullOrEmpty(ri!sectionId)\n      ),\n      and(\n        a!isNotNullOrEmpty(ri!sectionFilter),\n        a!isNotNullOrEmpty(\n          ri!field[recordType!AIA Extraction Model Version Field.section]\n        ),\n        ri!field[recordType!AIA Extraction Model Version Field.section] = ri!sectionFilter\n      ),\n      or(\n        and(\n          a!isNotNullOrEmpty(ri!sectionId),\n          a!isNotNullOrEmpty(\n            ri!field[recordType!AIA Extraction Model Version Field.sectionId]\n          ),\n          ri!field[recordType!AIA Extraction Model Version Field.sectionId] = ri!sectionId\n        ),\n        and(\n          a!isNotNullOrEmpty(ri!sectionId),\n          a!isNullOrEmpty(\n            ri!field[recordType!AIA Extraction Model Version Field.sectionId]\n          ),\n          ri!sectionId = - 1\n        )\n      )\n    ),\n    /* Filter out field by extraction type - Generative AI */\n    or(\n      ri!field[recordType!AIA Extraction Model Version Field.extractionType] = cons!AIA_EXTRACTION_TYPES[1],\n      a!isNullOrEmpty(\n        ri!field[recordType!AIA Extraction Model Version Field.extractionType]\n      )\n    ),\n    /* Filter out field by operation type */\n    or(\n      /* Filter out field by operation type - Generative AI - Text */\n      and(\n        or(\n          a!isNullOrEmpty(ri!operation),\n          ri!operation = cons!AIA_PROMPT_OPERATION_MODE_TEXT\n        ),\n        or(\n          a!isNullOrEmpty(ri!field[recordType!AIA Extraction Model Version Field.useVision]),\n          ri!field[recordType!AIA Extraction Model Version Field.useVision] = false,\n        )\n      ),\n      /* Filter out field by operation type - Generative AI - Vision */\n      and(\n        ri!operation = cons!AIA_PROMPT_OPERATION_MODE_MULTIMODAL,\n        or(\n          and(\n            a!isNotNullOrEmpty(ri!field[recordType!AIA Extraction Model Version Field.useVision]),\n            ri!field[recordType!AIA Extraction Model Version Field.useVision] = true\n          ),\n          and(\n            a!isNotNullOrEmpty(ri!parentField[recordType!AIA Extraction Model Version Field.useVision]),\n            ri!parentField[recordType!AIA Extraction Model Version Field.useVision] = true\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92571": {
      "name": "AIA_MTR_ExtractionInstanceAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ecfc-48c9-8000-9c55-011c48011c48_234937": {
      "name": "AIA_ENUM_LlmVersions",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!allModels: a!flatten(\n    {\n      a!map(\n        label: \"Anthropic Claude Haiku 3.0 (Fast)\",\n        value: cons!AIA_MODEL_HAIKU_3,\n      ),\n      a!map(\n        label: \"Anthropic Claude Haiku 4.5 (Fast)\",\n        value: cons!AIA_MODEL_HAIKU_4_5,\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 3.0 (Legacy, Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_3,\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 3.5 (Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_3_5\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 3.7 (Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_3_7\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 4.5 (Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_4_5\n      ),\n      if(\n        ri!includeVision,\n        {\n          /*model values iwth | to split name and mode are used in AI Reviewer/Judge*/\n          a!map(\n            label: \"Anthropic Claude Haiku 4.5 (Vision)\",\n            value: cons!AIA_MODEL_HAIKU_4_5_MULTIMODAL,\n          ),\n          a!map(\n            label: \"Anthropic Claude Sonnet 3.5 (Vision)\",\n            value: cons!AIA_MODEL_SONNET_3_5_MULTIMODAL\n          ),\n          a!map(\n            label: \"Anthropic Claude Sonnet 3.7 (Vision)\",\n            value: cons!AIA_MODEL_SONNET_3_7_MULTIMODAL\n          ),\n          a!map(\n            label: \"Anthropic Claude Sonnet 4.5 (Vision)\",\n            value: cons!AIA_MODEL_SONNET_4_5_MULTIMODAL\n          )\n        },\n        null\n      )\n    }\n  ),\n  if(\n    a!defaultValue(ri!returnOnlySupportedLlms, true),\n    a!localVariables(\n      local!supportedModels: a!genAiModels(),\n      reject(\n        fn!isnull,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!allModels,\n          expression: if(\n            or(\n              a!isNullOrEmpty(fv!item.value),\n              contains(\n                touniformstring(local!supportedModels.id),\n                tostring(split(fv!item.value,\"|\")[1])\n              )\n            ),\n            fv!item,\n            null\n          )\n        )\n      )\n    ),\n    local!allModels\n  )\n)"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179359": {
      "name": "AIA_MTR_ConfidenceThresholdDisabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_33494": {
      "name": "AIA_UTIL_cardAsTabs",
      "type": "Interface",
      "sail_code": "if(\n  a!defaultValue(ri!showWhen, true),\n  {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!tabs,\n          expression: #\"SYSTEM_SYSRULES_columnLayout\"(\n            contents: {\n              #\"SYSTEM_SYSRULES_cardLayout\"(\n                contents: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: {\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: fv!item.label,\n                      style: if(\n                        fv!index = ri!currentTab,\n                        \"STRONG\",\n                        \"PLAIN\"\n                      )\n                    ),\n                    if(\n                      a!isNullOrEmpty(fv!item.count),\n                      {},\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: { \" \", concat(\"(\", fv!item.count, \")\") },\n                        style: if(\n                          fv!index = ri!currentTab,\n                          \"STRONG\",\n                          \"PLAIN\"\n                        )\n                      )\n                    )\n                  },\n                  accessibilityText: if(\n                    fv!index = ri!currentTab,\n                    #\"urn:appian:translation-string:v1:c4fe0b43-af2b-44c8-b102-eef93af6d4c3\",\n                    \"\"\n                  ),\n                  align: \"CENTER\"\n                ),\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  value: fv!index,\n                  saveInto: { ri!currentTab },\n                  showWhen: and(\n                    fv!item <> \" \",\n                    a!defaultValue(ri!isClickable, true)\n                  )\n                ),\n                accessibilityText: if(\n                  fv!index = ri!currentTab,\n                  #\"urn:appian:translation-string:v1:c4fe0b43-af2b-44c8-b102-eef93af6d4c3\",\n                  {}\n                ),\n                marginBelow: \"NONE\",\n                height: \"AUTO\",\n                style: if(\n                  fv!index = ri!currentTab,\n                  \"#F2F4FD\",\n                  \"TRANSPARENT\"\n                ),\n                showBorder: false(),\n                padding: \"LESS\"\n              ),\n              #\"SYSTEM_SYSRULES_horizontalLine\"(\n                marginBelow: \"NONE\",\n                color: if(\n                  ri!currentTab = fv!index,\n                  ri!brandingMap.AccentColor,\n                  ri!brandingMap.Gray1\n                ),\n                weight: \"MEDIUM\"\n              )\n            },\n            showWhen: a!defaultValue(fv!item.showWhen, true),\n            width: \"MEDIUM\"\n          )\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_horizontalLine\"(\n              marginAbove: \"EVEN_LESS\",\n              marginBelow: \"NONE\",\n              color: ri!brandingMap.Gray1,\n              weight: \"MEDIUM\"\n            )\n          },\n          width: \"AUTO\"\n        )\n      },\n      marginBelow: \"NONE\",\n      alignVertical: \"BOTTOM\",\n      spacing: \"NONE\"\n    )\n  },\n  {}\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_181061": {
      "name": "AIA_ENUM_ExtractionTypes",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[1],\n    label: #\"urn:appian:translation-string:v1:0a45afc5-af72-4009-8441-7caf2ce7509d\",\n    enabled: true,\n    order: 1,\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[2],\n    label: #\"urn:appian:translation-string:v1:b43f9d55-081b-4acc-8fa8-ea39cce19ef1\",\n    enabled: false,\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[3],\n    label: #\"urn:appian:translation-string:v1:af1495f1-ddf0-446b-a3f4-5bacc9101672\",\n    enabled: true,\n    order: 2\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[4],\n    label: #\"urn:appian:translation-string:v1:70518a8c-ce77-4cad-b82d-c0341a567d47\",\n    enabled: true,\n    order: 3\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[5],\n    label: #\"urn:appian:translation-string:v1:4b200656-fadb-4ecc-98d6-fa93e9152840\",\n    enabled: true,\n    order: 4\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[6],\n    label: #\"urn:appian:translation-string:v1:463557e5-81de-4afd-a43a-1219bbfe9083\",\n    enabled: true,\n    order: 5\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[7],\n    label: #\"urn:appian:translation-string:v1:7d663cf5-06ab-4445-979d-17074d9928f9\",\n    enabled: true,\n    order: 7\n  ),\n  a!map(\n    id: cons!AIA_EXTRACTION_TYPES[8],\n    label: #\"urn:appian:translation-string:v1:7e110f3d-3c42-423f-b928-fc2004068280\",\n    enabled: false,\n    order: 6\n  )\n}"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_29473": {
      "name": "AIA_ExtractionModelVersion_Sub_PromptExamples",
      "type": "Interface",
      "sail_code": "rule!AIA_PromptExamples(\n  modelVersion: ri!extractionModelVersion,\n  deletedExamples: ri!deletedExamples,\n  brandingMap: ri!brandingMap,\n  relationshipExamples: recordType!AIA Extraction Model Version.examples,\n  fieldModelVersionId: recordType!AIA Extraction Model Version.modelVersionId\n)"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40544": {
      "name": "AIA_ExtractionModelVersion_InitializeNewVersion",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!previousVersionId: if(\n    a!isNullOrEmpty(ri!ExtractionModel),\n    null,\n    index(\n      index(\n        #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n          recordType: recordType!AIA Extraction Model Version,\n          filters: {\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: recordType!AIA Extraction Model Version.modelId,\n              operator: \"=\",\n              value: ri!ExtractionModel[recordType!AIA Extraction Model.modelId]\n            )\n          },\n          pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n            startIndex: 1,\n            batchSize: 1,\n            sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n              field: recordType!AIA Extraction Model Version.versionId,\n              ascending: false\n            )\n          )\n        ).data,\n        1,\n        null\n      ),\n      recordType!AIA Extraction Model Version.modelVersionId,\n      null\n    )\n  ),\n  local!previousVersion: a!defaultValue(\n    ri!ExtractionModelVersion,\n    if(\n      a!isNullOrEmpty(local!previousVersionId),\n      null,\n      rule!AIA_Extraction_GetModelVersionById(\n        identifier: local!previousVersionId\n      )\n    ),\n  ),\n  /* Updates:\n  - Set primary keys for *fields*, *sections*, and *examples* to -1\n  - Set *modelVersionId* to null\n  - Update *versionId* to one higher than max version\n  - Set *status* to Draft\n  - Set *updates* to null\n  - Rest of fields stay the same\n  */\n  #\"urn:appian:function:v1:a:update\"(\n    #\"urn:appian:function:v1:a:update\"(\n      #\"urn:appian:function:v1:a:update\"(\n        #\"urn:appian:function:v1:a:update\"(\n          local!previousVersion,\n          recordType!AIA Extraction Model Version.fields,\n          /* Fields */\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!previousVersion[recordType!AIA Extraction Model Version.fields],\n            expression: #\"urn:appian:function:v1:a:update\"(\n              #\"urn:appian:function:v1:a:update\"(\n                fv!item,\n                {\n                  recordType!AIA Extraction Model Version Field.fieldId,\n                  recordType!AIA Extraction Model Version Field.sectionId\n                },\n                {-1, null}\n              ),\n              recordType!AIA Extraction Model Version Field.columns,\n              #\"SYSTEM_SYSRULES_forEach\"(\n                fv!item[recordType!AIA Extraction Model Version Field.columns],\n                #\"urn:appian:function:v1:a:update\"(\n                  fv!item,\n                  {\n                    recordType!AIA Extraction Model Version Field.fieldId,\n                    recordType!AIA Extraction Model Version Field.parentFieldId\n                  },\n                  {-1, null}\n                )\n              )\n            )\n          )\n        ),\n        recordType!AIA Extraction Model Version.sections,\n        /* Sections */\n        #\"SYSTEM_SYSRULES_forEach\"(\n          local!previousVersion[recordType!AIA Extraction Model Version.sections],\n          #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            recordType!AIA Extraction Model Version Section.id,\n            null\n          )\n        )\n      ),\n      recordType!AIA Extraction Model Version.examples,\n      /* Examples */\n      if(\n        a!isNullOrEmpty(local!previousVersion[recordType!AIA Extraction Model Version.examples]),\n        {},\n        #\"urn:appian:function:v1:a:update\"(\n          local!previousVersion[recordType!AIA Extraction Model Version.examples],\n          recordType!AIA Model Version Example.id,\n          null\n        )\n      ),\n    ),\n    {\n      recordType!AIA Extraction Model Version.modelVersionId,\n      recordType!AIA Extraction Model Version.status,\n      recordType!AIA Extraction Model Version.versionId,\n      recordType!AIA Extraction Model Version.updates\n    },\n    {\n      /* Model Version Id */\n      null, \n      /* Status */\n      cons!AIA_MODEL_VERSION_STATUS_DRAFT,\n      /* Version Id */\n      a!defaultValue(\n        ri!ExtractionModel[recordType!AIA Extraction Model.maxVersion], \n        ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.extractionModel.maxVersion],\n        0\n      ) + 1,\n      /* Updates */\n      if(\n        a!isNotNullOrEmpty(ri!ExtractionModelVersion),\n        #\"urn:appian:translation-string:v1:e20e8a30-36b0-48cf-b107-7710fdc350c7\"(#\"urn:appian:translation-variable:v1:c636a6b2-4ebc-451c-927e-95ef2198788e\":  ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.versionId]),\n        null\n      )\n    }\n  )\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_74498": {
      "name": "AIA_ExtractionModelVersion_ValidateReconciliationTab",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!showValidation,\n  #\"SYSTEM_SYSRULES_validationMessage\"(\n    message: #\"urn:appian:translation-string:v1:91bfb390-3cbf-4593-9d5f-314bf988c2e4\",\n    validateAfter: \"SUBMIT\",\n    showWhen: if(\n      a!isNotNullOrEmpty(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.instructions]\n      ),\n      length(\n        where(\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.instructions],\n            expression: len(fv!item) > 500\n          )\n        )\n      ) > 0,\n      false()\n    )\n  ),\n  {}\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92578": {
      "name": "AIA_MTR_ExtractionModelVersionAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_43077": {
      "name": "AIA_Extraction_GetInstanceById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      /* Extraction Instance */\n      recordType!AIA Extraction Instance.modelVersionId,\n      recordType!AIA Extraction Instance.documentId,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.validationErrors,\n      recordType!AIA Extraction Instance.accuracy,\n      recordType!AIA Extraction Instance.precision,\n      recordType!AIA Extraction Instance.f1,\n      recordType!AIA Extraction Instance.recall,\n      recordType!AIA Extraction Instance.createdOn,\n      /* Extraction Fields */\n      recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.extractedValue,\n      recordType!AIA Extraction Instance.fields.overrideValue,\n      recordType!AIA Extraction Instance.fields.overrideNull,\n      recordType!AIA Extraction Instance.fields.boundingBox,\n      recordType!AIA Extraction Instance.fields.confidence,\n      /* Extraction Fields > Rows */\n      recordType!AIA Extraction Instance.fields.rows.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.boundingBox,\n      /* Extraction Fields > Rows > Cells */\n      recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n      recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n      /* Extraction Fields > Model Field */\n      recordType!AIA Extraction Instance.fields.modelVersionField.key,\n      recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n      /* Extraction Fields > Rows > Cells > Column */\n      recordType!AIA Extraction Instance.fields.rows.cells.column.key,\n      a!defaultValue(ri!additionalFields, {})\n    },\n    \n  )\n)"
    },
    "_a-0000e6f4-5904-8000-6603-01ef9001ef90_224202": {
      "name": "SHRD_ChoicesRuleRefToDictionary",
      "type": "Expression Rule",
      "sail_code": "if(\n  runtimetypeof(ri!choicesRuleRef) = 88,\n  /* Rule Reference */\n  rule!SHRD_RuleRefToDictionary(ruleRef: ri!choicesRuleRef),\n  ri!choicesRuleRef\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_23849": {
      "name": "AIA_ExtractionModel_SaveforUploadDocumentField",
      "type": "Expression Rule",
      "sail_code": "/*\nAttributes for generateFields Data rule input\n\ngenerationFieldType -> Selected Generation Type Value\ndescribeFieldDescription -> Describe Fields Description Value\nselectedDocumentType -> Selected Document Type Value\nuploadedDocument -> Uploaded Document Value\nextractionDocumentDescription -> Extraction Document Description Value\ndocumentMetadata -> Document Read Values\nerrorMessage -> Holds the error message if any\n*/\nif(\n  a!isNullOrEmpty(ri!inputDocument),\n  /*If no document uploaded*/\n  {\n    a!save(\n      {\n        ri!generateFieldData.documentMetadata,\n        ri!generateFieldData.errorMessage\n      },\n      null()\n    )\n  },\n  /*If document is uploaded*/\n  a!localVariables(\n    local!documentText: rule!AIA_Extraction_GetPredictionInput(\n      generateFieldData: ri!generateFieldData\n    ),\n    {\n      a!save(\n        ri!generateFieldData.uploadedDocument,\n        ri!inputDocument\n      ),\n      a!save(\n        ri!generateFieldData.errorMessage,\n        if(\n          a!isNullOrEmpty(local!documentText),\n          #\"urn:appian:translation-string:v1:f4de7dc2-20b0-4556-a899-162021a73fb6\"(\n            #\"urn:appian:translation-variable:v1:b10e2d9b-8549-4557-aabe-44e3ee233d02\": lower(\n              ri!generateFieldData.selectedDocumentType\n            )\n          ),\n          {}\n        )\n      )\n    }\n  )\n)"
    },
    "0017ed70-ef8d-8000-fc40-7f0000014e7a": {
      "name": "AIA_ExtractionModel_RecordAction_CreateOrUpdateVersion",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=deletedFieldsRecords\n\n// Output: ?\nAC!CountOfRecordsDeleted\n\n// Input: ?\n#\"SYSTEM_SYSRULES_forEach\"(\n  items: pv!oldVersions,\n  expression: #\"urn:appian:function:v1:a:update\"(\n    fv!item,\n    recordType!AIA Extraction Model Version.status,\n    cons!AIA_MODEL_VERSION_STATUS_DISABLED\n  )\n)\n\n// Input: ?\n=recordType!AIA Extraction Model Version\n\n// Input: ?\n=pv!fields\n\n// Input: ?\n=recordType!AIA Extraction Model Version Field\n\n// Input: ?\n=pv!deletedSections\n\n// Output: ?\nAC!CountOfRecordsDeleted\n\n// Input: ?\n=pv!deletedExamples\n\n// Output: ?\nAC!CountOfRecordsDeleted\n\n// Input: ?\n=pv!deletedValidationRules\n\n// Output: ?\nAC!CountOfRecordsDeleted\n\n// Input: ?\n=#\"SYSTEM_SYSRULES_forEach\"( pv!examples, cast( 'type!{urn:com:appian:types:AIA}AIA_ModelVersionExample', fv!item ))\n\n// Output: ?\n#\"SYSTEM_SYSRULES_forEach\"(\n  pv!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n  #\"urn:appian:function:v1:a:update\"(\n    fv!item,\n    recordType!AIA Extraction Model Version Field.sectionId,\n    displayvalue(\n      fv!item[recordType!AIA Extraction Model Version Field.section],\n      pv!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name],\n      pv!extractionModelVersion[recordType!AIA Extraction Model Version.sections.id],\n      null\n    )\n  )\n)\n\n// Output: ?\nrule!AIA_Extraction_GetOldModelVersions(\n  record: pv!extractionModelVersion\n)\n\n// Output: ?\npv!extractionModelVersion[recordType!AIA Extraction Model Version.examples]\n\n// Output: ?\nappian:record-field:v1:346d9e46-2636-4c17-a1d0-70f0043604d2/87c9e585-0ab4-4524-9f34-d530e321f09f\"]:repeat(\n  length(pv!examples),\n  pv!extractionModelVersion[recordType!AIA Extraction Model Version.modelVersionId]\n)\n\n// Input: ?\n=pv!extractionModelVersion[recordType!AIA Extraction Model Version.modelVersionId]\n\n// Input: ?\n=pv!deletedModelTriggers\n\n// Input: ?\nremove(\n  pv!extractionModelVersion,\n  recordType!AIA Extraction Model Version.examples\n)\n\n// Input: ?\n=recordType!AIA Extraction Model Version\n\n// Input: ?\n=rule!AIA_LogMetric( name: pv!metricsCode)\n\n// Output: ?\nac!RecordsUpdated"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180860": {
      "name": "AIA_MTR_ClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12129": {
      "name": "AIA_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!brandingDefault: getbrandingconfig(\n    cons!AIA_DOC_DEFAULT_BRANDING_CONFIG,\n    true()\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!brandingDefault.defaultBranding.key,\n        local!brandingDefault.customBranding.key\n      },\n      {\n        local!brandingDefault.defaultBranding.value,\n        local!brandingDefault.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_195902": {
      "name": "AIA_TEXTRACT_EXPENSE_TYPES_ENUM",
      "type": "Expression Rule",
      "sail_code": "{\n  /* Address */\n  {\n    name: \"ADDRESS\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"STREET\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"CITY\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"STATE\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"ZIP_CODE\",\n    type: \"SUMMARY\"\n  },\n  \n  /* ? */\n  {\n    name: \"NAME\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"ADDRESS_BLOCK\",\n    type: \"SUMMARY\"\n  },\n  \n  /* Order Info */\n  {\n    name: \"ORDER_DATE\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"PO_NUMBER\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"PAYMENT_TERMS\",\n    type: \"SUMMARY\"\n  },\n  \n  /* Amounts */\n  {\n    name: \"SUBTOTAL\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"TOTAL\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"AMOUNT_DUE\"\n  },\n  \n  /* Vendor Info */\n  {\n    name: \"VENDOR_ADDRESS\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"VENDOR_NAME\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"VENDOR_PHONE\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"VENDOR_URL\",\n    type: \"SUMMARY\"\n  },\n  \n  /* Receiver Info */\n  {\n    name: \"RECEIVER_ADDRESS\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"RECEIVER_NAME\",\n    type: \"SUMMARY\"\n  },\n  {\n    name: \"RECEIVER_PHONE\",\n    type: \"SUMMARY\"\n  },\n  \n  /* Line Items */\n  {\n    name: \"QUANTITY\",\n    type: \"LINE_ITEM\"\n  },\n  {\n    name: \"PRODUCT_CODE\",\n    type: \"LINE_ITEM\"\n  },\n  {\n    name: \"ITEM\",\n    type: \"LINE_ITEM\"\n  },\n  {\n    name: \"UNIT_PRICE\",\n    type: \"LINE_ITEM\"\n  },\n  {\n    name: \"PRICE\",\n    type: \"LINE_ITEM\"\n  },\n  \n}"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_56387": {
      "name": "AIA_Extraction_ModelVersionPrompts",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!tabs: {\n    a!map(\n      label: #\"urn:appian:translation-string:v1:d99527cf-9f16-4141-943b-f16863e51142\",\n      showWhen: rule!AIA_Extraction_HasTextFields(\n        ModelVersion: ri!extractionModelVersion\n      )\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:c7ce7b96-2cc2-41f6-877a-32c009ddba45\",\n      showWhen: rule!AIA_Extraction_HasVisualFields(\n        ModelVersion: ri!extractionModelVersion\n      )\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:8a88e44f-f36d-4807-9174-1f29b9025cb8\",\n      showWhen: rule!AIA_Extraction_HasCalculatedFields(\n        ModelVersion: ri!extractionModelVersion\n      )\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:a67c9f85-f682-4191-bed6-c4912e7d88b4\",\n      showWhen: rule!AIA_Extraction_HasAiReviewFields(\n        ModelVersion: ri!extractionModelVersion\n      )\n    )\n  },\n  local!currentTab: index(\n    where(local!tabs.showWhen),\n    1,\n    null\n  ),\n  local!llmDisplayName: rule!AIA_GetLLMName(\n    llm: a!defaultValue(\n      ri!extractionModelVersion[recordType!AIA Extraction Model Version.llm],\n      rule!AIA_DefaultModel()\n    )\n  ),\n  {\n    rule!AIA_UTIL_cardAsTabs(\n      tabs: local!tabs,\n      currentTab: local!currentTab,\n      brandingMap: ri!brandingMap,\n      isClickable: length(where(local!tabs.showWhen)) > 1\n    ),\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        a!match(\n          value: local!currentTab,\n          equals: 1,\n          then: {\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              shape: ri!brandingMap.CardShape,\n              showBorder: ri!brandingMap.CardShowBorder,\n              style: ri!brandingMap.AppianBackground,\n              contents: {\n                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: {\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: #\"urn:appian:translation-string:v1:acdd64f3-7e07-478f-afb6-e00ac699adff\",\n                      style: \"STRONG\",\n                      size: \"STANDARD\"\n                    ),\n                    char(10),\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: local!llmDisplayName\n                    )\n                  }\n                ),\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  value: rule!AIA_Extraction_GeneratePrompt(\n                    modelVersion: ri!extractionModelVersion,\n                    hasBoundingBoxes: ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel.useBoundingBoxes]\n                  ),\n                  readOnly: true\n                )\n              }\n            )\n          },\n          equals: 2,\n          then: {\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              shape: ri!brandingMap.CardShape,\n              showBorder: ri!brandingMap.CardShowBorder,\n              style: ri!brandingMap.AppianBackground,\n              contents: {\n                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: {\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: #\"urn:appian:translation-string:v1:acdd64f3-7e07-478f-afb6-e00ac699adff\",\n                      style: \"STRONG\",\n                      size: \"STANDARD\"\n                    ),\n                    char(10),\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: local!llmDisplayName\n                    )\n                  }\n                ),\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  value: rule!AIA_Extraction_GeneratePrompt(\n                    modelVersion: ri!extractionModelVersion,\n                    operation: cons!AIA_PROMPT_OPERATION_MODE_MULTIMODAL,\n                    hasBoundingBoxes: ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel.useBoundingBoxes]\n                  ),\n                  readOnly: true\n                )\n              }\n            )\n          },\n          equals: 3,\n          then: {\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              shape: ri!brandingMap.CardShape,\n              showBorder: ri!brandingMap.CardShowBorder,\n              style: ri!brandingMap.AppianBackground,\n              contents: {\n                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: {\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: #\"urn:appian:translation-string:v1:acdd64f3-7e07-478f-afb6-e00ac699adff\",\n                      style: \"STRONG\",\n                      size: \"STANDARD\"\n                    ),\n                    char(10),\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: local!llmDisplayName\n                    )\n                  }\n                ),\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  value: rule!AIA_CalculatedFieldPrompt(\n                    modelVersion: ri!extractionModelVersion\n                  ),\n                  readOnly: true\n                )\n              }\n            )\n          },\n          whenTrue: and(\n            fv!value = 4,\n            a!defaultValue(ri!isEdit, false)\n          ),\n          then: rule!AIA_AIReviewPromptSettings(\n            ExtractionModelVersion: ri!ExtractionModelVersion\n          ),\n          equals: 4,\n          then: {\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              shape: ri!brandingMap.CardShape,\n              showBorder: ri!brandingMap.CardShowBorder,\n              style: ri!brandingMap.AppianBackground,\n              contents: {\n                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: {\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: #\"urn:appian:translation-string:v1:acdd64f3-7e07-478f-afb6-e00ac699adff\",\n                      style: \"STRONG\",\n                      size: \"STANDARD\"\n                    ),\n                    char(10),\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: rule!AIA_GetLLMName(\n                        llm: a!defaultValue(\n                          ri!extractionModelVersion[recordType!AIA Extraction Model Version.aiReviewLlm],\n                          rule!AIA_AiReviewDefaultModel()\n                        )\n                      )\n                    )\n                  }\n                ),\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  value: rule!AIA_AiReviewPrompt(\n                    ModelVersion: ri!extractionModelVersion\n                  ),\n                  readOnly: true\n                )\n              }\n            )\n          },\n          default: {}\n        )\n      },\n      style: \"TRANSPARENT\",\n      padding: \"NONE\",\n      marginAbove: \"MORE\",\n      showBorder: false\n    )\n  }\n)"
    },
    "_a-0001eccb-4552-8000-9c3e-011c48011c48_161219": {
      "name": "AIA_Extraction_GetInstanceByIdForReconciliation",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      rule!AIA_EXTRACTION_INSTANCE_FIELDS(),\n      \n      /* Fields used in AIA_Extraction_CreateUpdateInstance */\n      recordType!AIA Extraction Instance.documentFolderId,\n      recordType!AIA Extraction Instance.sourceDocumentId,\n      recordType!AIA Extraction Instance.createdOn,\n      recordType!AIA Extraction Instance.createdBy,\n      recordType!AIA Extraction Instance.testInstance,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.responseDocumentId,\n      recordType!AIA Extraction Instance.pageCount,\n      recordType!AIA Extraction Instance.inputTokens,\n      recordType!AIA Extraction Instance.outputTokens,\n      recordType!AIA Extraction Instance.wasStp,\n      \n      recordType!AIA Extraction Instance.modelVersion.extractionModel.uuid\n    }\n  )\n)"
    },
    "_a-0000ee3e-060c-8000-9bb8-011c48011c48_204932": {
      "name": "AIA_Extraction_CreateJsonSchema",
      "type": "Expression Rule",
      "sail_code": "\na!localVariables(\n  local!modelFields: #\"SYSTEM_SYSRULES_fromJson_v1\"(#\"SYSTEM_SYSRULES_toJson_v1\"(\n    a!defaultValue(\n      ri!fields,\n      filter(\n        rule!AIA_Extraction_DisplayPromptField(\n          field: _,\n          mode: ri!mode,\n          operation: ri!operation\n        ),\n        ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.fields]\n      )\n    )\n  )),\n  if(\n    a!isNotNullOrEmpty(local!modelFields),\n    a!localVariables(\n      local!fields: reduce(\n        #\"urn:appian:function:v1:a:update\",\n        a!map(),\n        merge(\n          local!modelFields.key,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            local!modelFields,\n            rule!AIA_FieldJsonSchema(\n              item: fv!item,\n              mode: ri!mode,\n              operation: ri!operation,\n              includeArrays: a!defaultValue(ri!includeArrays, true)\n            )\n          )\n        )\n      ),\n      local!map: #\"SYSTEM_SYSRULES_fromJson_v1\"(\n        #\"SYSTEM_SYSRULES_toJson_v1\"(\n          value: a!map(\n            \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n            type: \"object\",\n            properties: local!fields,\n            required: reject(\n              fn!isnull,\n              index(\n                local!modelFields.key,\n                where(local!modelFields.required)\n              )\n            )\n          ),\n          removeNullOrEmptyFields: true\n        )\n      ),\n      if(\n        ri!returnJson,\n        prettyprintjson(#\"SYSTEM_SYSRULES_toJson_v1\"(local!map)),\n        local!map\n      )\n    ),\n    null\n  )\n)"
    },
    "_a-0000eea3-15ee-8000-9bd4-011c48011c48_137447": {
      "name": "AIA_MTR_ModelVersionConfigureSampling",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eca1-71bf-8000-9c0b-011c48011c48_149695": {
      "name": "AIA_Extraction_BoundingBoxesInstructions",
      "type": "Expression Rule",
      "sail_code": "=\"\n- \" & #\"urn:appian:translation-string:v1:f430adf5-5028-4f82-9579-6d5a30d46b00\" & \"\n    - \" & #\"urn:appian:translation-string:v1:6701bdd2-dc86-46fd-b918-39ee518ddfc0\" & \" <example>{..., \"\"brokerBranch\"\": {\"\"value\"\": \"\"some branch name\"\", \"\"spanId\"\": \"\"abcd1234\"\"}, ...}</example>\n    - \" & #\"urn:appian:translation-string:v1:fb5aa790-a812-42e8-b713-144b1e9f11ff\" & \" <example>[{\"\"column1\"\": \"\"value\"\", \"\"column2\"\": \"\"value\"\", ..., \"\"columnN\"\" : \"\"value\"\", \"\"spanId\"\": \"\"abc1234\"\"}, ...]</example>\n    - \" & #\"urn:appian:translation-string:v1:7fdc7b4d-ae4b-482c-8042-2df75a693468\" & \" <example>[{\"\"value\"\": \"\"item\"\", \"\"spanId\"\": \"\"abc1234\"\"}]</example>\n- \" & #\"urn:appian:translation-string:v1:9c5e3486-fcad-4bf4-ab97-eb0e6f2ec8fd\" & \"\n\n<example>\n{\n  \"\"field1\"\": {\"\"value\"\": \"\"field 1 value\"\", \"\"spanId\"\": \"\"ABCD1234\"\"},\n  \"\"field2\"\": {\"\"value\"\": \"\"field 2 value\"\", \"\"spanId\"\": \"\"DEFG1234\"\"},\n  \"\"table1\"\": [\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"spanId\"\": \"\"GHIJ1234\"\"},\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"spanId\"\": \"\"JKLM1234\"\"},\n  ],\n  \"\"table2\"\": [\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"column3\"\": \"\"col 3 value\"\", \"\"spanId\"\": \"\"MNOP1234\"\"},\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"column3\"\": \"\"col 3 value\"\", \"\"spanId\"\": \"\"PQRS1234\"\"},\n  ],\n  \"\"list1\"\": [\n    {\"\"value\"\": \"\"First value\"\", \"\"spanId\"\": \"\"ABCD1234\"\"},\n    {\"\"value\"\": \"\"Second value\"\", \"\"spanId\"\": \"\"QRST5678\"\"}\n  ],\n  \"\"list2\"\": [\n    {\"\"value\"\": \"\"First value\"\", \"\"spanId\"\": \"\"EFGH1234\"\"},\n    {\"\"value\"\": \"\"Second value\"\", \"\"spanId\"\": \"\"IJKL5678\"\"},\n    {\"\"value\"\": \"\"Third value\"\", \"\"spanId\"\": \"\"IJKL5678\"\"}\n  ]\n}\n</example>\n\""
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180874": {
      "name": "AIA_MTR_ClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec1e-9975-8000-9bd6-011c48011c48_1374470": {
      "name": "AIA_Extraction_PromptInstructions",
      "type": "Expression Rule",
      "sail_code": "\"## Instructions\n\n\" & joinarray(\n  reject(\n    fn!isnull,\n    {\n      \"- \" & #\"urn:appian:translation-string:v1:068d246a-b84d-42a2-a07b-02833e24e15c\",\n      \"- \" & #\"urn:appian:translation-string:v1:bd52b8f6-1431-454e-875f-7e8b8ebe9da7\",\n      \"- \" & #\"urn:appian:translation-string:v1:e3c91fec-48f5-4848-8406-e97856ad96af\",\n      \"- \" & #\"urn:appian:translation-string:v1:361ff628-e4e9-431b-8472-ecadea9b11d8\",\n      if(\n        or(\n          ri!modelVersion[recordType!AIA Extraction Model Version.fields.isMultiple]\n        ),\n        \"- \" & #\"urn:appian:translation-string:v1:925e0dd9-c0f8-45e7-af9f-916a29285ccd\",\n        null\n      ),\n      if(\n        or(\n          contains(\n            ri!modelVersion[recordType!AIA Extraction Model Version.fields.type],\n            {cons!AIA_EXTRACTION_FIELD_TYPES[2],cons!AIA_EXTRACTION_FIELD_TYPES[3]}\n          ),\n          contains(\n            a!flatten(ri!modelVersion[recordType!AIA Extraction Model Version.fields.columns.type]),\n            {cons!AIA_EXTRACTION_FIELD_TYPES[2],cons!AIA_EXTRACTION_FIELD_TYPES[3]}\n          )\n        ),\n        \"- \" & #\"urn:appian:translation-string:v1:8e6dd327-f952-4c3f-b8e3-8ce9acdc4345\",\n        null\n      ),\n      if(\n        or(\n          contains(\n            ri!modelVersion[recordType!AIA Extraction Model Version.fields.type],\n            cons!AIA_EXTRACTION_FIELD_TYPES[4]\n          ),\n          contains(\n            a!flatten(ri!modelVersion[recordType!AIA Extraction Model Version.fields.columns.type]),\n            cons!AIA_EXTRACTION_FIELD_TYPES[4]\n          )\n        ),\n        \"- \" & #\"urn:appian:translation-string:v1:27d6e065-3f9f-471b-b412-1d3847d474bc\",\n        null\n      ),\n      if(\n        or(\n          contains(\n            ri!modelVersion[recordType!AIA Extraction Model Version.fields.type],\n            cons!AIA_EXTRACTION_FIELD_TYPES[5]\n          ),\n          contains(\n            a!flatten(ri!modelVersion[recordType!AIA Extraction Model Version.fields.columns.type]),\n            cons!AIA_EXTRACTION_FIELD_TYPES[5]\n          )\n        ),\n        \"- \" & #\"urn:appian:translation-string:v1:5bae3763-38ac-423c-9336-2c6d82051a95\",\n        null\n      ),\n      if(\n        any(\n          a!isNotNullOrEmpty,\n          a!flatten(\n            {\n              ri!modelVersion[recordType!AIA Extraction Model Version.fields.optionRule],\n              ri!modelVersion[recordType!AIA Extraction Model Version.fields.columns.optionRule],\n            }\n          )\n        ),\n        \"- \" & #\"urn:appian:translation-string:v1:c6d3ccf5-b428-4900-b98b-e8df8db90ce8\",\n        null\n      ),\n      \"- Today's date is \" & text(today(), \"yyyy-MM-dd\"),\n      ri!modelVersion[recordType!AIA Extraction Model Version.instructions],\n    }\n  ),\n  char(10)\n)"
    },
    "_a-0000ec2e-dd02-8000-9bde-011c48011c48_49332": {
      "name": "SHRD_RuleValidations",
      "type": "Expression Rule",
      "sail_code": "reject(\n  fn!isnull,\n  a!flatten(\n    {\n      a!localVariables(\n        local!rule: a!refreshVariable(\n          value: getrulereferencebyname(ri!rule\n          ),\n          refreshAlways: true\n        ),\n        if(\n          a!isNullOrEmpty(local!rule),\n          null,\n          try(\n            a!localVariables(\n              local!results: a!refreshVariable(\n                value: if(\n                  a!isNullOrEmpty(ri!inputs),\n                  local!rule(),\n                  if(\n                    length(ri!inputs) = 1,\n                    local!rule(null),\n                    if(\n                      length(ri!inputs) = 2,\n                      local!rule(null, null),\n                      null\n                    )\n                  )\n                ),\n                refreshAlways: true\n              ),\n              {\n                if(\n                  and(\n                    ri!required,\n                    a!isNullOrEmpty(local!results)\n                  ),\n                  \"Rule must return results\",\n                  null\n                ),\n                if(\n                  or(\n                    a!isNullOrEmpty(local!results),\n                    a!isNullOrEmpty(ri!returnType),\n                    typeof(local!results) = ri!returnType\n                  ),\n                  null,\n                  \"Rule must return \" & typename(ri!returnType),\n                  \n                )\n              }\n            ),\n            \"Rule must take in \" & if(\n              a!isNullOrEmpty(ri!inputs), \n              \"no\",\n              length(ri!inputs)\n            ) & \" parameter\" & if(\n              or(\n                a!isNullOrEmpty(ri!inputs), \n                length(ri!inputs) <> 1\n              ),\n              \"s\",\n              \"\"\n            ) & \" and not error with null inputs\",\n          )\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ec9e-8ba1-8000-9c08-011c48011c48_146666": {
      "name": "AIA_Extraction_PostProcess",
      "type": "Expression Rule",
      "sail_code": "if(\n  not(\n    contains(\n      cons!AIA_INSTANCE_STATUS_RECONCILED_ALL,\n      ri!ExtractionInstance[recordType!AIA Extraction Instance.statusId]\n    )\n  ),\n  /*accuracy calculations only run after reconcile, so if not reconcile status, no change*/\n  ri!ExtractionInstance,\n  a!localVariables(\n    local!fields: #\"SYSTEM_SYSRULES_forEach\"(\n      ri!ExtractionInstance[recordType!AIA Extraction Instance.fields],\n      #\"urn:appian:function:v1:a:update\"(\n        #\"urn:appian:function:v1:a:update\"(\n          fv!item,\n          recordType!AIA Extraction Instance Field.result,\n          a!match(\n            value: fv!item[recordType!AIA Extraction Instance Field.extractedValue],\n            whenTrue: or(\n              fv!item[recordType!AIA Extraction Instance Field.modelVersionField.isNotTracked],\n              and(\n                a!isNotNullOrEmpty(\n                  fv!item[recordType!AIA Extraction Instance Field.rows]\n                ),\n                length(\n                  fv!item[recordType!AIA Extraction Instance Field.rows]\n                ) > 0\n              )\n            ),\n            then: null,\n            /* TP - Extraction not null and not overridden */\n            whenTrue: and(\n              a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.extractedValue]),\n              a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overrideValue]),\n              or(\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overrideNull]),\n                fv!item[recordType!AIA Extraction Instance Field.overrideNull] = false\n              )\n            ),\n            then: cons!AIA_FIELD_RESULT_TRUE_POSITIVE,\n            /* TN - Extraction is null and not overridden */\n            whenTrue: and(\n              a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.extractedValue]),\n              a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overrideValue])\n            ),\n            then: cons!AIA_FIELD_RESULT_TRUE_NEGATIVE,\n            /* FP - Extraction is not null and is overridden */\n            whenTrue: and(\n              a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.extractedValue]),\n              or(\n                a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overrideValue]),\n                fv!item[recordType!AIA Extraction Instance Field.overrideNull] = true\n              )\n            ),\n            then: cons!AIA_FIELD_RESULT_FALSE_POSITIVE,\n            /* FN - Extraction is null and is overridden */\n            whenTrue: and(\n              a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.extractedValue]),\n              or(\n                a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overrideValue]),\n                fv!item[recordType!AIA Extraction Instance Field.overrideNull] = true\n              )\n            ),\n            then: cons!AIA_FIELD_RESULT_FALSE_NEGATIVE,\n            default: null\n          )\n        ),\n        recordType!AIA Extraction Instance Field.rows,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          fv!item[recordType!AIA Extraction Instance Field.rows],\n          #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            recordType!AIA Extraction Instance Field Row.cells,\n            #\"SYSTEM_SYSRULES_forEach\"(\n              fv!item[recordType!AIA Extraction Instance Field Row.cells],\n              #\"urn:appian:function:v1:a:update\"(\n                fv!item,\n                recordType!AIA Extraction Instance Field Row Cell.result,\n                a!match(\n                  value: fv!item,\n                  whenTrue: fv!item[recordType!AIA Extraction Instance Field Row Cell.column.isNotTracked],\n                  then: null,\n                  /* TP - Extraction not null and not overridden */\n                  whenTrue: and(\n                    a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.extractedValue]),\n                    and(\n                      a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideValue]),\n                      or(\n                        a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideNull]),\n                        fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideNull] = false\n                      )\n                    )\n                  ),\n                  then: cons!AIA_FIELD_RESULT_TRUE_POSITIVE,\n                  /* TN - Extraction is null and not overridden */\n                  whenTrue: and(\n                    a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.extractedValue]),\n                    a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideValue])\n                  ),\n                  then: cons!AIA_FIELD_RESULT_TRUE_NEGATIVE,\n                  /* FP - Extraction is not null and is overridden */\n                  whenTrue: and(\n                    a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.extractedValue]),\n                    or(\n                      a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideValue]),\n                      fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideNull] = true\n                    )\n                  ),\n                  then: cons!AIA_FIELD_RESULT_FALSE_POSITIVE,\n                  /* FN - Extraction is null and is overridden */\n                  whenTrue: and(\n                    a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.extractedValue]),\n                    or(\n                      a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideValue]),\n                      fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideNull] = true\n                    )\n                  ),\n                  then: cons!AIA_FIELD_RESULT_FALSE_NEGATIVE,\n                  default: null\n                )\n              )\n            )\n          )\n        )\n      )\n    ),\n    local!allResults: touniformstring(\n      reject(\n        fn!isnull,\n        a!flatten(\n          {\n            local!fields[recordType!AIA Extraction Instance Field.result],\n            local!fields[recordType!AIA Extraction Instance Field.rows.cells.result]\n          }\n        )\n      )\n    ),\n    local!confusion: a!map(\n      tp: length(\n        index(\n          local!allResults,\n          wherecontains(\n            cons!AIA_FIELD_RESULT_TRUE_POSITIVE,\n            local!allResults\n          )\n        )\n      ),\n      tn: length(\n        index(\n          local!allResults,\n          wherecontains(\n            cons!AIA_FIELD_RESULT_TRUE_NEGATIVE,\n            local!allResults\n          )\n        )\n      ),\n      fp: length(\n        index(\n          local!allResults,\n          wherecontains(\n            cons!AIA_FIELD_RESULT_FALSE_POSITIVE,\n            local!allResults\n          )\n        )\n      ),\n      fn: length(\n        index(\n          local!allResults,\n          wherecontains(\n            cons!AIA_FIELD_RESULT_FALSE_NEGATIVE,\n            local!allResults\n          )\n        )\n      )\n    ),\n    local!recall: try(\n      local!confusion.tp / (local!confusion.tp + local!confusion.fn),\n      null\n    ),\n    local!precision: try(\n      local!confusion.tp / (local!confusion.tp + local!confusion.fp),\n      null\n    ),\n    local!accuracy: try(\n      (local!confusion.tp + local!confusion.tn) / (\n        local!confusion.tp + local!confusion.tn + local!confusion.fp + local!confusion.fn\n      ),\n      null\n    ),\n    local!f1: try(\n      (2 * local!recall * local!precision) / (local!recall + local!precision),\n      null\n    ),\n    #\"urn:appian:function:v1:a:update\"(\n      #\"urn:appian:function:v1:a:update\"(\n        ri!ExtractionInstance,\n        recordType!AIA Extraction Instance.fields,\n        local!fields\n      ),\n      {\n        recordType!AIA Extraction Instance.accuracy,\n        recordType!AIA Extraction Instance.precision,\n        recordType!AIA Extraction Instance.recall,\n        recordType!AIA Extraction Instance.f1\n      },\n      {\n        local!accuracy,\n        local!precision,\n        local!recall,\n        local!f1\n      }\n    )\n  )\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_56359": {
      "name": "AIA_Extraction_HasCalculatedFields",
      "type": "Expression Rule",
      "sail_code": "a!isNotNullOrEmpty(\n  filter(\n    rule!AIA_Extraction_DisplayPromptField(\n      field: _,\n      mode: cons!AIA_PROMPT_MODE_CALCULATED\n    ),\n    ri!modelVersion[recordType!AIA Extraction Model Version.fields]\n  )\n)"
    },
    "_a-0000ed5d-bd1b-8000-9c80-011c48011c48_329766": {
      "name": "AIA_Extraction_GeneratePromptMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!sectionId: if(\n    a!isNullOrEmpty(ri!SectionInstance),\n    null,\n    a!defaultValue(\n      ri!SectionInstance[recordType!AIA Extraction Instance Section.sectionId],\n      - 1\n    )\n  ),\n  local!fields: filter(\n    rule!AIA_Extraction_DisplayPromptField(\n      sectionFilter: ri!sectionFilter,\n      sectionId: local!sectionId,\n      field: _,\n      operation: ri!operation\n    ),\n    ri!modelVersion[recordType!AIA Extraction Model Version.fields]\n  ),\n  local!role: a!defaultValue(\n    ri!modelVersion[recordType!AIA Extraction Model Version.role],\n    rule!AIA_Extraction_DefaultPromptRole()\n  ),\n  local!instructions: rule!AIA_Extraction_PromptInstructions(\n    modelVersion: ri!modelVersion\n  ) & a!match(\n    value: true,\n    whenTrue: ri!hasBoundingBoxes,\n    then: char(10) & rule!AIA_Extraction_BoundingBoxesInstructions(),\n    whenTrue: ri!operation = cons!AIA_PROMPT_OPERATION_MODE_MULTIMODAL,\n    then: char(10) & rule!AIA_Extraction_VisionInstructions(),\n    default: \"\"\n  ),\n  local!examples: \n  /*if(*/\n    /*ri!modelVersion['recordType!{f00f33ce-439e-4c81-9931-a244a643c0e8}AIA Extraction Model Version.fields.{71248595-92d7-42c5-b216-285a4e91704e}modelVersionId']=112,*/\n    /*rule!S_GeneratePromptExamplesFromPreviousInstance(*/\n      /*modelVersion: ri!modelVersion,*/\n      /*fields: local!fields*/\n    /*),*/\n    rule!AIA_Extraction_GeneratePromptExamples(\n      modelVersion: ri!modelVersion,\n      fields: local!fields\n    /*)*/\n  ),\n  local!entities: if(\n    a!isNotNullOrEmpty(local!fields),\n    rule!AIA_Extraction_GeneratePromptEntities(\n      fields: local!fields,\n      mode: if(\n        and(\n          ri!hasBoundingBoxes,\n          ri!operation <> cons!AIA_PROMPT_OPERATION_MODE_MULTIMODAL\n        ),\n        cons!AIA_SCHEMA_MODE_SPAN,\n        cons!AIA_SCHEMA_MODE_PLAIN\n      )\n    ),\n    null\n  ),\n  a!map(\n    role: local!role,\n    instructions: local!instructions,\n    entities: local!entities,\n    examples: local!examples\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_26889": {
      "name": "AIA_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AIA_UTIL_Filter_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  )\n)"
    },
    "_a-0000e6f4-5904-8000-6603-01ef9001ef90_223708": {
      "name": "SHRD_RuleSuggestion",
      "type": "Expression Rule",
      "sail_code": "if(\n  len(ri!ruleName) < 2,\n  #\"SYSTEM_SYSRULES_dataSubset\"(\n    data: {},\n  ),\n  a!localVariables(\n    local!results: findcontentbyattribute(\n      searchAllContent: true,\n      contentType: \"expression\",\n      attributeName: \"name\",\n      searchCriteria: \"*\" & ri!ruleName & \"*\"\n    ),\n    if(\n      length(local!results) = 0,\n      #\"SYSTEM_SYSRULES_dataSubset\"(\n        data: {},\n      ),\n      a!localVariables(\n        local!formattedResults: #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!results,\n          expression: rule!SHRD_ContentDetailsToDictionary(\n            id: fv!item,\n            contentDetails: getcontentobjectdetailsbyid(tointeger(fv!item))\n          )\n        ),\n        #\"SYSTEM_SYSRULES_dataSubset\"(\n          data: local!formattedResults.name,\n          identifiers: if(\n            ri!returnType = \"NAME\",\n            local!formattedResults.name,\n            local!formattedResults\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505670": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_40006": {
      "name": "AIA_ExtractionModelVersion_ValidateFields",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!showValidation,\n  if(\n    a!isNullOrEmpty(\n      ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields]\n    ),\n    #\"SYSTEM_SYSRULES_validationMessage\"(\n      message: #\"urn:appian:translation-string:v1:41eed424-e493-4842-83b5-a1da673bb5c3\",\n      validateAfter: \"SUBMIT\"\n    ),\n    {\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:9c80078a-0e22-48f7-8347-e78776045ef2\",\n        validateAfter: \"SUBMIT\",\n        showWhen: a!isNotNullOrEmpty(\n          {\n            wherecontains(\n              tostring(null()),\n              touniformstring(\n                ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key]\n              )\n            ),\n            wherecontains(\n              tostring(null()),\n              touniformstring(\n                ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.type]\n              )\n            )\n          }\n        )\n      ),\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:f31667c2-96d5-4ae0-9a68-5c0903092273\",\n        validateAfter: \"SUBMIT\",\n        showWhen: if(\n          or(a!isNotNullOrEmpty(\n          ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key],\n         \n          ),\n          a!isNotNullOrEmpty(ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.description])),\n          or(\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key],\n              expression: len(fv!item) > 255,\n            ),\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.label],\n              expression: len(fv!item) > 255,\n            ),\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.description],\n              expression: len(fv!item) > 500, \n            )\n          ),\n          false()\n        )\n      ),\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:724637ad-f947-4f8e-9cfb-709430d72c25\",\n        validateAfter: \"SUBMIT\",\n        showWhen: not(\n          and(\n            a!isNotNullOrEmpty(\n              ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key]\n            ),\n            length(\n              union(\n                touniformstring(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key]\n                ),\n                touniformstring({})\n              )\n            ) = length(\n              ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key]\n            )\n          )\n        )\n      )\n    }\n  ),\n  {}\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24127": {
      "name": "AIA_ExtractionModelVersion_Sub_ConfigureFields",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!fieldSections: {\n    a!map(\n      label: #\"urn:appian:translation-string:v1:7470cb68-29c8-442e-a1ed-702ea270ffe9\"\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:5f185b10-f3f5-43d1-985e-834ee2df959a\"\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:db6111aa-7e29-4dae-ac07-0fceffa92d76\"\n    )\n  },\n  local!currentFieldTab: 1,\n  local!currentTableTab: 1,\n  local!selectedRow,\n  local!sections: reject(\n    a!isNullOrEmpty,\n    union(\n      touniformstring(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name]\n      ),\n      touniformstring({})\n    )\n  ),\n\n  {\n    #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n      buttons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:a4a23729-2177-4c94-8b65-b8ca00b51341\",\n          icon: \"remove\",\n          style: \"LINK\",\n          loadingIndicator: true(),\n          saveInto: {\n            a!save(\n              ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n              {\n                rule!AIA_Extraction_AddBlankField(\n                  fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                  extractionModel: ri!extractionModel,\n                  extractionModelVersion: ri!extractionModelVersion,\n                  sections: union(\n                    ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name],\n                    { \"\" }\n                  )\n                )\n              }\n            ),\n            a!save(\n              local!selectedRow,\n              null\n            )\n          },\n          size: \"SMALL\",\n          showWhen: and(\n            a!isNotNullOrEmpty(\n              ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields]\n            ),\n            not(\n              and(\n                length(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields]\n                ) = 1,\n                rule!AIA_Extraction_DoFieldsMatch(\n                  field1: rule!AIA_Extraction_AddBlankField(\n                    fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                    extractionModel: ri!extractionModel,\n                    extractionModelVersion: ri!extractionModelVersion,\n                    sections: local!sections\n                  ),\n                  field2: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields][1]\n                )\n              )\n            )\n          )\n        ),\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:37685d72-60ca-47ed-a900-ae65ec5a02f7\",\n          icon: \"magic\",\n          loadingIndicator: true(),\n          saveInto: ri!generateButtonSaveInto,\n          size: \"SMALL\",\n          showWhen: ri!showGenerateButton = true(),\n\n        )\n      },\n      align: \"END\",\n      marginBelow: \"NONE\"\n    ),\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n            contents: rule!AIA_UTIL_cardAsTabs(\n            tabs: local!fieldSections,\n            currentTab: local!currentFieldTab,\n            brandingMap: ri!brandingMap,\n          ),\n          style:\"TRANSPARENT\",\n          showBorder: false,\n          padding: \"NONE\"\n          ),\n        ),\n      },\n      showWhen: a!isNullOrEmpty(local!selectedRow),\n      marginBelow: \"NONE\"\n    ),\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n          contents: {\n            a!match(\n              value: local!currentFieldTab,\n              equals: 1,\n              then: {\n                /* Field Definition */\n                if(\n                  a!isNullOrEmpty(local!selectedRow),\n                  rule!AIA_ExtractionModelVersion_ConfigureFieldDefinitionGrid(\n                    brandingMap: ri!brandingMap,\n                    fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                    isUpdate: ri!isUpdate,\n                    extractionModel: ri!extractionModel,\n                    sections: union(\n                      touniformstring(\n                        ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections.name]\n                      ),\n                      touniformstring({})\n                    ),\n                    selectedRow: local!selectedRow,\n                    extractionModelVersion: ri!extractionModelVersion,\n                    deletedFieldsRecords: ri!deletedFieldsRecords\n                  ),\n                  /* Table Level */\n                  {\n                    #\"SYSTEM_SYSRULES_cardLayout\"(\n                      contents: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        accessibilityText: #\"urn:appian:translation-string:v1:c65e1563-eeca-44fe-9088-dafafe8fbb35\",\n                        labelPosition: \"COLLAPSED\",\n                        value: {\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            text: #\"urn:appian:translation-string:v1:c65e1563-eeca-44fe-9088-dafafe8fbb35\",\n                            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                              saveInto: {\n                                a!save(local!selectedRow, null),\n                                a!save(local!currentTableTab, 1)\n                              }\n                            ),\n                            linkStyle: \"STANDALONE\"\n                          ),\n                          \" / \",\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            text: a!defaultValue(\n                              ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.label][local!selectedRow],\n                              \"Field \" & local!selectedRow\n                            ),\n\n                          ),\n                          \" columns \",\n                          char(10),\n                          char(10),\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            text: #\"urn:appian:translation-string:v1:0186a3ca-253f-41cf-841e-1dd03c0a47f0\",\n                            color: ri!brandingMap.Gray3\n                          ),\n\n                        }\n                      ),\n                      showBorder: false,\n                      style: \"TRANSPARENT\"\n                    ),\n                    rule!AIA_UTIL_cardAsTabs(\n                      tabs: local!fieldSections,\n                      currentTab: local!currentTableTab,\n                      brandingMap: ri!brandingMap\n                    ),\n                    a!match(\n                      value: local!currentTableTab,\n                      equals: 1,\n                      then: rule!AIA_Extraction_ConfigureFieldTableColumnGrid(\n                        brandingMap: ri!brandingMap,\n                        fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                        deletedFieldsRecords: ri!deletedFieldsRecords,\n                        selectedRow: local!selectedRow\n                      ),\n                      equals: 2,\n                      /* Extraction */\n                      then: rule!AIA_Extraction_ConfigureFieldExtractionTableColumnGrid(\n                        brandingMap: ri!brandingMap,\n                        fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                        selectedRow: local!selectedRow\n                      ),\n                      equals: 3,\n                      then: /* Reconciliation */\n                      rule!AIA_Extraction_ConfigureFieldReconciliationTableColumnGrid(\n                        brandingMap: ri!brandingMap,\n                        fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                        selectedRow: local!selectedRow\n                      ),\n                      default: {}\n                    )\n                  }\n                )\n              },\n              equals: 2,\n              then: {\n                /* Extraction Details */\n                rule!AIA_ExtractionModel_ConfigureFieldExtractionDetailsGrid(\n                  brandingMap: ri!brandingMap,\n                  fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n                  sections: local!sections\n                )\n              },\n              equals: 3,\n              then: {\n                /* Reconciliation */\n                rule!AIA_ExtractionModel_ConfigureFieldReconciliationGrid(\n                  brandingMap: ri!brandingMap,\n                  fields: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields]\n                )\n              },\n              default: {}\n            ),\n\n          },\n          marginBelow: \"LESS\",\n          marginAbove: \"LESS\"\n        ),\n        #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n          marginAbove: \"STANDARD\",\n          validations: {\n            rule!AIA_ExtractionModelVersion_ValidateFields(\n              extractionModelVersion: ri!extractionModelVersion,\n              showValidation: or(\n                local!currentFieldTab <> 1,\n                a!isNotNullOrEmpty(local!selectedRow)\n              )\n            ),\n            rule!AIA_ExtractionModelVersion_ValidateReconciliationTab(\n              extractionModelVersion: ri!extractionModelVersion,\n              showValidation: and(\n                local!currentFieldTab <> 3,\n                a!isNullOrEmpty(local!selectedRow)\n              )\n            ),\n            rule!AIA_ExtractionModelVersion_ValidateFieldsTableData(\n              extractionModelVersion: ri!extractionModelVersion,\n              showValidation: a!isNullOrEmpty(local!selectedRow)\n            )\n          },\n          validationGroup: \"Fields\",\n          showWhen: ri!showValidations = true()\n        )\n      },\n      padding: \"NONE\",\n      marginBelow: \"NONE\",\n      style: ri!brandingMap.AppianBackground,\n      showBorder: false,\n      shape: ri!brandingMap.CardShape,\n\n    )\n  }\n)"
    },
    "_a-0000ecea-6c5f-8000-9c4b-011c48011c48_182408": {
      "name": "AIA_CalculatedFieldPrompt",
      "type": "Expression Rule",
      "sail_code": "=\"You are an AI assistant and an expert at calculating new values based on provided input data. Your task is to use the data in the document snippet to calculate the values for a specific list of fields.\n\n------------\n\n## Output Format\n\nYour final output must be a single **JSON object** that strictly adheres to the schema below. The root object will contain a key for each field you are asked to calculate.\n\n```json\n\" & rule!AIA_Extraction_CreateJsonSchema(\n  ExtractionModelVersion: ri!ModelVersion,\n  mode: cons!AIA_PROMPT_MODE_CALCULATED,\n  returnJson: true\n) & \"\n```\n\n------------\n\n## Instructions\n\n-   **Only use the data found within the section `[Input Data]` to derive your calculations. Do not infer or use outside knowledge.\"\n"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24225": {
      "name": "AIA_ExtractionModelVersion_ConfigureFieldDefinitionGrid",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  accessibilityText: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(\n    #\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:7a17cfb7-f985-4e24-a5d1-7ebb09a1241a\"\n  ),\n  label: #\"urn:appian:translation-string:v1:15d21e83-aadd-4b1f-9cdf-d9db8556efc3\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:c917d5b3-b5d5-4155-830d-26af8fbe50f7\",\n      helpTooltip: #\"urn:appian:translation-string:v1:0d435548-9df9-4180-af96-9b37ad0aa67f\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:2b3a2e79-0b85-4b52-bbf6-b2e8d08f1447\",\n      helpTooltip: #\"urn:appian:translation-string:v1:ab39babf-772c-4663-942e-5de894f63864\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:73d79e33-af48-4717-9195-cc469cf000f6\",\n      helpTooltip: #\"urn:appian:translation-string:v1:ba16499c-87ef-44ca-8c1d-3662c73338cc\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:7e4fcb76-5800-48e1-9844-f301e6dced88\",\n      align: \"CENTER\",\n      helpTooltip: #\"urn:appian:translation-string:v1:2ebd38ac-1d1f-4eb1-9be5-27d5dbb2d673\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:224ec3d7-9583-4fe8-9b05-ed4531029f58\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:5d8387fc-6b7a-47ba-8ab3-3818b8d07790\",\n      helpTooltip: #\"urn:appian:translation-string:v1:8b6b6141-1dbe-47a4-93c3-a1a6ef7d1b64\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:6e2f4447-827f-48a4-bb10-10b6c2a028b8\",\n      align: \"CENTER\",\n      helpTooltip: #\"urn:appian:translation-string:v1:3a9550a2-d901-4ede-a836-01dd00b89107\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(align: \"CENTER\")\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 1),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 1),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 1),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 1),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 2),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\")\n  },\n  rows: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!fields,\n    expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n      id: fv!index,\n      contents: {\n        /* Label*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.label],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.label],\n            if(\n              or(\n                a!isNullOrEmpty(ri!isUpdate),\n                not(ri!isUpdate),\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.fieldId])\n              ),\n              a!save(\n                fv!item[recordType!AIA Extraction Model Version Field.key],\n                rule!SHRD_ReformatLabelAsKey(\n                  label: fv!item[recordType!AIA Extraction Model Version Field.label]\n                )\n              ),\n              {}\n            ),\n            ri!fieldsSave\n          },\n          characterLimit: 255,\n          showCharacterCount: false\n        ),\n        /* Key*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.key],\n          saveInto: {\n            a!save(\n              fv!item[recordType!AIA Extraction Model Version Field.key],\n              substitute(save!value, \" \", \"\")\n            ),\n            if(\n              a!isNullOrEmpty(\n                fv!item[recordType!AIA Extraction Model Version Field.label]\n              ),\n              a!save(\n                fv!item[recordType!AIA Extraction Model Version Field.label],\n                rule!SHRD_ReformatKeyAsLabel(\n                  key: fv!item[recordType!AIA Extraction Model Version Field.key]\n                )\n              ),\n              {}\n            ),\n            ri!fieldsSave\n          },\n          characterLimit: 255,\n          showCharacterCount: false,\n          required: true,\n          readOnly: and(\n            ri!isUpdate,\n            a!isNotNullOrEmpty(\n              fv!item[recordType!AIA Extraction Model Version Field.fieldId]\n            )\n          ),\n          validations: if(\n            length(\n              wherecontains(\n                lower(fv!item[recordType!AIA Extraction Model Version Field.key]),\n                touniformstring(#\"SYSTEM_SYSRULES_forEach\"(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.key],\n                  lower(fv!item)\n                ))\n              )\n            ) > 1,\n            #\"urn:appian:translation-string:v1:8713af6f-b0fe-45cd-8446-c471f8d92ea4\",\n            null\n          )\n        ),\n        /* type*/\n        #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n          choiceLabels: rule!AIA_ENUM_ExtractionFieldTypes().label,\n          choiceValues: rule!AIA_ENUM_ExtractionFieldTypes().label,\n          placeholder: #\"urn:appian:translation-string:v1:540680b0-8c9d-4444-a300-90f6f33a88bf\",\n          value: fv!item[recordType!AIA Extraction Model Version Field.type],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.type],\n            a!save(\n              fv!item[recordType!AIA Extraction Model Version Field.isMultiple],\n              if(\n                save!value = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n                false,\n                fv!item[recordType!AIA Extraction Model Version Field.isMultiple]\n              )\n            ),\n            a!save(\n              fv!item[recordType!AIA Extraction Model Version Field.columns],\n              if(\n                save!value = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n                a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.columns], {}),\n                null\n              )\n            ),\n            ri!fieldsSave\n          },\n          required: true\n        ),\n        /*List*/\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.isMultiple,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          caption: #\"urn:appian:translation-string:v1:7e4fcb76-5800-48e1-9844-f301e6dced88\",\n          align: \"CENTER\",\n          showWhen: fv!item[recordType!AIA Extraction Model Version Field.type] <> cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n        ),\n        /* Edit table */\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: #\"urn:appian:translation-string:v1:b5896636-f217-433e-ae54-cd06762b05e2\",\n              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                saveInto: a!save(ri!selectedRow, fv!index)\n              ),\n              linkStyle: \"STANDALONE\"\n            )\n          },\n          preventWrapping: true,\n          align: \"CENTER\",\n          showWhen: fv!item[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE\n        ),\n        /* Method */\n        a!localVariables(\n          local!extractionTypes: rule!AIA_GetExtractionOptions(filterByOptions: null),\n          #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n            choiceLabels: local!extractionTypes.label,\n            choiceValues: local!extractionTypes.id,\n            value: a!defaultValue(\n              fv!item[recordType!AIA Extraction Model Version Field.extractionType],\n              cons!AIA_EXTRACTION_TYPES[1]\n            ),\n            saveInto: {\n              fv!item[recordType!AIA Extraction Model Version Field.extractionType],\n              a!save(\n                {\n                  fv!item[recordType!AIA Extraction Model Version Field.extractionRule],\n                  fv!item[recordType!AIA Extraction Model Version Field.description]\n                },\n                null()\n              ),\n              ri!fieldsSave\n            },\n            required: true\n          )\n        ),\n        /* Extract Prompt*/\n        a!match(\n          value: fv!item[recordType!AIA Extraction Model Version Field.extractionType],\n          whenTrue: or(\n            a!isNullOrEmpty(fv!value),\n            fv!value = cons!AIA_EXTRACTION_TYPES[1],\n            fv!value = cons!AIA_EXTRACTION_TYPES[4]\n          ),\n          then: #\"SYSTEM_SYSRULES_textField\"(\n            value: fv!item[recordType!AIA Extraction Model Version Field.description],\n            saveInto: {\n              fv!item[recordType!AIA Extraction Model Version Field.description],\n              ri!fieldsSave\n            },\n            characterLimit: 500,\n            showCharacterCount: false,\n            placeholder: #\"urn:appian:translation-string:v1:38b9e7f0-8ab2-4298-a6ed-4c5ded3c1737\"\n          ),\n          equals: cons!AIA_EXTRACTION_TYPES[3],\n          then: rule!SHRD_RulePicker(\n            saves: {\n              fv!item[recordType!AIA Extraction Model Version Field.extractionRule],\n              ri!fieldsSave\n            },\n            value: fv!item[recordType!AIA Extraction Model Version Field.extractionRule],\n            returnType: \"NAME\",\n            readOnly: fv!item[recordType!AIA Extraction Model Version Field.extractionType] <> cons!AIA_EXTRACTION_TYPES[3],\n            ruleInputs: { \"input\" },\n            ruleOutputRequired: false,\n            placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\"\n          ),\n          equals: cons!AIA_EXTRACTION_TYPES[5],\n          then: a!localVariables(\n            local!options: rule!AIA_TEXTRACT_EXPENSE_TYPES_ENUM().name,\n            #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n              placeholder: #\"urn:appian:translation-string:v1:034679c0-4da0-48b6-b593-59bf86162035\",\n              value: fv!item[recordType!AIA Extraction Model Version Field.description],\n              saveInto: {\n                fv!item[recordType!AIA Extraction Model Version Field.description],\n                ri!fieldsSave\n              },\n              choiceLabels: local!options,\n              choiceValues: local!options\n            )\n          ),\n          equals: cons!AIA_EXTRACTION_TYPES[6],\n          then: #\"SYSTEM_SYSRULES_textField\"(\n            value: fv!item[recordType!AIA Extraction Model Version Field.description],\n            saveInto: {\n              fv!item[recordType!AIA Extraction Model Version Field.description],\n              ri!fieldsSave\n            },\n            validations: rule!AIA_RegexValidations(\n              regex: fv!item[recordType!AIA Extraction Model Version Field.description]\n            ),\n            characterLimit: 500,\n            showCharacterCount: false,\n            placeholder: #\"urn:appian:translation-string:v1:4ef6155d-7706-4550-a3f6-b62ee4ed3626\"\n          ),\n          equals: cons!AIA_EXTRACTION_TYPES[7],\n          then: #\"SYSTEM_SYSRULES_textField\"(\n            value: fv!item[recordType!AIA Extraction Model Version Field.description],\n            saveInto: {\n              fv!item[recordType!AIA Extraction Model Version Field.description],\n              ri!fieldsSave\n            },\n            characterLimit: 500,\n            showCharacterCount: false,\n            placeholder: #\"urn:appian:translation-string:v1:eea738aa-5520-4a87-8f2c-5cb9956b0ed3\",\n            required: true\n          ),\n          equals: cons!AIA_EXTRACTION_TYPES[8],\n          then: #\"SYSTEM_SYSRULES_textField\"(\n            value: fv!item[recordType!AIA Extraction Model Version Field.description],\n            saveInto: {\n              fv!item[recordType!AIA Extraction Model Version Field.description],\n              ri!fieldsSave\n            },\n            characterLimit: 500,\n            showCharacterCount: false,\n            placeholder: #\"urn:appian:translation-string:v1:da20e01c-be5a-4454-9668-f5c95a0b4635\",\n            required: true\n          ),\n          default: #\"SYSTEM_SYSRULES_textField\"(readOnly: true)\n        ),\n        /* Visual Input */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.useVision,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:bb8adfc1-7b8f-4142-9fc1-f020df3594c8\"\n        ),\n        /*Remove*/\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n            icon: \"times\",\n            altText: #\"urn:appian:translation-string:v1:ca85961f-04d0-42ff-a429-06d48afe2aff\",\n            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n              value: fv!index,\n              saveInto: {\n                a!save(\n                  ri!deletedFieldsRecords,\n                  fn!if(\n                    a!isNotNullOrEmpty(\n                      ri!fields[save!value][recordType!AIA Extraction Model Version Field.fieldId]\n                    ),\n                    append(\n                      ri!deletedFieldsRecords,\n                      ri!fields[save!value]\n                    ),\n                    ri!deletedFieldsRecords\n                  )\n                ),\n                a!save(ri!fields, remove(ri!fields, save!value)),\n                ri!fieldsSave\n              }\n            ),\n            linkStyle: \"STANDALONE\",\n            color: ri!brandingMap.Gray4,\n            size: \"STANDARD\"\n          )\n        )\n      }\n    )\n  ),\n  addRowLink: #\"SYSTEM_SYSRULES_dynamicLink\"(\n    label: #\"urn:appian:translation-string:v1:e234d46e-c11f-4f03-9b01-da0a95abcba5\",\n    value: {\n      recordType!AIA Extraction Model Version.fields: {\n        rule!AIA_Extraction_AddBlankField(\n          fields: ri!fields,\n          sections: ri!sections,\n          extractionModel: ri!extractionModel,\n          extractionModelVersion: ri!extractionModelVersion\n        )\n      }\n    },\n    saveInto: {\n      a!save(ri!fields, append(ri!fields, save!value)),\n      ri!fieldsSave\n    }\n  ),\n  shadeAlternateRows: false,\n  spacing: \"DENSE\",\n  validations: {\n    if(\n      a!isNullOrEmpty(ri!fields),\n      #\"urn:appian:translation-string:v1:daff9a9f-a758-4653-90fd-175a988e6e29\",\n      null\n    ),\n    if(\n      rule!AIA_UTIL_Filter(\n        records: ri!fields,\n        field: recordType!AIA Extraction Model Version Field.extractionType,\n        value: cons!AIA_EXTRACTION_TYPES[7], /*Query*/\n        filterType: \"MATCH_COUNT\"\n      ) > 15,\n      #\"urn:appian:translation-string:v1:8600522a-12f0-4a7c-ad39-6048c1b0403f\",\n      null\n    )\n  },\n  borderStyle: \"LIGHT\",\n  allowRowReordering: true,\n  rowOrderData: ri!fields,\n  rowOrderField: recordType!AIA Extraction Model Version Field.order\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92564": {
      "name": "AIA_MTR_ExtractionInstanceFieldAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_194771": {
      "name": "AIA_AiReviewDefaultModel",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: rule!AIA_ENUM_LlmVersions(\n    includeVision: true,\n    returnOnlySupportedLlms: true\n  ),\n  default: rule!AIA_DefaultModel(),\n  whenTrue: contains(fv!value.value,cons!AIA_MODEL_SONNET_3_7_MULTIMODAL),\n  then: cons!AIA_MODEL_SONNET_3_7_MULTIMODAL,\n  whenTrue: contains(fv!value.value,cons!AIA_MODEL_SONNET_3_5_MULTIMODAL),\n  then: cons!AIA_MODEL_SONNET_3_5_MULTIMODAL\n)"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_38807": {
      "name": "AIA_AiReviewPromptFixed",
      "type": "Expression Rule",
      "sail_code": "\"## Task Overview\n1. Analyze the provided source document carefully\n2. Compare the extracted data (provided as JSON) against the source document field by field\n3. Determine if each extracted value is correct based on the source document\n4. Provide corrected values where necessary\n5. Output a structured JSON with verification results\n\n## Input\nA source document containing the original information\nJSON data previously extracted from the document\n\n## Output Format\n\nYour final output must be a single **JSON object** representing the original data, with each field enriched to include its location. The schema for an enriched field is as follows:\n\n```json\n\" & rule!AIA_Extraction_CreateJsonSchema(\n  ExtractionModelVersion: ri!ModelVersion,\n  mode: cons!AIA_SCHEMA_MODE_AI_REVIEW,\n  returnJson: true,\n  includeArrays: false\n) & \"\n```\n\n## Verification Guidelines\n* Be thorough and precise in your verification\n* Check exact values, not just approximate matches\n* For dates, verify the value against the ISO extracted date value.  **Do not return errors for dates not matching the correct format**\n* For monetary amounts, verify the exact number\n* For text fields, verify the exact spelling and formatting\n* For arrays, verify each item and its fields individually\n\n------------\n\n## Instructions\n\n1.  **Analyze the source document** provided.\n2.  **Review the extracted data** provided under `[EXTRACTED DATA]`.\n3.  **Only return fields referenced in the output format, make sure the output json matches the Output Format schema.\n4.  **For each field referenced in the output schema** (including nested fields within `arrays`), create an object containing three keys: `value`, `isCorrect`, and `reasoning`.\n    * `extractedValue`: This should be value original extracted from the document before the review.\n    * `suggestedValue`: This should be the **correct** value as found in the document. If the original extraction was wrong, you must provide the correct value here. If the **correct** value should be blank, return back \"\".\n    * `isCorrect`: A boolean (`true` or `false`). Set to `true` if the originally extracted data matches the document, and `false` otherwise.\n    * `reasoning`: A brief string explaining your decision. If correct, state where you found the information (e.g., \"\"The invoice number matches the value at the top right of the document.\"\"). If incorrect, explain the discrepancy (e.g., \"\"The extracted date was 2023-10-26, but the document clearly shows 2023-10-27.\"\").\n\""
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92467": {
      "name": "AIA_MTR_ClassificationInstanceClassifiedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_33090": {
      "name": "AIA_PROMPT_SECTION_DIVIDER",
      "type": "Expression Rule",
      "sail_code": "char(\n  10\n) & char(\n  10\n) & \"------------\" & char(\n  10\n) & char(\n  10\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24361": {
      "name": "AIA_ExtractionModel_ConfigureFieldExtractionDetailsGrid",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  accessibilityText: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(\n    #\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:25e905aa-8489-4f24-8821-e655b07ee6c9\"\n  ),\n  label: #\"urn:appian:translation-string:v1:15d21e83-aadd-4b1f-9cdf-d9db8556efc3\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:c917d5b3-b5d5-4155-830d-26af8fbe50f7\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:bdf57edd-02b2-4928-a2e2-fdfe939ac329\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:fda6b93a-6b11-48ac-8b35-4c7aaf7f3f65\",\n      helpTooltip: #\"urn:appian:translation-string:v1:d6ded1b3-ca98-4f69-837f-a77d7ad9a535\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:7dbadb1a-2bcd-4253-a302-65bb40faab52\",\n      helpTooltip: #\"urn:appian:translation-string:v1:a67e12d8-883b-46a3-a366-d8a48562406d\"\n    )\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n\n  },\n  rows: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!fields,\n    expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n      id: fv!index,\n      contents: {\n        /* Label*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          readOnly: true,\n          value: fv!item[recordType!AIA Extraction Model Version Field.label],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.label],\n            if(\n              a!isNullOrEmpty(\n                fv!item[recordType!AIA Extraction Model Version Field.key]\n              ),\n              a!save(\n                fv!item[recordType!AIA Extraction Model Version Field.key],\n                rule!SHRD_ReformatLabelAsKey(\n                  label: fv!item[recordType!AIA Extraction Model Version Field.label]\n                )\n              ),\n              {}\n            ),\n            ri!fieldsSave\n          },\n          characterLimit: 255,\n          showCharacterCount: false\n        ),\n        /* Section*/\n        #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n          choiceLabels: { ri!sections },\n          choiceValues: { ri!sections },\n          placeholder: #\"urn:appian:translation-string:v1:2ec14e68-389e-4c61-89bb-6e8a10a706c2\",\n          value: fv!item[recordType!AIA Extraction Model Version Field.section],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.section],\n            ri!fieldsSave\n          }\n        ),\n        /*Options Rule*/\n        rule!SHRD_RulePicker(\n          saves: {\n            fv!item[recordType!AIA Extraction Model Version Field.optionRule],\n            ri!fieldsSave\n          },\n          value: fv!item[recordType!AIA Extraction Model Version Field.optionRule],\n          returnType: \"NAME\",\n          ruleOutputRequired: true,\n          placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\"\n        ),\n        /* Post-Process Rule */\n        rule!SHRD_RulePicker(\n          saves: {\n            fv!item[recordType!AIA Extraction Model Version Field.postProcessRule],\n            ri!fieldsSave\n          },\n          value: fv!item[recordType!AIA Extraction Model Version Field.postProcessRule],\n          returnType: \"NAME\",\n          ruleInputs: { \"input\" },\n          ruleOutputRequired: false,\n          placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\"\n        ),\n\n      }\n    )\n  ),\n  borderStyle: \"LIGHT\",\n  shadeAlternateRows: false,\n  spacing: \"DENSE\",\n\n)"
    },
    "_a-0000ecd8-7631-8000-9c44-011c48011c48_164589": {
      "name": "AIA_PromptExamples",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!modelVersion[ri!relationshipExamples],\n    expression: {\n      #\"SYSTEM_SYSRULES_boxLayout\"(\n        padding: \"NONE\",\n        showBorder: false(),\n        label: #\"urn:appian:translation-string:v1:e95689a9-6b4a-4515-a7f3-f683f15bf0c7\"(\n          #\"urn:appian:translation-variable:v1:458c3433-d183-4858-a240-e9805a843147\": fv!index\n        ),\n        contents: {\n          #\"SYSTEM_SYSRULES_cardLayout\"(\n            contents: {\n              {\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  showCharacterCount: false(),\n                  characterLimit: 4000,\n                  label: #\"urn:appian:translation-string:v1:4a6eaf6a-0039-4c71-abd0-e740b0eea194\",\n                  labelPosition: \"ABOVE\",\n                  helpTooltip: #\"urn:appian:translation-string:v1:ee242d3a-797c-4b13-9f90-f3c94bed3fdb\",\n                  value: fv!item[recordType!AIA Model Version Example.input],\n                  saveInto: {\n                    fv!item[recordType!AIA Model Version Example.input]\n                  }\n                ),\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  showCharacterCount: false(),\n                  characterLimit: 4000,\n                  label: #\"urn:appian:translation-string:v1:aa3725db-5df9-4b9f-9caa-8e203e558de8\",\n                  labelPosition: \"ABOVE\",\n                  helpTooltip: #\"urn:appian:translation-string:v1:8b4807cb-3d46-40fa-982a-8d4e5b68e8b2\",\n                  value: fv!item[recordType!AIA Model Version Example.output],\n                  saveInto: {\n                    fv!item[recordType!AIA Model Version Example.output]\n                  }\n                ),\n                /*a!paragraphField(*/\n                  /*showCharacterCount: false(),*/\n                  /*characterLimit: 4000,*/\n                  /*label: 'translation!{b777166b-bd4b-4195-a492-718ccbfcaecc}AIA_Translations.{af1495f1-ddf0-446b-a3f4-5bacc9101672}Rule',*/\n                  /*labelPosition: \"ABOVE\",*/\n                  /*value: fv!item['recordType!{346d9e46-2636-4c17-a1d0-70f0043604d2}AIA Model Version Example.fields.{60068264-8e76-490b-b7c2-84f5680f7659}rule'],*/\n                  /*saveInto: {*/\n                    /*fv!item['recordType!{346d9e46-2636-4c17-a1d0-70f0043604d2}AIA Model Version Example.fields.{60068264-8e76-490b-b7c2-84f5680f7659}rule']*/\n                  /*},*/\n                  /*height: \"SHORT\",*/\n                  /*helpTooltip: 'translation!{b777166b-bd4b-4195-a492-718ccbfcaecc}AIA_Translations.{0cbb2ddd-eb52-4511-92e4-a4b18f888da0}Advanced feature that allows examples to only appear conditionally'*/\n                /*),*/\n                rule!AIA_Template_RichTextLinkAndIcon(\n                  icon: \"trash\",\n                  label: #\"urn:appian:translation-string:v1:81c7b8e7-9c7e-46e7-aac2-ad9c55bfcfb7\",\n                  altText: #\"urn:appian:translation-string:v1:944a4e77-8aef-4447-bad4-912442527977\"(#\"urn:appian:translation-variable:v1:7a6410b2-1425-4a28-a78e-547c89b5f187\": fv!index),\n                  saveInto: {\n                    if(\n                      a!isNotNullOrEmpty(\n                        index(\n                          ri!modelVersion[ri!relationshipExamples][recordType!AIA Model Version Example.id],\n                          fv!index\n                        )\n                      ),\n                      a!save(\n                        ri!deletedExamples,\n                        append(\n                          ri!deletedExamples,\n                          index(\n                            ri!modelVersion[ri!relationshipExamples],\n                            fv!index\n                          )\n                        )\n                      ),\n                      {}\n                    ),\n                    a!save(\n                      ri!modelVersion[ri!relationshipExamples],\n                      /*should delete the removed items from the list here and update in the database accordingly*/\n                      remove(\n                        ri!modelVersion[ri!relationshipExamples],\n                        fv!index\n                      )\n                    )\n                  },\n                  color: ri!brandingMap.Gray3\n                )\n              }\n            },\n            shape: ri!brandingMap.CardShape,\n            padding: \"STANDARD\",\n            showBorder: ri!brandingMap.CardShowBorder,\n            style: ri!brandingMap.White\n          )\n        },\n        isCollapsible: true(),\n        style: ri!brandingMap.Blue1,\n        marginBelow: \"STANDARD\",\n        labelHeadingTag: \"H3\"\n      )\n    }\n  ),\n  rule!AIA_Template_RichTextLinkAndIcon(\n    icon: \"plus-circle\",\n    label: #\"urn:appian:translation-string:v1:f3a256a5-8707-4be0-9a12-e8fa995a0d53\",\n    saveInto: {\n      a!save(\n        ri!modelVersion[ri!relationshipExamples],\n        append(\n          ri!modelVersion[ri!relationshipExamples],\n          recordType!AIA Model Version Example(\n            recordType!AIA Model Version Example.modelType: a!defaultValue(\n              value: ri!modelType,\n              default: cons!AIA_MODEL_TYPE_VALUES[1]\n            ),\n            recordType!AIA Model Version Example.modelVersionId: ri!modelVersion[ri!fieldModelVersionId]\n          )\n        )\n      )\n    }\n  )\n}"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483991": {
      "name": "AIA_MTR_ModelTestSuiteUpdated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee3e-060c-8000-9bb8-011c48011c48_204292": {
      "name": "AIA_Extraction_GetPredictionInput",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!documentExcelMetadata: if(\n    ri!generateFieldData.selectedDocumentType = cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[3],\n    try(\n      readexcelsheetpaging(\n        ri!generateFieldData.uploadedDocument,\n        a!defaultValue(ri!generateFieldData.sheetNumber, 0),\n        #\"SYSTEM_SYSRULES_pagingInfo\"(\n          1,\n          a!defaultValue(ri!generateFieldData.numRows, 100)\n        ),\n        a!defaultValue(ri!generateFieldData.numColumns, 25),\n        null,\n        false\n      ).data,\n      null()\n    ),\n    {}\n  ),\n  local!documentContentMetaData: if(\n    ri!generateFieldData.selectedDocumentType = cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[1],\n    try(\n      rule!SHRD_ReadDocumentContent(\n        document: ri!generateFieldData.uploadedDocument\n      ),\n      null()\n    ),\n    {}\n  ),\n  local!documentFileMetaData:if(\n    and(\n      ri!generateFieldData.selectedDocumentType = cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[1],\n      a!isNullOrEmpty(local!documentContentMetaData)\n    ),\n    try(\n      rule!SHRD_ReadDocumentContent(\n        document: ri!generateFieldData.uploadedDocument\n      ),\n      null()\n    ),\n    {}\n  ),\n  a!match(\n    value: ri!generateFieldData.selectedDocumentType,\n    equals: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[1],\n    then: if(\n      a!isNullOrEmpty(local!documentContentMetaData),\n      local!documentFileMetaData,\n      local!documentContentMetaData\n    ),\n    equals: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[2],\n    then: try(\n      rule!AIA_GetDocumentText(\n        document: ri!generateFieldData.uploadedDocument,\n        startPage: 1,\n        endPage: 20\n      ),\n      null()\n    ),\n    equals: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[3],\n    then: if(\n      a!isNullOrEmpty(local!documentExcelMetadata),\n      {},\n      #\"SYSTEM_SYSRULES_toJson_v1\"(local!documentExcelMetadata)\n    ),\n    default: null\n  )\n)"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_31384": {
      "name": "AIA_FieldJsonSchema",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!isMultiple: a!defaultValue(\n    ri!item.isMultiple,\n    false\n  ),\n  local!baseType: #\"53aa98e0-80da-4eb1-88f9-a989a8fe1aee\"(\n    type: ri!item.type\n  ),\n  local!baseField: a!map(\n    title: ri!item.label,\n    description: ri!item.description,\n    type: local!baseType.type,\n    format: local!baseType.format\n  ),\n  local!schemaType: displayValue(\n    ri!mode,\n    rule!AIA_ENUM_FieldSchemas().name,\n    rule!AIA_ENUM_FieldSchemas(),\n    null\n  ),\n  local!type: #\"53aa98e0-80da-4eb1-88f9-a989a8fe1aee\"(\n    type: ri!item.type,\n    isMultiple: local!isMultiple,\n    includeArrays: ri!includeArrays,\n    mode: ri!mode\n  ),\n  local!enum: rule!AIA_Extraction_GetFieldOptions(ModelVersionField: ri!item),\n  local!columns: reject(\n    fn!isnull,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      ri!item.columns,\n      a!match(\n        value: fv!item,\n        whenTrue: a!isNullOrEmpty(index(fv!value, \"key\", null)),\n        then: null,\n        whenTrue: and(\n          ri!operation = cons!AIA_PROMPT_OPERATION_MODE_MULTIMODAL,\n          a!defaultValue(fv!value.useVision, false) = true\n        ),\n        then: fv!item,\n        whenTrue: and(\n          ri!operation = cons!AIA_PROMPT_OPERATION_MODE_TEXT,\n          a!defaultValue(fv!value.useVision, false) = false\n        ),\n        then: fv!item,\n        default: fv!item\n      )\n    )\n  ),\n  local!properties: if(\n    and(\n      a!isNotNullOrEmpty(local!schemaType.fields),\n      or(\n        and(\n          not(local!isMultiple),\n          a!isNullOrEmpty(local!columns),\n        ),\n        not(a!defaultValue(ri!includeArrays, true))\n      )\n    ),\n    reduce(\n      #\"urn:appian:function:v1:a:update\",\n      a!map(),\n      merge(\n        local!schemaType.fields.key,\n        a!flatten({\n          #\"SYSTEM_SYSRULES_forEach\"(\n            local!schemaType.fields,\n            a!map(\n              type: a!defaultValue(fv!item.type, local!baseField.type),\n              description: fv!item.description,\n              format: if(\n                fv!item.useFormat,\n                local!baseField.format,\n                null\n              ),\n              items: if(\n                and(\n                  a!isNullOrEmpty(fv!item.type),\n                  ri!includeArrays = false\n                ),\n                rule!AIA_FieldJsonSchema(\n                  item: ri!item,\n                  mode: cons!AIA_SCHEMA_MODE_PLAIN,\n                  operation: ri!operation,\n                  includeArrays: true\n                ).items,\n                null\n              ),\n              enum: if(\n                fv!item.useFormat,\n                index(local!enum, \"options\", null),\n                null\n              ),\n            )\n          )\n        })\n      )\n    ),\n    null\n  ),\n  local!required: if(\n    and(\n      a!isNotNullOrEmpty(local!schemaType.fields),\n      a!isNullOrEmpty(local!columns),\n      not(local!isMultiple)\n    ),\n    reject(\n      fn!isnull,\n      index(\n        local!schemaType.fields.key,\n        where(local!schemaType.fields.required)\n      )\n    ),\n    null\n  ),\n  local!items: a!match(\n    value: ri!includeArrays,\n    equals: false,\n    then: null,\n    whenTrue: and(\n      a!isNotNullOrEmpty(local!columns),\n      ri!includeArrays\n    ),\n    then: a!map(\n      type: \"object\",\n      properties: reduce(\n        #\"urn:appian:function:v1:a:update\",\n        a!map(),\n        merge(\n          local!columns.key,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            local!columns,\n            rule!AIA_FieldJsonSchema(\n              item: fv!item,\n              mode: ri!mode\n            )\n          )\n        )\n      ),\n      required: reject(\n        fn!isnull,\n        index(\n          local!columns.key,\n          where(local!columns.required)\n        )\n      )\n    ),\n    whenTrue: local!isMultiple,\n    then: a!localVariables(\n      local!item: rule!AIA_FieldJsonSchema(\n        item: #\"urn:appian:function:v1:a:update\"(\n          ri!item, \n          {\"label\", \"description\", \"isMultiple\"},\n          {null, null, false}\n        ),\n        mode: ri!mode\n      ),\n      if(\n        and(\n          a!isNullOrEmpty(local!schemaType.fields),\n          a!isNotNullOrEmpty(local!enum)\n        ),\n        #\"urn:appian:function:v1:a:update\"(\n          local!item,\n          \"enum\",\n          index(local!enum, \"options\", null),\n        ),\n        local!item\n      )\n    ),\n    default: null\n  ),\n  a!map(\n    title: local!baseField.title,\n    description: local!baseField.description,\n    type: local!type.type,\n    format: local!type.format,\n    properties: local!properties,\n    items: local!items,\n    required: local!required\n  )\n)"
    },
    "_a-0000ee52-8983-8000-9ba6-011c48011c48_27862": {
      "name": "AIA_GetDocumentText",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AIA_DocIsPdf(\n    document: ri!document\n  ),\n  a!localVariables(\n    local!result: trim(getpdftext(\n      ri!document,\n      a!defaultValue(ri!startPage, 1),\n      a!defaultValue(ri!endPage, null)\n    )),\n    if(\n      a!isNullOrEmpty(stripwith(local!result, char(10))),\n      null,\n      local!result\n    )\n  ),\n  if(\n    rule!AIA_IsDocumentExtension(\n      document: ri!document,\n      extensions: cons!AIA_TEXT_BASED_EXTENSIONS\n    ),\n    readdocumentcontent(\n      txtDocument: ri!document\n    ),\n    null\n  )\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_202482": {
      "name": "AIA_RegexValidations",
      "type": "Expression Rule",
      "sail_code": "{\n  if(\n    try(\n      regexmatch(\n        ri!regex,\n        \"a\"\n      ),\n      \"-1\"\n    ) = - 1,\n    \"Invalid regex\",\n    null\n  ),\n  if(\n    cleanwith(\n      substitute(\n        substitute(\n          ri!regex,\n          \"\\(\",\n          \"\"\n        ),\n        \"\\)\",\n        \"\"\n      ),\n      \"()\"\n    ) <> \"()\",\n    \"Must contain exactly one capturing group\",\n    null\n  )\n}"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_53600": {
      "name": "AIA_Test_GetLatestExtractionModelVersion",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!modelVersion: a!refreshVariable(\n    value: rule!AIA_Extraction_GetModelVersionById(\n      identifier: index(\n        #\"SYSTEM_SYSRULES_queryRecordType_v4\"(\n          recordType: recordType!AIA Extraction Model Version,\n          fields: {\n            recordType!AIA Extraction Model Version.modelVersionId\n          },\n          pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n            startIndex: 1,\n            batchSize: 1,\n            sort: {\n              #\"SYSTEM_SYSRULES_sortInfo\"(\n                field: recordType!AIA Extraction Model Version.modelVersionId\n              )\n            }\n          )\n        ).data[recordType!AIA Extraction Model Version.modelVersionId],\n        1,\n        null\n      )\n    ),\n    refreshAlways: true\n  ),\n  local!modelVersion\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_37404": {
      "name": "AIA_ExtractionModelVersion_RecordAction_CreateUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!loggedInUser: loggedInUser(),\n  local!brandingMap: rule!AIA_UTIL_LoadBrandingMap(),\n  /*Current Tab Default 1*/\n  local!currentTab: 1,\n  /*Flag Variable to show Generate Field Screen*/\n  local!isShowGenerateScreen: false(),\n  local!fieldSaves: a!refreshVariable(\n    refreshAlways: true,\n    value: a!save(\n      ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n        expression: #\"urn:appian:function:v1:a:update\"(\n          #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            recordType!AIA Extraction Model Version Field.fieldId,\n            if(\n              or(\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.fieldId]),\n                fv!item[recordType!AIA Extraction Model Version Field.fieldId] = -1\n              ),\n              null,\n              fv!item[recordType!AIA Extraction Model Version Field.fieldId]\n            )\n          ),\n          recordType!AIA Extraction Model Version Field.columns,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            fv!item[recordType!AIA Extraction Model Version Field.columns],\n            #\"urn:appian:function:v1:a:update\"(\n              fv!item,\n              recordType!AIA Extraction Model Version Field.fieldId,\n              if(\n                or(\n                  a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.fieldId]),\n                  fv!item[recordType!AIA Extraction Model Version Field.fieldId] = -1\n                ),\n                null,\n                fv!item[recordType!AIA Extraction Model Version Field.fieldId]\n              )\n            )\n          )\n        )\n      ),\n    )\n  ),\n  local!tabs: a!refreshVariable(\n    value: {\n      /*Fields*/\n      a!map(\n        label: #\"urn:appian:translation-string:v1:15d21e83-aadd-4b1f-9cdf-d9db8556efc3\",\n        count: if(\n          a!isNotNullOrEmpty(\n            ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields]\n          ),\n          length(\n            ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields]\n          ),\n          \"\"\n        )\n      ),\n      /*Sections*/\n      a!map(\n        label: #\"urn:appian:translation-string:v1:fe838329-54e4-4e65-a99c-246108a13da1\",\n        count: {}/*No Count Needed for Sections*/\n\n      ),\n      /*Prompts*/\n      a!map(\n        label: #\"urn:appian:translation-string:v1:ab6ce936-2015-4e58-a2d1-a10bcd2372e4\",\n        count: {}/*No Count Needed for Prompts*/\n\n      ),\n      /*Examples*/\n      a!map(\n        label: #\"urn:appian:translation-string:v1:50f1d007-13c9-4e75-b540-e96bc09a3968\",\n        count: if(\n          a!isNotNullOrEmpty(\n            ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples]\n          ),\n          length(\n            ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples]\n          ),\n          \"\"\n        )\n      )\n    },\n    refreshAlways: true()\n  ),\n  /*Form Validations*/\n  local!generateFieldData: a!map(\n    generationFieldType: cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[1]\n  ),\n  local!oldGenerateFieldData,\n  local!originalVersion: a!refreshVariable(\n    value: ri!extractionModelVersion,\n    refreshOnReferencedVarChange: false\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v1\"(\n    skipAutoFocus: true(),\n    /*Form Header*/\n    label: if(\n      toboolean(ri!isUpdate),\n      #\"urn:appian:translation-string:v1:bec9eebf-5c48-4c36-a835-bc0e1c6aac5f\",\n      #\"urn:appian:translation-string:v1:ee39465e-be4d-4886-a491-d1edcb573ec0\"\n    ),\n    /*Contents*/\n    contents: {\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            width: if(\n              #\"SYSTEM_SYSRULES_isPageWidth\"({ \"DESKTOP\", \"DESKTOP_WIDE\" }),\n              \"2X\",\n              \"AUTO\"\n            ),\n            contents: {\n              #\"SYSTEM_SYSRULES_paragraphField\"(\n                label: #\"urn:appian:translation-string:v1:4ee436fb-4630-4e58-b7ec-57de91253271\",\n                characterLimit: 4000,\n                helpTooltip: #\"urn:appian:translation-string:v1:4f7e9a06-667a-4ef0-a0b7-1bfac9720600\",\n                height: \"SHORT\",\n                value: ri!extractionModelVersion[recordType!AIA Extraction Model Version.updates],\n                saveInto: a!save(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.updates],\n                  save!value\n                )\n              ),\n              #\"SYSTEM_SYSRULES_richTextDisplayField\"(),\n              rule!AIA_UTIL_cardAsTabs(\n                tabs: local!tabs,\n                currentTab: local!currentTab,\n                brandingMap: local!brandingMap\n              ),\n              #\"SYSTEM_SYSRULES_cardLayout\"(\n                padding: \"STANDARD\",\n                contents: a!match(\n                  value: local!currentTab,\n                  equals: 1,\n                  then: rule!AIA_ExtractionModelVersion_Sub_Fields(\n                    brandingMap: local!brandingMap,\n                    extractionModelVersion: ri!extractionModelVersion,\n                    isUpdate: or(\n                      ri!isUpdate,\n                      a!defaultValue(ri!extractionModelVersion[recordType!AIA Extraction Model Version.versionId], 1) > 1\n                    ),\n                    deletedFieldRecords: ri!deletedFieldRecords,\n                    generateFieldData: local!generateFieldData,\n                    oldGenerateFieldData: local!oldGenerateFieldData,\n                    isGenerating: local!isShowGenerateScreen\n                  ),\n                  equals: 2,\n                  /*Sections*/\n                  then: rule!AIA_ExtractionModelVersion_Sub_ManageSections(\n                    brandingMap: local!brandingMap,\n                    extractionVersion: ri!extractionModelVersion,\n                    deletedSections: ri!deletedSections,\n                    isForVersion: true()\n                  ),\n                  equals: 3,\n                  then: rule!AIA_ExtractionModelVersion_Sub_Prompting(\n                    extractionModelVersion: ri!extractionModelVersion\n                  ),\n                  /*Example*/\n                  default: rule!AIA_ExtractionModelVersion_Sub_PromptExamples(\n                    extractionModelVersion: ri!extractionModelVersion,\n                    deletedExamples: ri!deletedExamples,\n                    brandingMap: local!brandingMap\n                  )\n                ),\n                showBorder: local!brandingMap.CardShowBorder,\n                style: local!brandingMap.Blue0\n              )\n            }\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            width: if(\n              #\"SYSTEM_SYSRULES_isPageWidth\"({ \"DESKTOP\", \"DESKTOP_WIDE\" }),\n              \"1X\",\n              \"MEDIUM\"\n            ),\n            contents: {\n              #\"SYSTEM_SYSRULES_cardLayout\"(\n                padding: \"STANDARD\",\n                shape: local!brandingMap.CardShape,\n                showBorder: local!brandingMap.CardShowBorder,\n                style: local!brandingMap.AppianBackground,\n                contents: {\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    label: #\"urn:appian:translation-string:v1:cb654175-570d-46df-b159-84c82f562773\",\n                    marginBelow: \"LESS\"\n                  ),\n                  /*Model Name*/\n                  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                    items: {\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            color: local!brandingMap.Gray3,\n                            text: {\n                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                text: #\"urn:appian:translation-string:v1:1d2ee947-3116-4cca-8a1f-26fe5bcc2914\"\n                              )\n                            }\n                          )\n                        )\n                      ),\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel.name],\n                              color: local!brandingMap.Gray4\n                            )\n                          }\n                        )\n                      )\n                    },\n                    alignVertical: \"MIDDLE\"\n                  ),\n                  /*Version Id*/\n                  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                    items: {\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            color: local!brandingMap.Gray3,\n                            text: {\n                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                text: #\"urn:appian:translation-string:v1:e24c2b1c-6da7-420c-8a1d-e1d18899fab5\"\n                              )\n                            }\n                          )\n                        )\n                      ),\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: ri!extractionModelVersion[recordType!AIA Extraction Model Version.versionId],\n                              color: local!brandingMap.Gray4\n                            )\n                          }\n                        )\n                      )\n                    },\n                    alignVertical: \"MIDDLE\"\n                  ),\n                  /*Status*/\n                  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                    items: {\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            color: local!brandingMap.Gray3,\n                            text: {\n                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                text: #\"urn:appian:translation-string:v1:34413645-ef22-4a94-8709-e4cae57e6a92\"\n                              )\n                            }\n                          )\n                        )\n                      ),\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: rule!AIA_displayVersionStatus(\n                          versionStatus: ri!extractionModelVersion[recordType!AIA Extraction Model Version.status],\n                          brandingMap: local!brandingMap\n                        )\n                      )\n                    },\n                    alignVertical: \"MIDDLE\"\n                  )\n                },\n                marginBelow: \"STANDARD\"\n              ),\n              #\"SYSTEM_SYSRULES_cardLayout\"(\n                padding: \"STANDARD\",\n                shape: local!brandingMap.CardShape,\n                showBorder: local!brandingMap.CardShowBorder,\n                style: local!brandingMap.AppianBackground,\n                contents: {\n                  rule!AIA_Extraction_ModelVersionPrompts(\n                    extractionModelVersion: ri!extractionModelVersion,\n                    brandingMap: local!brandingMap,\n                    isEdit: true\n                  )\n                },\n                marginBelow: \"STANDARD\"\n              )\n            }\n          )\n        }\n      )\n    },\n    /*Buttons*/\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {\n        /*Save*/\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: if(\n            ri!isUpdate,\n            #\"urn:appian:translation-string:v1:25a51cae-0560-410b-9b56-ba2b024e6364\",\n            #\"urn:appian:translation-string:v1:4d40defb-10bc-4a8a-bd4e-a7d76f054fdc\"\n          ),\n          submit: true,\n          saveInto: {\n            a!save(\n              ri!extractionModelVersion,\n              if(\n                ri!isUpdate,\n                #\"urn:appian:function:v1:a:update\"(\n                  ri!extractionModelVersion,\n                  {\n                    recordType!AIA Extraction Model Version.modifiedOn,\n                    recordType!AIA Extraction Model Version.modifiedBy\n                  },\n                  { now(), loggedInUser() }\n                ),\n                #\"urn:appian:function:v1:a:update\"(\n                  ri!extractionModelVersion,\n                  {\n                    recordType!AIA Extraction Model Version.createdBy,\n                    recordType!AIA Extraction Model Version.createdOn,\n                    recordType!AIA Extraction Model Version.modifiedOn,\n                    recordType!AIA Extraction Model Version.modifiedBy\n                  },\n                  {\n                    loggedInUser(),\n                    now(),\n                    now(),\n                    loggedInUser()\n                  }\n                )\n              )\n            ),\n            if(\n              or(\n                a!isNullOrEmpty(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples]\n                ),\n                a!isNullOrEmpty(\n                  ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.modelType][1]\n                )\n              ),\n              a!save(\n                ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples],\n                rule!AIA_GetModelVersionExamples(modelVersion: ri!extractionModelVersion)\n              ),\n              {}\n            ),\n            local!fieldSaves,\n            a!save(ri!originalVersion, local!originalVersion)\n          },\n          style: if(\n            ri!extractionModelVersion[recordType!AIA Extraction Model Version.status] = cons!AIA_MODEL_VERSION_STATUS_DRAFT,\n            \"OUTLINE\",\n            \"SOLID\"\n          ),\n          validate: true\n        ),\n        /*Save and Publish*/\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          showWhen: ri!extractionModelVersion[recordType!AIA Extraction Model Version.status] = cons!AIA_MODEL_VERSION_STATUS_DRAFT,\n          label: #\"urn:appian:translation-string:v1:9f94e9ef-3f0d-4372-b9ea-cc03293e9c8e\",\n          saveInto: {\n            a!save(\n              ri!extractionModelVersion,\n              if(\n                ri!isUpdate,\n                #\"urn:appian:function:v1:a:update\"(\n                  ri!extractionModelVersion,\n                  {\n                    recordType!AIA Extraction Model Version.status,\n                    recordType!AIA Extraction Model Version.modifiedOn,\n                    recordType!AIA Extraction Model Version.modifiedBy,\n\n                  },\n                  {\n                    cons!AIA_MODEL_VERSION_STATUS_PUBLISHED,\n                    now(),\n                    loggedInUser()\n                  }\n                ),\n                #\"urn:appian:function:v1:a:update\"(\n                  ri!extractionModelVersion,\n                  {\n                    recordType!AIA Extraction Model Version.status,\n                    recordType!AIA Extraction Model Version.createdBy,\n                    recordType!AIA Extraction Model Version.createdOn,\n                    recordType!AIA Extraction Model Version.modifiedOn,\n                    recordType!AIA Extraction Model Version.modifiedBy\n                  },\n                  {\n                    cons!AIA_MODEL_VERSION_STATUS_PUBLISHED,\n                    loggedInUser(),\n                    now(),\n                    now(),\n                    loggedInUser()\n                  }\n                )\n              )\n            ),\n            local!fieldSaves,\n            a!save(ri!originalVersion, local!originalVersion)\n          },\n          submit: true,\n          validate: true,\n          style: \"SOLID\"\n        )\n      },\n      /*Cancel*/\n      secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n        value: null,\n        saveInto: ri!extractionModelVersion,\n        submit: true,\n        style: \"OUTLINE\",\n        validate: false\n      )\n    ),\n    /*Validations*/\n    validations: {\n      rule!AIA_ExtractionModelVersion_ValidateFields(\n        extractionModelVersion: ri!extractionModelVersion,\n        showValidation: true()\n      ),\n      rule!AIA_ExtractionModelVersion_ValidateReconciliationTab(\n        extractionModelVersion: ri!extractionModelVersion,\n        showValidation: true()\n      ),\n      rule!AIA_ExtractionModelVersion_ValidateFieldsTableData(\n        extractionModelVersion: ri!extractionModelVersion,\n        showValidation: true()\n      ),\n      rule!AIA_ExtractionModelVersion_ValidateSections(\n        extractionModelVersionSections: ri!extractionModelVersion[recordType!AIA Extraction Model Version.sections],\n        currentTab: local!currentTab\n      ),\n      rule!AIA_ExtractionModelVersion_ValidatePrompt(\n        extractionModelVersion: ri!extractionModelVersion,\n        currentTab: local!currentTab\n      ),\n      rule!AIA_ExtractionModelVersion_ValidateExample(\n        extractionModelVersion: ri!extractionModelVersion,\n        currentTab: local!currentTab\n      )\n    }\n  )\n)"
    },
    "_a-0000ee35-0ca2-8000-9ba6-011c48011c48_13646": {
      "name": "AIA_LogMetric",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!name,\n  /* Classification Model Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_CREATED,\n  then: rule!AIA_MTR_ClassificationModelCreated(),\n  /* Classification Instance Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ClassificationInstanceCreated(),\n  /* Classification Instance Reconciled */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ClassificationInstanceReconciled(),\n  /* Classification Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFIED_WITH_ERRORS,\n  then: rule!AIA_MTR_ClassificationInstanceClassifiedWithErrors(),\n  /* Classification Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFICATION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ClassificationInstanceError(),\n  \n  /* Extraction Model Created */\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_CREATED,\n  then: rule!AIA_MTR_ExtractionModelCreated(),\n  /* Extraction Instance Created */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ExtractionInstanceCreated(),\n  /* Extraction Instance Reconciled */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ExtractionInstanceReconciled(),\n  /* Extraction Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTED_WITH_ERRORS,\n  then: rule!AIA_MTR_ExtractionInstanceExtractedWithErrors(),\n  /* Extraction Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ExtractionInstanceError(),\n  \n  /* Triggered when AI review raises an error (field level) */\n  equals: cons!AIA_MTR_AI_REVIEW_FIELD,\n  then: rule!AIA_MTR_ExtractionInstanceFieldAiReview(),\n  /* Triggered when AI review raises an error (instance level, this instance has 1 or more errors raised by AI review) */\n  equals: cons!AIA_MTR_AI_REVIEW_INSTANCE,\n  then: rule!AIA_MTR_ExtractionInstanceAiReview(),\n  /* Triggered when model is created with AI review turned on OR AI review is turned on for a model */\n  equals: cons!AIA_MTR_AI_REVIEW_MODEL_VERSION,\n  then: rule!AIA_MTR_ExtractionModelVersionAiReview(),\n  /* Triggered when user clicks accept */\n  equals: cons!AIA_MTR_AI_REVIEW_ACCEPT,\n  then: rule!AIA_MTR_ExtractionInstanceValidationAccept(),\n  /* Triggered when user clicks ignored */\n  equals: cons!AIA_MTR_AI_REVIEW_IGNORE,\n  then: rule!AIA_MTR_ExtractionInstanceValidationIgnore(),\n  /*triggered when spot check ocnfigured*/\n  equals: cons!AIA_MTR_SPOT_CHECK_MODEL_VERSION,\n  then: rule!AIA_MTR_ModelVersionConfigureSampling(),\n  /* Triggered when a model validation rule of type AI validation creates a validation instance */\n  equals: cons!AIA_MTR_AI_VALIDATION_RULE_OCCURANCE,\n  then: rule!AIA_MTR_InstanceValidationAiRuleOccurance(),\n  /*Confidence Threshold Enabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_ENABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdEnabled(),\n  /*Confidence Threshold Disabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_DISABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdDisabled(),\n  /*Extraction Model Version Restored*/\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ExtractionModelVersionRestore(),\n  /*Classification Model Version Restored*/\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ClassificationModelVersionRestore(),\n  /*Model Test Suite Created*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_CREATED,\n  then: rule!AIA_MTR_ModelTestSuiteCreated(),\n  /*Model Test Suite Updated*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_UPDATED,\n  then: rule!AIA_MTR_ModelTestSuiteUpdated(),\n  /*Model Test Run Initiated*/\n  equals: cons!AIA_MTR_MODEL_TEST_RUN_INITIATED,\n  then: rule!AIA_MTR_ModelTestRunInitiated(),\n  /*Classification Model Version Created with Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_MODEL_VERSION_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationModelVersionCreated(),\n  /*Classification Instance Created for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceCreated(),\n  /*Classification Instance Reconciled for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceReconciled(),\n  default: null\n)"
    },
    "_a-0000e6f4-5904-8000-6603-01ef9001ef90_223738": {
      "name": "SHRD_ContentDetailsToDictionary",
      "type": "Expression Rule",
      "sail_code": "if(\n  find(\"No object\", ri!contentDetails) > 0,\n  null,\n  {\n    id: if(\n      isnull(ri!id),\n      tointeger(split(ri!contentDetails, \",\")[2]),\n      ri!id\n    ),\n    uuid: tostring(if(\n      isnull(ri!uuid),\n      extract(ri!contentDetails, \"UUID: \", \",\"),\n      ri!uuid\n    )),\n    name: tostring(extract(ri!contentDetails, \"Name: \", \",\"))\n  }\n)"
    },
    "_a-0000eeb2-df20-8000-9bfe-011c48011c48_154565": {
      "name": "AIA_MTR_InstanceValidationAiRuleOccurance",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_197052": {
      "name": "AIA_ViewMoreField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!viewMore: false,\n  local!numChars: a!defaultValue(\n    ri!numChars,\n    500\n  ),\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    showWhen: ri!showWhen,\n    label: ri!label,\n    labelPosition: a!defaultValue(ri!labelPosition, \"COLLAPSED\"),\n    value: {\n      if(\n        local!viewMore,\n        ri!value,\n        left(\n          ri!value,\n          local!numChars\n        )\n      ),\n      if(\n        len(\n          ri!value\n        ) > local!numChars,\n        {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: {\n              \"... \",\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: #\"urn:appian:translation-string:v1:898d2964-2288-4709-a5ba-aba0dd098bd6\",\n                linkStyle: \"STANDALONE\",\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: a!save(\n                    local!viewMore,\n                    not(\n                      local!viewMore\n                    )\n                  )\n                )\n              )\n            },\n            showWhen: not(\n              local!viewMore\n            )\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: #\"urn:appian:translation-string:v1:b0b89a5a-3446-45e5-89e5-dc8b1c26caca\",\n            linkStyle: \"STANDALONE\",\n            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n              saveInto: a!save(\n                local!viewMore,\n                not(\n                  local!viewMore\n                )\n              )\n            ),\n            showWhen: local!viewMore\n          )\n        },\n        {}\n      )\n    }\n  )\n)"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179352": {
      "name": "AIA_MTR_ConfidenceThresholdEnabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec5c-9eda-8000-9bec-011c48011c48_117023": {
      "name": "AIA_Extraction_GetModelVersionById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Model Version,\n  fields: {\n    rule!AIA_EXTRACTION_MODEL_VERSION_FIELDS()\n  },\n  relatedRecordData: {\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Extraction Model Version.fields,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Extraction Model Version Field.order,\n        ascending: true\n      )\n    ),\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Extraction Model Version.fields,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Extraction Model Version Field.order,\n        ascending: true\n      )\n    )\n  },\n  identifier: ri!identifier\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_159554": {
      "name": "AIA_Extraction_HasTextFields",
      "type": "Expression Rule",
      "sail_code": "a!isNotNullOrEmpty(\n  filter(\n    rule!AIA_Extraction_DisplayPromptField(\n      field: _,\n      operation: cons!AIA_PROMPT_OPERATION_MODE_TEXT\n    ),\n    ri!modelVersion[recordType!AIA Extraction Model Version.fields]\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_80190": {
      "name": "AIA_Test_GetLatestExtractionModel",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Model,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Extraction Model,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Extraction Model.modelId\n          )\n        }\n      )\n    ).data[recordType!AIA Extraction Model.modelId],\n    1,\n    null\n  ),\n  /*fields: {*/\n    /*'recordType!{f00f33ce-439e-4c81-9931-a244a643c0e8}AIA Extraction Model Version.relationships.{31afa576-bd49-4f56-a2db-1df39df27f26}extractionModel',*/\n    /*'recordType!{f00f33ce-439e-4c81-9931-a244a643c0e8}AIA Extraction Model Version.relationships.{3e78fcff-a033-4b81-a754-e8fff1062c32}fields'*/\n  /*},*/\n)"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_181995": {
      "name": "AIA_MTR_ExtractionModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee3e-060c-8000-9bb8-011c48011c48_203441": {
      "name": "SHRD_ReadDocumentContent",
      "type": "Expression Rule",
      "sail_code": "/*readdocumentcontent(ri!document)*/\n\nqueryfile(\n  ri!document,\n  \"TEXT\",\n  now()\n).result"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_62351": {
      "name": "AIA_Extraction_ConfigureFieldExtractionTableColumnGrid",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  accessibilityText: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(\n    #\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:2d7ad958-bb88-4c57-bad6-620a39404cff\"\n  ),\n  label: #\"urn:appian:translation-string:v1:0c3b94d1-dae5-4644-a3e2-9c8e5ac0df5c\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:c917d5b3-b5d5-4155-830d-26af8fbe50f7\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:fda6b93a-6b11-48ac-8b35-4c7aaf7f3f65\",\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(label: \"\", ),\n\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"MEDIUM\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(),\n\n  },\n  rows: #\"SYSTEM_SYSRULES_forEach\"(\n    items: if(\n      a!isNullOrEmpty(ri!fields),\n      null,\n      ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n    ),\n    expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n      id: fv!index,\n      contents: {\n        /* Label*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.label],\n          readOnly: true\n        ),\n        /*Options Rule*/\n        rule!SHRD_RulePicker(\n          saves: {\n            fv!item[recordType!AIA Extraction Model Version Field.optionRule],\n            ri!fieldsSave\n          },\n          value: fv!item[recordType!AIA Extraction Model Version Field.optionRule],\n          returnType: \"NAME\",\n          ruleOutputRequired: true,\n          placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\"\n        ),\n        #\"SYSTEM_SYSRULES_textField\"(readOnly: true)\n      }\n    )\n  ),\n  /*height: \"SHORT_PLUS\",*/\n  addRowLink: if(\n    a!isNullOrEmpty(ri!fields),\n    {},\n    #\"SYSTEM_SYSRULES_dynamicLink\"(\n      label: #\"urn:appian:translation-string:v1:fff89312-b0aa-430c-a3e7-bfdc1ca93fcd\",\n      value: {\n        recordType!AIA Extraction Model Version.fields: {\n          recordType!AIA Extraction Model Version Field(\n            recordType!AIA Extraction Model Version Field.key: null(),\n            recordType!AIA Extraction Model Version Field.required: false,\n            recordType!AIA Extraction Model Version Field.type: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n            recordType!AIA Extraction Model Version Field.isMultiple: false,\n            recordType!AIA Extraction Model Version Field.order: if(\n              or(\n                a!isNullOrEmpty(\n                  ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n                ),\n                a!isNullOrEmpty(\n                  index(\n                    index(\n                      ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n                      length(\n                        ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n                      ),\n                      null\n                    ),\n                    recordType!AIA Extraction Model Version Field.order,\n                    null\n                  )\n                )\n              ),\n              1,\n              max(\n                ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n              ) + 1\n            )\n          )\n        }\n      },\n      saveInto: {\n        a!save(\n          ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n          append(\n            ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n            save!value\n          )\n        ),\n        ri!fieldsSave\n      }\n    )\n  ),\n  borderStyle: \"LIGHT\",\n  shadeAlternateRows: false,\n  spacing: \"DENSE\"\n)"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40675": {
      "name": "AIA_Extraction_GeneratePrompt",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!promptMap: rule!AIA_Extraction_GeneratePromptMap(\n    sectionInstance: ri!sectionInstance,\n    sectionFilter: ri!sectionFilter,\n    operation: ri!operation,\n    modelVersion: ri!modelVersion,\n    hasBoundingBoxes: ri!hasBoundingBoxes,\n    ExtractionInstance: ri!ExtractionInstance,\n    batch: ri!batch\n  ),\n  local!promptMap.role & rule!AIA_PROMPT_SECTION_DIVIDER() & \n  local!promptMap.entities & rule!AIA_PROMPT_SECTION_DIVIDER() & \n  local!promptMap.instructions & rule!AIA_PROMPT_SECTION_DIVIDER() & \n  if(\n    a!isNotNullOrEmpty(local!promptMap.examples),\n    local!promptMap.examples & rule!AIA_PROMPT_SECTION_DIVIDER(),\n    \"\"\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_76923": {
      "name": "SHRD_ReformatLabelAsKey",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!clean: cleanwith(ri!label, \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 \"),\n  local!words: split(local!clean, \" \"),\n  local!proper: joinarray(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!words,\n      expression: if(\n        fv!isFirst,\n        lower(fv!item),\n        proper(fv!item)\n      )\n    ),\n    \"\"\n  ),\n  local!proper\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_41994": {
      "name": "AIA_ExtractionModelVersion_ValidateSections",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    ri!currentTab = 2,\n    a!isNullOrEmpty(ri!extractionModelVersionSections)\n  ),\n  {},\n  {\n    #\"SYSTEM_SYSRULES_validationMessage\"(\n      message: #\"urn:appian:translation-string:v1:bb86661f-e302-4874-a664-f1bd23b0bbee\",\n      validateAfter: \"SUBMIT\",\n      showWhen: length(\n        union(\n          touniformstring(\n            ri!extractionModelVersionSections[recordType!AIA Extraction Model Version Section.name]\n          ),\n          touniformstring({})\n        )\n      ) <> length(\n        ri!extractionModelVersionSections[recordType!AIA Extraction Model Version Section.name]\n      )\n    ),\n    #\"SYSTEM_SYSRULES_validationMessage\"(\n      message: #\"urn:appian:translation-string:v1:12ecd654-fa5b-41ad-8311-25919a6f801a\",\n      validateAfter: \"SUBMIT\",\n      showWhen: a!isNotNullOrEmpty(\n        where(\n          a!flatten(\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: ri!extractionModelVersionSections,\n              expression: a!localVariables(\n                local!rule: rule!AIA_ExtractJson(\n                  json: fv!item[recordType!AIA Extraction Model Version Section.rule]\n                ),\n                or(\n                  a!isNullOrEmpty(\n                    fv!item[recordType!AIA Extraction Model Version Section.name]\n                  ),\n                  and(\n                    a!isNotNullOrEmpty(local!rule),\n                    a!localVariables(\n                      local!parameters: displayvalue(\n                        local!rule.type,\n                        rule!AIA_ENUM_SectionRuleTypes().id,\n                        rule!AIA_ENUM_SectionRuleTypes().parameters,\n                        null\n                      ),\n                      #\"SYSTEM_SYSRULES_forEach\"(\n                        local!parameters,\n                        if(\n                          fv!item.required,\n                          /* Make sure its set - if not return true */\n                          a!isNullOrEmpty(index(local!rule, fv!item.name, {})),\n                          false\n                        )\n                      )\n                    )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    ),\n    #\"SYSTEM_SYSRULES_validationMessage\"(\n      message:  #\"urn:appian:translation-string:v1:ca499430-a509-40e4-b846-0c48bc3be1cc\"(#\"urn:appian:translation-variable:v1:15ece087-b792-4d80-a8b7-765e4bc8897f\": 255),\n      validateAfter: \"SUBMIT\",\n      showWhen: if(\n        a!isNotNullOrEmpty(\n          ri!extractionModelVersionSections[recordType!AIA Extraction Model Version Section.name]\n        ),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!extractionModelVersionSections[recordType!AIA Extraction Model Version Section.name],\n          expression: len(fv!item) > 255\n        ),\n        false()\n      )\n    )\n  }\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_199422": {
      "name": "AIA_Test_GetLatestExtractionInstanceWithFields",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.inputDocumentId,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion.confidenceThreshold,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion,\n  }\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_25972": {
      "name": "AIA_displayVersionStatus",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_tagField\"(\n  labelPosition: \"COLLAPSED\",\n  align: \"START\",\n  accessibilityText: ri!versionStatus,\n  tags:a!match(\n    value: ri!versionStatus,\n    equals: cons!AIA_MODEL_VERSION_STATUS_PUBLISHED,\n    then: #\"SYSTEM_SYSRULES_tagItem_v1\"(\n      text: cons!AIA_MODEL_VERSION_STATUS_PUBLISHED,\n      backgroundColor: ri!brandingMap.Green1,\n      textColor: ri!brandingMap.Green4\n    ),\n    equals: cons!AIA_MODEL_VERSION_STATUS_DRAFT,\n    then: #\"SYSTEM_SYSRULES_tagItem_v1\"(\n      text: cons!AIA_MODEL_VERSION_STATUS_DRAFT,\n      backgroundColor: ri!brandingMap.Yellow1,\n      textColor: ri!brandingMap.Yellow4\n    ),\n    default: #\"SYSTEM_SYSRULES_tagItem_v1\"(\n      text: cons!AIA_MODEL_VERSION_STATUS_DISABLED,\n      backgroundColor: ri!brandingMap.Gray1,\n      textColor: ri!brandingMap.Gray4\n    )\n  )\n)"
    },
    "_a-0000ed57-1773-8000-9c7e-011c48011c48_327806": {
      "name": "AIA_Extraction_VisionInstructions",
      "type": "Expression Rule",
      "sail_code": "=\"- \" & #\"urn:appian:translation-string:v1:37e1cfad-08b7-4397-bcee-4dd175e4f0e8\" & \"\n- \" & #\"urn:appian:translation-string:v1:f5505f0e-9119-4a41-8953-ec5ef8f2d904\" & \" <example>{..., \"\"brokerBranch\"\": {\"\"value\"\": \"\"some branch name\"\", \"\"pageNum\"\": \"\"1\"\"}, ...}</example>\n- \" & #\"urn:appian:translation-string:v1:0f4e0ba0-b7aa-45a9-9087-95883107d7e6\" & \" <example>[{\"\"column1\"\": \"\"value\"\", \"\"column2\"\": \"\"value\"\", ..., \"\"columnN\"\" : \"\"value\"\", \"\"pageNum\"\": \"\"2\"\"}, ...]</example>\n- \" & #\"urn:appian:translation-string:v1:d92f05d6-36f5-47d4-8a63-e1320620aebc\" & \" <example>[{\"\"value\"\": \"\"item\"\", \"\"pageNum\"\": \"\"3\"\"}]</example>\n- \" & #\"urn:appian:translation-string:v1:9202de9d-b760-4db0-b0a6-9c958417d630\" & \"\n\n<example>\n```json\n{\n  \"\"field1\"\": {\"\"value\"\": \"\"field 1 value\"\", \"\"pageNum\"\": \"\"1\"\"},\n  \"\"field2\"\": {\"\"value\"\": \"\"field 2 value\"\", \"\"pageNum\"\": \"\"2\"\"},\n  \"\"table1\"\": [\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"pageNum\"\": \"\"3\"\"},\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"pageNum\"\": \"\"3\"\"},\n  ],\n  \"\"table2\"\": [\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"column3\"\": \"\"col 3 value\"\", \"\"pageNum\"\": \"\"4\"\"},\n    {\"\"column1\"\": \"\"col 1 value\"\", \"\"column2\"\": \"\"col 2 value\"\", \"\"column3\"\": \"\"col 3 value\"\", \"\"pageNum\"\": \"\"5\"\"},\n  ],\n  \"\"list1\"\": [\n    {\"\"value\"\": \"\"First value\"\", \"\"pageNum\"\": \"\"2\"\"},\n    {\"\"value\"\": \"\"Second value\"\", \"\"pageNum\"\": \"\"2\"\"}\n  ],\n  \"\"list2\"\": [\n    {\"\"value\"\": \"\"First value\"\", \"\"pageNum\"\": \"\"1\"\"},\n    {\"\"value\"\": \"\"Second value\"\", \"\"pageNum\"\": \"\"1\"\"},\n    {\"\"value\"\": \"\"Third value\"\", \"\"pageNum\"\": \"\"1\"\"}\n  ]\n}\n```\n</example>\""
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_50405": {
      "name": "AIA_Extraction_DoFieldsMatch",
      "type": "Expression Rule",
      "sail_code": "#\"urn:appian:function:v1:a:update\"(\n  ri!field1,\n  {\n    recordType!AIA Extraction Model Version Field.extractionType,\n    recordType!AIA Extraction Model Version Field.order,\n    recordType!AIA Extraction Model Version Field.section\n  },\n  {null, null, null}\n) = #\"urn:appian:function:v1:a:update\"(\n  ri!field2,\n  {\n    recordType!AIA Extraction Model Version Field.extractionType,\n    recordType!AIA Extraction Model Version Field.order,\n    recordType!AIA Extraction Model Version Field.section\n  },\n  {null, null, null}\n)"
    },
    "_a-0000ecfc-48c9-8000-9c55-011c48011c48_234943": {
      "name": "AIA_ExtractionModelVersion_Sub_Prompting",
      "type": "Interface",
      "sail_code": "{\n  rule!AIA_LlmOptionField(\n    value: ri!extractionModelVersion[recordType!AIA Extraction Model Version.llm],\n    defaultValue: rule!AIA_DefaultModel(),\n    saveInto: ri!extractionModelVersion[recordType!AIA Extraction Model Version.llm]\n  ),\n  #\"SYSTEM_SYSRULES_paragraphField\"(\n    label: #\"urn:appian:translation-string:v1:bf997137-f6fd-4bc0-9f80-aecac9328d8d\",\n    labelPosition: \"ABOVE\",\n    helpTooltip: #\"urn:appian:translation-string:v1:00661ea5-bded-4f86-96b3-91d4359b28a6\",\n    value: a!defaultValue(\n      ri!extractionModelVersion[recordType!AIA Extraction Model Version.role],\n      rule!AIA_Extraction_DefaultPromptRole()\n    ),\n    saveInto: ri!extractionModelVersion[recordType!AIA Extraction Model Version.role],\n    placeholder: #\"urn:appian:translation-string:v1:eee0d6c2-2740-4b32-8feb-2d76921a8b0d\",\n    characterLimit: 4000,\n    height: \"MEDIUM\",\n    required: false,\n    showCharacterCount: false\n  ),\n  #\"SYSTEM_SYSRULES_paragraphField\"(\n    label: #\"urn:appian:translation-string:v1:bdd579f6-3b22-433e-9a38-762e59ccaaa6\",\n    labelPosition: \"ABOVE\",\n    helpTooltip: #\"urn:appian:translation-string:v1:705559e8-c6ae-477c-b1c8-9524780af63b\",\n    value: ri!extractionModelVersion[recordType!AIA Extraction Model Version.instructions],\n    saveInto: ri!extractionModelVersion[recordType!AIA Extraction Model Version.instructions],\n    characterLimit: 4000,\n    height: \"MEDIUM\",\n    required: false,\n    showCharacterCount: false\n  )\n}"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_91065": {
      "name": "AIA_ParseFieldResults",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!result: rule!AIA_ExtractJson(\n    json: ri!response\n  ),\n  local!fields: if(\n    runtimetypeof(local!result) = #\"urn:appian:function:v1:a:listtype?okey=a!listType\"('type!{http://www.appian.com/ae/types/2009}Dictionary'),\n    local!result,\n    index(local!result, \"fields\", null)\n  ),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    local!fields,\n    recordType!AIA Extraction Model Version Field(\n      recordType!AIA Extraction Model Version Field.section: if(\n        a!isNotNullOrEmpty(fv!item.section),\n        proper(fv!item.section),\n        fv!item.section\n      ),\n      recordType!AIA Extraction Model Version Field.order: fv!index,\n      recordType!AIA Extraction Model Version Field.key: fv!item.key,\n      recordType!AIA Extraction Model Version Field.label: fv!item.label,\n      recordType!AIA Extraction Model Version Field.description: fv!item.description,\n      recordType!AIA Extraction Model Version Field.required: false,\n      recordType!AIA Extraction Model Version Field.type: if(\n        contains(\n          cons!AIA_EXTRACTION_FIELD_TYPES,\n          tostring(\n            fv!item.type\n          )\n        ),\n        fv!item.type,\n        null\n      ),\n      recordType!AIA Extraction Model Version Field.extractionType: ri!model[recordType!AIA Extraction Model.type],\n      recordType!AIA Extraction Model Version Field.columns: #\"SYSTEM_SYSRULES_forEach\"(\n        fv!item.columns,\n        recordType!AIA Extraction Model Version Field(\n          recordType!AIA Extraction Model Version Field.order: fv!index,\n          recordType!AIA Extraction Model Version Field.key: fv!item.key,\n          recordType!AIA Extraction Model Version Field.label: fv!item.label,\n          recordType!AIA Extraction Model Version Field.description: fv!item.description,\n          recordType!AIA Extraction Model Version Field.type: if(\n            contains(\n              cons!AIA_EXTRACTION_FIELD_TYPES,\n              tostring(\n                fv!item.type\n              )\n            ),\n            fv!item.type,\n            null\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_196878": {
      "name": "AIA_AIReviewPromptSettings",
      "type": "Interface",
      "sail_code": "{\n  rule!AIA_LlmOptionField(\n    value: ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.aiReviewLlm],\n    saveInto: ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.aiReviewLlm],\n    defaultValue: rule!AIA_AiReviewDefaultModel(),\n    includeVision: true,\n    required: true\n  ),\n  #\"SYSTEM_SYSRULES_paragraphField\"(\n    label: #\"urn:appian:translation-string:v1:bf997137-f6fd-4bc0-9f80-aecac9328d8d\",\n    value: a!defaultValue(\n      ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.aiReviewRole],\n      rule!AIA_Extraction_DefaultAiReviwRole()\n    ),\n    saveInto: ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.aiReviewRole],\n    height: \"MEDIUM\"\n  ),\n  rule!AIA_ViewMoreField(\n    numChars: 500,\n    label: #\"urn:appian:translation-string:v1:c38ee063-c9c5-473e-83ba-ac8481afcf40\",\n    value: rule!AIA_AiReviewPromptFixed(\n      ModelVersion: ri!ExtractionModelVersion\n    )\n  ),\n  #\"SYSTEM_SYSRULES_paragraphField\"(\n    label: #\"urn:appian:translation-string:v1:bdd579f6-3b22-433e-9a38-762e59ccaaa6\",\n    placeholder: #\"urn:appian:translation-string:v1:53a25e30-cd29-4633-83d1-455142abd72c\",\n    value: ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.aiReviewInstructions],\n    saveInto: ri!ExtractionModelVersion[recordType!AIA Extraction Model Version.aiReviewInstructions],\n    height: \"MEDIUM\"\n  )\n}"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_182518": {
      "name": "AIA_IsDocumentExtension",
      "type": "Expression Rule",
      "sail_code": "and(\n  a!isNotNullOrEmpty(ri!document),\n  contains(\n    lower(ri!extensions),\n    lower(document(\n      ri!document,\n      \"extension\"\n    ))\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_22180": {
      "name": "AIA_ExtractionModeVersion_Sub_GenerateFields",
      "type": "Interface",
      "sail_code": "/*\nAttributes for generateFields Data rule input\n\ngenerationFieldType -> Selected Generation Type Value\ndescribeFieldDescription -> DescribeFieldsDescriptionValue\nselectedDocumentType -> Selected Document Type Value\nuploadedDocument -> Uploaded Document Value\nextractionDocumentDescription -> Extraction Document Description Value\ndocumentMetadata -> Document Read Values\nerrorMessage -> Holds the error message if any\nsheetNumber -> Holds the Sheet Number Value\nnumColumns -> Holds the Number Columns Value\nnumRows -> Holds the Number Rows Value\nisPreview -> To show preview button and toggle between preview screen and Describe Fields screen\nisPredictField -> To check for Predict Field or Not\n*/\n#\"SYSTEM_SYSRULES_cardLayout\"(\n  contents: {\n    /*Generation Type*/\n    #\"SYSTEM_SYSRULES_cardChoiceField\"(\n      label: #\"urn:appian:translation-string:v1:c50d9b84-15cc-4c48-81f0-dc1ce40b4266\",\n      labelPosition: \"ABOVE\",\n      data: {\n        /*Manual Configuration*/\n        a!map(\n          id: cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[3],\n          icon: \"user-edit\",\n          primaryText: #\"urn:appian:translation-string:v1:8c9e3aac-1a29-4347-bd05-e27c67a1b417\",\n          /*secondaryText: 'translation!{b777166b-bd4b-4195-a492-718ccbfcaecc}AIA_Translations.{65977270-bafb-4748-bcb1-9797002646fe}Provide the description of document fields'*/\n          order: 1\n        ),\n        /*Describe Fields*/\n        a!map(\n          id: cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[1],\n          icon: \"pencil\",\n          primaryText: #\"urn:appian:translation-string:v1:630bad7b-d1b8-4999-bf17-0812bf2b1c41\",\n          /*secondaryText: 'translation!{b777166b-bd4b-4195-a492-718ccbfcaecc}AIA_Translations.{65977270-bafb-4748-bcb1-9797002646fe}Provide the description of document fields'*/\n          order: 2\n        ),\n        /*Extract from Document*/\n        a!map(\n          id: cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[2],\n          icon: \"file-o\",\n          primaryText: #\"urn:appian:translation-string:v1:8aaadde7-219e-419e-9f11-d151ce73883d\",\n          /*secondaryText: 'translation!{b777166b-bd4b-4195-a492-718ccbfcaecc}AIA_Translations.{98e8b7ad-dce5-448c-8694-ffa0803402a6}Use an example document to generate fields'*/\n          order: 3\n        )\n      },\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(field: \"order\", ascending: true)\n      },\n      cardTemplate: #\"SYSTEM_SYSRULES_cardTemplateBarTextStacked\"(\n        id: fv!data.id,\n        primaryText: fv!data.primaryText,\n        secondaryText: fv!data.secondaryText,\n        icon: fv!data.icon,\n        iconColor: ri!brandingMap.Blue4\n      ),\n      value: ri!generateFieldData.generationFieldType,\n      saveInto: {\n        a!save(\n          ri!generateFieldData.generationFieldType,\n          tostring(save!value)\n        ),\n        a!save(\n          {\n            ri!generateFieldData.describeFieldDescription,\n            ri!generateFieldData.selectedDocumentType,\n            ri!generateFieldData.uploadedDocument,\n            ri!generateFieldData.extractionDocumentDescription,\n            ri!generateFieldData.documentMetadata,\n            ri!generateFieldData.errorMessage\n          },\n          null()\n        ),\n        if(\n          or(\n            ri!generateFieldData.generationFieldType = cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[2]\n          ),\n          {\n            a!save(\n              ri!generateFieldData.selectedDocumentType,\n              cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[2]\n            ),\n            a!save(\n              ri!generateFieldData.extractionDocumentDescription,\n              #\"urn:appian:translation-string:v1:77276212-ad79-41d6-94a7-8c79efd82a6f\"\n            )\n          },\n          a!save(\n            ri!generateFieldData.selectedDocumentType,\n            null()\n          )\n        )\n      },\n      maxSelections: 1,\n      showShadow: false()\n    ),\n    a!match(\n      value: tostring(\n        ri!generateFieldData.generationFieldType\n      ),\n      equals: cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[1],\n      /*Describe Field Section*/\n      then: #\"SYSTEM_SYSRULES_paragraphField\"(\n        required: ri!generateFieldData.generationFieldType = cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[1],\n        label: #\"urn:appian:translation-string:v1:c0d18bd4-7f87-45c0-af07-b756ddcc1d12\",\n        placeholder: #\"urn:appian:translation-string:v1:a34df65e-17fb-409d-ab31-6fda0657726e\",\n        instructions: #\"urn:appian:translation-string:v1:51785a8b-7f11-4eed-86c7-57bbdc6a93b9\",\n        value: ri!generateFieldData.describeFieldDescription,\n        saveInto: ri!generateFieldData.describeFieldDescription\n      ),\n      /*Extract Document Section*/\n      equals: cons!AIA_TXT_EXTRACTION_MODEL_GENERATION_FIELD_TYPE[2],\n      then: {\n        /*Document Type*/\n        #\"SYSTEM_SYSRULES_cardChoiceField\"(\n          label: #\"urn:appian:translation-string:v1:68fbf292-0312-430f-a09a-576bf0278417\",\n          labelPosition: \"ABOVE\",\n          instructions: #\"urn:appian:translation-string:v1:fb29a6cf-305d-4821-8411-e82a8869792c\",\n          required: true(),\n          data: {\n            a!map(\n              id: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[1],\n              icon: \"file-text-o\",\n              primaryText: #\"urn:appian:translation-string:v1:b54b23b6-a80a-4734-be2c-92a2180f4d37\",\n              order: 2,\n\n            ),\n            a!map(\n              id: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[2],\n              icon: \"file-pdf-o\",\n              primaryText: #\"urn:appian:translation-string:v1:b310f3bd-355c-423b-8fbc-e3ab0bdc6450\",\n              order: 1\n            ),\n            a!map(\n              id: cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[3],\n              icon: \"file-excel-o\",\n              primaryText: #\"urn:appian:translation-string:v1:5085c44b-0dc2-4da1-a776-86be3f7c8dd2\",\n              order: 3\n            )\n          },\n          sort: {\n            #\"SYSTEM_SYSRULES_sortInfo\"(field: \"order\", ascending: true)\n          },\n          cardTemplate: #\"SYSTEM_SYSRULES_cardTemplateBarTextStacked\"(\n            id: fv!data.id,\n            primaryText: fv!data.primaryText,\n            secondaryText: fv!data.secondaryText,\n            icon: fv!data.icon,\n            iconColor: ri!brandingMap.Blue4,\n            iconAltText: fv!data.iconAltText\n          ),\n          value: ri!generateFieldData.selectedDocumentType,\n          saveInto: {\n            a!save(\n              ri!generateFieldData.selectedDocumentType,\n              tostring(save!value)\n            ),\n            a!save(\n              {\n                ri!generateFieldData.uploadedDocument,\n                ri!generateFieldData.errorMessage,\n                ri!generateFieldData.documentMetadata\n              },\n              null()\n            ),\n            if(\n              ri!generateFieldData.selectedDocumentType = cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[3],\n              {\n                a!save(ri!generateFieldData.sheetNumber, 0),\n                a!save(ri!generateFieldData.numColumns, 10),\n                a!save(ri!generateFieldData.numRows, 50)\n              },\n              {}\n            )\n          },\n          maxSelections: 1,\n          showShadow: false()\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n          marginAbove: \"STANDARD\",\n          showWhen: ri!generateFieldData.selectedDocumentType = cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[3],\n          items: {\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              width: \"1X\",\n              item: #\"SYSTEM_SYSRULES_integerField\"(\n                label: #\"urn:appian:translation-string:v1:adf64512-7a76-43f7-bfda-eb29d1d90616\",\n                value: tointeger(ri!generateFieldData.sheetNumber) + 1,\n                saveInto: {\n                  a!save(\n                    ri!generateFieldData.sheetNumber,\n                    save!value - 1\n                  )\n                },\n                align: \"RIGHT\"\n              )\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              width: \"1X\",\n              item: #\"SYSTEM_SYSRULES_integerField\"(\n                label: #\"urn:appian:translation-string:v1:add1f425-f2bb-4500-8979-3d354ba9ec94\",\n                value: ri!generateFieldData.numColumns,\n                saveInto: { ri!generateFieldData.numColumns },\n                align: \"RIGHT\"\n              )\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              width: \"1X\",\n              item: #\"SYSTEM_SYSRULES_integerField\"(\n                label: #\"urn:appian:translation-string:v1:e4f3b68e-9a83-423d-a993-2faa71f2a19f\",\n                value: ri!generateFieldData.numRows,\n                saveInto: { ri!generateFieldData.numRows },\n                align: \"RIGHT\"\n              )\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(width: \"1X\", item: {})\n          }\n        ),\n        #\"SYSTEM_SYSRULES_fileUploadField_v1\"(\n          label: #\"urn:appian:translation-string:v1:b8108bef-aaee-4ffc-91a5-6e6e007c9464\",\n          placeholder: #\"urn:appian:translation-string:v1:40a8cfa1-8f8c-48db-be26-897173a05594\",\n          instructions: concat(\n            if(\n              ri!generateFieldData.selectedDocumentType = cons!AIA_EXTRACTION_EXAMPLE_DOC_TYPES[3],\n              {\n                #\"urn:appian:translation-string:v1:91778db0-cad2-408a-9a96-d53ed0d07019\",\n                \" \"\n              },\n              {},\n\n            ),\n            #\"urn:appian:translation-string:v1:8e99e5a4-13b0-4dd9-a454-f6945b1ad6d9\"\n          ),\n          maxSelections: 1,\n          target: cons!AIA_FOLDER_INPUT_DOCS,\n          value: ri!generateFieldData.uploadedDocument,\n          required: true(),\n          saveInto: {\n            ri!generateFieldData.uploadedDocument,\n            rule!AIA_ExtractionModel_SaveforUploadDocumentField(\n              generateFieldData: ri!generateFieldData,\n              inputDocument: ri!generateFieldData.uploadedDocument\n            )\n          },\n          disabled: if(\n            a!isNullOrEmpty(\n              ri!generateFieldData.selectedDocumentType\n            ),\n            true(),\n            {}\n          ),\n          validations: if(\n            a!isNullOrEmpty(\n              rule!AIA_ValidateDocumentForGenerateFields(\n                inputDocumentExtension: fv!files.extension,\n                selectedDocumentType: ri!generateFieldData.selectedDocumentType\n              )\n            ),\n            if(\n              a!isNullOrEmpty(ri!generateFieldData.errorMessage),\n              \"\",\n              ri!generateFieldData.errorMessage\n            ),\n            rule!AIA_ValidateDocumentForGenerateFields(\n              inputDocumentExtension: fv!files.extension,\n              selectedDocumentType: ri!generateFieldData.selectedDocumentType\n            )\n          )\n        ),\n        #\"SYSTEM_SYSRULES_paragraphField\"(\n          label: #\"urn:appian:translation-string:v1:c0d18bd4-7f87-45c0-af07-b756ddcc1d12\",\n          placeholder: {},\n          value: ri!generateFieldData.extractionDocumentDescription,\n          saveInto: {\n            ri!generateFieldData.extractionDocumentDescription\n          }\n        )\n      },\n      default: {}\n    )\n  },\n  style: if(\n    a!isNullOrEmpty(ri!cardStyle),\n    ri!brandingMap.DefaultPageBackground,\n    ri!cardStyle\n  ),\n  shape: ri!brandingMap.CardShape,\n  padding: \"STANDARD\",\n  marginBelow: \"NONE\",\n  showBorder: ri!brandingMap.CardShowBorder,\n  showShadow: false(),\n\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_161814": {
      "name": "AIA_Extraction_NeedToRecalculateAccuracy",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldsMatch: toboolean(ri!originalVersion[recordType!AIA Extraction Model Version.fields.isNotTracked]) <> toboolean(ri!newVersion[recordType!AIA Extraction Model Version.fields.isNotTracked]),\n  local!columnsMatch: or(\n    and(\n      a!isNullOrEmpty(ri!originalVersion[recordType!AIA Extraction Model Version.fields]),\n      a!isNotNullOrEmpty(ri!newVersion[recordType!AIA Extraction Model Version.fields])\n    ),\n    and(\n      a!isNotNullOrEmpty(ri!originalVersion[recordType!AIA Extraction Model Version.fields]),\n      a!isNullOrEmpty(ri!newVersion[recordType!AIA Extraction Model Version.fields])\n    ),\n    a!flatten(\n      toboolean(ri!originalVersion[recordType!AIA Extraction Model Version.fields.columns.isNotTracked])\n    ) <> a!flatten(\n      toboolean(ri!newVersion[recordType!AIA Extraction Model Version.fields.columns.isNotTracked])\n    )\n  ), \n  or(\n    a!flatten(\n      {\n        local!fieldsMatch,\n        local!columnsMatch\n      }\n    )\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505575": {
      "name": "AIA_MTR_MultipleOutputsClassificationModelVersionCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_56347": {
      "name": "AIA_Extraction_HasVisualFields",
      "type": "Expression Rule",
      "sail_code": "a!isNotNullOrEmpty(\n  filter(\n    rule!AIA_Extraction_DisplayPromptField(\n      field: _,\n      operation: cons!AIA_PROMPT_OPERATION_MODE_MULTIMODAL\n    ),\n    ri!modelVersion[recordType!AIA Extraction Model Version.fields]\n  )\n)"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_195035": {
      "name": "AIA_GetLLMName",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!options: rule!AIA_ENUM_LlmVersions(\n    includeVision: true,\n    returnOnlySupportedLlms: false\n  ),\n  displayvalue(\n    ri!llm,\n    local!options.value,\n    local!options.label,\n    \"\"\n  )\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_203500": {
      "name": "AIA_EXTRACTION_INSTANCE_FIELDS",
      "type": "Expression Rule",
      "sail_code": "{\n  /* Extraction Instance */\n  recordType!AIA Extraction Instance.modelVersionId,\n  recordType!AIA Extraction Instance.documentId,\n  recordType!AIA Extraction Instance.statusId,\n  recordType!AIA Extraction Instance.hasBoundingBoxes,\n  recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n  recordType!AIA Extraction Instance.modifiedBy,\n  recordType!AIA Extraction Instance.modifiedOn,\n  /* Temporary */\n  recordType!AIA Extraction Instance.pageCount,\n  recordType!AIA Extraction Instance.documentFolderId,\n  /* Extraction Fields */\n  recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n  recordType!AIA Extraction Instance.fields.extractedValue,\n  recordType!AIA Extraction Instance.fields.overrideValue,\n  recordType!AIA Extraction Instance.fields.overrideNull,\n  recordType!AIA Extraction Instance.fields.boundingBox,\n  recordType!AIA Extraction Instance.fields.overrideBoundingBox,\n  recordType!AIA Extraction Instance.fields.confidence,\n  recordType!AIA Extraction Instance.fields.totalCells,\n  /* Extraction Fields > Rows */\n  recordType!AIA Extraction Instance.fields.rows.overrideValue,\n  recordType!AIA Extraction Instance.fields.rows.boundingBox,\n  /* Extraction Fields > Rows > Cells */\n  recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n  recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n  recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n  recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n  recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n\n  /* Extraction Fields > Model Version Field */  \n  recordType!AIA Extraction Instance.fields.modelVersionField.key,\n  recordType!AIA Extraction Instance.fields.modelVersionField.isNotTracked,\n  \n  /* Extraction Fields > Model Version Field > Columns */  \n  recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n  recordType!AIA Extraction Instance.fields.modelVersionField.columns.isNotTracked,\n\n  /* Extraction Fields > Rows > Cell > Column */  \n  #\"urn:appian:record-relationship:v1:64322398-e457-4695-87d5-09794164cf77/8d64a7fc-95d1-4c81-b1d8-f583dafbf127/dbb0701f-9e25-4d41-accc-959fc64a808d/69a05e41-75be-4506-ae42-ae78ac0d6b9a/9537b867-3cf8-4a1b-b019-fc98a6c4b090\",\n  \n  /* Extraction Fields > Model Version */  \n  recordType!AIA Extraction Instance.modelVersion,\n}"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_43003": {
      "name": "AIA_ENUM_FieldSchemas",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    name: cons!AIA_SCHEMA_MODE_PLAIN,\n    fields: {}\n  ),\n  a!map(\n    name: cons!AIA_SCHEMA_MODE_SPAN,\n    fields: {\n      a!map(\n        key: \"value\",\n        useFormat: true\n      ),\n      a!map(\n        key: \"spanId\",\n        required: false,\n        type: \"string\"\n      )\n    }\n  ),\n  a!map(\n    name: cons!AIA_PROMPT_MODE_CALCULATED,\n    fields: {\n      a!map(\n        key: \"value\",\n        useFormat: true\n      ),\n      a!map(\n        key: \"spanId\",\n        description: \"spanIds from all of the values that were used to derive the result. Return null if the values did not have spanId.\",\n        required: false,\n        type: \"string\"\n      ),\n      a!map(\n        key: \"reasoning\",\n        required: true,\n        type: \"string\"\n      )\n    }\n  ),\n  a!map(\n    name: cons!AIA_SCHEMA_MODE_AI_REVIEW,\n    fields: {\n      a!map(\n        key: \"extractedValue\",\n        required: false,\n        useFormat: true\n      ),\n      a!map(\n        key: \"suggestedValue\",\n        required: false,\n        useFormat: true\n      ),\n      a!map(\n        key: \"isCorrect\",\n        required: true,\n        type: \"boolean\"\n      ),\n      a!map(\n        key: \"reasoning\",\n        required: true,\n        type: \"string\"\n      )\n    }\n  )\n}"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40909": {
      "name": "AIA_ExtractJson",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!firstTry: rule!AIA_ExtractJsonInner(\n    json: ri!json\n  ),\n  local!result: if(\n    a!isNotNullOrEmpty(local!firstTry),\n    local!firstTry,\n    a!localVariables(\n      local!secondTry: rule!AIA_ExtractJsonInner(\n        json: index(split(ri!json, \"Appian's private AI\"), 1, null),\n      ),\n      if(\n        a!isNotNullOrEmpty(local!secondTry),\n        local!secondTry,\n        a!localVariables(\n          local!thirdTry: rule!AIA_ExtractJsonInner(\n            json: index(split(ri!json, \"Appian's private AI\"), 2, null),\n          ),\n          if(\n            a!isNotNullOrEmpty(local!thirdTry),\n            local!thirdTry,\n            a!localVariables(\n              local!forthTry: rule!AIA_ExtractJsonInner(\n                json: index(split(ri!json, \"<output>\"), 1, null),\n              ),\n              if(\n                a!isNotNullOrEmpty(local!forthTry),\n                local!forthTry,\n                a!localVariables(\n                  local!fifthTry: rule!AIA_ExtractJsonInner(\n                    json: index(split(ri!json, \"</entities>\"), 1, null),\n                  ),\n                  local!fifthTry\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  ),\n  local!finalResult: if(\n    a!isNullOrEmpty(local!result),\n    null,\n    if(\n      a!defaultValue(ri!returnList, true),\n      local!result,\n      if(\n        rule!SHRD_IsList(local!result),\n        null,\n        local!result\n      )\n    )\n  ),\n  /* Handle scenario where the result comes back as properties of a $schema */\n  if(\n    or(\n      a!defaultValue(ri!returnList, true),\n      a!isNullOrEmpty(local!finalResult),\n      not(contains(\n        a!keys(local!finalResult),\n        \"$schema\"\n      ))\n    ),\n    local!finalResult,\n    local!finalResult.properties\n  )\n)"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_30988": {
      "name": "AIA_Extraction_HasAiReviewFields",
      "type": "Expression Rule",
      "sail_code": "and(\n  ri!ModelVersion[recordType!AIA Extraction Model Version.useAiReview],\n  length(reject(\n    fn!isnull,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      if(\n        a!isNotNullOrEmpty(ri!fields),\n        ri!fields[recordType!AIA Extraction Model Version Field.useAiReview],\n        ri!ModelVersion[recordType!AIA Extraction Model Version.fields.useAiReview]\n      ),\n      if(\n        a!defaultValue(fv!item, false) <> true,\n        null,\n        fv!item\n      )\n    )\n  )) > 0\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_74997": {
      "name": "AIA_ExtractionModelVersion_ValidateExample",
      "type": "Expression Rule",
      "sail_code": "{ #\"SYSTEM_SYSRULES_validationMessage\"(\n   message:#\"urn:appian:translation-string:v1:2dc29bae-aca7-43d8-8399-6785d1329bd0\"(#\"urn:appian:translation-variable:v1:952abd0a-3d5c-4b6a-99ab-c17c0576da61\": 4000),\n   showWhen: and(\n     ri!currentTab <> 4,\n     a!isNotNullOrEmpty(\n       ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.input]\n     ),\n     len(\n       ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.input]\n     ) > 4000\n   ),\n   validateAfter: \"SUBMIT\"\n ),\n  #\"SYSTEM_SYSRULES_validationMessage\"(\n    message:#\"urn:appian:translation-string:v1:aa41560a-e91f-4113-afea-541019d0aec1\"(#\"urn:appian:translation-variable:v1:3df43209-c38d-48e1-ac50-a8a38503bb81\": 4000),\n    showWhen: and(\n      ri!currentTab <> 4,\n      a!isNotNullOrEmpty(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.output]\n      ),\n      len(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.output]\n      ) > 4000\n    ),\n    validateAfter: \"SUBMIT\"\n  ),\n  #\"SYSTEM_SYSRULES_validationMessage\"(\n    message:#\"urn:appian:translation-string:v1:f9f89b58-02fb-42d1-9ffc-1168535c768f\"(#\"urn:appian:translation-variable:v1:96670b97-593b-41f5-9773-f9f3cc2b17e0\": 4000),\n    showWhen: and(\n      ri!currentTab <> 4,\n      a!isNotNullOrEmpty(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.rule]\n      ),\n      len(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.examples.rule]\n      ) > 4000\n    ),\n    validateAfter: \"SUBMIT\"\n  )}"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_182002": {
      "name": "AIA_MTR_ClassificationModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180853": {
      "name": "AIA_MTR_ExtractionInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_194872": {
      "name": "AIA_DefaultModel",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!default: cons!AIA_MODEL_HAIKU_4_5,\n  if(\n    /*check default model is enabled in env*/\n    contains(\n      a!genAiModels().id,\n      local!default\n    ),\n    /*if so, use default*/\n    local!default,\n    /*else default to first available model*/\n    tostring(index(a!genAiModels().id,1,\"\"))\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92592": {
      "name": "AIA_MTR_ExtractionInstanceValidationIgnore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483964": {
      "name": "AIA_MTR_ModelTestRunInitiated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92585": {
      "name": "AIA_MTR_ExtractionInstanceValidationAccept",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24946": {
      "name": "AIA_createRecordExtractionModelVersionSection",
      "type": "Expression Rule",
      "sail_code": "recordType!AIA Extraction Model Version Section(\n  recordType!AIA Extraction Model Version Section.name: ri!sectionName,\n  recordType!AIA Extraction Model Version Section.description: ri!sectionDescription,\n  recordType!AIA Extraction Model Version Section.rule: ri!rule\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24278": {
      "name": "AIA_Extraction_ConfigureFieldTableColumnGrid",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  accessibilityText: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(\n    #\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:f37b9b16-f786-442c-bf98-f075aaa639a3\"\n  ),\n  label: #\"urn:appian:translation-string:v1:0c3b94d1-dae5-4644-a3e2-9c8e5ac0df5c\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      helpTooltip: #\"urn:appian:translation-string:v1:0d435548-9df9-4180-af96-9b37ad0aa67f\",\n      label: #\"urn:appian:translation-string:v1:c917d5b3-b5d5-4155-830d-26af8fbe50f7\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      helpTooltip: #\"urn:appian:translation-string:v1:ab39babf-772c-4663-942e-5de894f63864\",\n      label: #\"urn:appian:translation-string:v1:2b3a2e79-0b85-4b52-bbf6-b2e8d08f1447\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:73d79e33-af48-4717-9195-cc469cf000f6\",\n      helpTooltip: #\"urn:appian:translation-string:v1:ba16499c-87ef-44ca-8c1d-3662c73338cc\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:224ec3d7-9583-4fe8-9b05-ed4531029f58\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:5d8387fc-6b7a-47ba-8ab3-3818b8d07790\",\n      helpTooltip: #\"urn:appian:translation-string:v1:8b6b6141-1dbe-47a4-93c3-a1a6ef7d1b64\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(align: \"CENTER\")\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: \"1X\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: \"1X\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: \"1X\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: \"1X\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: \"2X\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\")\n  },\n  rows: #\"SYSTEM_SYSRULES_forEach\"(\n    items: if(\n      a!isNullOrEmpty(ri!fields),\n      null,\n      ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n    ),\n    expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n      id: fv!index,\n      contents: {\n        /* Label*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.label],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.label],\n            if(\n              or(\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.key]),\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.fieldId])\n              ),\n              a!save(\n                fv!item[recordType!AIA Extraction Model Version Field.key],\n                rule!SHRD_ReformatLabelAsKey(\n                  label: fv!item[recordType!AIA Extraction Model Version Field.label]\n                )\n              ),\n              {}\n            ),\n            ri!fieldsSave\n          },\n          characterLimit: 255,\n\n        ),\n        /* Key*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.key],\n          saveInto: {\n            a!save(\n              fv!item[recordType!AIA Extraction Model Version Field.key],\n              substitute(save!value, \" \", \"\")\n            ),\n            if(\n              or(\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.label]),\n                a!isNullOrEmpty(fv!item[recordType!AIA Extraction Model Version Field.fieldId])\n              ),\n              a!save(\n                fv!item[recordType!AIA Extraction Model Version Field.label],\n                rule!SHRD_ReformatKeyAsLabel(\n                  key: fv!item[recordType!AIA Extraction Model Version Field.key]\n                )\n              ),\n              {}\n            ),\n            ri!fieldsSave\n          },\n          required: true,\n          validations: if(\n            length(\n              wherecontains(\n                fv!item[recordType!AIA Extraction Model Version Field.key],\n                ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns.key]\n              )\n            ) > 1,\n            #\"urn:appian:translation-string:v1:8713af6f-b0fe-45cd-8446-c471f8d92ea4\",\n            null\n          ),\n          characterLimit: 255,\n\n        ),\n        /* type*/\n        #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n          choiceLabels: rdrop(\n            rule!AIA_ENUM_ExtractionFieldTypes().label,\n            1\n          ),\n          choiceValues: rdrop(\n            rule!AIA_ENUM_ExtractionFieldTypes().label,\n            1\n          ),\n          placeholder: \"Select type\",\n          /* Making invalid-choice safe because this field can be populated by generative AI */\n          value: if(\n            contains(rule!AIA_ENUM_ExtractionFieldTypes().label, fv!item[recordType!AIA Extraction Model Version Field.type]),\n            fv!item[recordType!AIA Extraction Model Version Field.type],\n            null\n          ),\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.type],\n            ri!fieldsSave\n          },\n          required: true\n        ),\n        /*Method*/\n        a!localVariables(\n          local!extractionOptions: rule!AIA_GetExtractionOptions(\n            filterByOptions: {\n              cons!AIA_EXTRACTION_TYPES[1],\n              cons!AIA_EXTRACTION_TYPES[4]\n            }\n          ),\n          #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n            choiceLabels: local!extractionOptions.label,\n            choiceValues: local!extractionOptions.id,\n            value: a!defaultValue(\n              fv!item[recordType!AIA Extraction Model Version Field.extractionType],\n              cons!AIA_EXTRACTION_TYPES[1]\n            ),\n            saveInto: {\n              fv!item[recordType!AIA Extraction Model Version Field.extractionType],\n              ri!fieldsSave\n            },\n            required: true\n          ),\n        ),\n        /* Extract Prompt*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.description],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.description],\n            ri!fieldsSave\n          },\n          characterLimit: 500,\n          placeholder: #\"urn:appian:translation-string:v1:38b9e7f0-8ab2-4298-a6ed-4c5ded3c1737\"\n        ),\n        /*Remove*/\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n            linkStyle: \"STANDALONE\",\n            icon: \"times\",\n            altText: #\"urn:appian:translation-string:v1:7192e3af-2e63-4513-b758-f62dfa7376c9\",\n            caption: #\"urn:appian:translation-string:v1:7192e3af-2e63-4513-b758-f62dfa7376c9\",\n            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n              value: fv!index,\n              saveInto: {\n                a!save(\n                  ri!deletedFieldsRecords,\n                  fn!if(\n                    a!isNotNullOrEmpty(\n                      fv!item[recordType!AIA Extraction Model Version Field.fieldId]\n                    ),\n                    append(ri!deletedFieldsRecords, fv!item),\n                    ri!deletedFieldsRecords\n                  )\n                ),\n                a!save(\n                  ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n                  remove(\n                    ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n                    save!value\n                  )\n                ),\n                ri!fieldsSave\n              }\n            ),\n            size: \"STANDARD\",\n            color: ri!brandingMap.Gray4\n          )\n        )\n      }\n    )\n  ),\n  /*height: \"SHORT_PLUS\",*/\n  addRowLink: if(\n    a!isNullOrEmpty(ri!fields),\n    {},\n    #\"SYSTEM_SYSRULES_dynamicLink\"(\n      label: #\"urn:appian:translation-string:v1:fff89312-b0aa-430c-a3e7-bfdc1ca93fcd\",\n      value: {\n        recordType!AIA Extraction Model Version.fields: {\n          recordType!AIA Extraction Model Version Field(\n            recordType!AIA Extraction Model Version Field.key: null(),\n            recordType!AIA Extraction Model Version Field.required: false,\n            recordType!AIA Extraction Model Version Field.type: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n            recordType!AIA Extraction Model Version Field.isMultiple: false,\n            recordType!AIA Extraction Model Version Field.order: if(\n              or(\n                a!isNullOrEmpty(\n                  ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n                ),\n                a!isNullOrEmpty(\n                  index(\n                    index(\n                      ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n                      length(\n                        ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n                      ),\n                      null\n                    ),\n                    recordType!AIA Extraction Model Version Field.order,\n                    null\n                  )\n                )\n              ),\n              1,\n              max(\n                ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns]\n              ) + 1\n            )\n          )\n        }\n      },\n      saveInto: {\n        a!save(\n          ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n          append(\n            ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n            save!value\n          )\n        ),\n        ri!fieldsSave\n      }\n    )\n  ),\n  borderStyle: \"LIGHT\",\n  shadeAlternateRows: false,\n  spacing: \"DENSE\",\n  allowRowReordering: true,\n  rowOrderData: ri!fields[ri!selectedRow][recordType!AIA Extraction Model Version Field.columns],\n  rowOrderField: recordType!AIA Extraction Model Version Field.order\n)"
    },
    "_a-0000e6f4-5904-8000-6603-01ef9001ef90_223779": {
      "name": "SHRD_RulePicker",
      "type": "Interface",
      "sail_code": "if(\n  ri!showWhen <> false,\n  a!localVariables(\n    local!returnType: a!defaultValue(ri!returnType, \"DICTIONARY\"),\n    if(\n      contains(\n        {\"NAME\",\"DICTIONARY\"},\n        local!returnType\n      ),\n      #\"SYSTEM_SYSRULES_pickerFieldCustom\"(\n        readOnly: ri!readOnly,\n        label: a!defaultValue(#\"urn:appian:translation-string:v1:a807a92f-3079-48ca-929a-d899a8dafee2\", ri!label),\n        labelPosition: a!defaultValue(ri!labelPosition, \"COLLAPSED\"),\n        maxSelections: 1,\n        suggestFunction: rule!SHRD_RuleSuggestion(ruleName: _, returnType: local!returnType),\n        selectedLabels: if(\n          isnull(ri!value),\n          null,\n          if(\n            ri!returnType = \"NAME\",\n            ri!value,\n            #\"SYSTEM_SYSRULES_forEach\"(\n              ri!value,\n              index(rule!SHRD_ChoicesRuleRefToDictionary(\n                choicesRuleRef: fv!item\n              ), \"name\", null)\n            )\n          )\n        ),\n        value: ri!value,\n        saveInto: ri!saves,\n        validations: {\n          rule!SHRD_RuleValidations(\n            inputs: ri!ruleInputs,\n            returnType: ri!ruleReturnType,\n            required: ri!ruleOutputRequired,\n            rule: if(\n              ri!returnType = \"NAME\",\n              ri!value,\n              ri!value.name\n            )\n          ),\n        },\n        required: a!defaultValue(ri!required, false),\n        placeholder: ri!placeholder,\n        instructions: ri!instructions\n      ),\n      error(\"Invalid return type, must be either \"\"NAME\"\" or \"\"DICTIONARY\"\"\")\n    )\n  ),\n  {}\n)"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_38770": {
      "name": "AIA_Extraction_DefaultAiReviwRole",
      "type": "Expression Rule",
      "sail_code": "=#\"urn:appian:translation-string:v1:ef6f89d7-ee52-4817-8a91-cb880fa01818\" & char(10) & char(10) & #\"urn:appian:translation-string:v1:65728831-0b11-4fa9-9454-3bb1c9d3e371\""
    },
    "_a-0000ecfe-3e3f-8000-9c58-011c48011c48_250427": {
      "name": "AIA_ENUM_SectionRuleTypes",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    id:  cons!AIA_SECTION_RULE_TYPES[4],\n    name: #\"urn:appian:translation-string:v1:a4f641fd-8056-4ca5-b800-381617d1216f\"\n  ),\n  a!map(\n    id: cons!AIA_SECTION_RULE_TYPES[2],\n    name: #\"urn:appian:translation-string:v1:9fd92575-4208-4f90-beea-a6697c53ff07\",\n    parameters: {\n      a!map(\n        name: \"startPage\",\n        label: #\"urn:appian:translation-string:v1:f2c5530f-1dbf-4a75-8971-1d5aafc9a646\",\n        required: true,\n        type: cons!SHRD_FIELD_TYPES[3]\n      ),\n      a!map(\n        name: \"endPage\",\n        label: #\"urn:appian:translation-string:v1:d58361fa-deae-4d60-8192-131753fe69ab\",\n        required: true,\n        type: cons!SHRD_FIELD_TYPES[3]\n      )\n    }\n  ),\n  a!map(\n    id: cons!AIA_SECTION_RULE_TYPES[3],\n    name: #\"urn:appian:translation-string:v1:01a620dc-b89a-48c8-b184-4047368aceac\",\n    parameters: {\n      a!map(\n        name: \"numPages\",\n        label: #\"urn:appian:translation-string:v1:41b70b33-7abc-4765-8198-6a4fbcbf1d97\",\n        required: true,\n        instructions: #\"urn:appian:translation-string:v1:bc68ecb2-7a7a-47a7-b7a9-1200d9084716\",\n        type: cons!SHRD_FIELD_TYPES[3]\n      )\n    }\n  ),\n  a!map(\n    id: cons!AIA_SECTION_RULE_TYPES[1],\n    name: #\"urn:appian:translation-string:v1:83a9e776-0af4-464c-8ea2-a1f1211958ed\",\n    parameters: {\n      a!map(\n        name: \"name\",\n        label: #\"urn:appian:translation-string:v1:aac9d66b-1334-448a-80e6-d782aba1c028\",\n        required: true,\n        instructions: #\"urn:appian:translation-string:v1:fee20f89-6d95-4174-adad-a940ace5d609\",\n        type: cons!SHRD_FIELD_TYPES[1]\n      )\n    }\n  ),\n  a!map(\n    id: cons!AIA_SECTION_RULE_TYPES[5],\n    name: #\"urn:appian:translation-string:v1:8345d799-de56-4567-a541-689eda4205dc\",\n    parameters: {\n      a!map(\n        name: \"startText\",\n        label: #\"urn:appian:translation-string:v1:d9d2dd44-54cf-41be-8714-e22f611cd909\",\n        required: true,\n        instructions: #\"urn:appian:translation-string:v1:0470b782-feaf-4ff8-8a6e-5c7b7bd420c2\",\n        type: cons!SHRD_FIELD_TYPES[1]\n      ),\n      a!map(\n        name: \"endText\",\n        label: #\"urn:appian:translation-string:v1:a3dd1409-b28f-43e0-b874-aa7092d26d02\",\n        required: true,\n        instructions: #\"urn:appian:translation-string:v1:9d58cc1d-30fd-4ed2-80d5-cd8184578311\",\n        type: cons!SHRD_FIELD_TYPES[1]\n      )\n    }\n  )\n}"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_159825": {
      "name": "AIA_DocIsPdf",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_IsDocumentExtension(\n  document: ri!document,\n  extensions: {\"pdf\"}\n)"
    },
    "_a-0000ecea-6c5f-8000-9c4b-011c48011c48_193367": {
      "name": "AIA_Extraction_GeneratePromptExamples",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!examples: rule!AIA_GetModelVersionExamples(\n    modelVersion: ri!modelVersion,\n    fields: ri!fields\n  ),\n  if(\n    /*even if there are no bounding boxes, still include the examples*/\n    a!isNullOrEmpty(local!examples),\n    \"\",\n    \"\n\nHere are some examples:\n\" & joinarray(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        local!examples,\n        \"\n  <example>\n    <input>\" & fv!item[recordType!AIA Model Version Example.input] & \"</input>\n    <output>\" & fv!item[recordType!AIA Model Version Example.output] & \"</output>\n  </example>\"\n      ),\n      \"\n\"\n    )\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_38512": {
      "name": "AIA_ExtractionModelVersion_Sub_Fields",
      "type": "Interface",
      "sail_code": "a!match(\n  value: toboolean(ri!isGenerating),\n  equals: false(),\n  then: rule!AIA_ExtractionModelVersion_Sub_ConfigureFields(\n    brandingMap: ri!brandingMap,\n    extractionModel: ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel],\n    extractionModelVersion: ri!extractionModelVersion,\n    isUpdate: ri!isUpdate,\n    deletedFieldsRecords: ri!deletedFieldRecords,\n    showGenerateButton: true(),\n    generateButtonSaveInto: { a!save(ri!isGenerating, true()) },\n    showValidations: false()\n  ),\n  default: {\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      labelPosition: \"COLLAPSED\",\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: #\"urn:appian:translation-string:v1:37685d72-60ca-47ed-a900-ae65ec5a02f7\",\n          size: \"MEDIUM\",\n          color: ri!brandingMap.Gray4\n        )\n      },\n      marginBelow: \"STANDARD\"\n    ),\n    {\n      rule!AIA_ExtractionModeVersion_Sub_GenerateFields(\n        brandingMap: ri!brandingMap,\n        generateFieldData: ri!generateFieldData,\n        cardStyle: ri!brandingMap.White\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(),\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: {\n          /*Generate*/\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            loadingIndicator: true(),\n            label: #\"urn:appian:translation-string:v1:406442d9-09db-4e3f-a685-3f32167b2d5b\",\n            saveInto: {\n              rule!AIA_ExtractionModel_SaveForGenerateFields(\n                extractionModelVersion: ri!extractionModelVersion,\n                currentGenerateFieldData: ri!generateFieldData,\n                currentStep: 3,\n                extractionModel: ri!extractionModelVersion[recordType!AIA Extraction Model Version.extractionModel],\n                oldGenerateFieldData: ri!oldGenerateFieldData\n              ),\n              a!save(ri!isGenerating, false())\n            },\n            style: \"SOLID\",\n            validate: true\n          )\n        },\n        /*Cancel*/\n        secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:e67a2d25-f970-42bf-acbe-44e96670b6df\",\n          value: false(),\n          saveInto: ri!isGenerating,\n          style: \"OUTLINE\",\n          validate: false\n        )\n      )\n    }\n  }\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180846": {
      "name": "AIA_MTR_ClassificationModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_76233": {
      "name": "AIA_Extraction_GetOldModelVersions",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    a!isNullOrEmpty(ri!record[recordType!AIA Extraction Model Version.modelId]),\n    a!isNullOrEmpty(ri!record[recordType!AIA Extraction Model Version.extractionModel.modelId]),\n  ),\n  null,\n  #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Extraction Model Version,\n    filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n      operator: \"AND\",\n      filters: {\n        #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!AIA Extraction Model Version.modelId,\n          operator: \"=\",\n          value: a!defaultValue(\n            ri!record[recordType!AIA Extraction Model Version.extractionModel.modelId],\n            ri!record[recordType!AIA Extraction Model Version.modelId]\n          )\n        ),\n        #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!AIA Extraction Model Version.modelVersionId,\n          operator: \"<>\",\n          value: ri!record[recordType!AIA Extraction Model Version.modelVersionId],\n          applyWhen: a!isNotNullOrEmpty(ri!record[recordType!AIA Extraction Model Version.modelVersionId])\n        )\n      }\n    ),\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      1,\n      5000\n    )\n  ).data\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180834": {
      "name": "AIA_MTR_ExtractionModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ecfe-3e3f-8000-9c58-011c48011c48_250515": {
      "name": "SHRD_UpdateFieldSaves",
      "type": "Expression Rule",
      "sail_code": "fn!reject(\n  fn!isnull,\n  {\n    a!save(\n      target: ri!outputDictionary[ri!name],\n      value: rule!SHRD_CalculateSaveValue(\n        type: ri!type,\n        value: if(\n          isnull(ri!value),\n          save!value,\n          if(\n            ri!value = \"null\",\n            null,\n            ri!value\n          )\n        )\n      )\n    ),\n    a!save(\n      target: ri!outputJson,\n      value: #\"SYSTEM_SYSRULES_toJson_v1\"(ri!outputDictionary)\n    )\n  }\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_66854": {
      "name": "AIA_ExtractionModelVersion_ValidatePrompt",
      "type": "Expression Rule",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_validationMessage\"(\n    message: #\"urn:appian:translation-string:v1:94d89206-519b-4a12-9e0b-fda9f735ed1b\"(\n      #\"urn:appian:translation-variable:v1:50c6ba57-12fe-40c9-8a4f-a8348cc8bb65\": 4000\n    ),\n    showWhen: and(\n      ri!currentTab <> 3,\n      a!isNotNullOrEmpty(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.instructions]\n      ),\n      len(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.instructions]\n      ) > 4000\n    ),\n    validateAfter: \"SUBMIT\"\n  ),\n  #\"SYSTEM_SYSRULES_validationMessage\"(\n    message: #\"urn:appian:translation-string:v1:5a61b838-fc01-49cd-84e0-7e1ef4f63ca6\"(\n      #\"urn:appian:translation-variable:v1:3c2f5b88-8850-4b92-b670-9541f72b3827\": 4000\n    ),\n    showWhen: and(\n      ri!currentTab <> 3,\n      a!isNotNullOrEmpty(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.role]\n      ),\n      len(\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.role]\n      ) > 4000\n    ),\n    validateAfter: \"SUBMIT\"\n  )\n}"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505631": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_24392": {
      "name": "AIA_ExtractionModel_ConfigureFieldReconciliationGrid",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  accessibilityText: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(\n    #\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:0098fcd0-9d9e-4e9f-83ea-9bfe423dc483\"\n  ),\n  label: #\"urn:appian:translation-string:v1:15d21e83-aadd-4b1f-9cdf-d9db8556efc3\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:c917d5b3-b5d5-4155-830d-26af8fbe50f7\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:fe0291f3-cacb-4c7b-b121-8e0689c28629\",\n      align: \"CENTER\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:dc5596cf-675f-48ca-b808-4f194531c354\",\n      helpTooltip: #\"urn:appian:translation-string:v1:e6b6ba2e-5962-4d23-b849-300fd7cd0793\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:4e4df5f4-1f03-4482-8a9a-59d2184624b8\",\n      helpTooltip: #\"urn:appian:translation-string:v1:fc709dcd-d789-4b11-bd00-67c52b7d1db9\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:6512102e-3415-4732-92e5-d3a6a8f0e06b\",\n      helpTooltip: #\"urn:appian:translation-string:v1:6d3f5295-be99-476b-b005-e2fd18bacb96\",\n      align: \"CENTER\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:cb61f521-fb58-4d17-9671-05fb17ddcc99\",\n      helpTooltip: #\"urn:appian:translation-string:v1:016b656f-b9b1-42e7-9579-446feb3cd9c9\",\n      align: \"CENTER\"\n    ),\n    #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n      label: #\"urn:appian:translation-string:v1:a67c9f85-f682-4191-bed6-c4912e7d88b4\",\n      helpTooltip: #\"urn:appian:translation-string:v1:f21d2ab4-1371-4a0a-8961-1ecaa8898fe6\",\n      align: \"CENTER\",\n      showWhen: false\n    ),\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"NARROW_PLUS\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: \"MEDIUM\"),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(),\n    #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(showWhen: false)\n  },\n  rows: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!fields,\n    expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n      id: fv!index,\n      contents: {\n        /* Label*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          readOnly: true,\n          value: fv!item[recordType!AIA Extraction Model Version Field.label],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.label],\n            if(\n              a!isNullOrEmpty(\n                fv!item[recordType!AIA Extraction Model Version Field.key]\n              ),\n              a!save(\n                fv!item[recordType!AIA Extraction Model Version Field.key],\n                rule!SHRD_ReformatLabelAsKey(\n                  label: fv!item[recordType!AIA Extraction Model Version Field.label]\n                )\n              ),\n              {}\n            ),\n            ri!fieldsSave\n          },\n          characterLimit: 255,\n          showCharacterCount: false\n        ),\n        /* Required */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.required,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:fe0291f3-cacb-4c7b-b121-8e0689c28629\"\n        ),\n        /* Validation Rule */\n        rule!SHRD_RulePicker(\n          saves: {\n            fv!item[recordType!AIA Extraction Model Version Field.validationRule],\n            ri!fieldsSave\n          },\n          value: fv!item[recordType!AIA Extraction Model Version Field.validationRule],\n          returnType: \"NAME\",\n          ruleInputs: { \"value\" },\n          ruleReturnType: #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n            'type!{http://www.appian.com/ae/types/2009}Text'\n          ),\n          ruleOutputRequired: false,\n          readOnly: fv!item[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n          placeholder: #\"urn:appian:translation-string:v1:6aa72229-007a-4c17-9e00-298f975a8d65\"\n        ),\n        /* Reconcile Instructions */\n        #\"SYSTEM_SYSRULES_textField\"(\n          value: fv!item[recordType!AIA Extraction Model Version Field.instructions],\n          saveInto: {\n            fv!item[recordType!AIA Extraction Model Version Field.instructions],\n            ri!fieldsSave\n          },\n          characterLimit: 500,\n          showCharacterCount: false\n        ),\n        /* Is Hidden */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.isHidden,\n          defaultValue: false,\n          saveInto: {\n            a!save(\n              fv!item[recordType!AIA Extraction Model Version Field.isNotTracked],\n              if(\n                fv!item[recordType!AIA Extraction Model Version Field.isHidden],\n                true,\n                fv!item[recordType!AIA Extraction Model Version Field.isNotTracked],\n              )\n            ),\n            ri!fieldsSave\n          },\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:6512102e-3415-4732-92e5-d3a6a8f0e06b\"\n        ),\n        /* Is Not Tracked */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          color: if(\n            a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.isHidden], false()),\n            ri!brandingMap.Gray2,\n            null\n          ),\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.isNotTracked,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:5cca3b9f-5d5f-410e-a4e6-14bad0fa7b3a\",\n          linkShowWhen: not(a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.isHidden], false))\n        ),\n        /* AI Reviewer */\n        rule!AIA_Template_Checkbox(\n          brandingMap: ri!brandingMap,\n          color: if(\n            a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.isHidden], false()),\n            ri!brandingMap.Gray2,\n            null\n          ),\n          record: fv!item,\n          field: recordType!AIA Extraction Model Version Field.useAiReview,\n          defaultValue: false,\n          saveInto: ri!fieldsSave,\n          align: \"CENTER\",\n          caption: #\"urn:appian:translation-string:v1:45ba5bcb-e317-479b-afeb-b1d0c7e27232\",\n          linkShowWhen: not(a!defaultValue(fv!item[recordType!AIA Extraction Model Version Field.isHidden], false)),\n          showWhen: false\n        ),\n      }\n    )\n  ),\n  borderStyle: \"LIGHT\",\n  shadeAlternateRows: false,\n  spacing: \"DENSE\",\n\n)"
    },
    "_a-0000ec1e-9975-8000-9bd6-011c48011c48_1378240": {
      "name": "AIA_Extraction_DefaultPromptRole",
      "type": "Expression Rule",
      "sail_code": "=#\"urn:appian:translation-string:v1:ad2e9011-234a-41f6-979a-45bf04987d45\""
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_31153": {
      "name": "AIA_AiReviewPrompt",
      "type": "Expression Rule",
      "sail_code": "=a!localVariables(\n  local!extractedData: ri!json, /* Should I remove the spans? */\na!defaultValue(\n  ri!ModelVersion[recordType!AIA Extraction Model Version.aiReviewRole],\n  rule!AIA_Extraction_DefaultAiReviwRole()\n) & \"\n\n------------\n\n\" & rule!AIA_AiReviewPromptFixed(\n  ModelVersion: ri!ModelVersion\n) & \na!defaultValue(\n  ri!ModelVersion[recordType!AIA Extraction Model Version.aiReviewInstructions],\n  \"\"\n) & \"\n\n[EXTRACTED DATA]\n\" & local!extractedData\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92474": {
      "name": "AIA_MTR_ClassificationInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92481": {
      "name": "AIA_MTR_ExtractionInstanceExtractedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000e6f4-5904-8000-6603-01ef9001ef90_223964": {
      "name": "SHRD_RuleRefToDictionary",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!ruleName: tostring(ri!ruleRef),\n  local!uuid: getconstantorruleuuidbyname(local!ruleName),\n  rule!SHRD_ContentDetailsToDictionary(\n    uuid: local!uuid,\n    id: null,\n    contentDetails: getcontentdetailsbyuuid(local!uuid)\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_40614": {
      "name": "AIA_ExtractionModelVersion_ValidateFieldsTableData",
      "type": "Expression Rule",
      "sail_code": "if(\n  /*If No Extraction Model Version Available Return Null*/\n  or(\n    a!isNullOrEmpty(ri!extractionModelVersion),\n    ri!showValidation = false()\n  ),\n  {},\n  a!localVariables(\n    local!tableFieldsDetails: index(\n      ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields],\n      wherecontains(\n        cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n        ri!extractionModelVersion[recordType!AIA Extraction Model Version.fields.type]\n      ),\n      null()\n    ),\n    if(\n      a!isNullOrEmpty(local!tableFieldsDetails),\n      \"\",\n      {\n        a!flatten(\n          {\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: local!tableFieldsDetails,\n              expression: {\n                if(\n                  a!isNullOrEmpty(\n                    fv!item[recordType!AIA Extraction Model Version Field.columns]\n                  ),\n                  {},\n                  {\n                    #\"SYSTEM_SYSRULES_validationMessage\"(\n                      message: #\"urn:appian:translation-string:v1:0bfc7221-40db-49e2-8a35-c36f47303032\" & \" \" & fv!item[recordType!AIA Extraction Model Version Field.label],\n                      validateAfter: \"SUBMIT\",\n                      showWhen: a!isNotNullOrEmpty(\n                        {\n                          wherecontains(\n                            tostring(null()),\n                            touniformstring(\n                              fv!item[recordType!AIA Extraction Model Version Field.columns.key]\n                            )\n                          ),\n                          wherecontains(\n                            tostring(null()),\n                            touniformstring(\n                              fv!item[recordType!AIA Extraction Model Version Field.columns.type]\n                            )\n                          )\n                        }\n                      )\n                    ),\n                    #\"SYSTEM_SYSRULES_validationMessage\"(\n                      message: #\"urn:appian:translation-string:v1:ca5db7e6-e9b0-4f84-a882-2c93f6ce3409\" & \" \" & fv!item[recordType!AIA Extraction Model Version Field.label],\n                      validateAfter: \"SUBMIT\",\n                      showWhen: not(\n                        and(\n                          a!isNotNullOrEmpty(\n                            fv!item[recordType!AIA Extraction Model Version Field.columns.key]\n                          ),\n                          length(\n                            union(\n                              touniformstring(\n                                fv!item[recordType!AIA Extraction Model Version Field.columns.key]\n                              ),\n                              touniformstring({})\n                            )\n                          ) = length(\n                            fv!item[recordType!AIA Extraction Model Version Field.columns.key]\n                          )\n                        )\n                      )\n                    ),\n                    #\"SYSTEM_SYSRULES_validationMessage\"(\n                      message:#\"urn:appian:translation-string:v1:cd988485-8aac-4664-bae1-ae346f86de0f\" & \" \" & fv!item[recordType!AIA Extraction Model Version Field.label],\n                      validateAfter: \"SUBMIT\",\n                      showWhen: if(\n                        or(a!isNotNullOrEmpty(\n                          fv!item[recordType!AIA Extraction Model Version Field.columns.key]\n\n                        ),\n                        a!isNotNullOrEmpty(   fv!item[recordType!AIA Extraction Model Version Field.columns.description])),\n                        or(\n                          #\"SYSTEM_SYSRULES_forEach\"(\n                            items:    fv!item[recordType!AIA Extraction Model Version Field.columns.key],\n                            expression: len(fv!item) > 255,\n                          ),\n                          #\"SYSTEM_SYSRULES_forEach\"(\n                            items:    fv!item[recordType!AIA Extraction Model Version Field.columns.label],\n                            expression: len(fv!item) > 255,\n                          ),\n                          #\"SYSTEM_SYSRULES_forEach\"(\n                            items:    fv!item[recordType!AIA Extraction Model Version Field.columns.description],\n                            expression: len(fv!item) > 500, \n                          )\n                        ),\n                        false()\n                      )\n                    ),\n                  }\n                )\n              }\n            )\n          }\n        )\n      }\n    )\n  )\n)"
    },
    "0007ee23-8b2c-8000-011f-7f0000014e7a": {
      "name": "AIA Refresh Instance Accuracies",
      "type": "Process Model",
      "sail_code": "// Output: ?\npv!batch + 1\n\n// Input: ?\n#\"SYSTEM_SYSRULES_forEach\"(\n  pv!ExtractionInstances,\n  rule!AIA_Extraction_PostProcess(\n    ExtractionInstance: rule!AIA_Extraction_GetInstanceByIdForReconciliation(\n      identifier: fv!item[recordType!AIA Extraction Instance.id]\n    )\n  )\n)\n\n// Input: ?\n=recordType!AIA Extraction Instance\n\n// Input: ?\n= #\"SYSTEM_SYSRULES_queryRecordType_v1\"( recordType: recordType!AIA Extraction Instance, fields: { recordType!AIA Extraction Instance.id }, filters: { #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!AIA Extraction Instance.modelVersionId, operator: \"=\", value: pv!modelVersionId ), #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!AIA Extraction Instance.accuracy, operator: \"not null\" ) }, pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(1, 0)).totalCount\n\n// Output: ?\nroundup(ac!totalCount / cons!AIA_MIGRATION_BATCH_SIZE, 0)\n\n// Output: ?\n#\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n  recordType: recordType!AIA Extraction Instance,\n  fields: {\n    recordType!AIA Extraction Instance.id\n  },\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Extraction Instance.modelVersionId,\n      operator: \"=\",\n      value: pv!modelVersionId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Extraction Instance.accuracy,\n      operator: \"not null\"\n    )\n  },\n  pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n    startIndex: (pv!batch - 1) * cons!AIA_MIGRATION_BATCH_SIZE + 1,\n    batchSize: cons!AIA_MIGRATION_BATCH_SIZE,\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(field: recordType!AIA Extraction Instance.id, ascending: true)\n  )\n).data"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_68871": {
      "name": "AIA_LlmOptionField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!options: rule!AIA_ENUM_LlmVersions(\n    includeVision: ri!includeVision\n  ),\n  local!notFound: and(\n    not(contains(local!options.value, ri!value)),\n    a!isNotNullOrEmpty(ri!value)\n  ),\n  local!newOptions: if(\n    local!notFound,\n    append(local!options, a!map(label: ri!value, value: ri!value)),\n    local!options\n  ),\n  #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n    label: #\"urn:appian:translation-string:v1:444b9cec-06e7-41a0-834f-1394a5adb599\",\n    showWhen: cons!AIA_FLAG_SHOW_LLM_OPTIONS,\n    choiceLabels: local!newOptions.label,\n    choiceValues: local!newOptions.value,\n    required: a!defaultValue(ri!required, false),\n    value: a!defaultValue(\n      ri!value,\n      ri!defaultValue\n    ),\n    validations: if(\n      local!notFound,\n      #\"urn:appian:translation-string:v1:4576c941-6317-448f-b5b7-aed17e4f8499\",\n      null\n    ),\n    placeholder: #\"urn:appian:translation-string:v1:efc088df-03da-46cb-a23f-3dfc806289d4\",\n    saveInto: ri!saveInto\n  )\n)"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483943": {
      "name": "AIA_MTR_ModelTestSuiteCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_39721": {
      "name": "AIA_Template_Checkbox",
      "type": "Interface",
      "sail_code": "if(\n  a!defaultValue(\n    ri!showWhen,\n    true\n  ),\n  a!localVariables(\n    local!brandingMap: a!defaultValue(\n      ri!brandingMap,\n      rule!AIA_UTIL_LoadBrandingMap()\n    ),\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      labelPosition: \"COLLAPSED\",\n      value: {\n        #\"SYSTEM_SYSRULES_richTextIcon\"(\n          color: a!defaultValue(\n            ri!color,\n            if(\n              a!defaultValue(\n                ri!record[ri!field],\n                ri!defaultValue\n              ),\n              local!brandingMap.Blue3,\n              local!brandingMap.Gray3,\n            )\n          ),\n          icon: if(\n            a!defaultValue(\n              ri!record[ri!field],\n              ri!defaultValue\n            ),\n            \"check-square\",\n            \"square-o\"\n          ),\n          link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n            saveInto: {\n              if(\n                a!defaultValue(ri!saveIntoRecord, true),\n                a!save(\n                  ri!record[ri!field],\n                  not(a!defaultValue(ri!record[ri!field], ri!defaultValue))\n                ),\n                {}\n              ),\n              ri!saveInto\n            },\n            showWhen: a!defaultValue(\n              ri!linkShowWhen,\n              true\n            )\n          ),\n          linkStyle: \"STANDALONE\",\n          altText: if(\n            a!defaultValue(\n              ri!record[ri!field],\n              ri!defaultValue\n            ),\n            #\"urn:appian:translation-string:v1:2bcaa33e-f7f3-49e1-a731-448d50b81aa5\"(#\"urn:appian:translation-variable:v1:579fd534-6b9b-425f-bc9f-b634242559ae\": ri!caption),\n            #\"urn:appian:translation-string:v1:5d5ccfce-4251-4290-af1d-2bca780b08dd\"(#\"urn:appian:translation-variable:v1:aa7f15e8-7ec1-4fe5-bee9-f84f3f6c85ca\": ri!caption)\n          )\n        ),\n        if(\n          a!isNotNullOrEmpty(ri!label),\n          {\n            \" \",\n            ri!label\n          },\n          {}\n        )\n      },\n      align: a!defaultValue(ri!align, \"LEFT\")\n    )\n  ),\n  {}\n)"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_126062": {
      "name": "AIA_ENUM_ExtractionFieldTypes",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n    width: \"MEDIUM\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[8],\n    width: \"MEDIUM_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[2],\n    width: \"NARROW_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[3],\n    width: \"NARROW_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[4],\n    width: \"NARROW_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[5],\n    width: \"MEDIUM\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[6],\n    width: \"NARROW\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[7],\n  ) \n}"
    }
  }
}