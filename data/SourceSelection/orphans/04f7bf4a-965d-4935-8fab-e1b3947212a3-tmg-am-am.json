{
  "uuid": "04f7bf4a-965d-4935-8fab-e1b3947212a3-tmg-am-am",
  "name": "AS_GSS_TMG_QE_calculateTotalAndCompletedTasks",
  "type": "Expression Rule",
  "description": "Returns a dictionary of totalRequiredTasks and totalCompletedTasks to use in task percent completion",
  "sail_code": "a!localVariables(\n  local!totalRequiredTasks: rule!AS_CO_UT_queryEntity(\n    entity: cons!AS_GSS_TMG_ENT_TASK,\n    entityType: 'type!{urn:com:appian:types:AS:GSS:TMG}AS_GSS_TMG_Task',\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT,\n    triggerRefresh: ri!triggerRefresh,\n    filters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: \"evaluation.evaluationId\",\n        operator: \"in\",\n        value: ri!evaluationId\n      ), \n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: \"taskStatus.taskStatusId\",\n        operator: \"in\",\n        value: {\n          cons!AS_GSS_TMG_REF_ID_TASK_STATUS_QUEUED,\n          cons!AS_GSS_TMG_REF_ID_TASK_STATUS_ASSIGNED,\n          cons!AS_GSS_TMG_REF_ID_TASK_STATUS_IN_PROGRESS,\n          cons!AS_GSS_TMG_REF_ID_TASK_STATUS_COMPLETE\n        }\n      ),\n      ri!additionalFilter\n    },\n    logicalExpression: ri!logicalExpression\n  ),\n  local!totalCompletedTasks: rule!AS_CO_UT_queryEntity(\n    entity: cons!AS_GSS_TMG_ENT_TASK,\n    entityType: 'type!{urn:com:appian:types:AS:GSS:TMG}AS_GSS_TMG_Task',\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT,\n    triggerRefresh: ri!triggerRefresh,\n    filters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: \"evaluation.evaluationId\",\n        operator: \"in\",\n        value: ri!evaluationId\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: \"taskStatus.taskStatusId\",\n        operator: \"in\",\n        value: {\n          cons!AS_GSS_TMG_REF_ID_TASK_STATUS_COMPLETE\n        }\n      ),\n      ri!additionalFilter\n    },\n    logicalExpression: ri!logicalExpression\n  ),\n  {\n    totalRequiredTasks: local!totalRequiredTasks,\n    totalCompletedTasks: local!totalCompletedTasks\n  }\n)",
  "calls": [
    {
      "name": "AS_CO_UT_queryEntity",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_TMG_ENT_TASK",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_QUEUED",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_ASSIGNED",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_IN_PROGRESS",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_COMPLETE",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    }
  ],
  "called_by": []
}