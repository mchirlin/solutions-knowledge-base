{
  "_metadata": {
    "bundle_id": "AIA_Extraction_Instance_-_urnappiantranslation-stringv1e4b23180-d789-45b9-b42f-4"
  },
  "objects": {
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92467": {
      "name": "AIA_MTR_ClassificationInstanceClassifiedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179359": {
      "name": "AIA_MTR_ConfidenceThresholdDisabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec94-6ee6-8000-9ba9-011c48011c48_40553": {
      "name": "AIA_ExtractionInstance_Sub_ReconcileDocument",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: a!defaultValue(\n    ri!brandingMap,\n    rule!AIA_UTIL_LoadBrandingMap()\n  ),\n  local!resultFieldIndex: if(\n    a!isNotNullOrEmpty(ri!selectedField),\n    index(\n      wherecontains(\n        tostring(\n          ri!selectedField[recordType!AIA Extraction Model Version Field.fieldId]\n        ),\n        touniformstring(\n          ri!ExtractionInstanceFields[recordType!AIA Extraction Instance Field.modelVersionFieldId]\n        )\n      ),\n      1,\n      null\n    ),\n    null\n  ),\n  local!fieldSaves: a!refreshVariable(\n    value: if(\n      a!isNotNullOrEmpty(ri!selectedField),\n      rule!AIA_Extraction_CaptureFieldSaves(\n        ExtractionInstanceFields: ri!ExtractionInstanceFields,\n        resultFieldIndex: local!resultFieldIndex,\n        ModelVersionFields: ri!ModelVersionFields,\n        value: null\n      ),\n      {\n        a!save(\n          ri!captureSelection.text,\n          save!value\n       ),\n       a!save(\n         ri!captureSelection.time,\n         now()\n       )\n      }\n    ),\n    refreshAlways: true\n  ),\n  local!boxesSaves: a!refreshVariable(\n    value: if(\n      and(\n        a!isNotNullOrEmpty(ri!selectedField),\n        a!isNotNullOrEmpty(ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue])\n      ),\n      rule!AIA_Extraction_CaptureBoxSaves(\n        ExtractionInstanceFields: ri!ExtractionInstanceFields,\n        resultFieldIndex: local!resultFieldIndex,\n        highlightedBox: ri!highlightedBox,\n        interactionId: ri!interactionId\n      ),\n      a!save(\n        ri!captureSelection.boxes,\n        save!value\n      )\n    ),\n    refreshAlways: true\n  ),\n  local!showWhen: a!defaultValue(ri!showWhen, true),\n  #\"SYSTEM_SYSRULES_columnsLayout\"(\n    columns: #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: \"Incorrect value? \",\n                  style: \"STRONG\"\n                  )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"urn:appian:translation-string:v1:649b413d-043d-4115-a791-7ae70683e836\",\n                \" \",\n                #\"SYSTEM_SYSRULES_richTextIcon\"(icon: \"highlighter\", color: local!brandingMap.gray3),\n                \" \",\n                #\"urn:appian:translation-string:v1:bf3cab40-3e1e-47c3-a3bf-c4968ef1c279\"\n              }\n            )\n          },\n          height: \"AUTO\",\n          style: local!brandingMap.blue0,\n          marginBelow: \"STANDARD\",\n          showBorder: false\n        ),\n        reconcileDocumentViewer(\n          labelPosition: \"COLLAPSED\",\n          height: a!defaultValue(ri!height, \"AUTO\"),\n          documentUrl: document(\n            ri!ExtractionInstance[recordType!AIA Extraction Instance.documentId],\n            \"url\"\n          ),\n          boundingBoxesDocumentUrl: if(\n            a!isNullOrEmpty(\n              ri!ExtractionInstance[recordType!AIA Extraction Instance.boundingBoxesDocumentId]\n            ),\n            null,\n            document(\n              ri!ExtractionInstance[recordType!AIA Extraction Instance.boundingBoxesDocumentId],\n              \"url\"\n            )\n          ),\n          interactionIdValue: ri!interactionId,\n          interactionIdSaveInto: ri!interactionId,\n          highlightedBoxId: ri!highlightedBox,\n          clickedBoundingBox: ri!selectedBox,\n          selectedText: local!fieldSaves,\n          selectedBoundingBoxes: local!boxesSaves,\n          selectableTypes: { cons!AIA_TEXTRACT_BLOCK_WORD }\n        )\n      }\n    ),\n    showWhen: local!showWhen\n  )\n)"
    },
    "_a-0000edd9-a94f-8000-9bb2-011c48011c48_141206": {
      "name": "AIA_QR_getExtractionModel",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n  recordType: recordType!AIA Extraction Model,\n  fields: ri!fields,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Extraction Model.modelId,\n      operator: \"=\",\n      value: ri!modelId\n    )\n  },\n  pagingInfo: ri!pagingInfo\n)"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_182002": {
      "name": "AIA_MTR_ClassificationModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180853": {
      "name": "AIA_MTR_ExtractionInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483991": {
      "name": "AIA_MTR_ModelTestSuiteUpdated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_126403": {
      "name": "AIA_UTIL_UpdateByKeyValue",
      "type": "Expression Rule",
      "sail_code": "#\"urn:appian:function:v1:a:update\"(\n  ri!baseMap,\n  ri!updateMap.key,\n  ri!updateMap.value\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92592": {
      "name": "AIA_MTR_ExtractionInstanceValidationIgnore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483964": {
      "name": "AIA_MTR_ModelTestRunInitiated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92585": {
      "name": "AIA_MTR_ExtractionInstanceValidationAccept",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee94-7472-8000-9bb4-011c48011c48_113052": {
      "name": "AIA_Extraction_ReconcileMultipleField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!multipleValues: rule!AIA_ParseListValue(\n    value: ri!value\n  ),\n  local!multipleBoundingBoxes: rule!AIA_Extraction_ReturnSpanIds(\n    Field: ri!ExtractionInstanceFields[ri!resultFieldIndex],\n    returnFirst: false\n  ),\n  a!localVariables(\n    local!grid: a!refreshVariable(\n      refreshAlways: true,\n      value: #\"SYSTEM_SYSRULES_gridLayout\"(\n        label: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.label],\n        labelPosition: \"COLLAPSED\",\n        headerCells: {\n          #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n            label: #\"urn:appian:translation-string:v1:145e98cc-469c-45f2-9110-3879b566b9ee\"\n          ),\n          #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n            align: \"CENTER\",\n            showWhen: ri!showTarget\n          ),\n          #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n            label: \"\",\n            align: \"CENTER\"\n          ),\n\n        },\n        columnConfigs: {\n          #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(),\n          #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n            width: \"ICON\",\n            showWhen: ri!showTarget\n          ),\n          #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n            width: \"ICON\"\n          )\n        },\n        rows: #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!multipleValues,\n          expression: #\"SYSTEM_SYSRULES_gridRowLayout\"(\n            contents: {\n              rule!AIA_ExtractionInstance_Sub_ReconcileFieldInput(\n                ModelVersionField: ri!ModelVersionField,\n                options: ri!options,\n                value: fv!item,\n                fieldSaves: {\n                  local!multipleValues[fv!index],\n                  a!save(\n                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n                    if(\n                      #\"SYSTEM_SYSRULES_toJson_v1\"(\n                        local!multipleValues\n                      ) = ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue],\n                      null,\n                      #\"SYSTEM_SYSRULES_toJson_v1\"(\n                        local!multipleValues\n                      )\n                    )\n                  )\n                },\n                validationRule: ri!validationRule,\n                label: ri!label & fv!index,\n                readOnly: ri!readOnly\n              ),\n              a!localVariables(\n                local!boundingBox: index(\n                  local!multipleBoundingBoxes,\n                  fv!index,\n                  null\n                ),\n                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                    caption: #\"urn:appian:translation-string:v1:274875fd-7a96-4572-b3e3-e8f4f1c113f7\",\n                    icon: \"map-marker\",\n                    link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                      value: local!boundingBox,\n                      saveInto: ri!highlightSaves,\n                      showWhen: a!isNotNullOrEmpty(\n                        local!boundingBox\n                      )\n                    ),\n                    color: if(\n                      a!isNotNullOrEmpty(\n                        local!boundingBox\n                      ),\n                      ri!brandingMap.AccentColor,\n                      ri!brandingMap.Gray3\n                    ),\n                    linkStyle: \"STANDALONE\"\n                  ),\n                  showWhen: ri!showTarget\n                )\n              ),\n              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  caption: #\"urn:appian:translation-string:v1:ca85961f-04d0-42ff-a429-06d48afe2aff\",\n                  showWhen: not(\n                    a!defaultValue(\n                      ri!readOnly,\n                      false\n                    )\n                  ),\n                  icon: \"times\",\n                  color: ri!brandingMap.Gray4,\n                  linkStyle: \"STANDALONE\",\n                  link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                    saveInto: {\n                      a!save(\n                        local!multipleValues,\n                        remove(\n                          local!multipleValues,\n                          fv!index\n                        )\n                      ),\n                      if(\n                        a!isNullOrEmpty(local!multipleValues),\n                        {\n                          a!save(\n                            ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull],\n                            true\n                          ),\n                          a!save(\n                            ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n                            null\n                          )\n                        },\n                        a!save(\n                          ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n                          if(\n                            #\"SYSTEM_SYSRULES_toJson_v1\"(local!multipleValues) = ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue],\n                            null,\n                            #\"SYSTEM_SYSRULES_toJson_v1\"(local!multipleValues)\n                          )\n                        )\n                      )\n                    }\n                  )\n                )\n              )\n            }\n          )\n        ),\n        addRowLink: #\"SYSTEM_SYSRULES_dynamicLink\"(\n          showWhen: not(\n            a!defaultValue(\n              ri!readOnly,\n              false\n            )\n          ),\n          label: #\"urn:appian:translation-string:v1:5358a46d-aca7-4c21-98c4-c2698dcc0524\",\n          saveInto: a!save(\n            local!multipleValues,\n            append(\n              local!multipleValues,\n              null\n            )\n          )\n        )\n      )\n    ),\n    if(\n      ri!showAccuracy <> false,\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            contents: local!grid\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            width: \"EXTRA_NARROW\",\n            contents: #\"SYSTEM_SYSRULES_tagField\"(\n              labelPosition: \"COLLAPSED\",\n              tags: a!localVariables(\n                local!percentageAttributes: rule!AIA_UTIL_GetPercentageAttributes(\n                  brandingMap: ri!brandingMap,\n                  isNotTracked: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.isNotTracked],\n                  value: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.correctFieldPercentage]\n                ),\n                #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                  text: local!percentageAttributes.percentage,\n                  backgroundColor: local!percentageAttributes.backgroundColor,\n                  textColor: local!percentageAttributes.textColor\n                )\n              )\n            )\n          )\n        }\n      ),\n      local!grid\n    )\n  )\n)"
    },
    "_a-0000ed57-1773-8000-9c7e-011c48011c48_325989": {
      "name": "AIA_Extraction_CaptureFieldSaves",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!modelVersionField: displayvalue(\n    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.modelVersionFieldId],\n    ri!ModelVersionFields[recordType!AIA Extraction Model Version Field.fieldId],\n    ri!ModelVersionFields,\n    null\n  ),\n  {\n    a!save(\n      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n      a!localVariables(\n        local!saveValue: rule!AIA_FormatValueForDatabase(\n          value: a!defaultValue(ri!value, save!value),\n          field: local!modelVersionField\n        ),\n        if(\n          or(\n            a!isNullOrEmpty(a!defaultValue(ri!value, local!saveValue)),\n            and(\n              a!isNotNullOrEmpty(\n                ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue]\n              ),\n              rule!AIA_UTIL_CompareStrings(\n                string1: local!saveValue,\n                string2: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue]\n              )\n            )\n          ),\n          null,\n          local!saveValue\n        )\n      )\n    ),\n    a!save(\n      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull],\n      if(\n        a!isNullOrEmpty(ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue]),\n        ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull],\n        false\n      )\n    )\n  }\n)"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_125328": {
      "name": "AIA_FormatDocument",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!documentId),\n  try(document(ri!documentId, \"name\"), \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"),\n  if(\n    a!isNotNullOrEmpty(ri!instance),\n    a!localVariables(\n      local!isExtraction: runtimetypeof(ri!instance) = typeof(recordType!AIA Extraction Instance()),\n      if(\n        local!isExtraction,\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Extraction Instance.documentId],\n            ri!instance[recordType!AIA Extraction Instance.sourceDocumentId]\n          )\n        ),\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Classification Instance.documentId],\n            ri!instance[recordType!AIA Classification Instance.sourceDocumentId]\n          )\n        )\n      )\n    ),\n    \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92578": {
      "name": "AIA_MTR_ExtractionModelVersionAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec60-a08d-8000-9bee-011c48011c48_121190": {
      "name": "AIA_ViewEml",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!mailMap: #\"SYSTEM_SYSRULES_fromJson_v1\"(reademlfile(ri!eml)),\n  local!contents: a!refreshVariable(\n    value: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_textField\"(\n              label: \"From\",\n              labelPosition: \"ABOVE\",\n              value: local!mailMap.from,\n              refreshAfter: \"UNFOCUS\",\n              readOnly: true,\n              validations: {}\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_textField\"(\n              label: \"To\",\n              labelPosition: \"ABOVE\",\n              value: local!mailMap.to,\n              saveInto: {},\n              refreshAfter: \"UNFOCUS\",\n              readOnly: true,\n              validations: {}\n            )\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        labelPosition: \"COLLAPSED\",\n        showWhen: ri!style = \"SECTION\",\n        value: #\"SYSTEM_SYSRULES_richTextHeader\"(text: local!mailMap.subject)\n      ),\n      #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n        labelPosition: \"COLLAPSED\",\n        value: local!mailMap.body,\n        saveInto: {},\n        height: \"MEDIUM\",\n        readOnly: true,\n        validations: {}\n      )\n    },\n    refreshAlways: true\n  ),\n  if(\n    ri!style = \"SECTION\",\n    #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n      label: \"Email\",\n      labelSize: \"MEDIUM\",\n      labelHeadingTag: \"H2\",\n      labelColor: \"STANDARD\",\n      contents: local!contents,\n      divider: \"ABOVE\"\n    ),\n    #\"SYSTEM_SYSRULES_formLayout_v1\"(\n      skipAutoFocus: true(),\n      label: local!mailMap.subject,\n      contents: local!contents,\n      buttons: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n        buttons: {\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: \"Close\",\n            submit: true,\n            style: \"OUTLINE\"\n          )\n        },\n        align: \"START\",\n        marginBelow: \"NONE\"\n      )\n    )\n  )\n)"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_43077": {
      "name": "AIA_Extraction_GetInstanceById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      /* Extraction Instance */\n      recordType!AIA Extraction Instance.modelVersionId,\n      recordType!AIA Extraction Instance.documentId,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.validationErrors,\n      recordType!AIA Extraction Instance.accuracy,\n      recordType!AIA Extraction Instance.precision,\n      recordType!AIA Extraction Instance.f1,\n      recordType!AIA Extraction Instance.recall,\n      recordType!AIA Extraction Instance.createdOn,\n      /* Extraction Fields */\n      recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.extractedValue,\n      recordType!AIA Extraction Instance.fields.overrideValue,\n      recordType!AIA Extraction Instance.fields.overrideNull,\n      recordType!AIA Extraction Instance.fields.boundingBox,\n      recordType!AIA Extraction Instance.fields.confidence,\n      /* Extraction Fields > Rows */\n      recordType!AIA Extraction Instance.fields.rows.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.boundingBox,\n      /* Extraction Fields > Rows > Cells */\n      recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n      recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n      /* Extraction Fields > Model Field */\n      recordType!AIA Extraction Instance.fields.modelVersionField.key,\n      recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n      /* Extraction Fields > Rows > Cells > Column */\n      recordType!AIA Extraction Instance.fields.rows.cells.column.key,\n      a!defaultValue(ri!additionalFields, {})\n    },\n    \n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92488": {
      "name": "AIA_MTR_ExtractionInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_53600": {
      "name": "AIA_Test_GetLatestExtractionModelVersion",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!modelVersion: a!refreshVariable(\n    value: rule!AIA_Extraction_GetModelVersionById(\n      identifier: index(\n        #\"SYSTEM_SYSRULES_queryRecordType_v4\"(\n          recordType: recordType!AIA Extraction Model Version,\n          fields: {\n            recordType!AIA Extraction Model Version.modelVersionId\n          },\n          pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n            startIndex: 1,\n            batchSize: 1,\n            sort: {\n              #\"SYSTEM_SYSRULES_sortInfo\"(\n                field: recordType!AIA Extraction Model Version.modelVersionId\n              )\n            }\n          )\n        ).data[recordType!AIA Extraction Model Version.modelVersionId],\n        1,\n        null\n      )\n    ),\n    refreshAlways: true\n  ),\n  local!modelVersion\n)"
    },
    "_a-0000ee35-0ca2-8000-9ba6-011c48011c48_13646": {
      "name": "AIA_LogMetric",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!name,\n  /* Classification Model Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_CREATED,\n  then: rule!AIA_MTR_ClassificationModelCreated(),\n  /* Classification Instance Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ClassificationInstanceCreated(),\n  /* Classification Instance Reconciled */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ClassificationInstanceReconciled(),\n  /* Classification Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFIED_WITH_ERRORS,\n  then: rule!AIA_MTR_ClassificationInstanceClassifiedWithErrors(),\n  /* Classification Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFICATION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ClassificationInstanceError(),\n  \n  /* Extraction Model Created */\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_CREATED,\n  then: rule!AIA_MTR_ExtractionModelCreated(),\n  /* Extraction Instance Created */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ExtractionInstanceCreated(),\n  /* Extraction Instance Reconciled */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ExtractionInstanceReconciled(),\n  /* Extraction Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTED_WITH_ERRORS,\n  then: rule!AIA_MTR_ExtractionInstanceExtractedWithErrors(),\n  /* Extraction Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ExtractionInstanceError(),\n  \n  /* Triggered when AI review raises an error (field level) */\n  equals: cons!AIA_MTR_AI_REVIEW_FIELD,\n  then: rule!AIA_MTR_ExtractionInstanceFieldAiReview(),\n  /* Triggered when AI review raises an error (instance level, this instance has 1 or more errors raised by AI review) */\n  equals: cons!AIA_MTR_AI_REVIEW_INSTANCE,\n  then: rule!AIA_MTR_ExtractionInstanceAiReview(),\n  /* Triggered when model is created with AI review turned on OR AI review is turned on for a model */\n  equals: cons!AIA_MTR_AI_REVIEW_MODEL_VERSION,\n  then: rule!AIA_MTR_ExtractionModelVersionAiReview(),\n  /* Triggered when user clicks accept */\n  equals: cons!AIA_MTR_AI_REVIEW_ACCEPT,\n  then: rule!AIA_MTR_ExtractionInstanceValidationAccept(),\n  /* Triggered when user clicks ignored */\n  equals: cons!AIA_MTR_AI_REVIEW_IGNORE,\n  then: rule!AIA_MTR_ExtractionInstanceValidationIgnore(),\n  /*triggered when spot check ocnfigured*/\n  equals: cons!AIA_MTR_SPOT_CHECK_MODEL_VERSION,\n  then: rule!AIA_MTR_ModelVersionConfigureSampling(),\n  /* Triggered when a model validation rule of type AI validation creates a validation instance */\n  equals: cons!AIA_MTR_AI_VALIDATION_RULE_OCCURANCE,\n  then: rule!AIA_MTR_InstanceValidationAiRuleOccurance(),\n  /*Confidence Threshold Enabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_ENABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdEnabled(),\n  /*Confidence Threshold Disabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_DISABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdDisabled(),\n  /*Extraction Model Version Restored*/\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ExtractionModelVersionRestore(),\n  /*Classification Model Version Restored*/\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ClassificationModelVersionRestore(),\n  /*Model Test Suite Created*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_CREATED,\n  then: rule!AIA_MTR_ModelTestSuiteCreated(),\n  /*Model Test Suite Updated*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_UPDATED,\n  then: rule!AIA_MTR_ModelTestSuiteUpdated(),\n  /*Model Test Run Initiated*/\n  equals: cons!AIA_MTR_MODEL_TEST_RUN_INITIATED,\n  then: rule!AIA_MTR_ModelTestRunInitiated(),\n  /*Classification Model Version Created with Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_MODEL_VERSION_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationModelVersionCreated(),\n  /*Classification Instance Created for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceCreated(),\n  /*Classification Instance Reconciled for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceReconciled(),\n  default: null\n)"
    },
    "_a-0000ee94-7472-8000-9bb4-011c48011c48_113580": {
      "name": "AIA_ConfidenceComponents",
      "type": "Interface",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!confidenceValidation),\n  a!localVariables(\n    local!validationMessageMap: #\"SYSTEM_SYSRULES_fromJson_v1\"(\n      ri!confidenceValidation[recordType!AIA Instance Validation Error.message]\n    ),\n    local!extractionInstanceFieldId: tointeger(ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.id]),\n    local!belowConfidenceExtractionFieldIds: tointeger(local!validationMessageMap.fields.fieldId),\n    local!belowConfidenceFieldValidationMap: displayvalue(\n      local!extractionInstanceFieldId,\n      local!belowConfidenceExtractionFieldIds,\n      a!flatten(local!validationMessageMap.fields),\n      null\n    ),\n    if(\n      a!isNotNullOrEmpty(local!belowConfidenceFieldValidationMap),\n      /*If the inputted field has a relevant low-confidence validation, display based on whether the field is a Table or simple datatype field*/\n      if(\n        ri!extractionModelVersionField[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n        /*Low Confidence Table Display*/\n        a!localVariables(\n          local!numberOfCellsBelowConfidence: length(a!flatten(local!belowConfidenceFieldValidationMap.fieldRowCells)),\n          {\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"exclamation-triangle\",\n                  color: ri!brandingMap.Orange3,\n                  altText: #\"urn:appian:translation-string:v1:7ff46a88-3e89-4109-ad30-91aa8bfb1012\",\n                  caption: #\"urn:appian:translation-string:v1:7ff46a88-3e89-4109-ad30-91aa8bfb1012\"\n                ),\n                \" \",\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: concat(\n                    #\"urn:appian:translation-string:v1:30b4297c-8297-4412-a9c6-e2b074ee3eee\"(\n                      #\"urn:appian:translation-variable:v1:c520ef07-b731-48ec-92cf-8e9dc11ec291\": local!numberOfCellsBelowConfidence,\n                      #\"urn:appian:translation-variable:v1:2cf8d7d3-8544-4536-842b-1b189fa8af5d\": ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.totalCells]\n                    ),\n                    \" \",\n                    if(\n                      local!numberOfCellsBelowConfidence = 1,\n                      #\"urn:appian:translation-string:v1:5345174e-686d-4f11-9ced-b3db371becc2\",\n                      #\"urn:appian:translation-string:v1:1aa3aa35-0c49-4c9e-87da-40a4e1341611\"\n                    ),\n                    \" \" & #\"urn:appian:translation-string:v1:548d3943-723d-4ed4-83ec-05e6b1566f5b\"\n                  )\n                )\n              }\n            )\n          }\n        ),\n        /*Low Confidence Simple Datatype Display*/\n        {\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            label: #\"urn:appian:translation-string:v1:785711c5-7244-4c16-8528-0b475850bccc\"(#\"urn:appian:translation-variable:v1:ec540421-0493-41fa-8f1c-59aebc77393f\": local!belowConfidenceFieldValidationMap.confidence),\n            labelPosition: \"COLLAPSED\",\n            value: {\n              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: \"exclamation-triangle\",\n                color: ri!brandingMap.Orange3,\n                altText: #\"urn:appian:translation-string:v1:7ff46a88-3e89-4109-ad30-91aa8bfb1012\",\n                caption: #\"urn:appian:translation-string:v1:7ff46a88-3e89-4109-ad30-91aa8bfb1012\"\n              ),\n              \" \",\n              #\"urn:appian:translation-string:v1:785711c5-7244-4c16-8528-0b475850bccc\"(#\"urn:appian:translation-variable:v1:ec540421-0493-41fa-8f1c-59aebc77393f\": local!belowConfidenceFieldValidationMap.confidence)\n            },\n            showWhen: a!isNotNullOrEmpty(local!belowConfidenceFieldValidationMap)\n          )\n        }\n      ),\n      /*Otherwise, no validation needs to be displayed*/\n      {}\n    )\n  ),\n  {}\n)"
    },
    "_a-0000eeb2-df20-8000-9bfe-011c48011c48_154565": {
      "name": "AIA_MTR_InstanceValidationAiRuleOccurance",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180846": {
      "name": "AIA_MTR_ClassificationModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ecb8-d1aa-8000-9c16-011c48011c48_157203": {
      "name": "AIA_Extraction_ReturnSpanIds",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!spanIds: a!match(\n    value: ri!Field,\n    whenTrue: runtimetypeof(ri!Field) = typeof(recordType!AIA Extraction Instance Field()),\n    then: a!defaultValue(\n      ri!Field[recordType!AIA Extraction Instance Field.overrideBoundingBox],\n      ri!Field[recordType!AIA Extraction Instance Field.boundingBox]\n    ),\n    whenTrue: runtimetypeof(ri!Field) = typeof(recordType!AIA Extraction Instance Field Row()),\n    then: ri!Field[recordType!AIA Extraction Instance Field Row.boundingBox],\n    whenTrue: runtimetypeof(ri!Field) = typeof(recordType!AIA Extraction Instance Field Row Cell()),\n    then: ri!Field[recordType!AIA Extraction Instance Field Row Cell.boundingBox],\n    default: \"\"\n  ),\n  local!vals: reject(\n    a!isNullOrEmpty,\n    apply(\n      fn!trim,\n      split(\n        a!localVariables(\n          local!delimiter: \";\",\n          split(\n            /*there is a strange bug here that when a string starts with the delimiter in a double split(), it fails*/\n            if(\n              and(\n                a!isNotNullOrEmpty(ri!Field),\n                a!isNotNullOrEmpty(local!spanIds),\n                local!spanIds[1] = local!delimiter\n              ),\n              /*to avoid, we add a space at the beginning*/\n              concat(\" \", local!spanIds),\n              local!spanIds\n            ),\n            local!delimiter\n          )\n        ),\n        \",\"\n      )\n    )\n  ),\n  if(\n    ri!returnFirst,\n    index(local!vals, 1, null),\n    local!vals\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12853": {
      "name": "AIA_UTIL_GetPercentageAttributes",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!value,\n  whenTrue: a!defaultValue(ri!isNotTracked, false),\n  then: a!map(\n    textColor: ri!brandingMap.Gray3,\n    backgroundColor: ri!brandingMap.Gray0,\n    percentage: #\"urn:appian:translation-string:v1:9de5298b-f6d7-4784-88ee-66469af68930\",\n    iconColor: ri!brandingMap.Gray3\n  ),\n  /*If Percentage Greater for 1000*/\n  whenTrue: ri!value > 1000,\n  then: null,\n  /*If Percentage is null*/\n  whenTrue: a!isNullOrEmpty(ri!value),\n  then: a!map(\n    textColor: ri!brandingMap.Gray3,\n    backgroundColor: ri!brandingMap.Gray0,\n    percentage: rule!AIA_DisplayPercentage(value: ri!value),\n    iconColor: ri!brandingMap.Gray3\n  ),\n  /*If Percentage is greater than .8*/\n  whenTrue: ri!value > .8,\n  then: a!map(\n    textColor: ri!brandingMap.Green4,\n    backgroundColor: ri!brandingMap.Green1,\n    percentage: rule!AIA_DisplayPercentage(value: ri!value),\n    iconColor: ri!brandingMap.Green4\n  ),\n  /*If Percentage greater than .5*/\n  whenTrue: ri!value > .5,\n  then: a!map(\n    textColor: ri!brandingMap.Yellow4,\n    backgroundColor: ri!brandingMap.Yellow1,\n    percentage: rule!AIA_DisplayPercentage(value: ri!value),\n    iconColor: ri!brandingMap.Yellow4\n  ),\n  /*If Percentage greater than .25*/\n  whenTrue: ri!value > .25,\n  then: a!map(\n    textColor: ri!brandingMap.Orange4,\n    backgroundColor: ri!brandingMap.Orange1,\n    percentage: rule!AIA_DisplayPercentage(value: ri!value),\n    iconColor: ri!brandingMap.Orange4\n  ),\n  /*If Percentage is less than .25*/\n  default: a!map(\n    textColor: ri!brandingMap.Red4,\n    backgroundColor: ri!brandingMap.Red1,\n    percentage: rule!AIA_DisplayPercentage(value: ri!value),\n    iconColor: ri!brandingMap.Red4\n  )\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180860": {
      "name": "AIA_MTR_ClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_126391": {
      "name": "AIA_API_Extraction_ConvertInstanceToMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fields: rule!AIA_Extraction_GetFieldsForModelVersionId(\n    modelVersionId: ri!ExtractionInstance[recordType!AIA Extraction Instance.modelVersionId]\n  ),\n  local!updates: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!fields,\n    expression: a!map(\n      key: fv!item[recordType!AIA Extraction Model Version Field.key],\n      value: a!localVariables(\n        local!modelField: fv!item,\n        local!instanceField: displayvalue(\n          fv!item[recordType!AIA Extraction Model Version Field.key],\n          ri!ExtractionInstance[recordType!AIA Extraction Instance.fields][recordType!AIA Extraction Instance Field.modelVersionField.key],\n          ri!ExtractionInstance[recordType!AIA Extraction Instance.fields],\n          null\n        ),\n        if(\n          fv!item[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n          /* Get table field */\n          a!localVariables(\n            local!extractedRows: local!instanceField[recordType!AIA Extraction Instance Field.rows],\n            local!extractedRowsRemoved:index(\n              local!extractedRows,\n              where(#\"SYSTEM_SYSRULES_forEach\"(local!extractedRows, fv!item[recordType!AIA Extraction Instance Field Row.overrideValue] <> \"Removed\")),\n              {}\n            ),\n            #\"SYSTEM_SYSRULES_forEach\"(\n              local!extractedRowsRemoved,\n              a!localVariables(\n                local!row: fv!item,\n                reduce(\n                  #\"urn:appian:function:v1:a:update\"(_, _, _),\n                  a!map(),\n                  merge(\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: local!modelField[recordType!AIA Extraction Model Version Field.columns],\n                      expression: fv!item[recordType!AIA Extraction Model Version Field.key]\n                    ),\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: local!modelField[recordType!AIA Extraction Model Version Field.columns],\n                      expression: a!localVariables(\n                        local!cellField: displayvalue(\n                          fv!item[recordType!AIA Extraction Model Version Field.key],\n                          local!row[recordType!AIA Extraction Instance Field Row.cells.column.key],\n                          local!row[recordType!AIA Extraction Instance Field Row.cells],\n                          null\n                        ),\n                        if(\n                          a!defaultValue(\n                            local!cellField[recordType!AIA Extraction Instance Field Row Cell.overrideNull],\n                            false\n                          ) = true,\n                          null,\n                          rule!AIA_FormatValueForMap(\n                            value: a!defaultValue(\n                              local!cellField[recordType!AIA Extraction Instance Field Row Cell.overrideValue],\n                              local!cellField[recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                            ),\n                            field: fv!item\n                          )\n                        )\n                      )\n                    )\n                  )\n                ) \n              )\n            )\n          ),\n          /* Get scalar field */\n          if(\n            and(\n              a!isNotNullOrEmpty(local!instanceField[recordType!AIA Extraction Instance Field.overrideNull]),\n              a!defaultValue(\n                local!instanceField[recordType!AIA Extraction Instance Field.overrideNull],\n                false\n              ) = true\n            ),\n            null,\n            rule!AIA_FormatValueForMap(\n              value: a!defaultValue(\n                local!instanceField[recordType!AIA Extraction Instance Field.overrideValue],\n                local!instanceField[recordType!AIA Extraction Instance Field.extractedValue]\n              ),\n              field: fv!item\n            )\n          )\n        )\n      )\n    )\n  ),\n  reduce(\n    rule!AIA_UTIL_UpdateByKeyValue(baseMap: _, updateMap: _),\n    a!map(),\n    local!updates\n  )\n)"
    },
    "_a-0000ee6e-3b90-8000-9bac-011c48011c48_85019": {
      "name": "AIA_IsExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "runtimetypeof(\n  ri!Instance\n) = typeof(\n  recordType!AIA Extraction Instance()\n)"
    },
    "_a-0000ec94-6ee6-8000-9ba9-011c48011c48_37840": {
      "name": "AIA_IsFloatingPoint",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!value,\n  whenTrue: rule!SHRD_IsList(fv!value),\n  then: false,\n  whenTrue: or(\n    runtimetypeof(ri!value) = 'type!{http://www.appian.com/ae/types/2009}Map',\n    runtimetypeof(ri!value) = 'type!{http://www.appian.com/ae/types/2009}Dictionary'\n  ),\n  then: false,\n  whenTrue: a!isNullOrEmpty(ri!value),\n  then: true,\n  whenTrue: a!isNullOrEmpty(todecimal(ri!value)),\n  then: false,\n  whenTrue: abs(\n    todecimal(\n      ri!value\n    ) - ri!value\n  ) < .01,\n  then: true,\n  default: false\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180834": {
      "name": "AIA_MTR_ExtractionModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed57-1773-8000-9c7e-011c48011c48_325995": {
      "name": "AIA_Extraction_CaptureBoxSaves",
      "type": "Expression Rule",
      "sail_code": "{\n  a!save(\n    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideBoundingBox],\n    if(\n      a!isNullOrEmpty(\n        a!defaultValue(ri!value, save!value)\n      ),\n      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideBoundingBox],\n      a!defaultValue(ri!value, save!value)\n    )\n  ),\n  a!save(\n    ri!highlightedBox,\n    null\n  ),\n  a!save(\n    ri!interactionId,\n    ri!interactionId + 1\n  )\n}"
    },
    "_a-0000eed7-d56e-8000-9d0a-011c48011c48_192769": {
      "name": "AIA_ParseListValue",
      "type": "Expression Rule",
      "sail_code": "try(\n  #\"SYSTEM_SYSRULES_fromJson_v1\"(\n    ri!value\n  ),\n  {\n    tostring(\n      ri!value\n    )\n  }\n)"
    },
    "_a-0000ec94-6ee6-8000-9ba9-011c48011c48_37846": {
      "name": "SHRD_Scalarize",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!SHRD_IsList(ri!value),\n  index(ri!value, 1, ri!value),\n  ri!value\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12129": {
      "name": "AIA_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!brandingDefault: getbrandingconfig(\n    cons!AIA_DOC_DEFAULT_BRANDING_CONFIG,\n    true()\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!brandingDefault.defaultBranding.key,\n        local!brandingDefault.customBranding.key\n      },\n      {\n        local!brandingDefault.defaultBranding.value,\n        local!brandingDefault.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ee3d-1f5c-8000-9ba4-011c48011c48_14175": {
      "name": "AIA_FormatValueForDatabase",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!field[recordType!AIA Extraction Model Version Field.type],\n  whenTrue: a!isNullOrEmpty(ri!value),\n  then: ri!value,\n  whenTrue: contains(\n    index(cons!AIA_EXTRACTION_FIELD_TYPES, {4,5}),\n    fv!value\n  ),\n  then: rule!AIA_ConvertDateToIso(\n    value: if(\n      runtimetypeof(ri!value) = 'type!{http://www.appian.com/ae/types/2009}Text',\n      rule!AIA_TypeHelper(\n        value: ri!value,\n        field: ri!field\n      ),\n      ri!value\n    )\n  ),\n  default: ri!value\n)"
    },
    "cbe7853d-b993-402e-9704-de17d8e175ca": {
      "name": "AIA Extraction Reconcile Instance",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=rule!AIA_LogMetric( name: cons!AIA_MTR_EXTRACTION_INSTANCE_RECONCILED)\n\n// Input: ?\na!map(\n  instance: pv!ExtractionInstance,\n  instanceId: pv!ExtractionInstance[recordType!AIA Extraction Instance.id],\n  uuid: pv!ExtractionInstance[recordType!AIA Extraction Instance.modelVersion.extractionModel.uuid]\n)\n\n// Input: ?\ncons!AIA_REF_TRIGGER_TYPE_ID_RECONCILE\n\n// Input: ?\n=pv!ExtractionInstance\n\n// Input: ?\ntrue"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_77894": {
      "name": "AIA_TypeHelper",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!convertedValue: a!match(\n    value: ri!field[recordType!AIA Extraction Model Version Field.type],\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n    then: trim(ri!value),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[2],\n    then: tointeger(ri!value),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[3],\n    then: todecimal(ri!value),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[4],\n    then: try(\n      if(\n        find(\"Z\", ri!value) > 0,\n        rule!AIA_ConvertIsoToDate(value: ri!value),\n        a!localVariables(\n          local!datetime: parsedate(trim(ri!value)),\n          date(year(local!datetime), month(local!datetime), day(local!datetime))\n        )\n      ),\n      ri!value\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[5],\n    then: try(\n      if(\n        find(\"Z\", ri!value) > 0,\n        rule!AIA_ConvertIsoToDate(value: ri!value),\n        parsedate(trim(ri!value))\n      ),\n      ri!value\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[6],\n    then: a!match(\n      value: trim(lower(ri!value)),\n      whenTrue: or(\n        ri!value = \"yes\",\n        toboolean(fv!value),\n      ),\n      then: true,\n      whenTrue: or(\n        ri!value = \"no\",\n        ri!value = \"false\"\n      ),\n      then: false,\n      default: trim(ri!value)\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[8],\n    then: trim(ri!value),\n    default: trim(ri!value)\n  ),\n  if(\n    and(\n      a!isNullOrEmpty(local!convertedValue),\n      a!isNotNullOrEmpty(ri!value)\n    ),\n    ri!value,\n    local!convertedValue\n  )\n)"
    },
    "_a-0001eccb-4552-8000-9c3e-011c48011c48_161219": {
      "name": "AIA_Extraction_GetInstanceByIdForReconciliation",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      rule!AIA_EXTRACTION_INSTANCE_FIELDS(),\n      \n      /* Fields used in AIA_Extraction_CreateUpdateInstance */\n      recordType!AIA Extraction Instance.documentFolderId,\n      recordType!AIA Extraction Instance.sourceDocumentId,\n      recordType!AIA Extraction Instance.createdOn,\n      recordType!AIA Extraction Instance.createdBy,\n      recordType!AIA Extraction Instance.testInstance,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.responseDocumentId,\n      recordType!AIA Extraction Instance.pageCount,\n      recordType!AIA Extraction Instance.inputTokens,\n      recordType!AIA Extraction Instance.outputTokens,\n      recordType!AIA Extraction Instance.wasStp,\n      \n      recordType!AIA Extraction Instance.modelVersion.extractionModel.uuid\n    }\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505631": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_54467": {
      "name": "AIA_ExtractionInstance_RecordAction_Reconcile",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*Load Branding Data for Styling*/\n  local!brandingMap: rule!AIA_UTIL_LoadBrandingMap(),\n  /*Extraction Instance Fields*/\n  local!extractionFields: rule!AIA_Extraction_GetFieldsForModelVersionId(\n    modelVersionId: ri!ExtractionInstance[recordType!AIA Extraction Instance.modelVersionId],\n    additionalFields: {\n      recordType!AIA Extraction Model Version.fields.correctFieldPercentage,\n    }\n  ),\n  /*Extraction Field Sections*/\n  local!sections: union(\n    local!extractionFields[recordType!AIA Extraction Model Version Field.section],\n    local!extractionFields[recordType!AIA Extraction Model Version Field.section]\n  ),\n  local!extractionModel: rule!AIA_QR_getExtractionModel(\n    modelId: ri!extractionInstance[recordType!AIA Extraction Instance.modelVersion.modelId],\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(1, 1),\n    fields: recordType!AIA Extraction Model.useLandscapeView\n  ).data[1],\n  local!ExtractionInstanceFields: ri!extractionInstance[recordType!AIA Extraction Instance.fields],\n  local!highlightedBox,\n  local!selectedBox,\n  local!selectedField,\n  local!interactionId: 0,\n  local!captureSelection,\n  local!hasBoundingBoxes: and(\n    a!isNotNullOrEmpty(ri!ExtractionInstance[recordType!AIA Extraction Instance.hasBoundingBoxes]),\n    a!isNotNullOrEmpty(ri!ExtractionInstance[recordType!AIA Extraction Instance.boundingBoxesDocumentId]),\n    ri!ExtractionInstance[recordType!AIA Extraction Instance.hasBoundingBoxes]\n  ),\n  local!extractionInstance: a!refreshVariable(\n    refreshOnVarChange: local!ExtractionInstanceFields,\n    value: #\"urn:appian:function:v1:a:update\"(\n      ri!extractionInstance,\n      recordType!AIA Extraction Instance.fields,\n      local!ExtractionInstanceFields\n    )\n  ),\n  local!validations: rule!AIA_GetValidationsForInstance(\n    instance: ri!extractionInstance\n  ),\n  local!isRotateLayout: a!defaultValue(\n    value: local!extractionModel[recordType!AIA Extraction Model.useLandscapeView],\n    default: false()\n  ),\n  local!widthCount: 0,\n  local!width: if(\n    #\"SYSTEM_SYSRULES_isPageWidth\"({ \"DESKTOP_WIDE\" }),\n    if(\n      local!widthCount =- 1,\n      \"WIDE\",\n      if(local!widthCount = 1, \"WIDE_PLUS\", \"AUTO\")\n    ),\n    if(\n      #\"SYSTEM_SYSRULES_isPageWidth\"({ \"DESKTOP\" }),\n      if(\n        local!widthCount =- 1,\n        \"MEDIUM_PLUS\",\n        if(local!widthCount = 1, \"WIDE\", \"AUTO\")\n      ),\n      if(\n        local!widthCount =- 1,\n        \"MEDIUM\",\n        if(local!widthCount = 1, \"WIDE\", \"AUTO\")\n      )\n    )\n  ),\n  #\"SYSTEM_SYSRULES_headerContentLayout\"(\n    header: {\n      rule!AIA_ExtractionInstance_RecordAction_ReconcileHeader(\n        brandingMap: local!brandingMap,\n        isLandscapeLayout: local!isRotateLayout,\n        additionalSaveInto: {\n          a!save(local!widthCount, 0),\n          a!save(local!width, \"AUTO\")\n        }\n      )\n    },\n    contents: {\n      #\"SYSTEM_SYSRULES_paneLayout\"(\n        panes: {\n          #\"SYSTEM_SYSRULES_pane\"(\n            width: if(\n              local!isRotateLayout = true(),\n              \"\",\n              local!width\n            ),\n            contents: {\n              #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                items: {\n                  #\"SYSTEM_SYSRULES_sideBySideItem\"(width: \"10X\"),\n                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                    item: #\"SYSTEM_SYSRULES_stampField\"(\n                      label: \"\",\n                      labelPosition: \"COLLAPSED\",\n                      icon: \"angle-left\",\n                      tooltip: #\"urn:appian:translation-string:v1:615dd278-f5e3-41d8-81f1-4aab634e5e81\",\n                      backgroundColor: if(\n                        local!widthCount > - 1,\n                        local!brandingMap.Blue1,\n                        local!brandingMap.Gray1\n                      ),\n                      contentColor: if(\n                        local!widthCount > - 1,\n                        local!brandingMap.Blue4,\n                        local!brandingMap.Gray3\n                      ),\n                      size: \"TINY\",\n                      align: \"END\",\n                      link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                        saveInto: a!save(local!widthCount, local!widthCount - 1),\n                        showWhen: local!widthCount > - 1\n                      )\n                    ),\n                    width: \"MINIMIZE\"\n                  ),\n                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                    item: #\"SYSTEM_SYSRULES_stampField\"(\n                      label: \"\",\n                      labelPosition: \"COLLAPSED\",\n                      icon: \"angle-right\",\n                      tooltip: #\"urn:appian:translation-string:v1:6d538469-4ab5-4fc5-a14e-1f40ce726620\",\n                      backgroundColor: if(\n                        local!widthCount < 1,\n                        local!brandingMap.Blue1,\n                        local!brandingMap.Gray1\n                      ),\n                      contentColor: if(\n                        local!widthCount < 1,\n                        local!brandingMap.Blue4,\n                        local!brandingMap.Gray3\n                      ),\n                      size: \"TINY\",\n                      align: \"END\",\n                      link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                        saveInto: a!save(local!widthCount, local!widthCount + 1),\n                        showWhen: local!widthCount < 1\n                      )\n                    ),\n                    width: \"MINIMIZE\"\n                  )\n                },\n                showWhen: local!isRotateLayout <> true()\n              ),\n              /*Display Field Validation*/\n              rule!AIA_ExtractionInstance_Sub_DisplayReconcileValidation(\n                ValidationErrors: local!validations,\n                ExtractionInstance: local!extractionInstance,\n                brandingMap: local!brandingMap\n              ),\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: local!sections,\n                expression: a!localVariables(\n                  local!currentSection: fv!item,\n                  #\"SYSTEM_SYSRULES_boxLayout\"(\n                    label: a!defaultValue(\n                      local!currentSection,\n                      cons!AIA_SECTION_EXTRACTED_DATA\n                    ),\n                    accessibilityText: a!defaultValue(\n                      local!currentSection,\n                      cons!AIA_SECTION_EXTRACTED_DATA\n                    ),\n                    labelHeadingTag: \"H3\",\n                    style: local!brandingMap.Blue0,\n                    showBorder: false(),\n                    isCollapsible: true(),\n                    contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n                      shape: \"SEMI_ROUNDED\",\n                      marginAbove: \"NONE\",\n                      marginBelow: \"LESS\",\n                      style: local!brandingMap.DefaultPageBackground,\n                      padding: \"LESS\",\n                      showBorder: false(),\n                      showShadow: false(),\n                      contents: #\"SYSTEM_SYSRULES_forEach\"(\n                        items: local!extractionFields,\n                        expression: rule!AIA_ExtractionInstance_Sub_ReconcileSection(\n                          brandingMap: local!brandingMap,\n                          ModelVersionField: fv!item,\n                          ExtractionInstanceFields: local!ExtractionInstanceFields,\n                          ValidationErrors: local!validations,\n                          section: local!currentSection,\n                          showTarget: local!hasBoundingBoxes,\n                          highlightSaves: {\n                            a!save(local!highlightedBox, save!value),\n                            a!save(\n                              local!interactionId,\n                              local!interactionId + 2\n                            )\n                          },\n                          captureSaves: {\n                            if(\n                              or(\n                                a!isNullOrEmpty(index(local!captureSelection, \"time\", null)),\n                                elapsedseconds(local!captureSelection.time, now()) > 10\n                              ),\n                              a!save(\n                                local!selectedField,\n                                if(\n                                  and(\n                                    a!isNotNullOrEmpty(local!selectedField),\n                                    local!selectedField = save!value\n                                  ),\n                                  null,\n                                  save!value\n                                )\n                              ),\n                              a!localVariables(\n                                local!fieldIndex: index(\n                                  wherecontains(\n                                    tostring(\n                                      fv!item[recordType!AIA Extraction Model Version Field.fieldId]\n                                    ),\n                                    touniformstring(\n                                      local!ExtractionInstanceFields[recordType!AIA Extraction Instance Field.modelVersionFieldId]\n                                    )\n                                  ),\n                                  1,\n                                  null\n                                ),\n                                {\n                                  rule!AIA_Extraction_CaptureFieldSaves(\n                                    ExtractionInstanceFields: local!ExtractionInstanceFields,\n                                    resultFieldIndex: local!fieldIndex,\n                                    ModelVersionFields: local!extractionFields,\n                                    value: local!captureSelection.text\n                                  ),\n                                  rule!AIA_Extraction_CaptureBoxSaves(\n                                    ExtractionInstanceFields: local!ExtractionInstanceFields,\n                                    resultFieldIndex: local!fieldIndex,\n                                    highlightedBox: local!highlightedBox,\n                                    value: local!captureSelection.boxes,\n                                    interactionId: local!interactionId\n                                  ),\n                                  a!save(local!captureSelection, null)\n                                }\n                              )\n                            )\n                          },\n                          selectedBoxId: local!selectedBox,\n                          selectedField: local!selectedField\n                        )\n                      )\n                    ),\n                    padding: \"NONE\",\n                    marginBelow: \"STANDARD\"\n                  )\n                )\n              ),\n              if(\n                local!isRotateLayout = true(),\n                if(\n                  local!hasBoundingBoxes,\n                  rule!AIA_ExtractionInstance_Sub_ReconcileDocument(\n                    ExtractionInstance: ri!ExtractionInstance,\n                    ExtractionInstanceFields: local!ExtractionInstanceFields,\n                    ModelVersionFields: local!extractionFields,\n                    highlightedBox: local!highlightedBox,\n                    captureSelection: local!captureSelection,\n                    selectedBox: local!selectedBox,\n                    selectedField: local!selectedField,\n                    interactionId: local!interactionId,\n                    brandingMap: local!brandingMap\n                  ),\n                  rule!AIA_UTIL_displayInlineDocument(\n                    documentId: ri!ExtractionInstance[recordType!AIA Extraction Instance.documentId],\n                    height: \"TALL\"\n                  )\n                ),\n                {}\n              ),\n              #\"SYSTEM_SYSRULES_horizontalLine\"(),\n              #\"SYSTEM_SYSRULES_ButtonLayout\"(\n                /*Cancel Button*/\n                secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n                  submit: true(),\n                  validate: false(),\n                  value: true,\n                  saveInto: ri!cancel,\n                  loadingIndicator: true()\n                ),\n                /*Submit Button*/\n                primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:d16bad4f-bd7d-4749-973b-caf37acbd5cb\",\n                  submit: true(),\n                  validate: true(),\n                  /*Submit Save Intos*/\n                  saveInto: {\n                    a!save(\n                      ri!ExtractionInstance[recordType!AIA Extraction Instance.fields],\n                      local!ExtractionInstanceFields\n                    ),\n                    a!save(\n                      ri!extractionInstance,\n                      #\"urn:appian:function:v1:a:update\"(\n                        ri!extractionInstance,\n                        {\n                          recordType!AIA Extraction Instance.statusId,\n                          recordType!AIA Extraction Instance.modifiedBy,\n                          recordType!AIA Extraction Instance.modifiedOn\n                        },\n                        {\n                          cons!AIA_INSTANCE_STATUS_RECONCILED_MANUALLY,\n                          loggedInUser(),\n                          now()\n                        }\n                      )\n                    )\n                  },\n                  style: \"SOLID\"\n                )\n              )\n            },\n            padding: \"LESS\"\n          ),\n          #\"SYSTEM_SYSRULES_pane\"(\n            contents: if(\n              local!hasBoundingBoxes,\n              rule!AIA_ExtractionInstance_Sub_ReconcileDocument(\n                ExtractionInstance: ri!ExtractionInstance,\n                ExtractionInstanceFields: local!ExtractionInstanceFields,\n                ModelVersionFields: local!extractionFields,\n                highlightedBox: local!highlightedBox,\n                captureSelection: local!captureSelection,\n                selectedBox: local!selectedBox,\n                selectedField: local!selectedField,\n                interactionId: local!interactionId,\n                brandingMap: local!brandingMap\n              ),\n              rule!AIA_UTIL_displayInlineDocument(\n                documentId: ri!ExtractionInstance[recordType!AIA Extraction Instance.documentId],\n                height: \"TALL\"\n              )\n            ),\n            padding: \"LESS\",\n            showWhen: local!isRotateLayout <> true()\n          )\n        }\n      )\n    }\n  )\n)"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_267337": {
      "name": "AIA_RULE_ENUM_RuleOperations",
      "type": "Expression Rule",
      "sail_code": "/* Data dictionary \n * id (number) - stored as ruleOperationId in validations column in MODEL_VERSION_VALIDATIONS. Negative numbers indicate rules that are system created, positive numbers for rules types that are added to models through ADD MODEL VALIDATION\n * category (text) - segretates rules for use in different ways. field_config, model_feature, or validation_rule\n * isEnabled (boolean) - if true, this rule is always run for all instances\n * rule (rule reference) - this is the expression to run to evaluate this rule - the input is a single map \n *    - parameters (map)\n *      - instance (record type)\n *      - modelVersionFields (list of Model Version Fields)\n *      - instanceMap (map)\n * displayRule (rule reference) - this is the rule to display this rule at a per validation rule level on the instance errors view\n * summaryRule (rule reference) - this is the rule to display the summary of the aggregations of multiples of these errors\n * postReconciliation (boolean) - if true, this will rerun the rule after reconciliation\n * clearOnReconciliation (booean) \n *    - DEPRECATED: all validations clear once reconcilied so this boolean is not used\n *    - if true, this will delete instances of this error after reconciliation\n * icon (map) - this is the icon to display for the toggle for this rule\n *    - icon (text) - icon to use\n *    - color (text) - color of icon\n *    - label (text) - label for toggle\n * \n*/\n \n\n{\n  a!map(\n    id: -1,\n    category: \"field_config\",\n    isEnabled: true,\n    rule: rule!AIA_RULE_Operation_RequiredFields,\n    displayRule: null,\n    postReconciliation: true,\n    clearOnReconciliation: true\n  ),\n  a!map(\n    id: -2,\n    category: \"field_config\",\n    isEnabled: true,\n    rule: rule!AIA_RULE_Operation_ValidateField,\n    displayRule: null,\n    postReconciliation: true,\n    clearOnReconciliation: true\n  ),\n  a!map(\n    id: -cons!AIA_VALIDATION_TYPE_ID_LOW_CONFIDENCE,\n    category: \"model_feature\",\n    typeId: cons!AIA_VALIDATION_TYPE_ID_LOW_CONFIDENCE,\n    rule: rule!AIA_RULE_Operation_LowConfidence,\n    displayRule: rule!AIA_LowConfidenceDisplayMessage,\n    summaryRule: rule!AIA_LowConfidenceDisplaySummary,\n    isEnabledField: recordType!AIA Extraction Instance.modelVersion.useConfidence,\n    postReconciliation: false,\n    clearOnReconciliation: true,\n    icon:  a!map(\n      icon: \"exclamation-triangle\",\n      label: #\"urn:appian:translation-string:v1:e1babdf7-c62c-4f32-94ac-af5babe6695a\",\n      color: \"Orange3\"\n    )\n  ),\n  a!map(\n    id: -cons!AIA_VALIDATION_TYPE_ID_AI_REVIEW,\n    category: \"model_feature\",\n    isEnabled: false,\n    typeId: cons!AIA_VALIDATION_TYPE_ID_AI_REVIEW,\n    displayRule: rule!AIA_AiReviewDisplayMessage,\n    summaryRule: rule!AIA_AiReviewDisplaySummary,\n    isEnabledField: recordType!AIA Extraction Instance.modelVersion.useAiReview,\n    executionProcess: cons!AIA_PM_EXTRACTION_INSTANCE_AI_REVIEW,\n    postReconciliation: false,\n    clearOnReconciliation: true,\n    icon: a!map(\n      icon: \"magic\",\n      label: #\"urn:appian:translation-string:v1:a67c9f85-f682-4191-bed6-c4912e7d88b4\",\n      color: \"Blue3\"\n    )\n  ),\n  a!map(\n    id: -cons!AIA_VALIDATION_TYPE_ID_EXECUTION,\n    category: \"model_feature\",\n    isEnabled: false,\n    typeId: cons!AIA_VALIDATION_TYPE_ID_EXECUTION,\n    summaryRule: rule!AIA_ExecutionDisplaySummary,\n    displayRule: rule!AIA_ExecutionDisplayMessage,\n    postReconciliation: false,\n    clearOnReconciliation: true\n  ),\n  a!map(\n    id: -cons!AIA_VALIDATION_TYPE_ID_AI_VALIDATION,\n    category: \"validation_rule\",\n    isEnabled: false,\n    typeId: cons!AIA_VALIDATION_TYPE_ID_AI_VALIDATION,\n    parameters: {\n      if(\n        cons!AIA_FLAG_AI_VALIDATION_RULE_SHOW_FLAG_WHEN,\n        /*only show flagWhen radiobutton if feature flag is on*/\n        {\n          id: \"flagWhen\",\n          label: #\"urn:appian:translation-string:v1:de846dfd-706a-492e-a1c9-d1a348ce039f\",\n          instructions: #\"urn:appian:translation-string:v1:7e770d69-fe55-4875-a18c-cd10ee7a0ab8\",\n          type: \"boolean\",\n          required: true\n        },\n        {}\n      ),\n      {\n        id: \"prompt\",\n        label: if(\n          cons!AIA_FLAG_AI_VALIDATION_RULE_SHOW_FLAG_WHEN,\n          #\"urn:appian:translation-string:v1:a31d0f67-35fe-40b0-b9ed-7d660f37d5e6\",\n          #\"urn:appian:translation-string:v1:018010cf-d13e-40d9-b451-fcf9725436f7\"\n        ),\n        type: \"paragraph\",\n        required: true,\n        characterLimit: 4000\n      }\n    },\n    configDisplayRule: rule!AIA_AiValidationRuleConfigDisplay,\n    displayRule: rule!AIA_AiValidationRuleDisplayMessage,\n    summaryRule: rule!AIA_AiValidationRuleDisplaySummary,\n    executionProcess: cons!AIA_PM_EXTRACTION_INSTANCE_AI_VALIDATION_RULE,\n    testExecutionProcess: cons!AIA_PM_AI_VALIDATION_TEST_EXECUTION,\n    testCasePromptGenerationRule: rule!AIA_AiValidationRulePromptInputForTestCaseGeneration,\n    postReconciliation: false,\n    clearOnReconciliation: true,\n    cardChoiceConfig: a!map(\n      icon: \"magic\",\n      primaryText: #\"urn:appian:translation-string:v1:83c0f531-6606-4898-a02d-ceac9946ddaa\",\n      secondaryText: #\"urn:appian:translation-string:v1:992f3303-0dd3-4e32-a943-713f18cfe257\"\n    )\n  ),\n  a!map(\n    id: cons!AIA_VALIDATION_TYPE_ID_EXPRESSION_RULE,\n    category: \"validation_rule\",\n    name: \"Expression Rule\",\n    parameters: {\n      {\n        type: \"columns\",\n        alignVertical: \"MIDDLE\",\n        columns: {\n          {\n            contents: {\n              id: \"rule\",\n              label: \"\",\n              type: \"rulepicker\",\n              required: true\n              \n            },\n            width: \"MEDIUM\"\n          }\n        }\n      }\n    },\n    rule: rule!AIA_RULE_Operation_ExpressionRule,\n    configDisplayRule: rule!AIA_RULE_Operation_ExpressionRuleConfigDisplay,\n    displayRule: rule!AIA_ExpressionRuleDisplayMessage,\n    testCasePromptGenerationRule: rule!AIA_ExpressionRulePromptInputForTestCaseGeneration,\n    postReconciliation: true,\n    clearOnReconciliation: true,\n    cardChoiceConfig: a!map(\n      icon: \"code\",\n      primaryText: #\"urn:appian:translation-string:v1:a807a92f-3079-48ca-929a-d899a8dafee2\",\n      secondaryText: #\"urn:appian:translation-string:v1:2cc88913-646e-4a92-896b-fa2ba61a38f2\"\n    )\n  )\n}/*a!map(*/\n/*id: 3,*/\n/*name: \"Field Comparison\",*/\n/*parameters: {*/\n/*{*/\n/*type: \"columns\",*/\n/*alignVertical: \"MIDDLE\",*/\n/*columns: {*/\n/* LHS Type Selection */\n/*{*/\n/*contents: {*/\n/*id: \"lhsType\",*/\n/*label: \"\",*/\n/*type: \"fieldtype\",*/\n/*hideTypes: {cons!AIA_RULE_INPUT_TYPES[2],cons!AIA_RULE_INPUT_TYPES[3]},*/\n/*required: true,*/\n/*nullifyFieldIdsOnChange: \"lhs\"*/\n/*},*/\n/*width: \"EXTRA_NARROW\"*/\n/*},*/\n/* LHS Field Selection */\n/*{*/\n/*contents: {*/\n/*{*/\n/*id: \"lhs\",*/\n/*label: \"Field\",*/\n/*type: \"modelversionfielddropdown\",*/\n/*returnDataTypeId: true,*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"lhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[1]*/\n/*}*/\n/*},*/\n/*{*/\n/*id: \"lhs\",*/\n/*label: \"Rule\",*/\n/*type: \"rulepicker\",*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"lhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[3]*/\n/*}*/\n/*},*/\n/*{*/\n/*id: \"lhs\",*/\n/*label: \"Expression\",*/\n/*type: \"paragraph\",*/\n/*returnDataTypeId: false,*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"lhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[4]*/\n/*}*/\n/*}*/\n/*},*/\n/*width: \"MEDIUM\"*/\n/*},*/\n/* Operator Selection */\n/*{*/\n/*contents: {*/\n/*id: \"ruleOperator\",*/\n/*label: \"Operator\",*/\n/*type: \"operatordropdown\",*/\n/*required: true*/\n/*},*/\n/*width: \"NARROW\"*/\n/*},*/\n/* RHS Type Selection */\n/*{*/\n/*contents: {*/\n/*id: \"rhsType\",*/\n/*label: \"\",*/\n/*type: \"fieldtype\",*/\n/*required: true,*/\n/*nullifyFieldIdsOnChange: \"rhs\",*/\n/*showWhen: {*/\n/*field: \"ruleOperator\",*/\n/*operator: \"not in\",*/\n/*value: { \"is null\", \"not null\" }*/\n/*},*/\n/*hideTypes: {cons!AIA_RULE_INPUT_TYPES[3]},*/\n/*},*/\n/*width: \"EXTRA_NARROW\"*/\n/*},*/\n/* RHS Field Selection */\n/*{*/\n/*contents: {*/\n/*{*/\n/*id: \"rhs\",*/\n/*label: \"Field\",*/\n/*type: \"modelversionfielddropdown\",*/\n/*returnDataTypeId: false,*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"rhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[1]*/\n/*}*/\n/*},*/\n/*{*/\n/*id: \"rhs\",*/\n/*label: \"Value\",*/\n/*type: \"dynamicdatatype\",*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"rhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[2]*/\n/*}*/\n/*},*/\n/*{*/\n/*id: \"rhs\",*/\n/*label: \"Rule\",*/\n/*type: \"rulepicker\",*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"rhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[3]*/\n/*}*/\n/*},*/\n/*{*/\n/*id: \"rhs\",*/\n/*label: \"Expression\",*/\n/*type: \"paragraph\",*/\n/*returnDataTypeId: false,*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"rhsType\",*/\n/*operator: \"=\",*/\n/*value: cons!AIA_RULE_INPUT_TYPES[4]*/\n/*}*/\n/*}*/\n/*},*/\n/*width: \"MEDIUM\"*/\n/*},*/\n/*}*/\n/*}*/\n/*},*/\n/*rule: rule!AIA_RULE_Operation_CompareTwoValues,*/\n/*displayRule: rule!AIA_RULE_Operation_CompareTwoValuesDisplay*/\n/*),*/\n/*a!map(*/\n/*id: 1,*/\n/*name: \"Examine Fields\",*/\n/*parameters: {*/\n/*{*/\n/*type: \"columns\",*/\n/*alignVertical: \"MIDDLE\",*/\n/*columns: {*/\n/*{*/\n/*contents: {*/\n/*{*/\n/*id: \"fieldKey\",*/\n/*label: \"Field\",*/\n/*type: \"modelversionfielddropdown\",*/\n/*returnDataTypeId: true,*/\n/*required: true,*/\n/*nullifyFieldIdsOnChange: \"value\"*/\n/*},*/\n/*},*/\n/*width: \"MEDIUM\"*/\n/*},*/\n/*{*/\n/*contents: {*/\n/*id: \"ruleOperator\",*/\n/*label: \"Operator\",*/\n/*type: \"operatordropdown\",*/\n/*required: true*/\n/*},*/\n/*width: \"NARROW\"*/\n/*},*/\n/*{*/\n/*contents: {*/\n/*id: \"value\",*/\n/*label: \"Value\",*/\n/*type: \"dynamicdatatype\",*/\n/*required: true,*/\n/*showWhen: {*/\n/*field: \"ruleOperator\",*/\n/*operator: \"not in\",*/\n/*value: { \"is null\", \"not null\" }*/\n/*}*/\n/*},*/\n/*width: \"NARROW\"*/\n/*}*/\n/*}*/\n/*}*/\n/*},*/\n/*rule: rule!AIA_RULE_Operation_ExamineField,*/\n/*displayRule: rule!AIA_RULE_Operation_ExamineFieldDisplay*/\n/*),*/\n/*a!map(*/\n/*id: 2,*/\n/*name: \"Compare Expressions\",*/\n/*parameters: {*/\n/*{*/\n/*type: \"columns\",*/\n/*alignVertical: \"MIDDLE\",*/\n/*columns: {*/\n/*{*/\n/*contents: {*/\n/*id: \"lhs\",*/\n/*label: \"LHS\",*/\n/*type: \"paragraph\",*/\n/*returnDataTypeId: false,*/\n/*required: true*/\n/*},*/\n/*width: \"MEDIUM\",*/\n/*},*/\n/*{*/\n/*contents: {*/\n/*id: \"ruleOperator\",*/\n/*label: \"Operator\",*/\n/*type: \"operatordropdown\",*/\n/*required: true*/\n/*},*/\n/*},*/\n/*{*/\n/*contents: {*/\n/*id: \"rhs\",*/\n/*label: \"RHS\",*/\n/*type: \"paragraph\",*/\n/*returnDataTypeId: false,*/\n/*required: true*/\n/*},*/\n/*width: \"MEDIUM\"*/\n/*}*/\n/*}*/\n/*}*/\n/*},*/\n/*rule: rule!AIA_RULE_Operation_CompareExpressions,*/\n/*displayRule: rule!AIA_RULE_Operation_CompareExpressionsDisplay*/\n/*),*/"
    },
    "_a-0000ed21-75ea-8000-9c68-011c48011c48_293735": {
      "name": "AIA_RULE_TEST_BuildTestParameters",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!instance: rule!AIA_Extraction_GetInstanceByIdForReconciliation(identifier: ri!instanceId),\n  local!rules: rule!AIA_Extraction_GetValidationsForModelVersion(\n    instance: local!instance\n  ),\n  a!map(\n    context: rule!AIA_ExtractJson(\n      json: index(\n        local!rules[a!defaultValue(ri!ruleIndex, 1)],\n        recordType!AIA Extraction Model Version Validation Rule.validations,\n        null\n      )\n    ),\n    Instance: local!instance,\n    instanceMap: rule!AIA_API_Extraction_ConvertInstanceToMap(\n      ExtractionInstance: local!instance\n    ),\n    modelVersionFields: rule!AIA_Extraction_GetFieldsForModelVersionId(\n      modelVersionId: local!instance[recordType!AIA Extraction Instance.modelVersionId]\n    )\n  )\n)"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179352": {
      "name": "AIA_MTR_ConfidenceThresholdEnabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eea3-15ee-8000-9bd4-011c48011c48_137447": {
      "name": "AIA_MTR_ModelVersionConfigureSampling",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed57-e2bf-8000-9c54-011c48011c48_15225797": {
      "name": "AIA_ViewCsv",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_paragraphField\"(\n  label: rule!AIA_FormatDocument(\n    documentId: ri!document,\n  ),\n  labelPosition: \"COLLAPSED\",\n  height: \"TALL\",\n  readOnly: true,\n  value: rule!SHRD_ReadDocumentContent(\n    document: ri!document\n  )\n)"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_272710": {
      "name": "AIA_RULE_ENUM_Severity",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    value: cons!AIA_SEVERITY_CRITICAL,\n    label: #\"urn:appian:translation-string:v1:0fdbc5bf-53b5-4561-bfbd-b271cac50c35\",\n    icon: \"fire-alt\",\n    color: \"Red4\"\n  ),\n  a!map(\n    value: cons!AIA_SEVERITY_HIGH,\n    label: #\"urn:appian:translation-string:v1:e0e17633-3db4-46cb-ad07-96b5d97b3e8c\",\n    icon: \"angle-double-up-bold\",\n    color: \"Orange4\"\n  ),\n  a!map(\n    value: cons!AIA_SEVERITY_MEDIUM,\n    label: #\"urn:appian:translation-string:v1:1c3e003d-2666-41cd-844f-3278b6e69a82\",\n    icon: \"circle-o\",\n    color: \"Yellow4\"\n  ),\n  a!map(\n    value: cons!AIA_SEVERITY_LOW,\n    label: #\"urn:appian:translation-string:v1:2b0d9f01-f232-478f-bd9c-89f7158ed854\",\n    icon: \"angle-double-down\",\n    color: \"Green4\"\n  )\n}"
    },
    "_a-0000ee6e-3b90-8000-9bac-011c48011c48_84705": {
      "name": "AIA_Extraction_InstanceUuid",
      "type": "Expression Rule",
      "sail_code": "a!defaultValue(\n  ri!ExtractionInstance[recordType!AIA Extraction Instance.instanceUuid],\n  cons!AIA_MODEL_TYPE_VALUES[1] & \"-\" & ri!ExtractionInstance[recordType!AIA Extraction Instance.id]\n)"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_57008": {
      "name": "AIA_DisplayValidationMessageForInstance",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!displayRule: a!refreshVariable(\n    value: displayvalue(\n      ri!validationInstance[recordType!AIA Instance Validation Error.typeId],\n      rule!AIA_RULE_ENUM_RuleOperations().typeId,\n      rule!AIA_RULE_ENUM_RuleOperations().displayRule,\n      null\n    ),\n    refreshAlways: true\n  ),\n  if(\n    a!isNotNullOrEmpty(local!displayRule),\n    local!displayRule(Validation: ri!validationInstance, brandingMap: ri!brandingMap),\n    ri!validationInstance[recordType!AIA Instance Validation Error.message]\n  )\n)"
    },
    "_a-0000ec2c-7618-8000-9bc8-011c48011c48_912344": {
      "name": "AIA_UTIL_displayInlineDocument",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!showWhen: a!defaultValue(ri!showWhen, true),\n  a!match(\n    value: try(\n      lower(document(ri!documentId, \"extension\")),\n      null\n    ),\n    whenTrue: rule!AIA_IsDocumentExtension(\n      document: ri!documentId,\n      extensions: cons!AIA_AI_SUPPORTED_DOC_TYPES\n    ),\n    then: reconcileDocumentViewer(\n      label: rule!AIA_FormatDocument(\n        documentId: ri!documentId,\n      ),\n      labelPosition: \"COLLAPSED\",\n      documentUrl: document(\n        ri!documentId,\n        \"url\"\n      ),\n      height: ri!height,\n      showWhen: local!showWhen\n    ),\n    whenTrue: contains(cons!AIA_TEXT_BASED_EXTENSIONS, tostring(fv!value)),\n    then: #\"SYSTEM_SYSRULES_cardLayout\"(\n      padding: \"STANDARD\",\n      showBorder: false,\n      contents: rule!AIA_ViewCsv(document: ri!documentId),\n      showWhen: local!showWhen\n    ),\n    equals: \"eml\",\n    then: #\"SYSTEM_SYSRULES_cardLayout\"(\n      padding: \"STANDARD\",\n      showBorder: false,\n      contents: rule!AIA_ViewEml(eml: ri!documentId, style: \"SECTION\"),\n      showWhen: local!showWhen\n    ),\n    default: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: #\"urn:appian:translation-string:v1:c6755e7b-0e3e-4450-a5e8-83768c5f51ff\"\n        ),\n        \" \",\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text:#\"urn:appian:translation-string:v1:cdd19acd-88fc-46ad-9184-5bcf62ebd2b3\",\n          link: #\"SYSTEM_SYSRULES_documentDownloadLink\"(document: ri!documentId),\n          linkStyle: \"STANDALONE\"\n        ),\n        \" \",\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(text:#\"urn:appian:translation-string:v1:8831778e-03c2-46c1-aeae-baa89c699eca\")\n      },\n      showWhen: local!showWhen\n    )\n  )\n)"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_273379": {
      "name": "SHRD_IsList",
      "type": "Expression Rule",
      "sail_code": "runtimetypeof(ri!value) = runtimetypeof(a!flatten({ri!value}))"
    },
    "_a-0000ee94-7472-8000-9bb4-011c48011c48_112897": {
      "name": "AIA_Extraction_ReconcileTableField",
      "type": "Interface",
      "sail_code": "{\n  ri!llmJudgeComponents,\n  ri!confidenceComponents,\n  if(\n    ri!reviewingTable,\n    #\"SYSTEM_SYSRULES_gridLayout\"(\n      labelPosition: \"COLLAPSED\",\n      headerCells: #\"SYSTEM_SYSRULES_forEach\"(\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n        #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n          label: fv!item[recordType!AIA Extraction Model Version Field.label]\n        )\n      ),\n      columnConfigs: #\"SYSTEM_SYSRULES_forEach\"(\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n        #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n          showWhen: not(\n            a!defaultValue(\n              fv!item[recordType!AIA Extraction Model Version Field.isHidden],\n              false\n            )\n          ),\n          width: rule!AIA_UTIL_Filter(\n            records: rule!AIA_ENUM_ExtractionFieldTypes(),\n            field: \"label\",\n            value: fv!item[recordType!AIA Extraction Model Version Field.type]\n          ).width\n        )\n      ),\n      rows: a!localVariables(\n        local!suggestedValue: rule!AIA_ExtractJson(\n          json: readdocumentcontent(\n            txtDocument: ri!aiReview[recordType!AIA Instance Validation Error.messageDocId]\n          ),\n          returnList: true\n        ),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          local!suggestedValue,\n          a!localVariables(\n            local!row: fv!item,\n            #\"SYSTEM_SYSRULES_gridRowLayout\"(\n              contents: #\"SYSTEM_SYSRULES_forEach\"(\n                ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n                #\"SYSTEM_SYSRULES_textField\"(\n                  readOnly: true,\n                  value: index(\n                    local!row,\n                    fv!item[recordType!AIA Extraction Model Version Field.key],\n                    null\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    ),\n    a!localVariables(\n      local!columnOptions: #\"SYSTEM_SYSRULES_forEach\"(\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n        if(\n          a!isNullOrEmpty(\n            fv!item[recordType!AIA Extraction Model Version Field.optionRule]\n          ),\n          null,\n          rule!AIA_Extraction_GetFieldOptions(\n            ModelVersionField: fv!item\n          )\n        )\n      ),\n      local!columnValidationRules: a!refreshVariable(\n        refreshAlways: true,\n        value: #\"SYSTEM_SYSRULES_forEach\"(\n          ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n          if(\n            a!isNotNullOrEmpty(\n              fv!item[recordType!AIA Extraction Model Version Field.validationRule]\n            ),\n            getrulereferencebyname(\n              fv!item[recordType!AIA Extraction Model Version Field.validationRule]\n            ),\n            null\n          )\n        )\n      ),\n      {\n        #\"SYSTEM_SYSRULES_gridLayout\"(\n          label: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.label],\n          labelPosition: \"COLLAPSED\",\n          headerCells: {\n\n            #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n              align: \"CENTER\",\n              showWhen: ri!showTarget\n            ),\n            #\"SYSTEM_SYSRULES_forEach\"(\n              ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n              #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n                label: fv!item[recordType!AIA Extraction Model Version Field.label],\n                showWhen: not(\n                  a!defaultValue(\n                    fv!item[recordType!AIA Extraction Model Version Field.isHidden],\n                    false\n                  )\n                )\n              )\n            ),\n            #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(\n              align: \"CENTER\"\n            ),\n\n          },\n          columnConfigs: {\n\n            #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n              width: \"ICON\",\n              showWhen: ri!showTarget\n            ),\n            #\"SYSTEM_SYSRULES_forEach\"(\n              ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n\n              #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n                showWhen: not(\n                  a!defaultValue(\n                    fv!item[recordType!AIA Extraction Model Version Field.isHidden],\n                    false\n                  )\n                ),\n                width: rule!AIA_UTIL_Filter(\n                  records: rule!AIA_ENUM_ExtractionFieldTypes(),\n                  field: \"label\",\n                  value: fv!item[recordType!AIA Extraction Model Version Field.type]\n                ).width\n              )\n            ),\n            #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n              width: \"ICON\"\n            ),\n\n          },\n          rows: #\"SYSTEM_SYSRULES_forEach\"(\n            items: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n            expression: with(\n              local!row: fv!item,\n              local!rowIndex: fv!index,\n              #\"SYSTEM_SYSRULES_gridRowLayout\"(\n                showWhen: and(\n                  local!row[recordType!AIA Extraction Instance Field Row.overrideValue] <> cons!AIA_ROW_REMOVED,\n                  local!row[recordType!AIA Extraction Instance Field Row.overrideValue] <> cons!AIA_ROW_DELETED\n                ),\n                contents: {\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    labelPosition: \"COLLAPSED\",\n                    value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                      caption: #\"urn:appian:translation-string:v1:274875fd-7a96-4572-b3e3-e8f4f1c113f7\",\n                      icon: \"map-marker\",\n                      link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                        value: rule!AIA_Extraction_ReturnSpanIds(\n                          Field: fv!item,\n                          returnFirst: false\n                        ),\n                        saveInto: ri!highlightSaves,\n                        showWhen: a!isNotNullOrEmpty(\n                          fv!item[recordType!AIA Extraction Instance Field Row.boundingBox]\n                        )\n                      ),\n                      color: if(\n                        a!isNotNullOrEmpty(\n                          fv!item[recordType!AIA Extraction Instance Field Row.boundingBox]\n                        ),\n                        ri!brandingMap.AccentColor,\n                        ri!brandingMap.Gray3\n                      ),\n                      linkStyle: \"STANDALONE\"\n                    ),\n                    showWhen: ri!showTarget\n                  ),\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n                    if(\n                      not(\n                        a!defaultValue(\n                          fv!item[recordType!AIA Extraction Model Version Field.isHidden],\n                          false\n                        )\n                      ),\n                      a!localVariables(\n                        local!columnIndex: wherecontains(\n                          fv!item[recordType!AIA Extraction Model Version Field.fieldId],\n                          local!row[recordType!AIA Extraction Instance Field Row.cells.modelVersionFieldId]\n                        ),\n                        local!value: if(\n                          local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.overrideNull],\n                          null,\n                          if(\n                            a!isNotNullOrEmpty(\n                              index(\n                                local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.overrideValue],\n                                1,\n                                null\n                              )\n                            ),\n                            index(\n                              local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.overrideValue],\n                              1,\n                              null\n                            ),\n                            index(\n                              local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.extractedValue],\n                              1,\n                              null\n                            ),\n\n                          )\n                        ),\n                        rule!AIA_ExtractionInstance_Sub_ReconcileFieldInput(\n                          label: fv!item[recordType!AIA Extraction Model Version Field.label],\n                          ModelVersionField: fv!item,\n                          value: local!value,\n                          options: local!columnOptions[fv!index],\n                          validationRule: if(\n                            a!isNotNullOrEmpty(\n                              local!columnValidationRules[fv!index]\n                            ),\n                            local!columnValidationRules[fv!index](\n                              local!value\n                            ),\n                            null\n                          ),\n                          readOnly: ri!readOnly,\n                          fieldSaves: {\n                            a!save(\n                              target: local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.overrideNull],\n                              value: if(\n                                and(\n                                  a!isNullOrEmpty(\n                                    save!value\n                                  ),\n                                  a!isNotNullOrEmpty(\n                                    local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                                  )\n                                ),\n                                true,\n                                null\n                              )\n                            ),\n                            a!save(\n                              target: local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.overrideValue],\n                              value: a!localVariables(\n                                local!saveValue: rule!AIA_FormatValueForDatabase(\n                                  value: save!value,\n                                  field: ri!ModelVersionField\n                                ),\n                                if(\n                                  or(\n                                    a!isNullOrEmpty(\n                                      local!saveValue\n                                    ),\n                                    and(\n                                      a!isNotNullOrEmpty(\n                                        local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                                      ),\n                                      rule!AIA_UTIL_CompareStrings(\n                                        string1: local!saveValue,\n                                        string2: local!row[recordType!AIA Extraction Instance Field Row.cells][local!columnIndex][recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                                      )\n                                    )\n                                  ),\n                                  null,\n                                  local!saveValue\n                                )\n                              )\n                            ),\n                            if(\n                              local!row[recordType!AIA Extraction Instance Field Row.overrideValue] <> cons!AIA_ROW_ADDED,\n                              a!save(\n                                target: local!row[recordType!AIA Extraction Instance Field Row.overrideValue],\n                                value: if(\n                                  a!isNotNullOrEmpty(\n                                    reject(\n                                      fn!isnull,\n                                      a!flatten(\n                                        {\n                                          local!row[recordType!AIA Extraction Instance Field Row.cells.overrideNull],\n                                          local!row[recordType!AIA Extraction Instance Field Row.cells.overrideValue]\n                                        }\n                                      )\n                                    )\n                                  ),\n                                  cons!AIA_ROW_OVERRIDDEN,\n                                  null\n                                )\n                              ),\n                              {}\n                            ),\n                            a!save(\n                              target: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n                              value: if(\n                                a!isNotNullOrEmpty(\n                                  reject(\n                                    fn!isnull,\n                                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows.overrideValue]\n                                  )\n                                ),\n                                cons!AIA_TABLE_UPDATED,\n                                null\n                              )\n                            )\n                          }\n                        )\n                      ),\n                      {}\n                    )\n                  ),\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                      icon: \"times\",\n                      color: ri!brandingMap.Gray4,\n                      caption: #\"urn:appian:translation-string:v1:ca85961f-04d0-42ff-a429-06d48afe2aff\",\n                      link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                        value: fv!index,\n                        saveInto: {\n                          if(\n                            local!row[recordType!AIA Extraction Instance Field Row.overrideValue] = cons!AIA_ROW_ADDED,\n                            if(\n                              a!isNullOrEmpty(\n                                local!row[recordType!AIA Extraction Instance Field Row.id]\n                              ),\n                              /* Newly added and not saved row */\n                              a!save(\n                                target: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n                                value: remove(\n                                  ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n                                  local!rowIndex\n                                )\n                              ),\n                              a!save(\n                                target: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows][local!rowIndex][recordType!AIA Extraction Instance Field Row.overrideValue],\n                                value: cons!AIA_ROW_DELETED\n                              )\n                            ),\n                            {\n                              a!save(\n                                target: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n                                value: cons!AIA_TABLE_UPDATED\n                              ),\n                              a!save(\n                                target: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows][local!rowIndex][recordType!AIA Extraction Instance Field Row.overrideValue],\n                                value: cons!AIA_ROW_REMOVED\n                              )\n                            }\n                          )\n                        }\n                      ),\n                      altText: #\"urn:appian:translation-string:v1:7192e3af-2e63-4513-b758-f62dfa7376c9\",\n                      linkStyle: \"STANDALONE\"\n                    )\n                  )\n                }\n              )\n            )\n          ),\n          addRowLink: #\"SYSTEM_SYSRULES_dynamicLink\"(\n            label: #\"urn:appian:translation-string:v1:e234d46e-c11f-4f03-9b01-da0a95abcba5\",\n            saveInto: a!save(\n              ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n              append(\n                ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n                recordType!AIA Extraction Instance Field Row(\n                  recordType!AIA Extraction Instance Field Row.overrideValue: cons!AIA_ROW_ADDED,\n                  recordType!AIA Extraction Instance Field Row.cells: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n                    expression: recordType!AIA Extraction Instance Field Row Cell(\n                      recordType!AIA Extraction Instance Field Row Cell.modelVersionFieldId: fv!item[recordType!AIA Extraction Model Version Field.fieldId],\n                      recordType!AIA Extraction Instance Field Row Cell.column: fv!item\n                    )\n                  )\n                )\n              )\n            )\n          ),\n          borderStyle: \"LIGHT\"\n        )\n      }\n    )\n  )\n}"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_91421": {
      "name": "AIA_DisplayInstanceValidationErrors",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!instanceErrors: a!refreshVariable(\n    value: a!defaultValue(\n      ri!ValidationErrors,\n      rule!AIA_GetValidationsForInstance(\n        Instance: ri!Instance\n      )\n    ),\n    refreshAfter: \"RECORD_ACTION\"\n  ),\n  local!errorTypes: if(\n    a!isNotNullOrEmpty(local!instanceErrors),\n    {\n      a!map(\n        label: #\"urn:appian:translation-string:v1:db126a38-936c-4e83-9ce6-5998789d5180\",\n        validations: rule!AIA_UTIL_Filter(\n          records: local!instanceErrors,\n          field: recordType!AIA Instance Validation Error.typeId,\n          value: cons!AIA_VALIDATION_TYPE_ID_EXECUTION\n        )\n      ),\n      a!map(\n        label: #\"urn:appian:translation-string:v1:0abfb72d-edc2-41b0-82df-e6936a0d1802\",\n        validations: rule!AIA_UTIL_Filter(\n          records: local!instanceErrors,\n          field: recordType!AIA Instance Validation Error.typeId,\n          value: {\n            cons!AIA_VALIDATION_TYPE_ID_MODEL,\n            cons!AIA_VALIDATION_TYPE_ID_AI_VALIDATION\n          }\n        )\n      ),\n      a!map(\n        label: #\"urn:appian:translation-string:v1:24d35aad-d22e-454b-8569-b27fe7c1aee9\",\n        validations: rule!AIA_UTIL_Filter(\n          records: local!instanceErrors,\n          field: recordType!AIA Instance Validation Error.typeId,\n          value: {\n            cons!AIA_VALIDATION_TYPE_ID_FIELD,\n            cons!AIA_VALIDATION_TYPE_ID_AI_REVIEW,\n            cons!AIA_VALIDATION_TYPE_ID_LOW_CONFIDENCE,\n          }\n        )\n      )\n    },\n    null\n  ),\n  if(\n    and(a!isNullOrEmpty(local!instanceErrors)),\n    /*Empty State Message*/\n    {\n      #\"SYSTEM_SYSRULES_imageField_v1\"(\n        align: \"CENTER\",\n        labelPosition: \"COLLAPSED\",\n        images: #\"SYSTEM_SYSRULES_documentImage\"(\n          document: cons!AIA_EXTRACTION_INSTANCE_VALIDATION_ERROR_EMPTY_STATE\n        )\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        align: \"CENTER\",\n        labelPosition: \"COLLAPSED\",\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            color: ri!brandingMap.Gray4,\n            text: #\"urn:appian:translation-string:v1:68994331-777e-40ad-a554-e8e503744c29\"\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_recordActionField_v1\"(\n        align: \"CENTER\",\n        actions: #\"SYSTEM_SYSRULES_recordActionItem\"(\n          action: #\"urn:appian:record-action:v1:64322398-e457-4695-87d5-09794164cf77/7e21971b-39a4-4890-af13-99a5f749a6b5\",\n          identifier: ri!instance[recordType!AIA Extraction Instance.id]\n        ),\n        style: \"TOOLBAR\",\n        display: \"LABEL\",\n        showWhen: rule!AIA_IsExtractionInstance(Instance: ri!Instance)\n      )\n    },\n    if(\n      a!defaultValue(ri!isSummary, false),\n      rule!AIA_DisplayValidationsOfType(\n        isShowAction: rule!AIA_IsExtractionInstance(Instance: ri!Instance),\n        label: #\"urn:appian:translation-string:v1:e91288af-afe1-47b4-8b17-d18e609a0fc0\",\n        instanceErrors: ri!ValidationErrors,\n        instanceId: if(\n          rule!AIA_IsExtractionInstance(ri!Instance),\n          ri!Instance[recordType!AIA Extraction Instance.id],\n          ri!Instance[recordType!AIA Classification Instance.id]\n        ),\n        isSummary: ri!isSummary,\n        brandingMap: ri!brandingMap\n      ),\n      #\"SYSTEM_SYSRULES_forEach\"(\n        reject(\n          fn!isnull,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            local!errorTypes,\n            if(\n              length(fv!item.validations) = 0,\n              null,\n              fv!item\n            )\n          )\n        ),\n        {\n          rule!AIA_DisplayValidationsOfType(\n            label: fv!item.label,\n            instanceErrors: fv!item.validations,\n            instanceId: if(\n              rule!AIA_IsExtractionInstance(ri!Instance),\n              ri!Instance[recordType!AIA Extraction Instance.id],\n              ri!Instance[recordType!AIA Classification Instance.id]\n            ),\n            isShowAction: and(\n              fv!isFirst,\n              rule!AIA_IsExtractionInstance(Instance: ri!Instance)\n            ),\n            brandingMap: ri!brandingMap\n          ),\n          #\"SYSTEM_SYSRULES_horizontalLine\"(showWhen: not(fv!isLast))\n        }\n      )\n    )\n  )\n)"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_181995": {
      "name": "AIA_MTR_ExtractionModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee3e-060c-8000-9bb8-011c48011c48_203441": {
      "name": "SHRD_ReadDocumentContent",
      "type": "Expression Rule",
      "sail_code": "/*readdocumentcontent(ri!document)*/\n\nqueryfile(\n  ri!document,\n  \"TEXT\",\n  now()\n).result"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_59087": {
      "name": "AIA_Extraction_ReviewSaves",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!validation),\n  {\n    a!save(\n      ri!validation[recordType!AIA Instance Validation Error.isIgnored],\n      a!match(\n        value: ri!type,\n        equals: cons!AIA_VALIDATION_ACCEPT,\n        then: false,\n        equals: cons!AIA_VALIDATION_IGNORE,\n        then: a!localVariables(\n          local!metric: rule!AIA_LogMetric(\n            name: cons!AIA_MTR_AI_REVIEW_IGNORE\n          ),\n          true\n        ),\n        equals: cons!AIA_VALIDATION_UNDO,\n        then: null,\n        default: ri!validation[recordType!AIA Instance Validation Error.isIgnored]\n      )\n    ),\n    a!save(\n      ri!validation[recordType!AIA Instance Validation Error.isAccepted],\n      a!match(\n        value: ri!type,\n        equals: cons!AIA_VALIDATION_ACCEPT,\n        then: a!localVariables(\n          local!metric: rule!AIA_LogMetric(\n            name: cons!AIA_MTR_AI_REVIEW_ACCEPT\n          ),\n          true\n        ),\n        equals: cons!AIA_VALIDATION_IGNORE,\n        then: false,\n        equals: cons!AIA_VALIDATION_UNDO,\n        then: null,\n        default: ri!validation[recordType!AIA Instance Validation Error.isAccepted]\n      )\n    ),\n    a!save(\n      ri!validation[recordType!AIA Instance Validation Error.modifiedBy],\n      loggedInUser()\n    ),\n    a!save(\n      ri!validation[recordType!AIA Instance Validation Error.modifiedOn],\n      now()\n    ),\n    #\"SYSTEM_SYSRULES_writeRecords_v2\"(\n      records: ri!validation,\n      onSuccess: {\n        a!save(\n          ri!validation,\n          fv!recordsUpdated\n        ),\n        ri!saves\n      }\n    )\n  },\n  ri!saves\n)"
    },
    "_a-0000ee3d-1f5c-8000-9ba4-011c48011c48_14346": {
      "name": "AIA_FormatValueForMap",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!field[recordType!AIA Extraction Model Version Field.type],\n  whenTrue: contains(\n    index(cons!AIA_EXTRACTION_FIELD_TYPES, {4,5}),\n    fv!value\n  ),\n  then: rule!AIA_ConvertIsoToDate(\n    value: ri!value\n  ),\n  default: ri!value\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180874": {
      "name": "AIA_MTR_ClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_199422": {
      "name": "AIA_Test_GetLatestExtractionInstanceWithFields",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.inputDocumentId,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion.confidenceThreshold,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion,\n  }\n)"
    },
    "_a-0000ec1e-9975-8000-9bd6-011c48011c48_1375165": {
      "name": "AIA_ExtractionInstance_Sub_ReconcileSection",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: a!defaultValue(ri!brandingMap, rule!AIA_UTIL_LoadBrandingMap()),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    showWhen: and(\n      or(\n        and(\n          a!isNullOrEmpty(\n            ri!ModelVersionField[recordType!AIA Extraction Model Version Field.section]\n          ),\n          a!isNullOrEmpty(ri!section)\n        ),\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.section] = ri!section\n      ),\n      not(\n        a!defaultValue(\n          ri!ModelVersionField[recordType!AIA Extraction Model Version Field.isHidden],\n          false\n        )\n      )\n    ),\n    contents: rule!AIA_ExtractionInstance_Sub_ReconcileField(\n      ModelVersionField: ri!ModelVersionField,\n      ExtractionInstanceFields: ri!ExtractionInstanceFields,\n      ValidationErrors: ri!ValidationErrors,\n      showTarget: ri!showTarget,\n      highlightSaves: ri!highlightSaves,\n      captureSaves: ri!captureSaves,\n      selectedBoxId: ri!selectedBoxId,\n      selectedField: ri!selectedField,\n      showAccuracy: cons!AIA_DISPLAY_RECONCILE_ACCURACY,\n      brandingMap: local!brandingMap\n    ),\n    showBorder: false(),\n    shape: \"SEMI_ROUNDED\",\n    padding: \"NONE\",\n    style: local!brandingMap.DefaultPageBackground,\n    marginBelow: \"STANDARD\"\n  )\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180867": {
      "name": "AIA_MTR_ExtractionInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92474": {
      "name": "AIA_MTR_ClassificationInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40839": {
      "name": "AIA_Test_GetLatestExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v3\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.instanceUuid,\n    recordType!AIA Extraction Instance.modelVersion.versionId,\n    recordType!AIA Extraction Instance.modelVersion.modelId,\n    recordType!AIA Extraction Instance.modelVersion.uuid,\n    recordType!AIA Extraction Instance.modelVersion.extractionModel.key,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.fieldCount,\n    recordType!AIA Extraction Instance.sections,\n    recordType!AIA Extraction Instance.boundingBoxes,\n    recordType!AIA Extraction Instance.responseDocumentId,\n    recordType!AIA Extraction Instance.sourceDocumentId\n  }\n)"
    },
    "_a-0000ee94-7472-8000-9bb4-011c48011c48_113247": {
      "name": "AIA_AiReviewComponents",
      "type": "Interface",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!aiReview),\n  a!localVariables(\n    local!validationMessageMap: #\"SYSTEM_SYSRULES_fromJson_v1\"(\n      ri!aiReview[recordType!AIA Instance Validation Error.message]\n    ),\n    local!suggestedValue: if(\n      ri!isMultiple,\n      rule!AIA_ToJson(\n        data: local!validationMessageMap.suggestedValue\n      ),\n      local!validationMessageMap.suggestedValue\n    ),\n    local!accepted: or(\n      /*override value matches suggested value (occers if user manually enters override value)*/\n      and(\n        ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue] = local!suggestedValue,\n        a!isNotNullOrEmpty(\n          local!suggestedValue\n        )\n      ),\n      /*override null is true and suggested value is null*/\n      and(\n        toboolean(\n          ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull]\n        ) = true,\n        a!isNullOrEmpty(\n          local!suggestedValue\n        )\n      ),\n      /*is accepted flag is true (occurs when user click accept icon)*/\n      a!defaultValue(\n        ri!aiReview[recordType!AIA Instance Validation Error.isAccepted],\n        false\n      )\n    ),\n    local!ignored: a!defaultValue(\n      ri!aiReview[recordType!AIA Instance Validation Error.isIgnored],\n      false\n    ),\n    {\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        label: #\"urn:appian:translation-string:v1:a67c9f85-f682-4191-bed6-c4912e7d88b4\",\n        labelPosition: \"COLLAPSED\",\n        value: {\n          #\"SYSTEM_SYSRULES_richTextIcon\"(\n            icon: \"magic\",\n            color: ri!brandingMap.blue3\n          ),\n          \" \",\n          if(\n            or(\n              local!accepted,\n              local!ignored\n            ),\n            {\n              #\"urn:appian:translation-string:v1:29e11f89-2cfb-43dd-9362-cef347c8bf0d\" & \" \" & if(\n                local!accepted,\n                #\"urn:appian:translation-string:v1:426065dd-3bd4-4ebd-8388-775592e3b174\",\n                #\"urn:appian:translation-string:v1:ff993367-6efe-40fd-9c23-7ecae90ec73e\"\n              ) & \".\",\n              \" \",\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: #\"urn:appian:translation-string:v1:7bedd89e-c3d4-4cd6-9b33-2747ef10792d\",\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: rule!AIA_Extraction_ReviewSaves(\n                    validation: ri!aiReview,\n                    saves: rule!AIA_Extraction_UndoSaves(\n                      ModelVersionField: ri!ModelVersionField,\n                      ExtractionInstanceField: ri!ExtractionInstanceFields[ri!resultFieldIndex]\n                    ),\n                    type: cons!AIA_VALIDATION_UNDO\n                  )\n                ),\n                linkStyle: \"STANDALONE\"\n              )\n            },\n            {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: #\"urn:appian:translation-string:v1:4b9554a3-4644-46f7-9958-ccb33e78bf9b\" & \": \",\n                style: \"STRONG\",\n                showWhen: not(\n                  ri!isTable\n                )\n              ),\n              rule!AIA_DisplayValidationMessageForInstance(\n                validationInstance: ri!aiReview,\n                brandingMap: ri!brandingMap\n              ),\n              char(\n                10\n              ),\n              if(\n                ri!isTable,\n                {\n                  if(\n                    ri!reviewingTable,\n                    {},\n                    {\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: #\"urn:appian:translation-string:v1:07f56c6a-165b-4cdd-a90d-1fd6309ecb94\",\n                        link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                          value: ri!reviewingTable,\n                          saveInto: a!save(\n                            ri!reviewingTable,\n                            not(\n                              save!value\n                            )\n                          )\n                        ),\n                        linkStyle: \"STANDALONE\"\n                      ),\n                      cons!SHRD_DOT_SEPARATOR\n                    }\n                  ),\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:41c08d6a-49d1-4215-917b-e655b68bc342\",\n                    link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                      value: local!suggestedValue,\n                      saveInto: a!flatten(\n                        {\n                          rule!AIA_Extraction_ReviewSaves(\n                            validation: ri!aiReview,\n                            saves: reject(\n                              fn!isnull,\n                              {\n                                a!save(\n                                  target: ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n                                  value: cons!AIA_TABLE_UPDATED\n                                ),\n                                if(\n                                  a!isNullOrEmpty(\n                                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows]\n                                  ),\n                                  null,\n                                  #\"SYSTEM_SYSRULES_forEach\"(\n                                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n                                    a!save(\n                                      target: fv!item[recordType!AIA Extraction Instance Field Row.overrideValue],\n                                      value: cons!AIA_ROW_REMOVED\n                                    )\n                                  )\n                                ),\n                                #\"SYSTEM_SYSRULES_forEach\"(\n                                  rule!AIA_ExtractJson(\n                                    json: readdocumentcontent(\n                                      txtDocument: ri!aiReview[recordType!AIA Instance Validation Error.messageDocId]\n                                    ),\n                                    returnList: true\n                                  ),\n                                  a!localVariables(\n                                    local!row: fv!item,\n                                    a!save(\n                                      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n                                      append(\n                                        ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.rows],\n                                        recordType!AIA Extraction Instance Field Row(\n                                          recordType!AIA Extraction Instance Field Row.overrideValue: cons!AIA_ROW_ADDED,\n                                          recordType!AIA Extraction Instance Field Row.cells: #\"SYSTEM_SYSRULES_forEach\"(\n                                            items: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.columns],\n                                            expression: recordType!AIA Extraction Instance Field Row Cell(\n                                              recordType!AIA Extraction Instance Field Row Cell.modelVersionFieldId: fv!item[recordType!AIA Extraction Model Version Field.fieldId],\n                                              recordType!AIA Extraction Instance Field Row Cell.column: fv!item,\n                                              recordType!AIA Extraction Instance Field Row Cell.overrideValue: index(\n                                                local!row,\n                                                fv!item[recordType!AIA Extraction Model Version Field.key],\n                                                null\n                                              )\n                                            )\n                                          )\n                                        )\n                                      )\n                                    )\n                                  )\n                                ),\n                                a!save(\n                                  ri!reviewingTable,\n                                  false\n                                )\n                              }\n                            ),\n                            type: cons!AIA_VALIDATION_ACCEPT\n                          )\n                        }\n                      )\n                    ),\n                    linkStyle: \"STANDALONE\"\n                  ),\n                  cons!SHRD_DOT_SEPARATOR,\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:771f4978-4d6f-4939-a70a-b944927b9d1c\",\n                    link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                      saveInto: {\n                        rule!AIA_Extraction_ReviewSaves(\n                          validation: ri!aiReview,\n                          saves: a!save(\n                            ri!reviewingTable,\n                            false\n                          ),\n                          type: cons!AIA_VALIDATION_IGNORE\n                        )\n                      }\n                    ),\n                    linkStyle: \"STANDALONE\"\n                  )\n                },\n                {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:41c08d6a-49d1-4215-917b-e655b68bc342\",\n                    link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                      value: local!suggestedValue,\n                      saveInto: rule!AIA_Extraction_ReviewSaves(\n                        validation: ri!aiReview,\n                        saves: ri!fieldSaves,\n                        type: cons!AIA_VALIDATION_ACCEPT\n                      )\n                    ),\n                    linkStyle: \"STANDALONE\"\n                  ),\n                  cons!SHRD_DOT_SEPARATOR,\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:771f4978-4d6f-4939-a70a-b944927b9d1c\",\n                    link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                      saveInto: rule!AIA_Extraction_ReviewSaves(\n                        validation: ri!aiReview,\n                        saves: a!save(\n                          ri!reviewingTable,\n                          false\n                        ),\n                        type: cons!AIA_VALIDATION_IGNORE\n                      )\n                    ),\n                    linkStyle: \"STANDALONE\"\n                  )\n                }\n              )\n            }\n          )\n        }\n      )\n    }\n  ),\n  {}\n)"
    },
    "_a-0000ee3d-1f5c-8000-9ba4-011c48011c48_14385": {
      "name": "AIA_ConvertDateToIso",
      "type": "Expression Rule",
      "sail_code": "regexsearch(\n  \":\"\"(.*)\"\"\",\n  #\"SYSTEM_SYSRULES_toJson_v1\"(\n    {\n      a: ri!value\n    }\n  ),\n  \"gms\",\n  true\n).groups[1].match"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_79495": {
      "name": "AIA_Extraction_GetFieldOptions",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(\n    ri!ModelVersionField[recordType!AIA Extraction Model Version Field.optionRule]\n  ),\n  a!localVariables(\n    local!optionsRule: a!refreshVariable(\n      refreshAlways: true,\n      value: getrulereferencebyname(\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.optionRule]\n      )\n    ),\n    a!map(options: local!optionsRule())\n  ),\n  null\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_52454": {
      "name": "AIA_Test_GetLatestClassificationInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Classification Instance,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Classification Instance,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Classification Instance.id\n          )\n        }\n      )\n    ).data[recordType!AIA Classification Instance.id],\n    1,\n    null\n  ),\n  fields: {\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.outcomes,\n    recordType!AIA Classification Instance.refInstanceStatus\n  },\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92481": {
      "name": "AIA_MTR_ExtractionInstanceExtractedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_269084": {
      "name": "AIA_GetValidationsForInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordType_v3\"(\n  recordType: recordType!AIA Instance Validation Error,\n  fields: {\n    recordType!AIA Instance Validation Error.typeId,\n    recordType!AIA Instance Validation Error.errorType.name,\n    recordType!AIA Instance Validation Error.modelVersionValidation.validations,\n    recordType!AIA Instance Validation Error.instanceField.modelVersionField.label,\n    recordType!AIA Instance Validation Error.instanceField.modelVersionField.key,\n    recordType!AIA Instance Validation Error.severity,\n    recordType!AIA Instance Validation Error.message,\n    recordType!AIA Instance Validation Error.messageDocId,\n    recordType!AIA Instance Validation Error.isAccepted,\n    recordType!AIA Instance Validation Error.isIgnored\n  },\n  filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n    operator: \"AND\",\n    filters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Instance Validation Error.instanceUuid,\n        operator: \"=\",\n        value: if(\n          rule!AIA_IsExtractionInstance(instance: ri!Instance),\n          rule!AIA_Extraction_InstanceUuid(\n            ExtractionInstance: ri!Instance\n          ),\n          rule!AIA_Classification_InstanceUuid(\n            ClassificationInstance: ri!Instance\n          )\n        )\n      )\n    }\n  ),\n  pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n    startIndex: 1,\n    batchSize: 1000,\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!AIA Instance Validation Error.severity,\n      ascending: false\n    )\n  )\n).data"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_95572": {
      "name": "AIA_ExtractionInstance_Sub_DisplayReconcileValidation",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!validations: reject(\n    fn!isnull,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      a!defaultValue(\n        ri!ValidationErrors,\n        rule!AIA_GetValidationsForInstance(\n          instance: ri!extractionInstance,\n        )\n      ),\n      if(\n        contains(\n          rule!AIA_FieldLevelValidationTypeIds(),\n          fv!item[recordType!AIA Instance Validation Error.errorType.id]\n        ),\n        null,\n        fv!item\n      )\n    ),\n  ),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    showWhen: and(\n      a!isNotNullOrEmpty(local!validations),\n      length(local!validations) > 0\n    ),\n    showBorder: false,\n    padding: \"LESS\",\n    contents: rule!AIA_DisplayInstanceValidationErrors(\n      brandingMap: ri!brandingMap,\n      ValidationErrors: local!validations,\n      instance: ri!ExtractionInstance,\n      isSummary: true\n    ),\n    style: ri!brandingMap.Red1,\n    marginBelow: \"STANDARD\"\n  )\n)"
    },
    "_a-0000ee3d-1f5c-8000-9ba4-011c48011c48_14361": {
      "name": "AIA_ConvertIsoToDate",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_fromJson_v1\"(\n  \"{\"\"a\"\":\"\"\" & ri!value & \"\"\"}\"\n).a"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_272956": {
      "name": "AIA_RULE_DisplayValidationRulePriority",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: a!defaultValue(ri!brandingMap, rule!AIA_UTIL_LoadBrandingMap()),\n  local!priority: a!defaultValue(\n    value: displayValue(\n      ri!validation[recordType!AIA Instance Validation Error.typeId],\n      tointeger(rule!AIA_RULE_ENUM_RuleOperations().typeId),\n      rule!AIA_RULE_ENUM_RuleOperations().icon,\n      null\n    ),\n    default: displayvalue(\n      ri!Validation[recordType!AIA Instance Validation Error.severity],\n      rule!AIA_RULE_ENUM_Severity().value,\n      rule!AIA_RULE_ENUM_Severity(),\n      null\n    )\n  ),\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    value: {\n      #\"SYSTEM_SYSRULES_richTextIcon\"(\n        icon: local!priority.icon,\n        altText: local!priority.label,\n        caption: local!priority.label,\n        showWhen: a!isNotNullOrEmpty(\n          local!priority\n        ),\n        color: ri!brandingMap[local!priority.color]\n      )\n    },\n    align: \"CENTER\"\n  )\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_91653": {
      "name": "AIA_DisplayValidationsOfType",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n    items: {\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"exclamation-circle\",\n                  color: \"NEGATIVE\"\n                ),\n                \" \"\n              },\n              showWhen: a!defaultValue(ri!isSummary, false)\n            ),\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!label,\n              color: ri!brandingMap.Gray4,\n              style: \"STRONG\"\n            )\n          }\n        )\n      ),\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_recordActionField_v1\"(\n          actions: #\"SYSTEM_SYSRULES_recordActionItem\"(\n            action: #\"urn:appian:record-action:v1:64322398-e457-4695-87d5-09794164cf77/7e21971b-39a4-4890-af13-99a5f749a6b5\",\n            identifier: ri!instanceId\n          ),\n          style: \"TOOLBAR\",\n          display: \"LABEL\",\n          align: \"END\",\n          showWhen: ri!isShowAction\n        ),\n        width: \"MINIMIZE\"\n      )\n    },\n    marginAbove: \"STANDARD\"\n  ),\n  if(\n    a!isNullOrEmpty(ri!instanceErrors),\n    {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: {\n              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: \"thumbs-up\",\n                color: ri!brandingMap.Gray3,\n                size: \"MEDIUM_PLUS\"\n              )\n            },\n            align: \"CENTER\",\n            marginAbove: \"STANDARD\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: #\"urn:appian:translation-string:v1:067c857a-7133-4358-b6ee-0a3b5e0c3713\",\n                color: ri!brandingMap.Gray3\n              )\n            },\n            align: \"CENTER\",\n            marginBelow: \"STANDARD\"\n          )\n        },\n        style: ri!brandingMap.AppianBackground,\n        showBorder: false\n      )\n    },\n    if(\n      not(a!defaultValue(ri!isSummary, false)),\n      /* Individiual Validation Errors */\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!instanceErrors,\n        expression: {\n          if(\n            fv!isFirst,\n            {},\n            #\"SYSTEM_SYSRULES_horizontalLine\"(\n              marginAbove: \"EVEN_LESS\",\n              marginBelow: \"LESS\"\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: rule!AIA_RULE_DisplayValidationRulePriority(\n                  brandingMap: ri!brandingMap,\n                  validation: fv!item\n                ),\n                width: \"MINIMIZE\"\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: rule!AIA_DisplayValidationMessageForInstance(\n                      validationInstance: fv!item,\n                      brandingMap: ri!brandingMap\n                    ),\n                    color: ri!brandingMap.Gray4\n                  )\n                ),\n                width: \"MINIMIZE\"\n              )\n            }\n          )\n        }\n      ),\n      /* Summary of Validation Errors */\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: #\"SYSTEM_SYSRULES_richTextBulletedList\"(\n          items: #\"SYSTEM_SYSRULES_forEach\"(\n            items: {\n              union(ri!instanceErrors[recordType!AIA Instance Validation Error.typeId], ri!instanceErrors[recordType!AIA Instance Validation Error.typeId]),\n            },\n            expression: a!localVariables(\n              local!summaryRule: a!refreshVariable(\n                value: displayValue(\n                  tointeger(fv!item),\n                  rule!AIA_RULE_ENUM_RuleOperations().typeId,\n                  rule!AIA_RULE_ENUM_RuleOperations().summaryRule,\n                  null\n                ),\n                refreshAlways: true\n              ),\n              #\"SYSTEM_SYSRULES_richTextListItem\"(\n                text: local!summaryRule(\n                  Validations: rule!AIA_UTIL_Filter(\n                    records: ri!instanceErrors,\n                    field: recordType!AIA Instance Validation Error.typeId,\n                    value: tointeger(fv!item),\n                    filterType: \"FILTER\"\n                  ),\n                  brandingMap: ri!brandingMap\n                ),\n                showWhen: a!isNotNullOrEmpty(local!summaryRule)\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n}"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_274759": {
      "name": "AIA_ToJson",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!data),\n  \"null\",\n  #\"SYSTEM_SYSRULES_toJson_v1\"(ri!data)\n)"
    },
    "_a-0000ef01-a126-8000-9bab-011c48011c48_14234": {
      "name": "AIA_FieldLevelValidationTypeIds",
      "type": "Expression Rule",
      "sail_code": "{\n  cons!AIA_VALIDATION_TYPE_ID_FIELD,\n  cons!AIA_VALIDATION_TYPE_ID_AI_REVIEW,\n  cons!AIA_VALIDATION_TYPE_ID_LOW_CONFIDENCE\n}"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_182518": {
      "name": "AIA_IsDocumentExtension",
      "type": "Expression Rule",
      "sail_code": "and(\n  a!isNotNullOrEmpty(ri!document),\n  contains(\n    lower(ri!extensions),\n    lower(document(\n      ri!document,\n      \"extension\"\n    ))\n  )\n)"
    },
    "_a-0000ee94-7472-8000-9bb4-011c48011c48_113234": {
      "name": "AIA_Extraction_ReconcileSingleField",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  padding: if(\n    and(\n      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox] = ri!selectedBoxId,\n      a!isNotNullOrEmpty(\n        ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox]\n      )\n    ),\n    \"STANDARD\",\n    \"NONE\"\n  ),\n  showBorder: false,\n  marginAbove: \"NONE\",\n  marginBelow: if(\n    and(\n      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox] = ri!selectedBoxId,\n      a!isNotNullOrEmpty(\n        ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox]\n      )\n    ),\n    \"EVEN_LESS\",\n    \"NONE\"\n  ),\n  style: if(\n    and(\n      ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox] = ri!selectedBoxId,\n      a!isNotNullOrEmpty(\n        ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox]\n      )\n    ),\n    ri!brandingMap.Blue0,\n    \"TRANSPARENT\"\n  ),\n  contents: #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n    /*spacing: \"NONE\",*/\n    items: {\n      /* Marker icon - for bounding boxes */\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        width: \"MINIMIZE\",\n        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: {\n            #\"SYSTEM_SYSRULES_richTextIcon\"(\n              caption: #\"urn:appian:translation-string:v1:274875fd-7a96-4572-b3e3-e8f4f1c113f7\",\n              icon: \"map-marker\",\n              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                value: rule!AIA_Extraction_ReturnSpanIds(\n                  Field: ri!ExtractionInstanceFields[ri!resultFieldIndex],\n                  returnFirst: false\n                ),\n                saveInto: {\n                  ri!highlightSaves,\n                  a!save(ri!captureSaves, ri!ModelVersionField)\n                },\n                showWhen: or(\n                  a!isNotNullOrEmpty(\n                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox]\n                  ),\n                  a!isNotNullOrEmpty(\n                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideBoundingBox]\n                  ),\n\n                )\n              ),\n              color: if(\n                a!isNotNullOrEmpty(\n                  ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideBoundingBox]\n                ),\n                ri!brandingMap.Orange3,\n                if(\n                  a!isNotNullOrEmpty(\n                    ri!ExtractionInstanceFields[ri!resultFieldIndex][recordType!AIA Extraction Instance Field.boundingBox]\n                  ),\n                  ri!brandingMap.AccentColor,\n                  ri!brandingMap.Gray3\n                )\n              ),\n              linkStyle: \"STANDALONE\"\n            )\n          }\n        ),\n        showWhen: ri!showTarget\n      ),\n      /* Field Name */\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: rule!AIA_ExtractionInstance_Sub_ReconcileFieldInput(\n          ModelVersionField: ri!ModelVersionField,\n          options: ri!options,\n          value: ri!value,\n          fieldSaves: ri!fieldSaves,\n          validationRule: ri!validationRule,\n          label: ri!label,\n          readOnly: ri!readOnly\n        ),\n        width: \"10X\"\n      ),\n      /* Highlighter icon - for selecting text */\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        width: \"MINIMIZE\",\n        item: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n          marginAbove: \"NONE\",\n          marginBelow: \"NONE\",\n          align: \"CENTER\",\n          buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            size: \"SMALL\",\n            icon: \"highlighter\",\n            tooltip: #\"urn:appian:translation-string:v1:370d6bba-88d6-4f00-9579-852e781a47bd\",\n            color: if(\n              ri!ModelVersionField = ri!selectedField,\n              \"ACCENT\",\n              \"SECONDARY\"\n            ),\n            style: if(\n              ri!ModelVersionField = ri!selectedField,\n              \"SOLID\",\n              \"GHOST\"\n            ),\n            value: ri!ModelVersionField,\n            saveInto: { ri!captureSaves }\n          ),\n\n        ),\n        showWhen: ri!showTarget\n      ),\n      /* Accuracy Percentage */\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_tagField\"(\n          labelPosition: \"COLLAPSED\",\n          tags: a!localVariables(\n            local!percentageAttributes: rule!AIA_UTIL_GetPercentageAttributes(\n              brandingMap: ri!brandingMap,\n              isNotTracked: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.isNotTracked],\n              value: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.correctFieldPercentage]\n            ),\n            #\"SYSTEM_SYSRULES_tagItem_v1\"(\n              text: local!percentageAttributes.percentage,\n              backgroundColor: local!percentageAttributes.backgroundColor,\n              textColor: local!percentageAttributes.textColor\n            )\n          )\n        ),\n        width: \"1X\",\n        showWhen: ri!showAccuracy\n      )\n    },\n    alignVertical: \"MIDDLE\",\n    marginAbove: \"NONE\",\n    marginBelow: \"EVEN_LESS\"\n  )\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_54830": {
      "name": "AIA_ExtractionInstance_Sub_ReconcileFieldInput",
      "type": "Interface",
      "sail_code": "try(\n  a!match(\n    value: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.type],\n    whenTrue: and(\n      a!isNotNullOrEmpty(ri!options),\n      not(a!defaultValue(ri!readOnly, false))\n    ),\n    /*Dropdown Field*/\n    then: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n      choiceLabels: if(\n        or(\n          contains(\n            touniformstring(ri!options.options),\n            tostring(ri!value)\n          ),\n          a!isNullOrEmpty(ri!value)\n        ),\n        ri!options.options,\n        append(ri!options.options, ri!value)\n      ),\n      choiceValues: if(\n        or(\n          contains(\n            touniformstring(ri!options.options),\n            tostring(ri!value)\n          ),\n          a!isNullOrEmpty(ri!value)\n        ),\n        ri!options.options,\n        append(ri!options.options, ri!value)\n      ),\n      label: a!defaultValue(\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.label],\n        ri!ModelVersionField[recordType!AIA Extraction Model Version Field.key]\n      ),\n      labelPosition: \"COLLAPSED\",\n      placeholder: #\"urn:appian:translation-string:v1:71a74ae5-a41d-4981-b916-d50a7c932868\",\n      required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n      value: cast(\n        runtimetypeof(ri!options.options[1]),\n        ri!value\n      ),\n      saveInto: ri!fieldSaves,\n      validations: {\n        if(\n          or(\n            contains(\n              touniformstring(ri!options.options),\n              tostring(ri!value)\n            ),\n            a!isNullOrEmpty(ri!value)\n          ),\n          null,\n          \"Invalid selection\"\n        ),\n        ri!validationRule\n      }\n    ),\n    whenTrue: or(\n      fv!value = cons!AIA_EXTRACTION_FIELD_TYPES[1],\n      a!defaultValue(ri!readOnly, false)\n    ),\n    /*Text Field*/\n    then: #\"SYSTEM_SYSRULES_textField\"(\n      label: ri!label,\n      labelPosition: \"COLLAPSED\",\n      value: ri!value,\n      required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n      saveInto: ri!fieldSaves,\n      validations: ri!validationRule,\n      readOnly: ri!readOnly\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[2],\n    then: if(\n      or(\n        a!isNullOrEmpty(ri!value),\n        and(\n          a!isNotNullOrEmpty(ri!value),\n          tointeger(ri!value) = ri!value\n        )\n      ),\n      /*Integer Field*/\n      #\"SYSTEM_SYSRULES_integerField\"(\n        label: ri!label,\n        labelPosition: \"COLLAPSED\",\n        value: ri!value,\n        required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n        saveInto: ri!fieldSaves,\n        validations: ri!validationRule\n      ),\n      /*Text Field*/\n      #\"SYSTEM_SYSRULES_textField\"(\n        label: ri!label,\n        labelPosition: \"COLLAPSED\",\n        value: ri!value,\n        required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n        validations: {\n          #\"urn:appian:translation-string:v1:13cb1ece-2c44-4007-b5ab-507ee2bde432\",\n          ri!validationRule\n        },\n        saveInto: ri!fieldSaves\n      )\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[3],\n    then: a!localVariables(\n      local!value: rule!SHRD_Scalarize(value: ri!value),\n      if(\n        or(\n          a!isNullOrEmpty(local!value),\n          and(\n            a!isNotNullOrEmpty(local!value),\n            rule!AIA_IsFloatingPoint(value: local!value)\n          )\n        ),\n        /*Floating Point Field*/\n        #\"SYSTEM_SYSRULES_textField\"(\n          label: ri!label,\n          labelPosition: \"COLLAPSED\",\n          value: ri!value,\n          required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n          saveInto: ri!fieldSaves,\n          validations: ri!validationRule\n        ),\n        #\"SYSTEM_SYSRULES_textField\"(\n          label: ri!label,\n          labelPosition: \"COLLAPSED\",\n          value: ri!value,\n          required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n          validations: {\n            #\"urn:appian:translation-string:v1:30718865-502b-45b0-9cf7-282d282e72d9\",\n            ri!validationRule\n          },\n          saveInto: ri!fieldSaves\n        )\n      )\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[4],\n    then: a!localVariables(\n      local!value: rule!AIA_TypeHelper(\n        value: ri!value,\n        field: ri!ModelVersionField\n      ),\n      if(\n        or(\n          a!isNullOrEmpty(ri!value),\n          a!isNotNullOrEmpty(local!value)\n        ),\n        #\"SYSTEM_SYSRULES_dateField\"(\n          label: ri!label,\n          labelPosition: \"COLLAPSED\",\n          value: local!value,\n          required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n          saveInto: ri!fieldSaves,\n          validations: ri!validationRule\n        ),\n        #\"SYSTEM_SYSRULES_textField\"(\n          label: ri!label,\n          labelPosition: \"COLLAPSED\",\n          value: local!value,\n          required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n          validations: {\n            #\"urn:appian:translation-string:v1:32422164-a4d5-4325-9d8f-3f732836fec8\",\n            ri!validationRule\n          },\n          saveInto: ri!fieldSaves\n        )\n      )\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[5],\n    then: a!localVariables(\n      local!value: rule!AIA_TypeHelper(\n        value: ri!value,\n        field: ri!ModelVersionField\n      ),\n      if(\n        or(\n          a!isNullOrEmpty(ri!value),\n          a!isNotNullOrEmpty(local!value)\n        ),\n        #\"SYSTEM_SYSRULES_dateTimeField\"(\n          label: ri!label,\n          labelPosition: \"COLLAPSED\",\n          /*value: gmt(local!value),*/\n          value: local!value,\n          required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n          saveInto: ri!fieldSaves,\n          validations: ri!validationRule\n        ),\n        #\"SYSTEM_SYSRULES_textField\"(\n          label: ri!label,\n          labelPosition: \"COLLAPSED\",\n          value: ri!value,\n          required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n          validations: {\n            #\"urn:appian:translation-string:v1:e46e5209-bed3-4127-a463-71b1870c7610\",\n            ri!validationRule\n          },\n          saveInto: ri!fieldSaves\n        )\n      )\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[6],\n    then: if(\n      or(\n        a!isNullOrEmpty(ri!value),\n        and(\n          a!isNotNullOrEmpty(ri!value),\n          toboolean(ri!value) = ri!value\n        )\n      ),\n      #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n        label: ri!label,\n        labelPosition: \"COLLAPSED\",\n        choiceLabels: {\n          #\"urn:appian:translation-string:v1:a8e63229-3fa1-44df-955c-47051b3111a6\",\n          #\"urn:appian:translation-string:v1:95741ae5-b656-4441-a910-40bf702e9ca7\"\n        },\n        choiceValues: { \"true\", \"false\" },\n        choiceLayout: \"COMPACT\",\n        value: lower(ri!value),\n        required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n        saveInto: ri!fieldSaves,\n        validations: ri!validationRule\n      ),\n      #\"SYSTEM_SYSRULES_textField\"(\n        label: ri!label,\n        labelPosition: \"COLLAPSED\",\n        value: ri!value,\n        required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n        validations: {\n          #\"urn:appian:translation-string:v1:c1993f65-95b9-4554-99f7-188a49d4704a\",\n          ri!validationRule\n        },\n        saveInto: ri!fieldSaves\n      )\n    ),\n    equals: cons!AIA_EXTRACTION_FIELD_TYPES[8],\n    then: #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: ri!label,\n      labelPosition: \"COLLAPSED\",\n      value: ri!value,\n      required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n      saveInto: ri!fieldSaves,\n      validations: ri!validationRule,\n      readOnly: ri!readOnly\n    ),\n    default: #\"SYSTEM_SYSRULES_textField\"(\n      label: ri!label,\n      labelPosition: \"COLLAPSED\",\n      value: ri!value,\n      required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n      saveInto: ri!fieldSaves,\n      validations: ri!validationRule\n    )\n  ),\n  #\"SYSTEM_SYSRULES_textField\"(\n    label: ri!label,\n    labelPosition: \"COLLAPSED\",\n    value: ri!value,\n    required: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required],\n    saveInto: ri!fieldSaves,\n    validations: ri!validationRule\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_26889": {
      "name": "AIA_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AIA_UTIL_Filter_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505670": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505575": {
      "name": "AIA_MTR_MultipleOutputsClassificationModelVersionCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec40-0355-8000-9be4-011c48011c48_64593": {
      "name": "AIA_ExtractionInstance_Sub_ReconcileField",
      "type": "Interface",
      "sail_code": "if(\n  and(\n    a!isNotNullOrEmpty(ri!ModelVersionField),\n    or(ri!showWhen, isnull(ri!showWhen), )\n  ),\n  a!localVariables(\n    local!resultFieldIndex: index(\n      wherecontains(\n        tostring(\n          ri!ModelVersionField[recordType!AIA Extraction Model Version Field.fieldId]\n        ),\n        touniformstring(\n          ri!ExtractionInstanceFields[recordType!AIA Extraction Instance Field.modelVersionFieldId]\n        )\n      ),\n      1,\n      null\n    ),\n    local!aiReview: a!refreshVariable(\n      refreshOnReferencedVarChange: false,\n      value: index(\n        rule!AIA_UTIL_Filter(\n          records: ri!ValidationErrors,\n          fieldValuePairs: {\n            a!map(\n              field: recordType!AIA Instance Validation Error.typeId,\n              value: cons!AIA_VALIDATION_TYPE_ID_AI_REVIEW\n            ),\n            a!map(\n              field: recordType!AIA Instance Validation Error.instanceField.id,\n              value: index(\n                index(\n                  ri!ExtractionInstanceFields,\n                  local!resultFieldIndex,\n                  - 1\n                ),\n                recordType!AIA Extraction Instance Field.id,\n                - 1\n              )\n            )\n          }\n        ),\n        1,\n        null\n      )\n    ),\n    local!confidence: a!refreshVariable(\n      refreshOnReferencedVarChange: false,\n      value: index(\n        rule!AIA_UTIL_Filter(\n          records: ri!ValidationErrors,\n          fieldValuePairs: {\n            a!map(\n              field: recordType!AIA Instance Validation Error.typeId,\n              value: cons!AIA_VALIDATION_TYPE_ID_LOW_CONFIDENCE\n            )\n          }\n        ),\n        1,\n        null\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!resultFieldIndex),\n      if(\n        ri!style = cons!AIA_EXTRACTION_FIELD_STYLES[3],\n        #\"SYSTEM_SYSRULES_textField\"(\n          labelPosition: \"COLLAPSED\",\n          readOnly: true\n        ),\n        {}\n      ),\n      a!localVariables(\n        local!options: rule!AIA_Extraction_GetFieldOptions(ModelVersionField: ri!ModelVersionField),\n        local!label: a!defaultValue(\n          ri!label,\n          ri!ModelVersionField[recordType!AIA Extraction Model Version Field.label],\n          ri!ModelVersionField[recordType!AIA Extraction Model Version Field.key]\n        ),\n        local!value: if(\n          ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull],\n          null,\n          a!defaultValue(\n            ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n            ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue]\n          )\n        ),\n        local!fieldSaves: a!refreshVariable(\n          value: {\n            a!save(\n              ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull],\n              if(\n                and(\n                  a!isNullOrEmpty(save!value),\n                  a!isNotNullOrEmpty(\n                    ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue]\n                  )\n                ),\n                true,\n                null\n              )\n            ),\n            a!save(\n              ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue],\n              a!localVariables(\n                local!saveValue: rule!AIA_FormatValueForDatabase(\n                  value: save!value,\n                  field: ri!ModelVersionField\n                ),\n                if(\n                  or(\n                    a!isNullOrEmpty(local!saveValue),\n                    and(\n                      a!isNotNullOrEmpty(\n                        ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue]\n                      ),\n                      rule!AIA_UTIL_CompareStrings(\n                        string1: local!saveValue,\n                        string2: ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.extractedValue]\n                      )\n                    )\n                  ),\n                  null,\n                  local!saveValue\n                )\n              )\n            )\n          },\n          refreshAlways: true\n        ),\n        local!validationRule: if(\n          a!isNotNullOrEmpty(\n            ri!ModelVersionField[recordType!AIA Extraction Model Version Field.validationRule]\n          ),\n          a!localVariables(\n            local!validationRule: a!refreshVariable(\n              refreshAlways: true,\n              value: getrulereferencebyname(\n                ri!ModelVersionField[recordType!AIA Extraction Model Version Field.validationRule]\n              )\n            ),\n            local!validationRule(value: local!value)\n          ),\n          null\n        ),\n        local!isMultiple: a!defaultValue(\n          value: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.isMultiple],\n          default: false()\n        ),\n        local!isTable: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n        local!reviewingTable: false,\n        local!llmJudgeComponents: a!refreshVariable(\n          value: rule!AIA_AiReviewComponents(\n            aiReview: local!aiReview,\n            isMultiple: local!isMultiple,\n            ExtractionInstanceFields: ri!ExtractionInstanceFields,\n            resultFieldIndex: local!resultFieldIndex,\n            brandingMap: ri!brandingMap,\n            ModelVersionField: ri!ModelVersionField,\n            isTable: local!isTable,\n            reviewingTable: local!reviewingTable,\n            fieldSaves: local!fieldSaves\n          ),\n          refreshAlways: true\n        ),\n        local!confidenceComponents: a!refreshVariable(\n          value: rule!AIA_ConfidenceComponents(\n            confidenceValidation: local!confidence,\n            brandingMap: ri!brandingMap,\n            ExtractionInstanceFields: ri!ExtractionInstanceFields,\n            resultFieldIndex: local!resultFieldIndex,\n            extractionModelVersionField: ri!ModelVersionField\n          ),\n          refreshAlways: true\n        ),\n        {\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            marginBelow: \"NONE\",\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                width: \"MINIMIZE\",\n                item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: {\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: concat(char(9), local!label),\n                      color: ri!brandingMap.Gray4,\n                      style: \"STRONG\"\n                    ),\n                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: { \" *\" },\n                      color: ri!brandingMap.AccentColor,\n                      showWhen: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.required] = true\n                    )\n                  },\n                  marginBelow: \"LESS\",\n\n                )\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                    icon: \"undo\",\n                    caption: \"Undo\",\n                    showWhen: or(\n                      a!isNotNullOrEmpty(\n                        ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideValue]\n                      ),\n                      ri!ExtractionInstanceFields[local!resultFieldIndex][recordType!AIA Extraction Instance Field.overrideNull]\n                    ),\n                    linkStyle: \"STANDALONE\",\n                    color: ri!brandingMap.Orange3,\n                    link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                      saveInto: {\n                        rule!AIA_Extraction_ReviewSaves(\n                          validation: local!aiReview,\n                          type: cons!AIA_VALIDATION_UNDO,\n                          saves: rule!AIA_Extraction_UndoSaves(\n                            ModelVersionField: ri!ModelVersionField,\n                            ExtractionInstanceField: ri!ExtractionInstanceFields[local!resultFieldIndex]\n                          )\n                        )\n                      }\n                    )\n                  )\n                )\n              )\n            },\n            showWhen: a!defaultValue(ri!showLabel, true)\n          ),\n          if(\n            local!isTable,\n            /* Reconcile Field Table */\n            rule!AIA_Extraction_ReconcileTableField(\n              llmJudgeComponents: local!llmJudgeComponents,\n              reviewingTable: local!reviewingTable,\n              ModelVersionField: ri!ModelVersionField,\n              aiReview: local!aiReview,\n              showTarget: ri!showTarget,\n              ExtractionInstanceFields: ri!ExtractionInstanceFields,\n              resultFieldIndex: local!resultFieldIndex,\n              readOnly: ri!readOnly,\n              highlightSaves: ri!highlightSaves,\n              brandingMap: ri!brandingMap,\n              confidenceComponents: local!confidenceComponents\n            ),\n            if(\n              local!isMultiple,\n              rule!AIA_Extraction_ReconcileMultipleField(\n                value: local!value,\n                ExtractionInstanceFields: ri!ExtractionInstanceFields,\n                resultFieldIndex: local!resultFieldIndex,\n                ModelVersionField: ri!ModelVersionField,\n                showTarget: ri!showTarget,\n                options: local!options,\n                validationRule: local!validationRule,\n                label: local!label,\n                readOnly: ri!readOnly,\n                highlightSaves: ri!highlightSaves,\n                brandingMap: ri!brandingMap,\n                showAccuracy: ri!showAccuracy\n              ),\n              rule!AIA_Extraction_ReconcileSingleField(\n                ExtractionInstanceFields: ri!ExtractionInstanceFields,\n                resultFieldIndex: local!resultFieldIndex,\n                selectedBoxId: ri!selectedBoxId,\n                brandingMap: ri!brandingMap,\n                ModelVersionField: ri!ModelVersionField,\n                options: local!options,\n                value: local!value,\n                fieldSaves: local!fieldSaves,\n                validationRule: local!validationRule,\n                label: local!label,\n                readOnly: ri!readOnly,\n                selectedField: ri!selectedField,\n                captureSaves: ri!captureSaves,\n                showTarget: ri!showTarget,\n                highlightSaves: ri!highlightSaves,\n                showAccuracy: ri!showAccuracy\n              )\n            )\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!ModelVersionField[recordType!AIA Extraction Model Version Field.instructions],\n              color: ri!brandingMap.Gray4,\n              size: \"SMALL\",\n              style: \"PLAIN\"\n            ),\n            showWhen: a!isNotNullOrEmpty(\n              ri!ModelVersionField[recordType!AIA Extraction Model Version Field.instructions]\n            )\n          ),\n          if(\n            not(local!isTable),\n            {\n              local!confidenceComponents,\n              local!llmJudgeComponents,\n\n            },\n            {}\n          )\n        }\n      )\n    )\n  ),\n  if(\n    ri!style = cons!AIA_EXTRACTION_FIELD_STYLES[3],\n    #\"SYSTEM_SYSRULES_textField\"(\n      labelPosition: \"COLLAPSED\",\n      readOnly: true\n    ),\n    {}\n  )\n)"
    },
    "_a-0000ee6e-3b90-8000-9bac-011c48011c48_85064": {
      "name": "AIA_Classification_InstanceUuid",
      "type": "Expression Rule",
      "sail_code": "a!defaultValue(\n  ri!ClassificationInstance[recordType!AIA Classification Instance.instanceUuid],\n  cons!AIA_MODEL_TYPE_VALUES[2] & \"-\" & ri!ClassificationInstance[recordType!AIA Classification Instance.id]\n)"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483943": {
      "name": "AIA_MTR_ModelTestSuiteCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_61664": {
      "name": "AIA_Extraction_UndoSaves",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!ModelVersionField[recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n  {\n    a!save(\n      target: ri!ExtractionInstanceField,\n      value: #\"urn:appian:function:v1:a:update\"(\n        data: ri!ExtractionInstanceField,\n        index: {\n          recordType!AIA Extraction Instance Field.overrideValue,\n          recordType!AIA Extraction Instance Field.rows\n        },\n        value: {\n          null,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: 1,\n            expression: reject(\n              fn!isnull,\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!ExtractionInstanceField[recordType!AIA Extraction Instance Field.rows],\n                expression: a!match(\n                  value: fv!item[recordType!AIA Extraction Instance Field Row.overrideValue],\n                  whenTrue: or(\n                    fv!value = cons!AIA_ROW_REMOVED,\n                    fv!value = cons!AIA_ROW_OVERRIDDEN\n                  ),\n                  then: a!localVariables(\n                    local!row: fv!item,\n                    #\"urn:appian:function:v1:a:update\"(\n                      data: local!row,\n                      index: {\n                        recordType!AIA Extraction Instance Field Row.overrideValue,\n                        recordType!AIA Extraction Instance Field Row.cells\n                      },\n                      value: {\n                        null,\n                        #\"SYSTEM_SYSRULES_forEach\"(\n                          items: 1,\n                          expression: #\"SYSTEM_SYSRULES_forEach\"(\n                            items: local!row[recordType!AIA Extraction Instance Field Row.cells],\n                            expression: #\"urn:appian:function:v1:a:update\"(\n                              data: fv!item,\n                              index: {\n                                recordType!AIA Extraction Instance Field Row Cell.overrideNull,\n                                recordType!AIA Extraction Instance Field Row Cell.overrideValue\n                              },\n                              value: {\n                                null,\n                                null\n                              }\n                            )\n                          )\n                        )\n                      }\n                    )\n                  ),\n                  whenTrue: fv!value = cons!AIA_ROW_ADDED,\n                  then: if(\n                    a!isNullOrEmpty(\n                      fv!item[recordType!AIA Extraction Instance Field Row.id]\n                    ),\n                    /* newly added and not saved row */\n                    null,\n                    #\"urn:appian:function:v1:a:update\"(\n                      data: fv!item,\n                      index: recordType!AIA Extraction Instance Field Row.overrideValue,\n                      value: cons!AIA_ROW_DELETED\n                    )\n                  ),\n                  default: fv!item\n                )\n              )\n            )\n          )\n        }\n      )\n    )\n  },\n  {\n    a!save(\n      {\n        ri!ExtractionInstanceField[recordType!AIA Extraction Instance Field.overrideNull],\n        ri!ExtractionInstanceField[recordType!AIA Extraction Instance Field.overrideValue],\n        ri!ExtractionInstanceField[recordType!AIA Extraction Instance Field.overrideBoundingBox]\n      },\n      null\n    )\n  }\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92571": {
      "name": "AIA_MTR_ExtractionInstanceAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec1e-9975-8000-9bd6-011c48011c48_1381838": {
      "name": "AIA_Extraction_GetFieldsForModelVersionId",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Model Version,\n  identifier: ri!modelVersionId,\n  fields: a!flatten(\n    {\n      recordType!AIA Extraction Model Version.modelVersionId,\n  \n      /* Fields */\n      recordType!AIA Extraction Model Version.fields.sectionId,\n      recordType!AIA Extraction Model Version.fields.section,\n      recordType!AIA Extraction Model Version.fields.order,\n      recordType!AIA Extraction Model Version.fields.key,\n      recordType!AIA Extraction Model Version.fields.label,\n      recordType!AIA Extraction Model Version.fields.type,\n      recordType!AIA Extraction Model Version.fields.isMultiple,\n      recordType!AIA Extraction Model Version.fields.description,\n      recordType!AIA Extraction Model Version.fields.instructions,\n      recordType!AIA Extraction Model Version.fields.extractionType,\n      recordType!AIA Extraction Model Version.fields.optionRule,\n      recordType!AIA Extraction Model Version.fields.validationRule,\n      recordType!AIA Extraction Model Version.fields.extractionRule,\n      recordType!AIA Extraction Model Version.fields.postProcessRule,\n      recordType!AIA Extraction Model Version.fields.required,\n      recordType!AIA Extraction Model Version.fields.useVision,\n      recordType!AIA Extraction Model Version.fields.isHidden,\n      recordType!AIA Extraction Model Version.fields.isNotTracked,\n      recordType!AIA Extraction Model Version.fields.useAiReview,\n  \n      /* Fields > Column */\n      recordType!AIA Extraction Model Version.fields.columns.fieldId,\n      recordType!AIA Extraction Model Version.fields.columns.label,\n      recordType!AIA Extraction Model Version.fields.columns.key,\n      recordType!AIA Extraction Model Version.fields.columns.optionRule,\n      recordType!AIA Extraction Model Version.fields.columns.validationRule,\n      recordType!AIA Extraction Model Version.fields.columns.postProcessRule,\n      recordType!AIA Extraction Model Version.fields.columns.isHidden,\n      recordType!AIA Extraction Model Version.fields.columns.isNotTracked,\n      recordType!AIA Extraction Model Version.fields.columns.type,\n      recordType!AIA Extraction Model Version.fields.columns.extractionType,\n      recordType!AIA Extraction Model Version.fields.columns.required,\n      recordType!AIA Extraction Model Version.fields.columns.description,\n      recordType!AIA Extraction Model Version.fields.columns.instructions,\n      recordType!AIA Extraction Model Version.fields.columns.accuracy,\n      a!defaultValue(ri!additionalFields, {})\n    },\n  ),\n  relatedRecordData: {\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Extraction Model Version.fields,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Extraction Model Version Field.order,\n        ascending: true\n      )\n    ),\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Extraction Model Version.fields,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Extraction Model Version Field.order,\n        ascending: true\n      )\n    )\n  }\n)[recordType!AIA Extraction Model Version.fields]"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_203500": {
      "name": "AIA_EXTRACTION_INSTANCE_FIELDS",
      "type": "Expression Rule",
      "sail_code": "{\n  /* Extraction Instance */\n  recordType!AIA Extraction Instance.modelVersionId,\n  recordType!AIA Extraction Instance.documentId,\n  recordType!AIA Extraction Instance.statusId,\n  recordType!AIA Extraction Instance.hasBoundingBoxes,\n  recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n  recordType!AIA Extraction Instance.modifiedBy,\n  recordType!AIA Extraction Instance.modifiedOn,\n  /* Temporary */\n  recordType!AIA Extraction Instance.pageCount,\n  recordType!AIA Extraction Instance.documentFolderId,\n  /* Extraction Fields */\n  recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n  recordType!AIA Extraction Instance.fields.extractedValue,\n  recordType!AIA Extraction Instance.fields.overrideValue,\n  recordType!AIA Extraction Instance.fields.overrideNull,\n  recordType!AIA Extraction Instance.fields.boundingBox,\n  recordType!AIA Extraction Instance.fields.overrideBoundingBox,\n  recordType!AIA Extraction Instance.fields.confidence,\n  recordType!AIA Extraction Instance.fields.totalCells,\n  /* Extraction Fields > Rows */\n  recordType!AIA Extraction Instance.fields.rows.overrideValue,\n  recordType!AIA Extraction Instance.fields.rows.boundingBox,\n  /* Extraction Fields > Rows > Cells */\n  recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n  recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n  recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n  recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n  recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n\n  /* Extraction Fields > Model Version Field */  \n  recordType!AIA Extraction Instance.fields.modelVersionField.key,\n  recordType!AIA Extraction Instance.fields.modelVersionField.isNotTracked,\n  \n  /* Extraction Fields > Model Version Field > Columns */  \n  recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n  recordType!AIA Extraction Instance.fields.modelVersionField.columns.isNotTracked,\n\n  /* Extraction Fields > Rows > Cell > Column */  \n  #\"urn:appian:record-relationship:v1:64322398-e457-4695-87d5-09794164cf77/8d64a7fc-95d1-4c81-b1d8-f583dafbf127/dbb0701f-9e25-4d41-accc-959fc64a808d/69a05e41-75be-4506-ae42-ae78ac0d6b9a/9537b867-3cf8-4a1b-b019-fc98a6c4b090\",\n  \n  /* Extraction Fields > Model Version */  \n  recordType!AIA Extraction Instance.modelVersion,\n}"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40909": {
      "name": "AIA_ExtractJson",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!firstTry: rule!AIA_ExtractJsonInner(\n    json: ri!json\n  ),\n  local!result: if(\n    a!isNotNullOrEmpty(local!firstTry),\n    local!firstTry,\n    a!localVariables(\n      local!secondTry: rule!AIA_ExtractJsonInner(\n        json: index(split(ri!json, \"Appian's private AI\"), 1, null),\n      ),\n      if(\n        a!isNotNullOrEmpty(local!secondTry),\n        local!secondTry,\n        a!localVariables(\n          local!thirdTry: rule!AIA_ExtractJsonInner(\n            json: index(split(ri!json, \"Appian's private AI\"), 2, null),\n          ),\n          if(\n            a!isNotNullOrEmpty(local!thirdTry),\n            local!thirdTry,\n            a!localVariables(\n              local!forthTry: rule!AIA_ExtractJsonInner(\n                json: index(split(ri!json, \"<output>\"), 1, null),\n              ),\n              if(\n                a!isNotNullOrEmpty(local!forthTry),\n                local!forthTry,\n                a!localVariables(\n                  local!fifthTry: rule!AIA_ExtractJsonInner(\n                    json: index(split(ri!json, \"</entities>\"), 1, null),\n                  ),\n                  local!fifthTry\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  ),\n  local!finalResult: if(\n    a!isNullOrEmpty(local!result),\n    null,\n    if(\n      a!defaultValue(ri!returnList, true),\n      local!result,\n      if(\n        rule!SHRD_IsList(local!result),\n        null,\n        local!result\n      )\n    )\n  ),\n  /* Handle scenario where the result comes back as properties of a $schema */\n  if(\n    or(\n      a!defaultValue(ri!returnList, true),\n      a!isNullOrEmpty(local!finalResult),\n      not(contains(\n        a!keys(local!finalResult),\n        \"$schema\"\n      ))\n    ),\n    local!finalResult,\n    local!finalResult.properties\n  )\n)"
    },
    "_a-0000edb4-d4ac-8000-9bae-011c48011c48_104433": {
      "name": "AIA_UTIL_CompareStrings",
      "type": "Expression Rule",
      "sail_code": "exact(ri!string1, ri!string2)"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_268731": {
      "name": "AIA_Extraction_GetValidationsForModelVersion",
      "type": "Expression Rule",
      "sail_code": "a!flatten(\n  {\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Extraction Model Version Validation Rule,\n      filters: {\n        #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!AIA Extraction Model Version Validation Rule.modelVersionId,\n          operator: \"=\",\n          value: ri!instance[recordType!AIA Extraction Instance.modelVersionId]\n        )\n      },\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(1, 100)\n    ).data,\n    a!localVariables(\n      local!rules: reject(\n        fn!isnull,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          rule!AIA_RULE_ENUM_RuleOperations(),\n          if(\n            and(\n              /* Rule defaults to true, or defaultField is true */\n              or(\n                a!defaultValue(fv!item.isEnabled, false),\n                and(\n                  a!isNotNullOrEmpty(fv!item.isEnabledField),\n                  a!defaultValue(\n                    value: index(ri!instance, fv!item.isEnabledField, false),\n                    default: false\n                  )\n                )\n              ),\n              /* Either not a reconciliation or if reconciliation, rule is configured to run post reconciliation */\n              or(\n                not(a!defaultValue(ri!isReconciliation, false)),\n                a!defaultValue(fv!item.postReconciliation, false)\n              )\n            ),\n            fv!item,\n            null\n          )\n        )\n      ),\n      #\"SYSTEM_SYSRULES_forEach\"(\n        local!rules,\n        recordType!AIA Extraction Model Version Validation Rule(\n          recordType!AIA Extraction Model Version Validation Rule.validations: rule!AIA_ToJson(data: a!map(ruleOperationId: fv!item.id))\n        )\n      )\n    )\n  }\n)"
    },
    "_a-0000edd9-a94f-8000-9bb2-011c48011c48_135030": {
      "name": "AIA_ExtractionInstance_RecordAction_ReconcileHeader",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_columnsLayout\"(\n          columns: {\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_headingField\"(\n                  text: #\"urn:appian:translation-string:v1:e4b23180-d789-45b9-b42f-46b4008aada6\",\n                  fontWeight: \"SEMI_BOLD\",\n                  marginBelow: \"NONE\",\n                  marginAbove: \"STANDARD\"\n                )\n              },\n              width: \"WIDE_PLUS\"\n            ),\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              width: if(\n                #\"SYSTEM_SYSRULES_isPageWidth\"({ \"DESKTOP_WIDE\" }),\n                \"WIDE_PLUS\",\n                if(\n                  #\"SYSTEM_SYSRULES_isPageWidth\"({ \"DESKTOP_NARROW\" }),\n                  \"MEDIUM\",\n                  \"MEDIUM_PLUS\"\n                )\n              )\n            ),\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_cardLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_columnsLayout\"(\n                      columns: {\n                        #\"SYSTEM_SYSRULES_columnLayout\"(\n                          contents: {\n                            #\"SYSTEM_SYSRULES_cardLayout\"(\n                              contents: {\n                                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                  label: \"\",\n                                  labelPosition: \"COLLAPSED\",\n                                  value: {\n                                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                      text: #\"urn:appian:translation-string:v1:c45e9f8d-6be6-4710-a893-3cf449fae2b7\",\n                                      style: if(\n                                        ri!isLandscapeLayout = false(),\n                                        \"STRONG\",\n                                        \"PLAIN\"\n                                      ),\n                                      color: if(\n                                        ri!isLandscapeLayout = false(),\n                                        ri!brandingMap.White,\n                                        ri!brandingMap.Gray4\n                                      ),\n\n                                    )\n                                  },\n                                  align: \"CENTER\"\n                                )\n                              },\n                              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                saveInto: {\n                                  a!save(ri!isLandscapeLayout, false()),\n                                  if(\n                                    a!isNullOrEmpty(ri!additionalSaveInto),\n                                    {},\n                                    ri!additionalSaveInto\n                                  )\n                                }\n                              ),\n                              style: if(\n                                ri!isLandscapeLayout = false(),\n                                ri!brandingMap.AccentColor,\n                                ri!brandingMap.DefaultPageBackground\n                              ),\n                              showBorder: false,\n                              shape: \"SEMI_ROUNDED\"\n                            )\n                          },\n                          width: \"WIDE_PLUS\"\n                        ),\n                        #\"SYSTEM_SYSRULES_columnLayout\"(\n                          contents: {\n                            #\"SYSTEM_SYSRULES_cardLayout\"(\n                              contents: {\n                                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                  label: \"\",\n                                  labelPosition: \"COLLAPSED\",\n                                  value: {\n                                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                      text: #\"urn:appian:translation-string:v1:9afcefcd-9325-4efd-a63b-ce3a70e42cce\",\n                                      style: if(\n                                        ri!isLandscapeLayout = true(),\n                                        \"STRONG\",\n                                        \"PLAIN\"\n                                      ),\n                                      color: if(\n                                        ri!isLandscapeLayout = true(),\n                                        ri!brandingMap.White,\n                                        ri!brandingMap.Gray4\n                                      ),\n\n                                    )\n                                  },\n                                  align: \"CENTER\"\n                                )\n                              },\n                              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                saveInto: {\n                                  a!save(ri!isLandscapeLayout, true()),\n                                  if(\n                                    a!isNullOrEmpty(ri!additionalSaveInto),\n                                    {},\n                                    ri!additionalSaveInto\n                                  )\n                                }\n                              ),\n                              shape: \"SEMI_ROUNDED\",\n                              style: if(\n                                ri!isLandscapeLayout = true(),\n                                ri!brandingMap.AccentColor,\n                                ri!brandingMap.DefaultPageBackground\n                              ),\n                              showBorder: false\n                            )\n                          },\n                          width: \"WIDE\"\n                        )\n                      },\n                      spacing: \"DENSE\"\n                    ),\n                  },\n                  padding: \"EVEN_LESS\",\n                  shape: \"SEMI_ROUNDED\",\n                  style: ri!brandingMap.DefaultPageBackground,\n                  marginAbove: \"STANDARD\"\n                )\n              },\n              width: \"MEDIUM\"\n            )\n          },\n          alignVertical: \"MIDDLE\"\n        )\n      },\n      showBorder: false,\n      padding: \"LESS\"\n    ),\n    #\"SYSTEM_SYSRULES_horizontalLine\"(marginAbove: \"NONE\", marginBelow: \"NONE\")\n  },\n  height: \"AUTO\",\n  padding: \"LESS\",\n  marginBelow: \"NONE\",\n  showBorder: false\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92564": {
      "name": "AIA_MTR_ExtractionInstanceFieldAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eea0-7c7f-8000-9bce-011c48011c48_121497": {
      "name": "AIA_RULE_Operation_LowConfidence",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldsBelowConfidenceValidationMaps: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!parameters.Instance[recordType!AIA Extraction Instance.fields],\n      expression: if(\n        rule!AIA_UTIL_Filter(\n          records: ri!parameters.modelVersionFields,\n          field: recordType!AIA Extraction Model Version Field.fieldId,\n          value: fv!item[recordType!AIA Extraction Instance Field.modelVersionFieldId]\n        )[1][recordType!AIA Extraction Model Version Field.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n        /*If the field is a table, first check to see if it has been modified in any way, including overriding extracted cells, adding rows, or deleting any rows.\n        If it has, then a new confidence validation shouldn't be generated, as these conditions imply a user has already reconciled the table.*/\n        if(\n          or(\n            and(\n              a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overriddenCells]),\n              fv!item[recordType!AIA Extraction Instance Field.overriddenCells] > 0\n            ),\n            and(\n              a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.addedCells]),\n              fv!item[recordType!AIA Extraction Instance Field.addedCells] > 0\n            ),\n            and(\n              a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.removedCells]),\n              fv!item[recordType!AIA Extraction Instance Field.removedCells] > 0\n            )\n          ),\n          {},\n          /*If the table hasn't been modified/reconciled before, then additionally loop over all extracted rows and cells to see if any fall below confidence*/\n          a!localVariables(\n            local!cellsBelowConfidenceValidationMaps: a!flatten(\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: fv!item[recordType!AIA Extraction Instance Field.rows],\n                expression: a!flatten(\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    items: fv!item[recordType!AIA Extraction Instance Field Row.cells],\n                    expression: if(\n                      and(\n                        a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field Row Cell.extractedValue]),\n                        a!defaultValue(fv!item[recordType!AIA Extraction Instance Field Row Cell.confidence], 100) < ri!parameters.Instance[recordType!AIA Extraction Instance.modelVersion.confidenceThreshold]\n                      ),\n                      a!map(\n                        fieldRowCellId: fv!item[recordType!AIA Extraction Instance Field Row Cell.id],\n                        confidence: fv!item[recordType!AIA Extraction Instance Field Row Cell.confidence]\n                      ),\n                      {}\n                    )\n                  )\n                )\n              )\n            ),\n            if(\n              a!isNotNullOrEmpty(local!cellsBelowConfidenceValidationMaps),\n              a!map(\n                fieldId: fv!item[recordType!AIA Extraction Instance Field.id],\n                confidence: null,\n                fieldRowCells: local!cellsBelowConfidenceValidationMaps\n              ),\n              {}\n            )\n          )\n        ),\n        /*Otherwise (the field is not a table) we can simply check the confidence of the field*/\n        if(\n          and(\n            a!isNotNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.extractedValue]),\n            a!isNullOrEmpty(fv!item[recordType!AIA Extraction Instance Field.overrideValue]),\n            a!defaultValue(fv!item[recordType!AIA Extraction Instance Field.confidence], 100) < ri!parameters.Instance[recordType!AIA Extraction Instance.modelVersion.confidenceThreshold]\n          ),\n          a!map(\n            fieldId: fv!item[recordType!AIA Extraction Instance Field.id],\n            confidence: fv!item[recordType!AIA Extraction Instance Field.confidence]\n          ),\n          {}\n        )\n      )\n    )\n  ),\n  if(\n    a!isNullOrEmpty(local!fieldsBelowConfidenceValidationMaps),\n    a!map(\n      result: true\n    ),\n    a!map(\n      result: false,\n      typeId: cons!AIA_VALIDATION_TYPE_ID_LOW_CONFIDENCE,\n      severity: cons!AIA_SEVERITY_MEDIUM,\n      message: #\"SYSTEM_SYSRULES_toJson_v1\"(\n        a!map(\n          fields: local!fieldsBelowConfidenceValidationMaps,\n          threshold: ri!parameters.Instance[recordType!AIA Extraction Instance.modelVersion.confidenceThreshold]\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_126062": {
      "name": "AIA_ENUM_ExtractionFieldTypes",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[1],\n    width: \"MEDIUM\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[8],\n    width: \"MEDIUM_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[2],\n    width: \"NARROW_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[3],\n    width: \"NARROW_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[4],\n    width: \"NARROW_PLUS\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[5],\n    width: \"MEDIUM\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[6],\n    width: \"NARROW\"\n  ),\n  a!map(\n    label: cons!AIA_EXTRACTION_FIELD_TYPES[7],\n  ) \n}"
    }
  }
}