{
  "_metadata": {
    "bundle_id": "AIA_Extraction_Instance_-_urnappiantranslation-stringv1b9c0af27-02f2-4105-a2d8-e"
  },
  "objects": {
    "_a-0000ec54-bbf4-8000-9be8-011c48011c48_111680": {
      "name": "AIA_Extraction_TestReconcilliation",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  ri!baselineInstanceFields,\n  a!localVariables(\n    local!matchingNewInstanceField: displayvalue(\n      fv!item[recordType!AIA Extraction Instance Field.modelVersionField.key],\n      ri!newInstanceFields[recordType!AIA Extraction Instance Field.modelVersionField.key],\n      ri!newInstanceFields,\n      null\n    ),\n    local!oldValue: if(\n      fv!item[recordType!AIA Extraction Instance Field.overrideNull],\n      \"\",\n      a!defaultValue(\n        fv!item[recordType!AIA Extraction Instance Field.overrideValue],\n        fv!item[recordType!AIA Extraction Instance Field.extractedValue]\n      )\n    ),\n    local!needOverride: or(\n      trim(\n        lower(\n          local!matchingNewInstanceField[recordType!AIA Extraction Instance Field.extractedValue]\n        )\n      ) <> trim(lower(local!oldValue)),\n      fv!item[recordType!AIA Extraction Instance Field.modelVersionField.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE\n    ),\n    local!isTable: fv!item[recordType!AIA Extraction Instance Field.modelVersionField.type] = cons!AIA_EXTRACTION_FIELD_TYPE_TABLE,\n    if(\n      local!needOverride,\n      if(\n        local!isTable,\n        a!localVariables(\n          local!baselineField: fv!item,\n          local!extractedRows: local!matchingNewInstanceField[recordType!AIA Extraction Instance Field.rows],\n          local!baselineRows: rule!AIA_UTIL_Filter(\n            records: fv!item[recordType!AIA Extraction Instance Field.rows],\n            field: recordType!AIA Extraction Instance Field Row.overrideValue,\n            value: cons!AIA_ROW_REMOVED,\n            filterType: \"REJECT\"\n          ),\n          local!rows: if(\n            a!isNullOrEmpty(local!baselineRows),\n            /* If the baseline rows are empty, update all extracted rows as REMOVED */\n            #\"SYSTEM_SYSRULES_forEach\"(\n              local!extractedRows,\n              #\"urn:appian:function:v1:a:update\"(\n                fv!item,\n                recordType!AIA Extraction Instance Field Row.overrideValue,\n                cons!AIA_ROW_REMOVED\n              )\n            ),\n            /* For each of the extracted rows:\n                - If all cells match the baseline, leave it as is\n                - For each cell that doesn't match base, override it\n                - If the row doesn't exist in baseline, remove it\n                - If there are more rows in baseline, add them */\n            a!flatten(\n              {\n                #\"SYSTEM_SYSRULES_forEach\"(\n                  items: local!extractedRows,\n                  expression: a!localVariables(\n                    local!extractedRow: fv!item,\n                    local!baselineRow: index(local!baselineRows, fv!index, null),\n                    if(\n                      a!isNullOrEmpty(local!baselineRow),\n                      #\"urn:appian:function:v1:a:update\"(\n                        local!extractedRow,\n                        recordType!AIA Extraction Instance Field Row.overrideValue,\n                        cons!AIA_ROW_REMOVED\n                      ),\n                      a!localVariables(\n                        local!cells: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: local!extractedRow[recordType!AIA Extraction Instance Field Row.cells],\n                          expression: a!localVariables(\n                            local!extractedCell: fv!item,\n                            local!baselineCell: local!baselineRow[recordType!AIA Extraction Instance Field Row.cells][fv!index],\n                            local!reconciledValue: a!match(\n                              value: true,\n                              equals: or(\n                                local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.overrideNull],\n                                and(\n                                  a!isNullOrEmpty(\n                                    local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                                  ),\n                                  a!isNullOrEmpty(\n                                    local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.overrideValue]\n                                  )\n                                )\n                              ),\n                              then: null,\n                              equals: and(\n                                a!isNotNullOrEmpty(\n                                  local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                                ),\n                                a!isNullOrEmpty(\n                                  local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.overrideValue]\n                                )\n                              ),\n                              then: local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.extractedValue],\n                              default: local!baselineCell[recordType!AIA Extraction Instance Field Row Cell.overrideValue]\n                            ),\n                            a!match(\n                              value: true,\n                              equals: local!extractedCell[recordType!AIA Extraction Instance Field Row Cell.extractedValue] = local!reconciledValue,\n                              then: local!extractedCell,\n                              equals: and(\n                                a!isNotNullOrEmpty(\n                                  local!extractedCell[recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                                ),\n                                a!isNullOrEmpty(local!reconciledValue)\n                              ),\n                              then: #\"urn:appian:function:v1:a:update\"(\n                                local!extractedCell,\n                                recordType!AIA Extraction Instance Field Row Cell.overrideNull,\n                                true\n                              ),\n                              default: #\"urn:appian:function:v1:a:update\"(\n                                local!extractedCell,\n                                recordType!AIA Extraction Instance Field Row Cell.overrideValue,\n                                local!reconciledValue\n                              )\n                            )\n                          )\n                        ),\n                        #\"urn:appian:function:v1:a:update\"(\n                          #\"urn:appian:function:v1:a:update\"(\n                            local!extractedRow,\n                            recordType!AIA Extraction Instance Field Row.cells,\n                            local!cells\n                          ),\n                          recordType!AIA Extraction Instance Field Row.overrideValue,\n                          if(\n                            a!isNotNullOrEmpty(\n                              reject(\n                                fn!isnull,\n                                a!flatten(\n                                  {\n                                    local!cells[recordType!AIA Extraction Instance Field Row Cell.overrideNull],\n                                    local!cells[recordType!AIA Extraction Instance Field Row Cell.overrideValue]\n                                  }\n                                )\n                              )\n                            ),\n                            cons!AIA_ROW_OVERRIDDEN,\n                            null\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                a!localVariables(\n                  /* we need to grab the new model version's field ids here */\n                  local!fieldRowCellModelVersionFieldIds: if(\n                    a!isNotNullOrEmpty(local!extractedRows),\n                    local!matchingNewInstanceField[recordType!AIA Extraction Instance Field.modelVersionField.columns.fieldId],\n                    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n                      recordType: recordType!AIA Extraction Model Version Field,\n                      filters: {\n                        #\"SYSTEM_SYSRULES_queryFilter\"(\n                          field: recordType!AIA Extraction Model Version Field.key,\n                          operator: \"=\",\n                          value: local!baselineField[recordType!AIA Extraction Instance Field.modelVersionField.key]\n                        ),\n                        #\"SYSTEM_SYSRULES_queryFilter\"(\n                          field: recordType!AIA Extraction Model Version Field.modelVersionId,\n                          operator: \"=\",\n                          value: local!matchingNewInstanceField[recordType!AIA Extraction Instance Field.extractionInstance.modelVersionId]\n                        )\n                      },\n                      fields: {\n                        recordType!AIA Extraction Model Version Field.columns.fieldId\n                      },\n                      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 5000)\n                    ).data[1][recordType!AIA Extraction Model Version Field.columns.fieldId]\n                  ),\n                  if(\n                    length(a!defaultValue(local!baselineRows, {})) > length(a!defaultValue(local!extractedRows, {})),\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: ldrop(\n                        local!baselineRows,\n                        length(a!defaultValue(local!extractedRows, {}))\n                      ),\n                      expression: recordType!AIA Extraction Instance Field Row(\n                        recordType!AIA Extraction Instance Field Row.overrideValue: cons!AIA_ROW_ADDED,\n                        recordType!AIA Extraction Instance Field Row.cells: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: fv!item[recordType!AIA Extraction Instance Field Row.cells],\n                          expression: recordType!AIA Extraction Instance Field Row Cell(\n                            recordType!AIA Extraction Instance Field Row Cell.modelVersionFieldId: local!fieldRowCellModelVersionFieldIds[fv!index],\n                            recordType!AIA Extraction Instance Field Row Cell.overrideValue: if(\n                              fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideNull],\n                              null,\n                              if(\n                                a!isNotNullOrEmpty(\n                                  fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideValue]\n                                ),\n                                fv!item[recordType!AIA Extraction Instance Field Row Cell.overrideValue],\n                                fv!item[recordType!AIA Extraction Instance Field Row Cell.extractedValue]\n                              )\n                            )\n                          )\n                        )\n                      )\n                    ),\n                    {}\n                  )\n                )\n              }\n            )\n          ),\n          #\"urn:appian:function:v1:a:update\"(\n            #\"urn:appian:function:v1:a:update\"(\n              local!matchingNewInstanceField,\n              recordType!AIA Extraction Instance Field.rows,\n              local!rows\n            ),\n            recordType!AIA Extraction Instance Field.overrideValue,\n            if(\n              a!isNotNullOrEmpty(\n                reject(\n                  fn!isnull,\n                  local!rows[recordType!AIA Extraction Instance Field Row.overrideValue]\n                )\n              ),\n              cons!AIA_TABLE_UPDATED,\n              null\n            )\n          )\n        ),\n        a!localVariables(\n          local!extractedField: local!matchingNewInstanceField,\n          local!baselineField: fv!item,\n          local!reconciledValue: a!match(\n            value: true,\n            equals: or(\n              local!baselineField[recordType!AIA Extraction Instance Field.overrideNull],\n              and(\n                a!isNullOrEmpty(\n                  local!baselineField[recordType!AIA Extraction Instance Field.extractedValue]\n                ),\n                a!isNullOrEmpty(\n                  local!baselineField[recordType!AIA Extraction Instance Field.overrideValue]\n                )\n              )\n            ),\n            then: null,\n            equals: and(\n              a!isNotNullOrEmpty(\n                local!baselineField[recordType!AIA Extraction Instance Field.extractedValue]\n              ),\n              a!isNullOrEmpty(\n                local!baselineField[recordType!AIA Extraction Instance Field.overrideValue]\n              )\n            ),\n            then: local!baselineField[recordType!AIA Extraction Instance Field.extractedValue],\n            default: local!baselineField[recordType!AIA Extraction Instance Field.overrideValue]\n          ),\n          a!match(\n            value: true,\n            equals: local!extractedField[recordType!AIA Extraction Instance Field.extractedValue] = local!reconciledValue,\n            then: local!extractedField,\n            equals: and(\n              a!isNotNullOrEmpty(\n                local!extractedField[recordType!AIA Extraction Instance Field.extractedValue]\n              ),\n              a!isNullOrEmpty(local!reconciledValue)\n            ),\n            then: #\"urn:appian:function:v1:a:update\"(\n              local!extractedField,\n              recordType!AIA Extraction Instance Field.overrideNull,\n              true\n            ),\n            default: #\"urn:appian:function:v1:a:update\"(\n              local!extractedField,\n              recordType!AIA Extraction Instance Field.overrideValue,\n              local!reconciledValue\n            )\n          )\n        )\n      ),\n      local!matchingNewInstanceField\n    )\n  )\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_52298": {
      "name": "AIA_Extraction_TestInstancesForInstanceFilters",
      "type": "Expression Rule",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_queryFilter\"(\n    field: recordType!AIA Extraction Instance.testInstance,\n    operator: \"=\",\n    value: true\n  ),\n  #\"SYSTEM_SYSRULES_queryFilter\"(\n    field: recordType!AIA Extraction Instance.modelVersion.modelId,\n    operator: \"=\",\n    value: ri!ExtractionInstance[recordType!AIA Extraction Instance.modelVersion.modelId]\n  ),\n  #\"SYSTEM_SYSRULES_queryFilter\"(\n    field: recordType!AIA Extraction Instance.documentId,\n    operator: \"=\",\n    value: ri!ExtractionInstance[recordType!AIA Extraction Instance.documentId]\n  ),\n  #\"SYSTEM_SYSRULES_queryFilter\"(\n    field: recordType!AIA Extraction Instance.id,\n    operator: \"<>\",\n    value: ri!ExtractionInstance[recordType!AIA Extraction Instance.id]\n  )\n}"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_26889": {
      "name": "AIA_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AIA_UTIL_Filter_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  )\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_199422": {
      "name": "AIA_Test_GetLatestExtractionInstanceWithFields",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.inputDocumentId,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion.confidenceThreshold,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion,\n  }\n)"
    },
    "_a-0000ec8b-a448-8000-9ba4-011c48011c48_16046": {
      "name": "AIA_ExtractionInstance_RecordAction_ReconcileWithTestCase",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_formLayout_v1\"(\n  skipAutoFocus: true(),\n  label: #\"urn:appian:translation-string:v1:b9c0af27-02f2-4105-a2d8-eca5528a9de0\",\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n              data: #\"SYSTEM_SYSRULES_recordData\"(\n                recordType: recordType!AIA Extraction Instance,\n                filters: rule!AIA_Extraction_TestInstancesForInstanceFilters(\n                  ExtractionInstance: ri!ExtractionInstance\n                )\n              ),\n              choiceLabels: recordType!AIA Extraction Instance.title,\n              choiceValues: recordType!AIA Extraction Instance.id,\n              label: #\"urn:appian:translation-string:v1:21705970-1db4-4bc0-9664-f32b86194327\",\n              placeholder: #\"urn:appian:translation-string:v1:84b16402-2ec7-4adb-bc77-3088fdc2e82d\",\n              value: ri!baselineExtractionInstanceId,\n              saveInto: ri!baselineExtractionInstanceId,\n              required: true()\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n      }\n    )\n  },\n  buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n    primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n      label: #\"urn:appian:translation-string:v1:8ef9bee3-c95f-49c6-a970-a7965a19f815\",\n      submit: true,\n      style: \"SOLID\",\n      saveInto: {\n        a!save(\n          ri!ExtractionInstance[recordType!AIA Extraction Instance.modifiedBy],\n          loggedInUser()\n        ),\n        a!save(\n          ri!ExtractionInstance[recordType!AIA Extraction Instance.modifiedOn],\n          now()\n        )\n      }\n    ),\n    secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n      label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n      saveInto: a!save(ri!cancel, true),\n      submit: true,\n      validate: false\n    )\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_87488": {
      "name": "AIA_Extraction_GetAllFieldsForInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier_v1\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!instanceId,\n  fields: {\n    recordType!AIA Extraction Instance.fields.extractedValue,\n    recordType!AIA Extraction Instance.fields.overrideValue,\n    recordType!AIA Extraction Instance.fields.overrideNull,\n    recordType!AIA Extraction Instance.fields,\n    recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n    recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n    recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n    recordType!AIA Extraction Instance.fields.modelVersionField.key,\n    recordType!AIA Extraction Instance.fields.modelVersionField.type,\n    recordType!AIA Extraction Instance.fields.extractionInstance.documentId,\n    recordType!AIA Extraction Instance.fields.extractionInstance.modelVersionId\n  }\n)[recordType!AIA Extraction Instance.fields]"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_50972": {
      "name": "AIA_Extraction_IsProcessed",
      "type": "Expression Rule",
      "sail_code": "contains(\n  {\n    cons!AIA_INSTANCE_STATUS_EXTRACTED,\n    cons!AIA_INSTANCE_STATUS_RECONCILED_MANUALLY,\n    cons!AIA_INSTANCE_STATUS_EXTRACTED_WITH_ERRORS,\n    cons!AIA_INSTANCE_STATUS_RECONCILED_AUTOMATICALLY,\n    \n  },\n  ri!ExtractionInstance[recordType!AIA Extraction Instance.statusId]\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_203500": {
      "name": "AIA_EXTRACTION_INSTANCE_FIELDS",
      "type": "Expression Rule",
      "sail_code": "{\n  /* Extraction Instance */\n  recordType!AIA Extraction Instance.modelVersionId,\n  recordType!AIA Extraction Instance.documentId,\n  recordType!AIA Extraction Instance.statusId,\n  recordType!AIA Extraction Instance.hasBoundingBoxes,\n  recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n  recordType!AIA Extraction Instance.modifiedBy,\n  recordType!AIA Extraction Instance.modifiedOn,\n  /* Temporary */\n  recordType!AIA Extraction Instance.pageCount,\n  recordType!AIA Extraction Instance.documentFolderId,\n  /* Extraction Fields */\n  recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n  recordType!AIA Extraction Instance.fields.extractedValue,\n  recordType!AIA Extraction Instance.fields.overrideValue,\n  recordType!AIA Extraction Instance.fields.overrideNull,\n  recordType!AIA Extraction Instance.fields.boundingBox,\n  recordType!AIA Extraction Instance.fields.overrideBoundingBox,\n  recordType!AIA Extraction Instance.fields.confidence,\n  recordType!AIA Extraction Instance.fields.totalCells,\n  /* Extraction Fields > Rows */\n  recordType!AIA Extraction Instance.fields.rows.overrideValue,\n  recordType!AIA Extraction Instance.fields.rows.boundingBox,\n  /* Extraction Fields > Rows > Cells */\n  recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n  recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n  recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n  recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n  recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n\n  /* Extraction Fields > Model Version Field */  \n  recordType!AIA Extraction Instance.fields.modelVersionField.key,\n  recordType!AIA Extraction Instance.fields.modelVersionField.isNotTracked,\n  \n  /* Extraction Fields > Model Version Field > Columns */  \n  recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n  recordType!AIA Extraction Instance.fields.modelVersionField.columns.isNotTracked,\n\n  /* Extraction Fields > Rows > Cell > Column */  \n  #\"urn:appian:record-relationship:v1:64322398-e457-4695-87d5-09794164cf77/8d64a7fc-95d1-4c81-b1d8-f583dafbf127/dbb0701f-9e25-4d41-accc-959fc64a808d/69a05e41-75be-4506-ae42-ae78ac0d6b9a/9537b867-3cf8-4a1b-b019-fc98a6c4b090\",\n  \n  /* Extraction Fields > Model Version */  \n  recordType!AIA Extraction Instance.modelVersion,\n}"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40839": {
      "name": "AIA_Test_GetLatestExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v3\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.instanceUuid,\n    recordType!AIA Extraction Instance.modelVersion.versionId,\n    recordType!AIA Extraction Instance.modelVersion.modelId,\n    recordType!AIA Extraction Instance.modelVersion.uuid,\n    recordType!AIA Extraction Instance.modelVersion.extractionModel.key,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.fieldCount,\n    recordType!AIA Extraction Instance.sections,\n    recordType!AIA Extraction Instance.boundingBoxes,\n    recordType!AIA Extraction Instance.responseDocumentId,\n    recordType!AIA Extraction Instance.sourceDocumentId\n  }\n)"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_43077": {
      "name": "AIA_Extraction_GetInstanceById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      /* Extraction Instance */\n      recordType!AIA Extraction Instance.modelVersionId,\n      recordType!AIA Extraction Instance.documentId,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.validationErrors,\n      recordType!AIA Extraction Instance.accuracy,\n      recordType!AIA Extraction Instance.precision,\n      recordType!AIA Extraction Instance.f1,\n      recordType!AIA Extraction Instance.recall,\n      recordType!AIA Extraction Instance.createdOn,\n      /* Extraction Fields */\n      recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.extractedValue,\n      recordType!AIA Extraction Instance.fields.overrideValue,\n      recordType!AIA Extraction Instance.fields.overrideNull,\n      recordType!AIA Extraction Instance.fields.boundingBox,\n      recordType!AIA Extraction Instance.fields.confidence,\n      /* Extraction Fields > Rows */\n      recordType!AIA Extraction Instance.fields.rows.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.boundingBox,\n      /* Extraction Fields > Rows > Cells */\n      recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n      recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n      /* Extraction Fields > Model Field */\n      recordType!AIA Extraction Instance.fields.modelVersionField.key,\n      recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n      /* Extraction Fields > Rows > Cells > Column */\n      recordType!AIA Extraction Instance.fields.rows.cells.column.key,\n      a!defaultValue(ri!additionalFields, {})\n    },\n    \n  )\n)"
    },
    "_a-0001eccb-4552-8000-9c3e-011c48011c48_161219": {
      "name": "AIA_Extraction_GetInstanceByIdForReconciliation",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      rule!AIA_EXTRACTION_INSTANCE_FIELDS(),\n      \n      /* Fields used in AIA_Extraction_CreateUpdateInstance */\n      recordType!AIA Extraction Instance.documentFolderId,\n      recordType!AIA Extraction Instance.sourceDocumentId,\n      recordType!AIA Extraction Instance.createdOn,\n      recordType!AIA Extraction Instance.createdBy,\n      recordType!AIA Extraction Instance.testInstance,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.responseDocumentId,\n      recordType!AIA Extraction Instance.pageCount,\n      recordType!AIA Extraction Instance.inputTokens,\n      recordType!AIA Extraction Instance.outputTokens,\n      recordType!AIA Extraction Instance.wasStp,\n      \n      recordType!AIA Extraction Instance.modelVersion.extractionModel.uuid\n    }\n  )\n)"
    },
    "000cec8d-80f6-8000-fa82-7f0000014e7a": {
      "name": "AIA Reconcile with Instance",
      "type": "Process Model",
      "sail_code": "// Output: ?\nrule!AIA_Extraction_GetAllFieldsForInstance(\n  pv!baselineExtractionInstanceId\n)\n\n// Output: ?\nrule!AIA_Extraction_GetAllFieldsForInstance(\n  pv!ExtractionInstance[recordType!AIA Extraction Instance.id]\n)\n\n// Output: ?\nappian:record-relationship:v1:64322398-e457-4695-87d5-09794164cf77/8d64a7fc-95d1-4c81-b1d8-f583dafbf127\"]:rule!AIA_Extraction_TestReconcilliation(\n  baselineInstanceFields: pv!BaselineInstanceFields,\n  newInstanceFields: pv!ExtractionInstanceFields\n)\n\n// Output: ?\nappian:record-field:v1:64322398-e457-4695-87d5-09794164cf77/d0b39390-3147-451b-b49e-f4256e466577\"]:cons!AIA_INSTANCE_STATUS_RECONCILED_AUTOMATICALLY\n\n// Input: ?\n=pv!ExtractionInstance\n\n// Input: ?\ntrue"
    }
  }
}