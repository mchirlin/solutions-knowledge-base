{
  "_metadata": {
    "bundle_type": "web_api",
    "root_object": {
      "uuid": "776f4231-2d11-4f9a-9f72-91e1138da763",
      "name": "AS GSS WA GET Browser Download Link From External Source",
      "object_type": "Web API",
      "parent_name": null
    },
    "total_objects": 3
  },
  "web_api": {
    "url_alias": "fetchDocumentFromExtSource",
    "http_method": "GET",
    "sail_code": "a!localVariables(\n  local!integrationResponse: rule!AS_GSS_INT_POST_fetchDocumentFromExternalSource(\n    source: internalize(\n      tostring(http!request.queryParameters.source)\n    ),\n    appianDocId: internalize(\n      tostring(\n        http!request.queryParameters.appianDocId\n      )\n    )\n  ),\n  local!document: todocument(\n    local!integrationResponse.result.body.docId\n  ),\n  #\"SYSTEM_SYSRULES_httpResponse_v1\"(\n    statusCode: 200,\n    headers: #\"SYSTEM_SYSRULES_httpHeader\"(\n      name: \"Content-Disposition\",\n      value: concat(\n        \"attachment; filename=\"\"\",\n        document(local!document, \"name\"),\n        \".\",\n        document(local!document, \"extension\"),\n        \"\"\"\"\n      )\n    ),\n    body: local!document\n  )\n)",
    "security": [
      {
        "role_name": "web_api_administrator",
        "users": [],
        "groups": [
          "_e-0000e42d-ffef-8000-9af3-01075c01075c_19"
        ]
      },
      {
        "role_name": "web_api_viewer",
        "users": [],
        "groups": [
          "_e-0000e5bc-4a9a-8000-9b09-01075c01075c_991"
        ]
      }
    ]
  },
  "supporting_objects": {
    "connected_systems": [
      {
        "uuid": "_a-0000ed80-c90f-8000-9dfa-011c48011c48_15369835",
        "name": "AS GSS CS Source Selection",
        "object_type": "Connected System",
        "description": "Holds the connection to source selection system",
        "data": {
          "integration_type": "system.http",
          "base_url": "https://sample-url.com",
          "is_inherited_url": false,
          "auth_type": "API Key",
          "auth_details": [
            {
              "key": "apiKeyName",
              "value": "Appian-API-Key",
              "value_type": "string",
              "display_order": 0
            },
            {
              "key": "apiKeyValue",
              "value": "[ENCRYPTED]",
              "value_type": "EncryptedText",
              "display_order": 1
            },
            {
              "key": "sendAsHeader",
              "value": "true",
              "value_type": "boolean",
              "display_order": 2
            }
          ],
          "security": [
            {
              "role_name": "readers",
              "permission_type": "VIEW",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "authors",
              "permission_type": "EDIT",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "administrators",
              "permission_type": "ADMIN",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "denyReaders",
              "permission_type": "DENY_VIEW",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "denyAuthors",
              "permission_type": "DENY_EDIT",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "denyAdministrators",
              "permission_type": "DENY_ADMIN",
              "inherit": false,
              "allow_for_all": false
            }
          ]
        },
        "calls": [],
        "called_by": [
          "AS_GSS_INT_POST_fetchDocumentFromExternalSource"
        ]
      }
    ],
    "integrations": [
      {
        "uuid": "d63f6101-7f12-4154-ab88-4ed3517509b0",
        "name": "AS_GSS_INT_POST_fetchDocumentFromExternalSource",
        "object_type": "Integration",
        "description": "Supporting Integration to achieve single click download of external documents. Converts the fetched document from response of \" AS GSS WA POST Fetch Document From External Source\" to appian value",
        "data": {
          "integration_type": "system.http",
          "connected_system_uuid": "AS GSS CS Source Selection",
          "is_write": false,
          "rule_inputs": [
            {
              "input_name": "source",
              "input_type": "string",
              "type_namespace": "http://www.w3.org/2001/XMLSchema",
              "display_order": 0
            },
            {
              "input_name": "appianDocId",
              "input_type": "int",
              "type_namespace": "http://www.w3.org/2001/XMLSchema",
              "display_order": 1
            }
          ],
          "url_is_expression": false,
          "relative_path": "fetchDocumentFromExtSource",
          "is_inherited_url": true,
          "auth_type": "None",
          "http_method": "POST",
          "content_type": "application/json",
          "body_parse_type": "application/json+19.3",
          "timeout": 10,
          "automatically_convert": true,
          "exclude_null_params": true,
          "exclude_null_headers": true,
          "remove_null_json_fields": true,
          "request_body_is_expression": true,
          "query_parameters": [
            {
              "name": "source",
              "value": "ri!source",
              "is_expression": true,
              "display_order": 0
            },
            {
              "name": "appianDocId",
              "value": "ri!appianDocId",
              "is_expression": true,
              "display_order": 1
            }
          ],
          "headers": [],
          "security": [
            {
              "role_name": "readers",
              "permission_type": "VIEW",
              "inherit": true,
              "allow_for_all": false
            },
            {
              "role_name": "authors",
              "permission_type": "EDIT",
              "inherit": true,
              "allow_for_all": false
            },
            {
              "role_name": "administrators",
              "permission_type": "ADMIN",
              "inherit": true,
              "allow_for_all": false
            },
            {
              "role_name": "denyReaders",
              "permission_type": "DENY_VIEW",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "denyAuthors",
              "permission_type": "DENY_EDIT",
              "inherit": false,
              "allow_for_all": false
            },
            {
              "role_name": "denyAdministrators",
              "permission_type": "DENY_ADMIN",
              "inherit": false,
              "allow_for_all": false
            }
          ],
          "test_inputs": [
            {
              "input_name_ref": "source",
              "input_value": "null",
              "value_type": "Expression",
              "is_null": false,
              "input_order": 0
            },
            {
              "input_name_ref": "appianDocId",
              "input_value": "null",
              "value_type": "Expression",
              "is_null": false,
              "input_order": 1
            }
          ]
        },
        "calls": [
          "AS GSS CS Source Selection"
        ],
        "called_by": [
          "AS GSS WA GET Browser Download Link From External Source"
        ]
      }
    ]
  }
}