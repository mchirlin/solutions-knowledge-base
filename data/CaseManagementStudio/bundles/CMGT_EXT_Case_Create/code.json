{
  "_metadata": {
    "bundle_id": "CMGT_EXT_Case_Create"
  },
  "objects": {
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16329": {
      "name": "CMGT_EXT_AdjustDateTimeForDayLightSaving",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!isDayLightSavingStartDate: and(\n    isindaylightsavingtime(ri!dateTime, \"EST5EDT\") = false(),\n    isindaylightsavingtime(ri!dateTime + 1, \"EST5EDT\")\n  ),\n  if(\n    and(\n      local!isDayLightSavingStartDate,\n      totime(ri!dateTime) >= time(2, 0, 0, 0),\n      totime(ri!dateTime) < time(3, 0, 0, 0)\n    ),\n    a!addDateTime(startDateTime: ri!dateTime, hours: 1),\n    ri!dateTime\n  )\n)"
    },
    "9248008e-2c2c-4eea-bb28-4a3c89838403": {
      "name": "CMGT_UTIL_RemoveRecordRelationshipsWithSingleKey_Reducer",
      "type": "Expression Rule",
      "sail_code": "if(\n  runtimetypeof(ri!key) <> 'type!{http://www.appian.com/ae/types/2009}RecordRelationship',\n  ri!record,\n  a!match(\n    value: index(ri!record, ri!key, null),\n    whenTrue: count(fv!value) = 1,\n    then: with(\n      local!indexedValue: index(\n        ri!record,\n        ri!key,\n        1,\n        index(ri!record, ri!key, null)\n      ),\n      local!subKeys: a!keys(local!indexedValue),\n      if(\n        length(local!subKeys) = 1,\n        remove(ri!record, ri!key),\n        #\"urn:appian:function:v1:a:update\"(\n          ri!record,\n          ri!key,\n          reduce(\n            rule!CMGT_UTIL_RemoveRecordRelationshipsWithSingleKey_Reducer(record: _, key: _),\n            local!indexedValue,\n            local!subKeys\n          )\n        )\n      )\n    ),\n    default: ri!record\n  )\n)"
    },
    "_a-0000eaa7-a5c0-8000-9c22-011c48011c48_973190": {
      "name": "CMGT_UTIL_MergeWriteRecordIdsToProcessVariable",
      "type": "Expression Rule",
      "sail_code": "/*\nThe main rule to merge the ID-output of a WriteRecords SS node back to the input process variable.\n\nSTANDARD USAGE:\n- Use this in tandem with rule CMGT_UTIL_DropNonWritableRelationshipsFromRecord (see that description)\n- In the output of a WriteRecords SS, do:\n  A - New Custom Output\n  B - rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n        processData: pv![the pv your wrote],\n        recordsUpdated: ac!RecordsUpdated,\n        fksToParent: {list of record fields that are FKs to the primary PK you wrote}\n      )\n  C - Save this back to the pv you wrote\n\nMAPPING FKS:\n- Using this rule in the current state, child-FKs can only be set \nwhere they map back to the primary record type, using input \"fksToParent\".\n  -> For example, if you are writing \"Case\", \n    - you could set \"Case.Comment.caseId\"\n    - you could set \"Case.Comment.Replies.caseId\"\n    - but not \"Case.Comment.Replies.commentId\" (since the FK \"commentId\" is not the PK of \"Case\")\n- To set other foreign keys, you would have to run manual update rules using the result of this.\nNote:\n- \"fksToParent\" is optimized for 1:M relationships.\n  - Setting an fkToParent for a 1:1 will create an instance of that child record if it is null.\n\nIMPORTANT GENERAL NOTES: \n- The result of THIS rule will have data that IS considered changed, \nso a designer should be cautious about re-writing this later in process \nas it could cause race condition and performance side affects.\n\n- Also, the result of this WILL NOT have custom-fields calculated, \nsince they can be changed as a result of the write, but this rule is not re-querying.\nIf you need these, then re-query.\n\n- This should generally only be used for downstream flows that don't write it directly again, \nsuch as document processing, emails, etc.\n*/\nif(\n  or(\n    runtimetypeof(ri!recordsUpdated) = runtimetypeof(a!flatten(ri!recordsUpdated)),\n    runtimetypeof(ri!recordsUpdated) = 'type!{http://www.appian.com/ae/types/2009}Variant?list'\n  ),\n  if(\n    count(a!flatten(ri!recordsUpdated)) = 0,\n    ri!processData,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: enumerate(count(a!flatten(ri!recordsUpdated))),\n      expression: rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n        processData: a!flatten(ri!processData)[fv!index],\n        recordsUpdated: cast(\n          runtimetypeof(a!flatten(ri!processData)),\n          ri!recordsUpdated\n        )[fv!index],\n        fksToParent: ri!fksToParent\n      )\n    )\n  ),\n  a!localVariables(\n    local!keys: #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!keys(ri!recordsUpdated),\n      expression: a!map(\n        key: fv!item,\n        isPrimaryKey: runtimetypeof(fv!item) = 'type!{http://www.appian.com/ae/types/2009}RecordField'\n      )\n    ),\n    local!keysOrganized: rule!CMGT_UTIL_Filter(\n      records: local!keys,\n      field: \"isPrimaryKey\",\n      value: true,\n      filterType: \"FULL_RESULT\"\n    ),\n    local!primaryKeyField: local!keysOrganized.firstMatch.key,\n    local!updates: rule!CMGT_UTIL_SetRecordFields(\n      record: ri!processData,\n      neverOverwrite: {\n        a!map(\n          field: local!primaryKeyField,\n          value: ri!recordsUpdated[local!primaryKeyField]\n        ),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!fksToParent,\n          expression: a!map(\n            field: fv!item,\n            value: ri!recordsUpdated[local!primaryKeyField],\n            /*Children get complicated, and an update should only run if a child is actually attached*/\n            applyWhen: a!match(\n              value: runtimetypeof(ri!processData[fv!item]),\n              equals: runtimetypeof(a!flatten(ri!processData[fv!item])),\n              then: count(ri!processData[fv!item]) > 0,\n              equals: tointeger(\n                'type!{http://www.appian.com/ae/types/2009}Variant?list'\n              ),\n              then: or(\n                #\"SYSTEM_SYSRULES_forEach\"(\n                  items: ri!processData[fv!item],\n                  expression: a!isNotNullOrEmpty(fv!item)\n                )\n              ),\n              default: a!isNotNullOrEmpty(ri!processData[fv!item])\n            )\n          )\n        )\n      },\n      childRelationships: #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!keysOrganized.rejects,\n        expression: a!map(\n          field: fv!item.key,\n          value: if(\n            rule!CMGT_UTIL_IsBlank(ri!processData[fv!item.key]),\n            ri!recordsUpdated[fv!item.key],\n            rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n              processData: ri!processData[fv!item.key],\n              recordsUpdated: ri!recordsUpdated[fv!item.key],\n              fksToParent: {}\n            )\n          )\n        )\n      )\n    ),\n    /*reduce over updates to remove any relationships that were incorrectly created with just an fk*/\n    if(\n      a!isNullOrEmpty(ri!fksToParent),\n      local!updates,\n      reduce(\n        rule!CMGT_UTIL_RemoveRecordRelationshipsWithSingleKey_Reducer(record: _, key: _),\n        local!updates,\n        a!keys(local!updates)\n      )\n    )\n  )\n)"
    },
    "000be9f1-c02b-8000-fff7-7f0000014e7a": {
      "name": "CMGT_SUB_SetCaseFolderSecurity",
      "type": "Process Model",
      "sail_code": "// Output: ?\nrule!CMGT_SUB_SetCaseFolderSecurity_Logic(cases: pv!cases)\n\n// Input: ?\n=pv!changes[tp!instanceindex].admins\n\n// Input: ?\n=pv!changes[tp!instanceindex].editors\n\n// Input: ?\n=pv!changes[tp!instanceindex].folder\n\n// Input: ?\n=pv!changes[tp!instanceindex].viewers\n\n// Input: ?\n=pv!changes[tp!instanceindex].removes\n\n// Input: ?\n=/*Get folder details for the given case ids*/rule!CMGT_QR_GetCase( caseId: pv!caseIds, executeWhen: a!isNotNullOrEmpty(pv!caseIds), additionalFilters: #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!CMGT_Case.folderId, operator: \"not null\" ), excludeRelatedRecords: true, fields: recordType!CMGT_Case.folderId)\n\n// Input: ?\n= rule!CMGT_QR_GetRole( caseId: pv!caseIds, additionalFilters: #\"SYSTEM_SYSRULES_queryFilter\"( field: recordType!CMGT_Role.usernameUser, operator: \"not null\" ) )\n\n// Output: ?\n#\"SYSTEM_SYSRULES_forEach\"(\n  ac!cases,\n  #\"urn:appian:function:v1:a:update\"(\n    fv!item,\n    recordType!CMGT_Case.roles,\n    rule!CMGT_UTIL_Filter(\n      records: ac!roles,\n      field: recordType!CMGT_Role.caseId,\n      value: fv!item[recordType!CMGT_Case.caseId]\n    )\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16248": {
      "name": "CMGT_EXT_Task_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!tasks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      /*\n      New task - Calculate dueOn based on SLA\n      */\n      a!map(\n        field: recordType!CMGT_Task.dueOn,\n        value: if(\n          or(\n            tointeger(\n              fv!item[recordType!CMGT_Task.statusId]\n            ) = cons!CMGT_REFID_STATUS_TASK_READY,\n            tointeger(\n              fv!item[recordType!CMGT_Task.statusId]\n            ) = cons!CMGT_REFID_STATUS_TASK_IN_PROGRESS,\n            \n          ),\n          if(\n            /*New task*/\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_Task.dueOn]\n            ),\n            rule!CMGT_UTIL_CalculateDueDateBasedOnSLA(\n              SLA: fv!item[recordType!CMGT_Task.sla],\n              dateTime: fv!item[recordType!CMGT_Task.createdOn]\n            ),\n            fv!item[recordType!CMGT_Task.dueOn]\n          ),\n          fv!item[recordType!CMGT_Task.dueOn]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_Task.isCurrent,\n        value: a!defaultValue(\n          fv!item[recordType!CMGT_Task.isCurrent],\n          true\n        ),\n\n      ),\n      a!map(\n        field: recordType!CMGT_Task.instanceCount,\n        value: a!defaultValue(\n          fv!item[recordType!CMGT_Task.instanceCount],\n          1\n        ),\n\n      ),\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_Task.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_Task.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_Task.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_Task.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_Task.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_Task.taskUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      ),\n      a!map(\n        field: recordType!CMGT_Task.taskInstanceUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      ),\n      /*Always ensure \"context\" is valid JSON*/\n      a!map(\n        field: recordType!CMGT_Task.context,\n        value: \"{}\"\n      ),\n      /*Default status to \"Queued\"*/\n      a!map(\n        field: recordType!CMGT_Task.statusId,\n        value: cons!CMGT_REFID_STATUS_TASK_QUEUED\n      ),\n      /*Automatically calculate availableOn whenever the statusId is Ready*/\n      a!map(\n        field: recordType!CMGT_Task.availableOn,\n        value: now(),\n        applyWhen: tointeger(\n          fv!item[recordType!CMGT_Task.statusId]\n        ) = cons!CMGT_REFID_STATUS_TASK_READY\n      ),\n      /*Set completedBy/On whenever the statusId matches a Completion status*/\n      a!map(\n        field: recordType!CMGT_Task.completedBy,\n        value: ri!initiator,\n        applyWhen: contains(\n          {\n            cons!CMGT_REFID_STATUS_TASK_COMPLETED,\n            cons!CMGT_REFID_STATUS_TASK_NOT_NEEDED\n          },\n          tointeger(\n            fv!item[recordType!CMGT_Task.statusId]\n          )\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_Task.completedOn,\n        value: now(),\n        applyWhen: contains(\n          {\n            cons!CMGT_REFID_STATUS_TASK_COMPLETED,\n            cons!CMGT_REFID_STATUS_TASK_NOT_NEEDED\n          },\n          tointeger(\n            fv!item[recordType!CMGT_Task.statusId]\n          )\n        )\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_Task.roles,\n        value: rule!CMGT_EXT_Role_SetMetaData(\n          roles: fv!item[recordType!CMGT_Task.roles],\n          initiator: ri!initiator,\n          /*We need to pass the task created on so that group assignee will be same as task created on*/\n          timestamp: fv!item[recordType!CMGT_Task.createdOn]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_Task.beforeTaskInstanceBranches,\n        value: rule!CMGT_TaskBranch_SetMetaData(\n          taskBranches: fv!item[recordType!CMGT_Task.beforeTaskInstanceBranches]\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000eaab-5303-8000-9c24-011c48011c48_994738": {
      "name": "CMGT_formatEventInitiator",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!user: rule!CMGT_QR_GetUser(\n    username: ri!initiator,\n    returnType: \"SINGLE_OBJECT\"\n  ),\n  if(\n    rule!CMGT_UTIL_IsBlank(local!user),\n    ri!initiator,\n    if(\n      or(\n        local!user[#\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_isServiceAccount\"] = true,\n        #\"urn:appian:function:v1:a:isusermemberofgroup?okey=a!isUserMemberOfGroup\"(\n          username: ri!initiator,\n          groups: cons!CMGT_GRP_SERVICE_ACCOUNTS\n        )\n      ),\n      cons!CMGT_TXT_AUTOMATED_SYSTEM,\n      ri!initiator\n    )\n  )\n)"
    },
    "_a-0000ec46-ed50-8000-9bb4-011c48011c48_683170": {
      "name": "CMGT_EXT_UTIL_SortArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(ri!array),\n  if(\n    a!isNullOrEmpty(ri!array),\n    ri!array,\n    todatasubset(\n      apply(\n        a!map(item: _),\n        a!flatten(ri!array),\n      ),\n      #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: - 1,\n        sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: \"item\",\n          ascending: a!defaultValue(value: ri!ascending, default: true)\n        )\n      )\n    ).data.item\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16467": {
      "name": "CMGT_EXT_Role_AddEvent_Constructor",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!events: a!match(\n    value: ri!context,\n    equals: \"CASE\",\n    then: a!flatten(\n      {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!roles,\n          expression: rule!CMGT_CaseEventHistory_Constructor(\n            caseId: fv!item[recordType!CMGT_Role.caseId],\n            initiator: fv!item[recordType!CMGT_Role.modifiedBy],\n            eventTypeId: a!match(\n              value: fv!item[recordType!CMGT_Role.roleTypeId],\n              equals: cons!CMGT_REFID_ROLE_TYPE_WATCHER,\n              then: cons!CMGT_REFID_EVENT_TYPE_CASE_ADD_WATCHER,\n              default: cons!CMGT_REFID_EVENT_TYPE_CASE_ADD_ASSIGNEE\n            ),\n            details: a!map(\n              user: tostring(\n                fv!item[recordType!CMGT_Role.username]\n              ),\n              groupId: tointeger(\n                fv!item[recordType!CMGT_Role.groupId]\n              )\n            ),\n            timestamp: fv!item[recordType!CMGT_Role.modifiedOn]\n          )\n        )\n      }\n    ),\n    equals: \"TASK\",\n    then: a!flatten(\n      {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!roles,\n          expression: rule!CMGT_TaskEventHistory_Constructor(\n            taskId: fv!item[recordType!CMGT_Role.taskId],\n            initiator: fv!item[recordType!CMGT_Role.modifiedBy],\n            eventTypeId: cons!CMGT_REFID_EVENT_TYPE_TASK_ADD_ASSIGNEE,\n            details: a!map(\n              user: tostring(\n                fv!item[recordType!CMGT_Role.username]\n              ),\n              groupId: tointeger(\n                fv!item[recordType!CMGT_Role.groupId]\n              )\n            ),\n            timestamp: fv!item[recordType!CMGT_Role.modifiedOn]\n          )\n        )\n      }\n    ),\n    default: {}\n  ),\n  rule!CMGT_UTIL_RejectBlank(local!events)\n)"
    },
    "_a-0000e9ec-2a80-8000-9bc9-011c48011c48_246572": {
      "name": "CMGT_UTIL_IsOnPortal",
      "type": "Expression Rule",
      "sail_code": "/*\nOn portal only, the loggedInUser() function returns 'Anonymous'\nThis assumes there are no users in the system with this username\n*/\n\nloggedInUser() = \"Anonymous\""
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16367": {
      "name": "CMGT_EXT_Case_WriteRecordsProperties",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!isInput,\n  rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord(\n    records: ri!cases,\n    relationships: {\n      recordType!CMGT_Case.caseEntityMap,\n      recordType!CMGT_Case.tasks\n    }\n  ),\n  rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n    processData: ri!cases,\n    recordsUpdated: ri!recordsUpdated,\n    fksToParent: {\n      recordType!CMGT_Case.comments.caseId,\n      recordType!CMGT_Case.documents.caseId,\n      recordType!CMGT_Case.relatedCaseMap.caseId,\n      recordType!CMGT_Case.roles.caseId,\n      recordType!CMGT_Case.tagMap.caseId\n    }\n  )\n)"
    },
    "_a-0000ecf6-527e-8000-9bbc-011c48011c48_59891": {
      "name": "CMGT_CFG_ENUM_ACT_ASSIGN_CASE",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_ASSIGN_CASE,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:340cf3dc-0483-4dd7-b199-d47e56259f94\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_CaseAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_CASE,\n  createdBy: \"system\"\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16240": {
      "name": "CMGT_EXT_WFL_Case_GenerateCaseCreationTasks_Logic",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!caseTypeWorkflowTasks: rule!CMGT_WFL_QR_GetCaseTypeWorkflowTask(\n    executeWhen: a!isNotNullOrEmpty(\n      ri!case[recordType!CMGT_Case.caseTypeUuid]\n    ),\n    caseTypeUuId: ri!case[recordType!CMGT_Case.caseTypeUuid],\n    includeMilestones: true,\n    fields: {\n      recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask,\n      recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask,\n      recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches,\n      #\"urn:appian:record-relationship:v1:d6ebee27-6e86-47e3-a9b8-71fdd0348854/58358786-07f9-484f-9bef-cb682fb2495c/44e5300d-4ff4-47e9-9c9a-1161d06617af/ef9cc417-d6ce-4fee-bd86-fa71ab64f8a1\"\n    }\n  ),\n  local!newTaskUuids: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!caseTypeWorkflowTasks,\n    expression: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n  ),\n  local!newTaskInstanceUuids: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!caseTypeWorkflowTasks,\n    expression: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n  ),\n  local!newTaskConditionSetUuids: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!caseTypeWorkflowTasks,\n    expression: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n  ),\n  local!newTaskActionUuids: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!caseTypeWorkflowTasks,\n    expression: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n  ),\n  local!createdBy: ri!case[recordType!CMGT_Case.createdBy],\n  local!createdOn: ri!case[recordType!CMGT_Case.createdOn],\n  local!taskResponseOptionsNewUuidMapping: rule!CMGT_UTIL_RejectBlank(\n    a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!caseTypeWorkflowTasks,\n        expression: a!localVariables(\n          local!caseTypeWorkflowTaskId: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskId],\n          local!caseTypeWorkflowTaskUUID: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid],\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions],\n            expression: a!map(\n              caseTypeWorkflowTaskId: local!caseTypeWorkflowTaskId,\n              caseTypeWorkflowTaskUUID: local!caseTypeWorkflowTaskUUID,\n              caseTypeWorkflowResponseOptionUUID: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.caseTypeWorkflowTaskResponseOptionUuid],\n              newUuid: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n            )\n          )\n        )\n      )\n    )\n  ),\n  local!conditionSetNewUuidMapping: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!caseTypeWorkflowTasks,\n    expression: a!localVariables(\n      local!parentConditionSet: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet],\n      a!map(\n        taskUuid: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid],\n        conditionSetUuid: if(\n          rule!CMGT_UTIL_IsBlank(local!parentConditionSet),\n          null,\n          {\n            #\"SYSTEM_SYSRULES_forEach\"(\n              local!parentConditionSet[recordType!CMGT_CFG_ConditionSet.childConditionSet],\n              rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n            )\n          }\n        )\n      )\n    )\n  ),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!caseTypeWorkflowTasks,\n    expression: a!localVariables(\n      local!caseTypeWorkflowTaskId: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskId],\n      local!taskResponseOptions: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions],\n      local!currentTaskUuid: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid],\n      recordType!CMGT_Task(\n        recordType!CMGT_Task.taskUuid: local!newTaskUuids[fv!index],\n        recordType!CMGT_Task.taskInstanceUuid: local!newTaskInstanceUuids[fv!index],\n        recordType!CMGT_Task.caseId: ri!case[recordType!CMGT_Case.caseId],\n        recordType!CMGT_Task.taskIntentionCode: cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_WORKFLOW,\n        recordType!CMGT_Task.caseTypeWorkflowTaskUuid: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid],\n        recordType!CMGT_Task.taskBehaviorTypeId: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskBehaviorTypeId],\n        recordType!CMGT_Task.title: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.label],\n        recordType!CMGT_Task.questionLabel: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.questionLabel],\n        recordType!CMGT_Task.description: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.description],\n        recordType!CMGT_Task.startsByDefault: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.startsByDefault],\n        recordType!CMGT_Task.sla: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sla],\n        recordType!CMGT_Task.createdBy: local!createdBy,\n        recordType!CMGT_Task.createdOn: local!createdOn,\n        recordType!CMGT_Task.modifiedOn: ri!case[recordType!CMGT_Case.modifiedOn],\n        recordType!CMGT_Task.modifiedBy: ri!case[recordType!CMGT_Case.modifiedBy],\n        recordType!CMGT_Task.milestoneId: index(\n          rule!CMGT_UTIL_Filter(\n            records: ri!case[recordType!CMGT_Case.milestones],\n            field: recordType!CMGT_Milestone.referenceMilestoneUuid,\n            value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceMilestone.milestoneUuid]\n          ),\n          recordType!CMGT_Milestone.milestoneId,\n          null\n        ),\n        recordType!CMGT_Task.roles: if(\n          fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTask.taskBehaviorType.isAutomated],\n          recordType!CMGT_Role(\n            recordType!CMGT_Role.username: cons!CMGT_TXT_PROCESS_AUTOMATION,\n            recordType!CMGT_Role.roleTypeId: cons!CMGT_REFID_ROLE_TYPE_USER_ASSIGNEE\n          ),\n          if(\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.defaultGroupAssignee]\n            ),\n            {},\n            recordType!CMGT_Role(\n              recordType!CMGT_Role.groupId: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.defaultGroupAssignee],\n              recordType!CMGT_Role.roleTypeId: cons!CMGT_REFID_ROLE_TYPE_GROUP_ASSIGNEE\n            )\n          )\n        ),\n        recordType!CMGT_Task.taskResponseOptions: #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!taskResponseOptions,\n          expression: recordType!CMGT_TaskResponseOption(\n            recordType!CMGT_TaskResponseOption.label: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.label],\n            recordType!CMGT_TaskResponseOption.sortOrder: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.sortOrder],\n            recordType!CMGT_TaskResponseOption.isActive: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.isActive],\n            recordType!CMGT_TaskResponseOption.taskResponseOptionUuid: index(\n              rule!CMGT_UTIL_Filter(\n                records: local!taskResponseOptionsNewUuidMapping,\n                fieldValuePairs: {\n                  a!map(\n                    field: \"caseTypeWorkflowTaskId\",\n                    value: local!caseTypeWorkflowTaskId\n                  ),\n                  a!map(\n                    field: \"caseTypeWorkflowResponseOptionUUID\",\n                    value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.caseTypeWorkflowTaskResponseOptionUuid]\n                  )\n                }\n              ),\n              \"newUuid\",\n              \"ERROR\"\n            )\n          )\n        ),\n        recordType!CMGT_Task.beforeTaskInstanceBranches: #\"SYSTEM_SYSRULES_forEach\"(\n          items: rule!CMGT_UTIL_Filter(\n            records: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches],\n            field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.isActive,\n            value: true\n          ),\n          expression: recordType!CMGT_TaskBranch(\n            recordType!CMGT_TaskBranch.taskResponseOptionUuid: index(\n              rule!CMGT_UTIL_Filter(\n                records: local!taskResponseOptionsNewUuidMapping,\n                fieldValuePairs: {\n                  a!map(\n                    field: \"caseTypeWorkflowTaskUUID\",\n                    value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.beforeCaseTypeWorkflowTaskUuid]\n                  ),\n                  a!map(\n                    field: \"caseTypeWorkflowResponseOptionUUID\",\n                    value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.caseTypeTaskResponseOptionUuid]\n                  )\n                }\n              ),\n              \"newUuid\",\n              \"ERROR\"\n            ),\n            recordType!CMGT_TaskBranch.beforeTaskInstanceUuid: local!newTaskInstanceUuids[rule!CMGT_UTIL_Filter(\n              records: local!caseTypeWorkflowTasks, field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid, value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.beforeCaseTypeWorkflowTaskUuid],\n              filterType: \"MATCH_INDICES\"\n            )],\n            recordType!CMGT_TaskBranch.afterTaskInstanceUuid: local!newTaskInstanceUuids[rule!CMGT_UTIL_Filter(\n              records: local!caseTypeWorkflowTasks, field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid, value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.afterCaseTypeWorkflowTaskUuid],\n              filterType: \"MATCH_INDICES\"\n            )],\n            recordType!CMGT_TaskBranch.isRequired: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.isRequired],\n            recordType!CMGT_TaskBranch.conditionSetUuid: if(\n              rule!CMGT_UTIL_IsBlank(\n                fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.beforeCaseTypeWorkflowTask]\n              ),\n              null,\n              a!flatten(\n                index(\n                  local!conditionSetNewUuidMapping,\n                  wherecontains(\n                    fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.beforeCaseTypeWorkflowTask.caseTypeWorkflowTaskUuid],\n                    local!conditionSetNewUuidMapping.taskUuid\n                  ),\n                  null\n                ).conditionSetUuid\n              )[wherecontains(\n                local!newTaskInstanceUuids[rule!CMGT_UTIL_Filter(\n                  records: local!caseTypeWorkflowTasks, field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid, value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.afterCaseTypeWorkflowTaskUuid],\n                  filterType: \"MATCH_INDICES\"\n                )],\n                local!newTaskInstanceUuids[rule!CMGT_UTIL_Filter(\n                  records: local!caseTypeWorkflowTasks, field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches.beforeCaseTypeWorkflowTaskUuid, value: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.beforeCaseTypeWorkflowTaskUuid],\n                  filterType: \"MATCH_INDICES\"\n                )]\n              )],\n              \n            )\n          )\n        ),\n        recordType!CMGT_Task.conditionSet: if(\n          rule!CMGT_UTIL_IsBlank(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet]\n          ),\n          recordType!CMGT_ConditionSet(),\n          a!localVariables(\n            local!parentConditionSetUuid: local!newTaskConditionSetUuids[fv!index],\n            recordType!CMGT_ConditionSet(\n              recordType!CMGT_ConditionSet.conditionSetUuid: local!parentConditionSetUuid,\n              recordType!CMGT_ConditionSet.taskInstanceUuid: local!newTaskInstanceUuids[fv!index],\n              recordType!CMGT_ConditionSet.operatorCode: \"OR\",\n              recordType!CMGT_ConditionSet.isActive: true,\n              recordType!CMGT_ConditionSet.isValid: true,\n              recordType!CMGT_ConditionSet.createdBy: local!createdBy,\n              recordType!CMGT_ConditionSet.createdOn: local!createdOn,\n              recordType!CMGT_ConditionSet.modifiedBy: local!createdBy,\n              recordType!CMGT_ConditionSet.modifiedOn: local!createdOn,\n              recordType!CMGT_ConditionSet.childConditionSet: {\n                #\"SYSTEM_SYSRULES_forEach\"(\n                  fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet],\n                  a!localVariables(\n                    local!childConditionSetUuid: a!flatten(\n                      index(\n                        local!conditionSetNewUuidMapping,\n                        wherecontains(\n                          local!currentTaskUuid,\n                          local!conditionSetNewUuidMapping.taskUuid\n                        ),\n                        null\n                      ).conditionSetUuid\n                    )[fv!index],\n                    local!childConditionSet: fv!item,\n                    recordType!CMGT_ConditionSet(\n                      recordType!CMGT_ConditionSet.conditionSetUuid: local!childConditionSetUuid,\n                      recordType!CMGT_ConditionSet.parentConditionSetUuid: local!parentConditionSetUuid,\n                      recordType!CMGT_ConditionSet.operatorCode: \"AND\",\n                      recordType!CMGT_ConditionSet.isActive: true,\n                      recordType!CMGT_ConditionSet.isValid: true,\n                      recordType!CMGT_ConditionSet.createdBy: local!createdBy,\n                      recordType!CMGT_ConditionSet.createdOn: local!createdOn,\n                      recordType!CMGT_ConditionSet.modifiedBy: local!createdBy,\n                      recordType!CMGT_ConditionSet.modifiedOn: local!createdOn,\n                      recordType!CMGT_ConditionSet.condition: #\"SYSTEM_SYSRULES_forEach\"(\n                        local!childConditionSet[recordType!CMGT_CFG_ConditionSet.condition],\n                        recordType!CMGT_Condition(\n                          recordType!CMGT_Condition.conditionSetUuid: local!childConditionSetUuid,\n                          recordType!CMGT_Condition.evaluationType: fv!item[recordType!CMGT_CFG_Condition.evaluationType],\n                          recordType!CMGT_Condition.fieldPathJson: fv!item[recordType!CMGT_CFG_Condition.fieldPathJson],\n                          recordType!CMGT_Condition.operator: fv!item[recordType!CMGT_CFG_Condition.operator],\n                          recordType!CMGT_Condition.valueJson: fv!item[recordType!CMGT_CFG_Condition.valueJson],\n                          recordType!CMGT_Condition.valueType: fv!item[recordType!CMGT_CFG_Condition.valueType],\n                          recordType!CMGT_Condition.isActive: true,\n                          recordType!CMGT_Condition.isValid: true,\n                          recordType!CMGT_Condition.createdBy: local!createdBy,\n                          recordType!CMGT_Condition.createdOn: local!createdOn,\n                          recordType!CMGT_Condition.modifiedBy: local!createdBy,\n                          recordType!CMGT_Condition.modifiedOn: local!createdOn\n                        )\n                      )\n                    )\n                  )\n                )\n              }\n            )\n          )\n        ),\n        recordType!CMGT_Task.automationTaskAction: if(\n          rule!CMGT_UTIL_IsBlank(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction]\n          ),\n          recordType!CMGT_TaskActions(),\n          recordType!CMGT_TaskActions(\n            recordType!CMGT_TaskActions.taskInstanceUuid: local!newTaskInstanceUuids[fv!index],\n            recordType!CMGT_TaskActions.taskActionUuid: local!newTaskActionUuids[fv!index],\n            recordType!CMGT_TaskActions.actionCode: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.actionCode],\n            recordType!CMGT_TaskActions.isActive: true,\n            recordType!CMGT_TaskActions.createdBy: local!createdBy,\n            recordType!CMGT_TaskActions.createdOn: local!createdOn,\n            recordType!CMGT_TaskActions.modifedBy: local!createdBy,\n            recordType!CMGT_TaskActions.modifiedOn: local!createdOn\n          )\n        ),\n        recordType!CMGT_Task.sendEmailTask: if(\n          rule!CMGT_UTIL_IsBlank(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask]\n          ),\n          recordType!CMGT_SendEmailTask(),\n          recordType!CMGT_SendEmailTask(\n            recordType!CMGT_SendEmailTask.taskActionUuid: local!newTaskActionUuids[fv!index],\n            recordType!CMGT_SendEmailTask.emailTemplateUuid: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask.emailTemplateUuid],\n            recordType!CMGT_SendEmailTask.templateName: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask.emailTemplate.templateName],\n            recordType!CMGT_SendEmailTask.subject: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask.emailTemplate.subject],\n            recordType!CMGT_SendEmailTask.body: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask.emailTemplate.body],\n            recordType!CMGT_SendEmailTask.recipientRoleJson: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask.recipientRoleJson],\n            recordType!CMGT_SendEmailTask.isActive: true,\n            recordType!CMGT_SendEmailTask.createdBy: local!createdBy,\n            recordType!CMGT_SendEmailTask.createdOn: local!createdOn,\n            recordType!CMGT_SendEmailTask.modifiedBy: local!createdBy,\n            recordType!CMGT_SendEmailTask.modifiedOn: local!createdOn\n          )\n        ),\n        \n      )\n    )\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_14029": {
      "name": "CMGT_EXT_Comments_GenerateComments_Logic",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!commentRule: index(\n    rule!CMGT_EXT_UTIL_ReturnDatsetDetailsByDatasetName(datasetUuids: ri!datasetUuids),\n    \"commentRule\",\n    null\n  ),\n  local!comment:a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(local!commentRule, fv!item())\n  ),\n  local!documents: rule!CMGT_QR_GetDocument(\n    returnType: \"OBJECT_ARRAY\",\n    caseId: ri!caseId,\n    fields: {\n      recordType!CMGT_Document.documentId,\n      recordType!CMGT_Document.documentName\n    }\n  ),\n  local!comments: if(\n    rule!CMGT_UTIL_IsBlank(value: local!comment),\n    null,\n    rule!CMGT_UTIL_Filter(\n      records: local!comment,\n      field: { \"caseTitle\", \"taskTitle\", \"caseType\" },\n      value: { ri!caseTitle, ri!taskTitle, ri!caseType }\n    )\n  ),\n  local!parentCommentTimestamp: rule!CMGT_EXT_UTIL_RandomDateTime(\n    fromDate: ri!timestamp,\n    toDate: if(\n      rule!CMGT_EXT_AddDateTimeWithAdjustedDayLightSaving(startDateTime: ri!timestamp, days: 5) > now(),\n      now(),\n      rule!CMGT_EXT_AddDateTimeWithAdjustedDayLightSaving(startDateTime: ri!timestamp, days: 5)\n    ),\n    returnCount: if(\n      rule!CMGT_UTIL_IsBlank(value: local!comments),\n      0,\n      length(local!comments)\n    ),\n    sortAscending: true\n  ),\n  if(\n    rule!CMGT_UTIL_IsBlank(value: local!comments),\n    {},\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!comments,\n      expression: a!localVariables(\n        local!commentTimestamp: index(\n          local!parentCommentTimestamp,\n          fv!index,\n          null\n        ),\n        local!userTagsPerComment: rule!CMGT_EXT_UTIL_RandomInt(between: { 0, 1 }),\n        local!commentUser: rule!CMGT_EXT_UTIL_RandomXMembersFromGroup(\n          group: cons!CMGT_GRP_INTERNAL_USERS,\n          includeServiceAccounts: false()\n        ),\n        local!commentDocuments: rule!CMGT_UTIL_Filter(\n          records: local!documents,\n          field: recordType!CMGT_Document.documentName,\n          value: fv!item.parentComment.linkedDocuments\n        ),\n        local!childCommentTimestamps: rule!CMGT_EXT_UTIL_RandomDateTime(\n          fromDate: local!commentTimestamp,\n          toDate: if(\n            rule!CMGT_EXT_AddDateTimeWithAdjustedDayLightSaving(\n              startDateTime: local!commentTimestamp,\n              days: 5\n            ) > now(),\n            now(),\n            rule!CMGT_EXT_AddDateTimeWithAdjustedDayLightSaving(\n              startDateTime: local!commentTimestamp,\n              days: rule!CMGT_EXT_UTIL_RandomInt(between: { 1, 5 })\n            )\n          ),\n          returnCount: count(fv!item.childComments),\n          sortAscending: true\n        ),\n        recordType!CMGT_Comment(\n          recordType!CMGT_Comment.commentText: fv!item.parentComment.commentText,\n          recordType!CMGT_Comment.caseId: ri!caseId,\n          recordType!CMGT_Comment.taskId: ri!taskId,\n          recordType!CMGT_Comment.isBookmarked: a!defaultValue(\n            index(\n              fv!item.parentComment,\n              \"isBookmarked\",\n              null\n            ),\n            false\n          ),\n          recordType!CMGT_Comment.isActive: true(),\n          recordType!CMGT_Comment.isPrivate: true,\n          recordType!CMGT_Comment.hasBeenEdited: false(),\n          recordType!CMGT_Comment.createdBy: local!commentUser,\n          recordType!CMGT_Comment.createdOn: local!commentTimestamp,\n          recordType!CMGT_Comment.modifiedBy: local!commentUser,\n          recordType!CMGT_Comment.modifiedOn: local!commentTimestamp,\n          recordType!CMGT_Comment.userTags: #\"SYSTEM_SYSRULES_forEach\"(\n            items: enumerate(local!userTagsPerComment),\n            expression: recordType!CMGT_CommentUserTag(\n              recordType!CMGT_CommentUserTag.username: rule!CMGT_EXT_UTIL_RandomXMembersFromGroup(\n                group: cons!CMGT_GRP_INTERNAL_USERS,\n                includeServiceAccounts: false(),\n                excludeUsers: local!commentUser\n              ),\n              recordType!CMGT_CommentUserTag.isActive: true()\n            )\n          ),\n          recordType!CMGT_Comment.childComments: #\"SYSTEM_SYSRULES_forEach\"(\n            items: fv!item.childComments,\n            expression: a!localVariables(\n              local!childCommentUser: rule!CMGT_EXT_UTIL_RandomXMembersFromGroup(\n                group: cons!CMGT_GRP_INTERNAL_USERS,\n                includeServiceAccounts: false()\n              ),\n              local!childCommentDocuments: rule!CMGT_UTIL_Filter(\n                records: local!documents,\n                field: recordType!CMGT_Document.documentName,\n                value: fv!item.linkedDocuments\n              ),\n              recordType!CMGT_Comment(\n                recordType!CMGT_Comment.commentText: fv!item.commentText,\n                recordType!CMGT_Comment.caseId: ri!caseId,\n                recordType!CMGT_Comment.taskId: ri!taskId,\n                recordType!CMGT_Comment.isBookmarked: a!defaultValue(\n                  index(fv!item, \"isBookmarked\", null),\n                  false\n                ),\n                recordType!CMGT_Comment.isActive: true(),\n                recordType!CMGT_Comment.isPrivate: true,\n                recordType!CMGT_Comment.hasBeenEdited: false(),\n                recordType!CMGT_Comment.createdBy: local!childCommentUser,\n                recordType!CMGT_Comment.createdOn: local!childCommentTimestamps[fv!index],\n                recordType!CMGT_Comment.modifiedBy: local!childCommentUser,\n                recordType!CMGT_Comment.modifiedOn: local!childCommentTimestamps[fv!index],\n                recordType!CMGT_Comment.commentDocumentMap: #\"SYSTEM_SYSRULES_forEach\"(\n                  items: local!childCommentDocuments,\n                  expression: recordType!CMGT_CommentDocumentMap(\n                    recordType!CMGT_CommentDocumentMap.documentId: fv!item[recordType!CMGT_Document.documentId],\n                    recordType!CMGT_CommentDocumentMap.isActive: true(),\n                    recordType!CMGT_CommentDocumentMap.commentAction: \"LINK\"\n                  )\n                )\n              )\n            )\n          ),\n          recordType!CMGT_Comment.commentDocumentMap: #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!commentDocuments,\n            expression: recordType!CMGT_CommentDocumentMap(\n              recordType!CMGT_CommentDocumentMap.documentId: fv!item[recordType!CMGT_Document.documentId],\n              recordType!CMGT_CommentDocumentMap.isActive: true(),\n              recordType!CMGT_CommentDocumentMap.commentAction: \"LINK\"\n            )\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000e9ae-873e-8000-9baf-011c48011c48_97439": {
      "name": "CMGT_QR_GetUser",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: #\"urn:appian:record-type:v1:SYSTEM_RECORD_TYPE_USER\",\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: #\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_username\",\n      operator: \"in\",\n      value: ri!username\n    )\n  },\n  fields: ri!fields,\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ece2-0128-8000-9bb8-011c48011c48_37290": {
      "name": "CMGT_UTIL_CalculateDueDateBasedOnSLA",
      "type": "Expression Rule",
      "sail_code": "if(\n  any(a!isNullOrEmpty, { ri!dateTime, ri!SLA }),\n  null(),\n  a!localVariables(\n    local!details: cast(\n      'type!{http://www.appian.com/ae/types/2009}Map',\n      if(\n        a!isNotNullOrEmpty(ri!SLA),\n        #\"SYSTEM_SYSRULES_fromJson_v1\"(ri!SLA),\n        null\n      )\n    ),\n    local!days: a!defaultValue(\n      value: index(local!details, \"days\", null()),\n      default: 0\n    ),\n    local!hours: a!defaultValue(\n      value: index(local!details, \"hours\", null()),\n      default: 0\n    ),\n    local!minutes: a!defaultValue(\n      value: index(local!details, \"minutes\", null()),\n      default: 0\n    ),\n    local!isBusinessDays: a!defaultValue(\n      value: index(local!details, \"isBusinessDays\", false()),\n      default: false()\n    ),\n    a!addDateTime(\n      startDateTime: ri!dateTime,\n      days: local!days,\n      hours: local!hours,\n      minutes: local!minutes,\n      useProcessCalendar: local!isBusinessDays\n    )\n  )\n)"
    },
    "_a-0000e9e5-e5dd-8000-9bc7-011c48011c48_232774": {
      "name": "CMGT_Document_DetermineFolderForDocument",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!folder: if(\n    rule!CMGT_UTIL_IsOnPortal(),\n    cons!CMGT_FLD_TEMPORARY_DOCUMENTS,\n    a!defaultValue(\n      rule!CMGT_UTIL_GetSubFolderByType(\n        parentFolderId: a!defaultValue(\n          ri!document[recordType!CMGT_Document.case.folderId],\n          ri!folderId\n        ),\n        folderType: if(\n          ri!document[recordType!CMGT_Document.isPrivate],\n          cons!CMGT_TXT_CASE_SUB_FOLDERS[1],\n          cons!CMGT_TXT_CASE_SUB_FOLDERS[2]\n        )\n      ),\n      cons!CMGT_FLD_TEMPORARY_DOCUMENTS\n    )\n  ),\n  local!folder\n)"
    },
    "000dec12-9ac5-8000-fa48-7f0000014e7a": {
      "name": "CMGT_EXT_Case_Create",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=pv!case[recordType!CMGT_Case.folderId]\n\n// Input: ?\n=\"Case \" & pv!case[recordType!CMGT_Case.friendlyId] & \" \" & cons!CMGT_TXT_CASE_SUB_FOLDERS[tp!instanceindex]\n\n// Input: ?\n=pv!case[recordType!CMGT_Case.caseId]\n\n// Input: ?\n=\"Case \" & pv!case[recordType!CMGT_Case.friendlyId]\n\n// Output: ?\nappian:record-field:v1:d81cdd0e-c54d-4b8e-beec-b7ae37fefe7f/8a0defaa-d618-4b4f-b9e9-3e39008cb60d\"]:ac!NewFolder\n\n// Input: ?\nrule!CMGT_EXT_CaseEvent_Constructor(case: pv!case)\n\n// Input: ?\n=recordType!CMGT_EventHistory_Case\n\n// Input: ?\npv!case[recordType!CMGT_Case.comments]\n\n// Input: ?\n=recordType!CMGT_Comment\n\n// Output: ?\nappian:record-relationship:v1:d81cdd0e-c54d-4b8e-beec-b7ae37fefe7f/82d4e17f-5091-41ca-9ef0-71efc1fa7b20\"]:AC!RecordsUpdated\n\n// Input: ?\nrule!CMGT_EXT_Case_WriteRecordsProperties(\n  cases: pv!case,\n  isInput: true\n)\n\n// Input: ?\n=recordType!CMGT_Case\n\n// Output: ?\nrule!CMGT_Case_WriteRecordsProperties(\n  cases: pv!case,\n  recordsUpdated: ac!RecordsUpdated,\n  isInput: false\n)\n\n// Output: ?\nac!RecordsUpdated[recordType!CMGT_Case.caseId]\n\n// Input: ?\n=pv!case[recordType!CMGT_Case.documents]\n\n// Input: ?\n={\n  pv!controlPanelFields.caseType,\n  pv!controlPanelFields.category\n}\n\n// Output: ?\nappian:record-relationship:v1:d81cdd0e-c54d-4b8e-beec-b7ae37fefe7f/82d4e17f-5091-41ca-9ef0-71efc1fa7b20\"]:rule!CMGT_EXT_Comments_GenerateComments_Logic(\n  timeStamp: pv!case[recordType!CMGT_Case.createdOn],\n  caseId: pv!caseId,\n  caseTitle: pv!case[recordType!CMGT_Case.title],\n  datasetUuids: pv!datasetUuids\n)\n\n// Output: ?\na!localVariables(\n  local!studioFieldsRules: index(\n    rule!CMGT_EXT_UTIL_ReturnDatsetDetailsByDatasetName(\n      datasetUuids:cons!CMGT_EXT_TXT_GENERATED_CASE_CATEGORY_UUIDS,\n\n    ),\n    \"studioFieldsRule\",\n    null\n  ),\n  local!studioFields: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      local!studioFieldsRules,\n      fv!item(\n        title: pv!case[recordType!CMGT_Case.title],\n        friendlyId: pv!case[recordType!CMGT_Case.friendlyId]\n      )\n    )\n  ),\n  index(\n    rule!CMGT_UTIL_RejectBlank(local!studioFields),\n    1,\n    null\n  )\n)\n\n// Input: ?\n=pv!case[recordType!CMGT_Case.createdBy]\n\n// Input: ?\n=parentProcessId\n\n// Input: ?\n=rule!CMGT_EXT_WFL_Case_GenerateCaseCreationTasks_Logic(\n  case:pv!case\n)\n\n// Input: ?\n=datasetUuids"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180568": {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "sail_code": "not(rule!CMGT_UTIL_IsBlank(ri!input))"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3626108": {
      "name": "CMGT_CFG_ENUM_ACT_REASSIGN_CASE",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_REASSIGN_CASE,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:255ef9a9-837a-4a2c-aef4-2c578cfb4807\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_CaseAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_CASE,\n  createdBy: \"system\"\n)"
    },
    "_a-0000ec3d-b406-8000-9bb2-011c48011c48_319222": {
      "name": "CMGT_EXT_Tag_AddEvent_Constructor",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!events: a!flatten(\n    {\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!tags,\n        expression: rule!CMGT_CaseEventHistory_Constructor(\n          caseId: fv!item[recordType!CMGT_CaseTagMap.caseId],\n          initiator: fv!item[recordType!CMGT_CaseTagMap.modifiedBy],\n          eventTypeId: cons!CMGT_REFID_EVENT_TYPE_CASE_ADD_TAG,\n          details: a!map(\n            tagId: tointeger(\n              fv!item[recordType!CMGT_CaseTagMap.tagId]\n            )\n          ),\n          timestamp: fv!item[recordType!CMGT_CaseTagMap.modifiedOn],\n          \n        )\n      )\n    }\n  ),\n  rule!CMGT_UTIL_RejectBlank(local!events)\n)"
    },
    "000cec12-8268-8000-fa37-7f0000014e7a": {
      "name": "CMGT_EXT_SUB_OpenNextTasks",
      "type": "Process Model",
      "sail_code": "// Output: ?\nrule!CMGT_SUB_OpenNextTasks_Logic_FromCreatedTasks(\n  createdTasks: pv!createdTasks\n)\n\n// Output: ?\nrule!CMGT_SUB_OpenNextTasks_Logic_FromCompletedTasks(\n  completedTasks: pv!completedTasks\n)\n\n// Input: ?\n=tasksToOpen\n\n// Output: ?\nrule!CMGT_EXT_Task_SetMetaData(\n  tasks: pv!tasksToOpen,\n  initiator: pp!initiator\n)\n\n// Input: ?\n=pv!tasksToOpen\n\n// Output: ?\nAC!RecordsUpdated"
    },
    "_a-0000ec06-54a3-8000-9cca-011c48011c48_2514276": {
      "name": "CMGT_EXT_UTIL_RandomInt",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!between),\n  null,\n  length(ri!between) < 2,\n  null,\n  a!localVariables(\n    local!lowerBound: if(\n      a!isNullOrEmpty(ri!between[1]),\n      1,\n      ri!between[1]\n    ),\n    local!numOfDigits: a!defaultValue(value: ri!numOfDigits, default: 0),\n    local!result: round(\n      rand() * (ri!between[2] - local!lowerBound),\n      local!numOfDigits\n    ) + local!lowerBound,\n    if(\n      local!numOfDigits = 0,\n      tointeger(local!result),\n      local!result\n    )\n  )\n)"
    },
    "_a-0000ed9c-71ef-8000-9d58-011c48011c48_3988353": {
      "name": "CMGT_CFG_ENUM_ACT_WORKFLOW_ROUTING",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:d21a949c-ac2f-4bf6-96ae-cdbbb7c64355\",\n  actionCode: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING,\n  image: cons!CMGT_DOC_IMAGE_AUTOMATION_TYPE_WORKFLOW_ROUTING,\n  description: #\"urn:appian:translation-string:v1:b6767c60-abdc-4042-8808-4caa75358eec\",\n  isCustom: false(),\n  PmConstant: cons!CMGT_PM_TASK_COMPLETE_AUTOMATED_TASK_WORKFLOW_ROUTING,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_WorkflowRouting_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_AUTOMATION,\n  createdBy: \"system\"\n)"
    },
    "_a-0000e9e5-e5dd-8000-9bc7-011c48011c48_232566": {
      "name": "CMGT_UTIL_GetSubFolderByType",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!parentFolderId),\n  tofolder(null),\n  tofolder(\n    a!localVariables(\n      local!allFolders: #\"SYSTEM_SYSRULES_forEach\"(\n        items: {\n          ri!parentFolderId,\n          folder(ri!parentFolderId, \"folderChildren\")\n        },\n        expression: a!map(\n          name: folder(fv!item, \"name\"),\n          folderId: fv!item\n        )\n      ),\n      local!filterForType: index(\n        a!flatten(\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!allFolders,\n            expression: if(\n              search(ri!folderType, fv!item.name),\n              fv!item.folderId,\n              {}\n            )\n          )\n        ),\n        1,\n        null\n      ),\n      a!defaultValue(local!filterForType, ri!parentFolderId)\n    )\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16474": {
      "name": "CMGT_EXT_CommentEvent_Constructor",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!events: a!match(\n    value: ri!context,\n    whenTrue: rule!CMGT_UTIL_IsBlank(ri!comments),\n    then: {},\n    equals: \"CASE\",\n    then: a!flatten(\n      {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: rule!CMGT_UTIL_RejectBlank(\n            {\n              ri!comments,\n              ri!comments[recordType!CMGT_Comment.childComments]\n            }\n          ),\n          expression: rule!CMGT_CaseEventHistory_Constructor(\n            caseId: fv!item[recordType!CMGT_Comment.caseId],\n            initiator: fv!item[recordType!CMGT_Comment.modifiedBy],\n            eventTypeId:  if(\n              a!isNotNullOrEmpty(\n                fv!item[recordType!CMGT_Comment.parentCommentId]\n              ),\n              cons!CMGT_REFID_EVENT_TYPE_CASE_REPLY_TO_COMMENT,\n              cons!CMGT_REFID_EVENT_TYPE_CASE_ADD_COMMENT\n            ),\n            details: a!localVariables(\n              local!detailsMap: a!map(\n                commentText: fv!item[recordType!CMGT_Comment.commentText],\n                taggedUsers: if(\n                  rule!CMGT_UTIL_IsBlank(\n                    fv!item[recordType!CMGT_Comment.userTags]\n                  ),\n                  {},\n                  rule!CMGT_UTIL_RejectBlank(\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: a!flatten(\n                        fv!item[recordType!CMGT_Comment.userTags]\n                      ),\n                      expression: if(\n                        fv!item[recordType!CMGT_CommentUserTag.isActive],\n                        tostring(\n                          fv!item[recordType!CMGT_CommentUserTag.username]\n                        ),\n                        null\n                      )\n                    )\n                  )\n                ),\n                documents: if(\n                  rule!CMGT_UTIL_IsBlank(\n                    fv!item[recordType!CMGT_Comment.commentDocumentMap]\n                  ),\n                  null,\n                  rule!CMGT_UTIL_RejectBlank(\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: a!flatten(\n                        fv!item[recordType!CMGT_Comment.commentDocumentMap]\n                      ),\n                      expression: if(\n                        fv!item[recordType!CMGT_CommentDocumentMap.isActive],\n                        a!localVariables(\n                          local!originalDocument: rule!CMGT_QR_GetDocument(\n                            documentId: fv!item[recordType!CMGT_CommentDocumentMap.documentId],\n                            returnType: \"SINGLE_OBJECT\"\n                          ),\n                          concat(\n                            document(\n                              documentId: local!originalDocument[recordType!CMGT_Document.appianDocId],\n                              property: \"name\"\n                            ),\n                            \".\",\n                            lower(\n                              document(\n                                documentId: local!originalDocument[recordType!CMGT_Document.appianDocId],\n                                property: \"extension\"\n                              )\n                            )\n                          )\n                        ),\n                        null\n                      )\n                    )\n                  )\n                )\n              ),\n              local!detailsMap\n            ),\n            timestamp:fv!item[recordType!CMGT_Comment.modifiedOn]\n          )\n        )\n      }\n    ),\n    equals: \"TASK\",\n    then: a!flatten(\n      {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: rule!CMGT_UTIL_RejectBlank(\n            {\n              ri!comments,\n              ri!comments[recordType!CMGT_Comment.childComments]\n            }\n          ),\n          expression: rule!CMGT_TaskEventHistory_Constructor(\n            taskId: fv!item[recordType!CMGT_Comment.taskId],\n            initiator: fv!item[recordType!CMGT_Comment.modifiedBy],\n            eventTypeId:  if(\n              a!isNotNullOrEmpty(\n                fv!item[recordType!CMGT_Comment.parentCommentId]\n              ),\n              cons!CMGT_REFID_EVENT_TYPE_CASE_REPLY_TO_COMMENT,\n              cons!CMGT_REFID_EVENT_TYPE_CASE_ADD_COMMENT\n            ),\n            details: a!localVariables(\n              local!detailsMap: a!map(\n                commentText: fv!item[recordType!CMGT_Comment.commentText],\n                taggedUsers: if(\n                  rule!CMGT_UTIL_IsBlank(\n                    fv!item[recordType!CMGT_Comment.userTags]\n                  ),\n                  {},\n                  rule!CMGT_UTIL_RejectBlank(\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: a!flatten(\n                        fv!item[recordType!CMGT_Comment.userTags]\n                      ),\n                      expression: if(\n                        fv!item[recordType!CMGT_CommentUserTag.isActive],\n                        tostring(\n                          fv!item[recordType!CMGT_CommentUserTag.username]\n                        ),\n                        null\n                      )\n                    )\n                  )\n                ),\n                documents: if(\n                  rule!CMGT_UTIL_IsBlank(\n                    fv!item[recordType!CMGT_Comment.commentDocumentMap]\n                  ),\n                  null,\n                  rule!CMGT_UTIL_RejectBlank(\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: a!flatten(\n                        fv!item[recordType!CMGT_Comment.commentDocumentMap]\n                      ),\n                      expression: if(\n                        fv!item[recordType!CMGT_CommentDocumentMap.isActive],\n                        a!localVariables(\n                          local!originalDocument: rule!CMGT_QR_GetDocument(\n                            documentId: fv!item[recordType!CMGT_CommentDocumentMap.documentId],\n                            returnType: \"SINGLE_OBJECT\"\n                          ),\n                          concat(\n                            document(\n                              documentId: local!originalDocument[recordType!CMGT_Document.appianDocId],\n                              property: \"name\"\n                            ),\n                            \".\",\n                            lower(\n                              document(\n                                documentId: local!originalDocument[recordType!CMGT_Document.appianDocId],\n                                property: \"extension\"\n                              )\n                            )\n                          )\n                        ),\n                        null\n                      )\n                    )\n                  )\n                )\n              ),\n              local!detailsMap\n            ),\n            timestamp:fv!item[recordType!CMGT_Comment.modifiedOn]\n          )\n        )\n      }\n    ),\n    default: {}\n  ),\n  rule!CMGT_UTIL_RejectBlank(local!events)\n)"
    },
    "_a-0000ec06-54a3-8000-9cca-011c48011c48_2514336": {
      "name": "CMGT_EXT_UTIL_AdjustDateTimeForDayLightSaving",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!isDayLightSavingStartDate: and(\n    isindaylightsavingtime(ri!dateTime, \"EST5EDT\") = false(),\n    isindaylightsavingtime(ri!dateTime + 1, \"EST5EDT\")\n  ),\n  if(\n    and(\n      local!isDayLightSavingStartDate,\n      totime(ri!dateTime) >= time(2, 0, 0, 0),\n      totime(ri!dateTime) < time(3, 0, 0, 0)\n    ),\n    a!addDateTime(startDateTime: ri!dateTime, hours: 1),\n    ri!dateTime\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_29424-cmgt": {
      "name": "CMGT_QR_GetComment",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Comment,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Comment.caseId,\n      operator: \"=\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Comment.taskId,\n      operator: \"=\",\n      value: ri!taskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Comment.commentId,\n      operator: \"in\",\n      value: ri!commentId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Comment.parentCommentId,\n      operator: \"is null\",\n      applyWhen: ri!onlyParentComments = true\n    )\n  },\n  logicalExpressions: ri!additionalLogicalExpressions,\n  fields: {\n    ri!fields,\n    if(\n      ri!includeCase,\n      recordType!CMGT_Comment.case,\n      {}\n    ),\n    if(\n      ri!includeTask,\n      recordType!CMGT_Comment.task,\n      {}\n    ),\n    if(\n      ri!includeUserTagsAndDocumentMaps,\n      {\n        recordType!CMGT_Comment.userTags,\n        recordType!CMGT_Comment.userTags,\n        recordType!CMGT_Comment.commentDocumentMap,\n        recordType!CMGT_Comment.commentDocumentMap\n      },\n      {}\n    ),\n    if(\n      ri!includeChildComments,\n      {\n        recordType!CMGT_Comment.childComments,\n        if(\n          ri!includeUserTagsAndDocumentMaps,\n          {\n            recordType!CMGT_Comment.childComments,\n            #\"urn:appian:record-relationship:v1:e57250b0-f216-4a23-afd9-39e7d532d302-cmgt/3fbb8e70-35d5-460e-aee9-d05940b75a05/18e4567c-a0ea-4ba1-bcff-220a1ef13668-cmgt/e7ba3b0b-ab6f-4600-9551-ea4a0d70d530-cmgt\",\n            recordType!CMGT_Comment.childComments,\n            #\"urn:appian:record-relationship:v1:e57250b0-f216-4a23-afd9-39e7d532d302-cmgt/3fbb8e70-35d5-460e-aee9-d05940b75a05/4482fa71-8c71-40a5-98f2-773715556151/71840277-2340-479f-be2c-7d05e30ba12f\"\n          },\n          {}\n        )\n      },\n      {}\n    ),\n    recordType!CMGT_Comment.createdByUser\n  },\n  pagingInfo: ri!pagingInfo,\n  relatedRecordData: {\n    ri!relatedRecordData,\n    if(\n      ri!includeChildComments,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Comment.childComments,\n        limit: 10,\n        sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!CMGT_Comment.createdOn,\n          ascending: true\n        )\n      ),\n      {}\n    )\n  },\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: {\n    recordType!CMGT_Comment.commentText,\n    #\"urn:appian:record-field:v1:e57250b0-f216-4a23-afd9-39e7d532d302-cmgt/18e4567c-a0ea-4ba1-bcff-220a1ef13668-cmgt/e7ba3b0b-ab6f-4600-9551-ea4a0d70d530-cmgt/SYSTEM_RECORD_TYPE_USER_FIELD_firstAndLastName\",\n    if(\n      ri!includeChildComments,\n      {\n        recordType!CMGT_Comment.childComments.commentText,\n        #\"urn:appian:record-field:v1:e57250b0-f216-4a23-afd9-39e7d532d302-cmgt/3fbb8e70-35d5-460e-aee9-d05940b75a05/18e4567c-a0ea-4ba1-bcff-220a1ef13668-cmgt/e7ba3b0b-ab6f-4600-9551-ea4a0d70d530-cmgt/SYSTEM_RECORD_TYPE_USER_FIELD_firstAndLastName\"\n      },\n      {}\n    )\n  },\n  sort: ri!sort\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16282": {
      "name": "CMGT_EXT_QR_GetCase",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Case,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.caseId,\n      operator: \"in\",\n      value: ri!caseIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.dueOn,\n      operator: \">\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate - 1,\n        useSystemTimeZone: true\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.dueOn,\n      operator: \"<=\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate,\n        useSystemTimeZone: true\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.caseTypeUuid,\n      operator: \"=\",\n      value: ri!caseTypeUuid\n    )\n  },\n  logicalExpressions: ri!additionalLogicalExpression,\n  fields: {\n    if(\n      ri!excludeRelatedRecords,\n      {},\n      recordType!CMGT_Case.status,\n      recordType!CMGT_Case.priority,\n      recordType!CMGT_Case.caseType\n    ),\n    if(\n      ri!includeAssignees,\n      {\n        recordType!CMGT_Case.roles,\n        recordType!CMGT_Case.roles\n      },\n      {}\n    ),\n    if(\n      ri!includePrimaryContact,\n      {\n        recordType!CMGT_Case.caseEntityMap,\n        #\"urn:appian:record-relationship:v1:d81cdd0e-c54d-4b8e-beec-b7ae37fefe7f/9455b8a8-142d-4976-8b8d-83403eedad6a/043457e2-ee0b-4c7a-8210-8671bbe73128/2a2b64c2-0530-4e0a-a173-d26a396e3cc9\"\n      },\n      {}\n    ),\n    if(\n      rule!CMGT_UTIL_IsBlank(value: ri!fields),\n      {},\n      ri!fields\n    )\n  },\n  relatedRecordData: {\n    if(\n      ri!includePrimaryContact,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Case.caseEntityMap,\n        limit: 1,\n        filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!CMGT_CaseEntityMap.entity.entityTypeId,\n          operator: \"=\",\n          value: cons!CMGT_REFID_ENTITY_TYPE_CONTACT\n        )\n      ),\n      {}\n    ),\n    if(\n      ri!includeAssignees,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Case.roles,\n        filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!CMGT_Role.roleTypeId,\n          operator: \"in\",\n          value: {\n            cons!CMGT_REFID_ROLE_TYPE_USER_ASSIGNEE,\n            cons!CMGT_REFID_ROLE_TYPE_GROUP_ASSIGNEE\n          }\n        )\n      ),\n      {}\n    )\n  },\n  pagingInfo: ri!pagingInfo\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16440": {
      "name": "CMGT_EXT_CaseEvent_Constructor",
      "type": "Expression Rule",
      "sail_code": "/*Only one not listed is doucments & tasks because they have separate sub processes that include audit capture*/\na!localVariables(\n  local!caseComments:rule!CMGT_QR_GetComment(\n    caseId:ri!case[recordType!CMGT_Case.caseId],\n    includeUserTagsAndDocumentMaps:true\n  ),\n  rule!CMGT_UTIL_RejectBlank(\n    {\n      rule!CMGT_CaseEventHistory_Constructor(\n        caseId: ri!case[recordType!CMGT_Case.caseId],\n        eventTypeId: cons!CMGT_REFID_EVENT_TYPE_CASE_CREATE,\n        timestamp: ri!case[recordType!CMGT_Case.createdOn],\n        initiator: ri!case[recordType!CMGT_Case.createdBy]\n      ),\n      if(\n        ri!case[recordType!CMGT_Case.statusId] = cons!CMGT_REFID_STATUS_CASE_OPEN,\n        {},\n        rule!CMGT_CaseEventHistory_Constructor(\n          eventTypeId: cons!CMGT_REFID_EVENT_TYPE_CASE_UPDATE_STATUS,\n          caseId: ri!case[recordType!CMGT_Case.caseId],\n          timestamp: ri!case[recordType!CMGT_Case.modifiedOn],\n          initiator: ri!case[recordType!CMGT_Case.modifiedBy],\n          details: a!map(\n            statusId: tointeger(\n              cons!CMGT_REFID_STATUS_CASE_IN_PROGRESS\n            )\n          )\n        )\n      ),\n      /* Tags   */\n      if(\n        rule!CMGT_UTIL_IsBlank(\n          ri!case[recordType!CMGT_Case.tagMap]\n        ),\n        null,\n        rule!CMGT_EXT_Tag_AddEvent_Constructor(\n          tags: ri!case[recordType!CMGT_Case.tagMap],\n\n        )\n      ),\n      /*Roles  */\n      if(\n        rule!CMGT_UTIL_IsBlank(\n          ri!case[recordType!CMGT_Case.roles]\n        ),\n        null,\n        rule!CMGT_EXT_Role_AddEvent_Constructor(\n          roles: ri!case[recordType!CMGT_Case.roles],\n          context: \"CASE\"\n        )\n      ),\n      /*Comments*/\n      if(\n        rule!CMGT_UTIL_IsBlank(\n          local!caseComments\n        ),\n        null,\n        rule!CMGT_EXT_CommentEvent_Constructor(\n          comments: local!caseComments,\n          context: \"CASE\"\n        )\n      ),\n      /* - Documents*/\n      if(\n        rule!CMGT_UTIL_IsBlank(\n          ri!case[recordType!CMGT_Case.documents]\n        ),\n        {},\n        rule!CMGT_EXT_Document_SetEvents(\n          documents: ri!case[recordType!CMGT_Case.documents],\n          eventType: \"CREATE\",\n          context: \"CASE\"\n        )\n      ),\n      /*  Related Cases  */\n      if(\n        rule!CMGT_UTIL_IsBlank(\n          ri!case[recordType!CMGT_Case.relatedCaseMap]\n        ),\n        null,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!case[recordType!CMGT_Case.relatedCaseMap],\n          expression: rule!CMGT_CaseEventHistory_Constructor(\n            caseId: fv!item[recordType!CMGT_RelatedCaseMap.caseId],\n            initiator: fv!item[recordType!CMGT_RelatedCaseMap.modifiedBy],\n            eventTypeId: cons!CMGT_REFID_EVENT_TYPE_CASE_ADD_RELATED_CASE,\n            timestamp: fv!item[recordType!CMGT_RelatedCaseMap.modifiedOn],\n            details: a!map(\n              relatedCaseId: fv!item[recordType!CMGT_RelatedCaseMap.relatedCaseId],\n              relationshipMapTypeId: fv!item[recordType!CMGT_RelatedCaseMap.relationshipMapTypeId]\n            )\n          )\n        )\n      )\n    }\n  )\n)\n"
    },
    "_a-0000ec06-54a3-8000-9cca-011c48011c48_2514351": {
      "name": "CMGT_EXT_UTIL_RandomXMembersFromGroup",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!memberType: a!defaultValue(value: ri!memberType, default: \"USER\"),\n  local!includeServiceAccounts: a!defaultValue(\n    value: ri!includeServiceAccounts,\n    default: false()\n  ),\n  local!includeAllMembers: a!defaultValue(\n    value: ri!includeAllMembers,\n    default: false()\n  ),\n  /* Getting all service accounts */\n  local!serviceAccounts: if(\n    and(\n      local!includeServiceAccounts,\n      local!memberType = \"USER\"\n    ),\n    a!groupMembers(group: cons!CMGT_GRP_SERVICE_ACCOUNTS).data,\n    {}\n  ),\n  local!allGroupMembers: a!groupMembers(\n    group: ri!group,\n    direct: false,\n    memberType: local!memberType,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 10000)\n  ).data,\n  rule!CMGT_EXT_UTIL_RandomXObjectsFromArray(\n    array: if(\n      or(\n        local!includeAllMembers,\n        local!memberType = \"GROUP\"\n      ),\n      difference(\n        touser(local!allGroupMembers),\n        ri!excludeUsers\n      ),\n      /* By default returns only demo specific users from the given group */\n      difference(\n        intersection(\n          touser(local!allGroupMembers),\n          touser(\n            {\n              cons!CMGT_EXT_MALE_USERNAMES,\n              cons!CMGT_EXT_FEMALE_USERNAMES,\n              local!serviceAccounts\n            }\n          )\n        ),\n        ri!excludeUsers\n      )\n    ),\n    noOfObjects: ri!noOfMembers\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_29411": {
      "name": "CMGT_QR_GetTask",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Task,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  groupByFields: ri!groupByFields,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.taskId,\n      operator: \"in\",\n      value: ri!taskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.caseId,\n      operator: \"in\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.statusId,\n      operator: \"in\",\n      value: ri!statusId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.dueOn,\n      operator: \">\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate - 1,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn, true)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.dueOn,\n      operator: \"<=\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn, true)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.isCurrent,\n      operator: \"=\",\n      value: a!defaultValue(ri!isCurrentTask, true),\n      applyWhen: a!defaultValue(ri!isCurrentTaskApplyWhen, true),\n      \n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.taskIntentionCode,\n      operator: \"in\",\n      value: a!defaultValue(\n        ri!taskIntentionCodes,\n        {\n          cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_WORKFLOW\n        }\n      )\n    ),\n    \n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!includeRoles,\n      {\n        recordType!CMGT_Task.roles\n      },\n      {}\n    ),\n    if(\n      ri!includeMilestone,\n      {\n        recordType!CMGT_Task.milestone\n      },\n      {}\n    ),\n    if(\n      ri!includeCase,\n      {\n        recordType!CMGT_Task.case\n      },\n      {}\n    ),\n    if(\n      ri!includeBranches,\n      {\n        recordType!CMGT_Task.beforeTaskInstanceBranches,\n        recordType!CMGT_Task.beforeTaskInstanceBranches,\n        recordType!CMGT_Task.beforeTaskInstanceBranches,\n        #\"urn:appian:record-relationship:v1:ee5aa46d-0228-430f-a794-1134a11fbcc0/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/3280de96-3518-4a9e-b8ae-854a84562f07\"\n      },\n      {}\n    ),\n    recordType!CMGT_Task.taskBehaviorType,\n    recordType!CMGT_Task.status,\n    recordType!CMGT_Task.taskResponseOptions,\n    recordType!CMGT_Task.selectedTaskResponseOption,\n    recordType!CMGT_Task.conditionSet,\n    recordType!CMGT_Task.conditionSet,\n    #\"urn:appian:record-relationship:v1:ee5aa46d-0228-430f-a794-1134a11fbcc0/5189c3ac-98e2-4a82-8598-2e9561baec9d/64b891e4-359b-48b4-9f47-2a3af4695c34/52813580-ecf3-49c7-be71-568ab452d54a\",\n    recordType!CMGT_Task.createCaseTask,\n    recordType!CMGT_Task.sendEmailTask,\n    recordType!CMGT_Task.sendEmailTask,\n    recordType!CMGT_Task.automationTaskAction\n  },\n  logicalExpressions: {\n    ri!additionalLogicalExpression,\n    rule!CMGT_Task_AutomationRuleGlobalLogicalExpression(\n      taskIntentionCodes: ri!taskIntentionCodes\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  relatedRecordData: ri!relatedRecordData,\n  sort: ri!sort,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e9fd-9441-8000-9bdc-011c48011c48_345334": {
      "name": "CMGT_QR_GetTaskBranch",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_TaskBranch,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  logicalExpressions: ri!additionalLogicalExpression,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_TaskBranch.beforeTaskInstance.taskId,\n      operator: \"in\",\n      value: ri!beforeTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_TaskBranch.taskBranchId,\n      operator: \"in\",\n      value: ri!taskBranchId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_TaskBranch.isCurrent,\n      operator: \"in\",\n      value: a!defaultValue(\n        ri!isCurrent,\n        {true}\n      )\n    )\n  },\n  fields: {\n    a!defaultValue(ri!fields, {}),\n    recordType!CMGT_TaskBranch.beforeTaskInstance,\n    recordType!CMGT_TaskBranch.afterTaskInstance,\n    \n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000e9a5-4cb8-8000-9bac-011c48011c48_71234": {
      "name": "CMGT_UTIL_ConvertDatetoDatetime",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!date),\n  null,\n  a!localVariables(\n    local!sysTimeZone: if(\n      ri!useSystemTimeZone,\n      rule!CMGT_UTIL_SystemTimezone(),\n      usertimezone(loggedInUser())\n    ),\n    /*Adding the date with duration*/\n    /*Setting the 11.59 PM as due time duration*/\n    local!calculatedDueDateTime: datetime(\n      year(ri!date),\n      month(ri!date),\n      day(ri!date),\n      23,\n      59,\n      59\n    ),\n    gmt(\n      local!calculatedDueDateTime,\n      local!sysTimeZone\n    )\n  )\n)"
    },
    "_a-0000eab0-e049-8000-9c27-011c48011c48_1007763": {
      "name": "CMGT_Task_WriteRecordsProperties",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!isInput,\n  rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord(\n    records: ri!tasks,\n    relationships: {\n      recordType!CMGT_Task.beforeTaskInstanceBranches,\n      recordType!CMGT_Task.milestone,\n      recordType!CMGT_Task.selectedTaskResponseOption,\n      /*Do not write comments because we need to write documents      */\n      recordType!CMGT_Task.comments,\n      recordType!CMGT_Task.status\n    }\n  ),\n  rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n    processData: ri!tasks,\n    recordsUpdated: ri!recordsUpdated,\n    fksToParent: {\n      recordType!CMGT_Task.comments.taskId,\n      recordType!CMGT_Task.documents.taskId,\n      recordType!CMGT_Task.roles.taskId,\n      recordType!CMGT_Task.taskResponseOptions.taskId,\n      recordType!CMGT_Task.selectedTaskResponseOption.taskId,\n      recordType!CMGT_Task.conditionSet.taskId,\n      recordType!CMGT_Task.createCaseTask.taskId,\n      recordType!CMGT_Task.sendEmailTask.taskId\n    }\n  )\n)"
    },
    "_a-0000eab0-e049-8000-9c27-011c48011c48_1007781": {
      "name": "CMGT_Case_WriteRecordsProperties",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!isInput,\n  rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord(\n    records: ri!cases,\n    relationships: {\n      recordType!CMGT_Case.caseEntityMap,\n      recordType!CMGT_Case.tasks\n    }\n  ),\n  rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n    processData: ri!cases,\n    recordsUpdated: ri!recordsUpdated,\n    fksToParent: {\n      recordType!CMGT_Case.comments.caseId,\n      recordType!CMGT_Case.documents.caseId,\n      recordType!CMGT_Case.milestones.caseId,\n      recordType!CMGT_Case.relatedCaseMap.caseId,\n      recordType!CMGT_Case.roles.caseId,\n      recordType!CMGT_Case.tagMap.caseId\n    }\n  )\n)"
    },
    "_a-0000e9fd-9441-8000-9bdc-011c48011c48_345072": {
      "name": "CMGT_SUB_OpenNextTasks_Logic_FromCreatedTasks",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Get the other related tasks for the case*/\n  local!otherTasksToCheckAgainst: rule!CMGT_QR_GetTask(\n    caseId: ri!createdTasks[recordType!CMGT_Task.caseId]\n  ),\n  /*Determine which tasks to open*/\n  /*If there are already tasks open, then there's no need to start new tasks  */\n  local!tasksToOpen: if(\n    rule!CMGT_UTIL_IsNotBlank(\n      rule!CMGT_UTIL_Filter(\n        records: ri!createdTasks,\n        field: recordType!CMGT_Task.statusId,\n        value: {\n          cons!CMGT_REFID_STATUS_TASK_READY,\n          cons!CMGT_REFID_STATUS_TASK_IN_PROGRESS\n        }\n      )\n    ),\n    null,\n    a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        /*Loop over each task that could be opened (only ones in Queued state)*/\n        items: rule!CMGT_UTIL_Filter(\n          records: ri!createdTasks,\n          field: recordType!CMGT_Task.statusId,\n          value: cons!CMGT_REFID_STATUS_TASK_QUEUED\n        ),\n        expression: if(\n          /*Early exit if the task should start by default*/\n          fv!item[recordType!CMGT_Task.startsByDefault],\n          fv!item,\n          a!localVariables(\n            local!thisTask: fv!item,\n            /*Get the branches leaading into this task*/\n            local!beforeBranches: rule!CMGT_UTIL_Filter(\n              records: local!thisTask[recordType!CMGT_Task.beforeTaskInstanceBranches],\n              field: recordType!CMGT_TaskBranch.afterTaskInstanceUuid,\n              value: local!thisTask[recordType!CMGT_Task.taskInstanceUuid]\n            ),\n            /*Determine which branches have yet to be satisfied*/\n            local!unsatisfiedBeforeBranches: a!flatten(\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: local!beforeBranches,\n                expression: a!localVariables(\n                  local!thisBranch: fv!item,\n                  /*Get the specific task that leads into this branch (the previous task)*/\n                  local!beforeTaskForBranch: displayvalue(\n                    local!thisBranch[recordType!CMGT_TaskBranch.beforeTaskInstanceUuid],\n                    local!otherTasksToCheckAgainst[recordType!CMGT_Task.taskInstanceUuid],\n                    local!otherTasksToCheckAgainst,\n                    null\n                  ),\n                  if(\n                    tointeger(\n                      local!beforeTaskForBranch[recordType!CMGT_Task.taskBehaviorTypeId]\n                    ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                    fv!item,\n                    if(\n                      /*If there is no before task for this branch, consider it satisfied*/\n                      a!isNullOrEmpty(local!beforeTaskForBranch),\n                      {},\n                      if(\n                        /*If the task is not complete, or it's complete but the response option is incorrect, consider it unsatsified*/\n                        or(\n                          not(\n                            local!beforeTaskForBranch[recordType!CMGT_Task.isCompleted]\n                          ),\n                          local!thisBranch[recordType!CMGT_TaskBranch.taskResponseOptionUuid] <> local!beforeTaskForBranch[recordType!CMGT_Task.selectedTaskResponseOption.taskResponseOptionUuid]\n                        ),\n                        fv!item,\n                        {}\n                      )\n                    )\n                  )\n                )\n              )\n            ),\n            /*If there are no unsatisfied branches, it means this task can be opened*/\n            if(\n              a!isNullOrEmpty(local!unsatisfiedBeforeBranches),\n              fv!item,\n              {}\n            )\n          )\n        )\n      )\n    )\n  ),\n  if(\n    a!isNullOrEmpty(local!tasksToOpen),\n    {},\n    /*All initial tasks are opened irrespective of milestone    */\n    #\"urn:appian:function:v1:a:update\"(\n      local!tasksToOpen,\n      recordType!CMGT_Task.statusId,\n      cons!CMGT_REFID_STATUS_TASK_READY\n    )\n  )\n)"
    },
    "_a-0000e9fd-9441-8000-9bdc-011c48011c48_345321": {
      "name": "CMGT_SUB_OpenNextTasks_Logic_FromCompletedTasks",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Get the tasks following this task*/\n  local!afterTasks: rule!CMGT_QR_GetTaskBranch(\n    beforeTaskId: ri!completedTasks[recordType!CMGT_Task.taskId],\n    additionalLogicalExpression: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n      operator: \"OR\",\n      logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!completedTasks,\n        expression: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n          operator: \"AND_ALL\",\n          ignoreFiltersWithEmptyValues: true,\n          filters: {\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: recordType!CMGT_TaskBranch.beforeTaskInstanceUuid,\n              operator: \"=\",\n              value: fv!item[recordType!CMGT_Task.taskInstanceUuid]\n            ),\n            /*Ensure that each afterTaskBranch matches the taskReponseUuid of the completedTask if populated*/\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: recordType!CMGT_TaskBranch.taskResponseOptionUuid,\n              operator: \"=\",\n              value: fv!item[recordType!CMGT_Task.selectedTaskResponseOption.taskResponseOptionUuid]\n            )\n          }\n        )\n      )\n    ),\n    /*Only return next-up tasks that are not Ready and not Inprogress, this is what can be reopened (remember Completed tasks can be reopened)*/\n    additionalFilters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!CMGT_TaskBranch.afterTaskInstance.statusId,\n        operator: \"not in\",\n        value: rule!CMGT_UTIL_RejectBlank(\n          {\n            if(\n              and(\n                ri!completedTasks[recordType!CMGT_Task.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                ri!completedTasks[recordType!CMGT_Task.automationTaskAction.actionCode] = cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING,\n                ri!context = \"REOPEN\"\n              ),\n              null,\n              cons!CMGT_REFID_STATUS_TASK_READY\n            ),\n            cons!CMGT_REFID_STATUS_TASK_IN_PROGRESS\n          }\n        )\n      )\n    },\n    fields: {\n      recordType!CMGT_TaskBranch.afterTaskInstance,\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/45ed19eb-2545-4c96-9e19-72127f9d27a3\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/3280de96-3518-4a9e-b8ae-854a84562f07\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/5189c3ac-98e2-4a82-8598-2e9561baec9d\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/5189c3ac-98e2-4a82-8598-2e9561baec9d/64b891e4-359b-48b4-9f47-2a3af4695c34\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/5189c3ac-98e2-4a82-8598-2e9561baec9d/64b891e4-359b-48b4-9f47-2a3af4695c34/52813580-ecf3-49c7-be71-568ab452d54a\",\n      recordType!CMGT_TaskBranch.afterTaskInstance,\n      recordType!CMGT_TaskBranch.afterTaskInstance,\n      recordType!CMGT_TaskBranch.afterTaskInstance\n    }\n  )[recordType!CMGT_TaskBranch.afterTaskInstance],\n  /*need to get rid of duplicate leads into tasks configured in automations*/\n  local!uniqueAfterTasks: union(local!afterTasks, local!afterTasks),\n  local!completedAutomationTasks: rule!CMGT_UTIL_Filter(\n    records: ri!completedTasks,\n    field: recordType!CMGT_Task.automationTaskAction.actionCode,\n    value: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING\n  ),\n  /*Determine which tasks to open*/\n  local!automationTasksToOpen: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!completedAutomationTasks,\n      expression: a!localVariables(\n        local!evaluatedConditionSets: a!flatten(\n          index(\n            index(\n              fv!item,\n              recordType!CMGT_Task.conditionSet,\n              null()\n            ),\n            recordType!CMGT_ConditionSet.childConditionSet,\n            null()\n          )\n        ),\n        local!satisfiedConditionSets: if(\n          rule!CMGT_UTIL_IsBlank(local!evaluatedConditionSets),\n          null(),\n          rule!CMGT_UTIL_RejectBlank(\n            a!flatten(\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: local!evaluatedConditionSets,\n                expression: a!localVariables(\n                  local!conditionsMet: {\n                    index(\n                      a!flatten(\n                        index(\n                          fv!item,\n                          recordType!CMGT_ConditionSet.condition,\n                          null()\n                        )\n                      ),\n                      recordType!CMGT_Condition.isMet,\n                      null()\n                    )\n                  },\n                  if(\n                    a!match(\n                      value: fv!item[recordType!CMGT_ConditionSet.operatorCode],\n                      equals: cons!CMGT_TXT_SET_OPERATOR_OR,\n                      then: or(local!conditionsMet),\n                      equals: cons!CMGT_TXT_SET_OPERATOR_AND,\n                      then: and(local!conditionsMet),\n                      default: false()\n                    ),\n                    fv!item,\n                  null()\n                ))\n              )\n            )\n          )\n        ),\n        local!afterTaskBranches: rule!CMGT_UTIL_Filter(\n          records: rule!CMGT_UTIL_Filter(\n            records: a!flatten(\n              index(\n                local!uniqueAfterTasks,\n                recordType!CMGT_Task.beforeTaskInstanceBranches,\n                null()\n              )\n            ),\n            field: recordType!CMGT_TaskBranch.isCurrent,\n            value: true()\n          ),\n          field: recordType!CMGT_TaskBranch.beforeTaskInstance.taskInstanceUuid,\n          value: fv!item[recordType!CMGT_Task.taskInstanceUuid]\n        ),\n        local!afterTaskInstanceUUIDs: if(\n          rule!CMGT_UTIL_IsBlank(value: local!satisfiedConditionSets),\n          /*  Logic to return default automation after tasks to open             */\n          index(\n            rule!CMGT_UTIL_Filter(\n              records: local!afterTaskBranches,\n              field: recordType!CMGT_TaskBranch.conditionSetUuid,\n              value: null()\n            ),\n            recordType!CMGT_TaskBranch.afterTaskInstanceUuid,\n            null()\n          ),\n          /*    Logic to return the automation after tasks to open            */\n          index(\n            rule!CMGT_UTIL_Filter(\n              records: local!afterTaskBranches,\n              field: recordType!CMGT_TaskBranch.conditionSetUuid,\n              value: rule!CMGT_UTIL_Distinct(\n                value: local!satisfiedConditionSets[recordType!CMGT_ConditionSet.conditionSetUuid]\n              )\n            ),\n            recordType!CMGT_TaskBranch.afterTaskInstanceUuid,\n            null()\n          )\n        ),\n        local!finalAutomationTasksToOpen: rule!CMGT_UTIL_RejectBlank(\n          array: #\"SYSTEM_SYSRULES_forEach\"(\n            items: rule!CMGT_UTIL_Filter(\n              records: local!uniqueAfterTasks,\n              field: recordType!CMGT_Task.taskInstanceUuid,\n              value: local!afterTaskInstanceUUIDs\n            ),\n            /*If all the  required branches satisfied, it means this task can be opened*/\n            expression: a!localVariables(\n              local!currentTask: fv!item,\n              local!requiredBeforeBranches: rule!CMGT_UTIL_Filter(\n                records: rule!CMGT_UTIL_Filter(\n                  records: a!flatten(\n                    index(\n                      local!currentTask,\n                      recordType!CMGT_Task.beforeTaskInstanceBranches,\n                      null()\n                    )\n                  ),\n                  field: recordType!CMGT_TaskBranch.isCurrent,\n                  value: true\n                ),\n                field: recordType!CMGT_TaskBranch.isRequired,\n                value: true\n              ),\n              if(\n                and(\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    items: local!requiredBeforeBranches,\n                    expression: and(\n                      fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.isCompleted] = true(),\n                      if(\n                        fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                        fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.selectedTaskResponseOption.taskResponseOptionUuid] = fv!item[recordType!CMGT_TaskBranch.taskResponseOptionUuid],\n                        true\n                      )\n                    )\n                  )\n                ),\n                local!currentTask,\n                {}\n              )\n            )\n          )\n        ),\n        { local!finalAutomationTasksToOpen }\n      )\n    )\n  ),\n  local!otherTasksToOpen: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!uniqueAfterTasks,\n      expression: a!localVariables(\n        local!thisTask: fv!item,\n        local!taskBranches: rule!CMGT_UTIL_Filter(\n          records: local!thisTask[recordType!CMGT_Task.beforeTaskInstanceBranches],\n          field: recordType!CMGT_TaskBranch.isCurrent,\n          value: true()\n        ),\n        local!workflowRoutingAutomationTaskBranches: rule!CMGT_UTIL_Filter(\n          records: rule!CMGT_UTIL_Filter(\n            records: local!taskBranches,\n            field: recordType!CMGT_TaskBranch.beforeTaskInstance.taskBehaviorTypeId,\n            value: cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION\n          ),\n          field: recordType!CMGT_TaskBranch.beforeTaskInstance.automationTaskAction.actionCode,\n          value: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING\n        ),\n        /*Get the required branches leading into this task -- that's all we have to check at this stage*/\n        local!requiredBeforeBranches: difference(\n          rule!CMGT_UTIL_Filter(\n            records: rule!CMGT_UTIL_Filter(\n              records: local!thisTask[recordType!CMGT_Task.beforeTaskInstanceBranches],\n              field: recordType!CMGT_TaskBranch.isCurrent,\n              value: true\n            ),\n            field: recordType!CMGT_TaskBranch.isRequired,\n            value: true\n          ),\n          local!workflowRoutingAutomationTaskBranches\n        ),\n        /*Determine which branches have yet to be satisfied*/\n        /*At this stage we only have to confirm that there aren't required branches that arne't satisfied*/\n        local!unsatisfiedRequiredBeforeBranches: a!flatten(\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!requiredBeforeBranches,\n            expression: if(\n              /*If the task is not complete, or it's complete but the response option is incorrect, consider it unsatsified*/\n              or(\n                not(\n                  fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.isCompleted]\n                ),\n                fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.selectedTaskResponseOption.taskResponseOptionUuid] <> fv!item[recordType!CMGT_TaskBranch.taskResponseOptionUuid]\n              ),\n              fv!item,\n              {}\n            )\n          )\n        ),\n        /*If there are no unsatisfied required branches, it means this task can be opened*/\n        if(\n          and(\n            a!isNullOrEmpty(\n              local!unsatisfiedRequiredBeforeBranches\n            ),\n            or(\n              a!isNullOrEmpty(\n                value: local!workflowRoutingAutomationTaskBranches\n              ),\n              and(\n                ri!completedTasks[recordType!CMGT_Task.taskBehaviorTypeId] <> cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                ri!completedTasks[recordType!CMGT_Task.automationTaskAction.actionCode] <> cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING\n              )\n            )\n          ),\n          fv!item,\n          {}\n        )\n      )\n    )\n  ),\n  local!tasksToOpen: a!flatten(\n    {\n      local!automationTasksToOpen,\n      local!otherTasksToOpen\n    }\n  ),\n  if(\n    a!isNotNullOrEmpty(local!tasksToOpen),\n    /*All next tasks are opened irrespective of milestone    */\n    {\n      tasks: #\"urn:appian:function:v1:a:update\"(\n        local!tasksToOpen,\n        recordType!CMGT_Task.statusId,\n        cons!CMGT_REFID_STATUS_TASK_READY\n      ),\n      originalTasks: local!tasksToOpen\n    },\n    { tasks: {}, originalTasks: {} }\n  )\n)"
    },
    "000ceab4-6919-8000-077c-7f0000014e7a": {
      "name": "CMGT_SUB_DocumentStorage",
      "type": "Process Model",
      "sail_code": "// Output: ?\na!localVariables(\n  /*get case folder details for default folder destinatination*/\n  local!cases: rule!CMGT_QR_GetCase(\n    caseId: rule!CMGT_UTIL_Distinct(\n      pv!documents[recordType!CMGT_Document.caseId]\n    ),\n    executeWhen: a!isNotNullOrEmpty(\n      rule!CMGT_UTIL_Distinct(\n        pv!documents[recordType!CMGT_Document.caseId]\n      )\n    ),\n    excludeRelatedRecords: true(),\n    fields: {\n      recordType!CMGT_Case.folderId\n    }\n  ),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: pv!documents,\n    expression: a!map(\n      document: fv!item[recordType!CMGT_Document.appianDocId],\n      folderId: index(\n        rule!CMGT_UTIL_Filter(\n          records: local!cases,\n          field: recordType!CMGT_Case.caseId,\n          value: fv!item[recordType!CMGT_Document.caseId]\n        )[recordType!CMGT_Case.folderId],\n        1,\n        null\n      )\n    )\n  )\n)\n\n// Input: ?\n=pv!documents[tp!instanceindex][recordType!CMGT_Document.appianDocId]\n\n// Input: ?\n= rule!CMGT_Document_DetermineFolderForDocument( document: pv!documents[tp!instanceindex], folderId: rule!CMGT_UTIL_Filter( records: pv!documentFolders, field: \"document\", value: pv!documents[tp!instanceindex][recordType!CMGT_Document.appianDocId] ).folderId)"
    },
    "_a-0000ec34-7771-8000-9bb0-011c48011c48_101679": {
      "name": "CMGT_EXT_ENUM_DATASET",
      "type": "Expression Rule",
      "sail_code": "/*\nThe data rules for each type are mapped and retrieved with the dataset name where necessary.Here we are having the rule names without () and will be adding '()' in the rules where these rules are used\n    datasetName --> The constant containing the name of the dataset\n    caseRule-->The name of the rule containing the cases data for the dataset type\n    studioFieldsRule -->The name of the rule containing the studio fields data for the dataset type\n    referenceTaskRule --> The name of the rule containing the reference tasks data for the dataset type\n    taskBlockRule --> The name of the rule containing the task block rule for the dataset type\n    caseTypeWorkflowRule --> The name of the rule containing the case type workflow rule for the dataset type\n    documentRule --> The name of the rule containing the document rule for the dataset type\n    commentRule --> The name of the rule containing the comment rule for the dataset type\n    taskUpdateRule -->The name of the rule containing the task status update rule for the dataset type\n    deployments --> The respective dataset deployments needs to be passed in the below structure\n        a!map(\n            onInitialLoad: a!map(\n                              packageZip --> The package to be deployed only on initial deployment ,\n                              scripts--> The scriptsto be deployed only on initial deployment\n                              icfFile--> The ICF file to be deployed only on initial deployment\n                              ),\n            onEachLoad: a!map(\n                              packageZip --> The package to be deployed on each load except the initial load ,\n                              scripts--> The scripts to be deployed on each load except the initial load \n                              icfFile--> The ICF file to be deployed on each load except the initial load \n                              ),\n    )              \n-----------------------------------------------------------------------------------------------------------------------*/\n{\n  a!map(\n    datasetName: cons!CMGT_EXT_DATASET_RESIDENTIAL_PERMIT,\n    datasetUuid: cons!CMGT_EXT_TXT_GENERATED_CASE_CATEGORY_UUIDS[1],\n    caseRule: rule!CMGT_EXT_DATA_ResidentialPermit_Case,\n    studioFieldsRule: rule!CMGT_EXT_DATA_ResidentialPermit_CaseStudioFields,\n    referenceTaskRule: rule!CMGT_EXT_DATA_ResidentialPermit_ReferenceTasks,\n    taskBlockRule: rule!CMGT_EXT_DATA_ResidentialPermit_TaskBlocks,\n    caseTypeWorkflowRule: rule!CMGT_EXT_DATA_ResidentialPermit_WorkflowTasks,\n    documentRule: rule!CMGT_EXT_DATA_ResidentialPermit_Documents,\n    commentRule: rule!CMGT_EXT_DATA_ResidentialPermit_Comments,\n    taskUpdateRule: rule!CMGT_EXT_DATA_ResidentialPermit_Task_StatusUpdate,\n    automationRule: rule!CMGT_EXT_DATA_ResidentialPermit_AutomationRules,\n    emailTemplateRule: rule!CMGT_EXT_DATA_ResidentialPermit_EmailTemplates\n  ),\n  a!map(\n    datasetName: cons!CMGT_EXT_DATASET_FRAUDULENT_TRANSACTIONS,\n    datasetUuid: cons!CMGT_EXT_TXT_GENERATED_CASE_CATEGORY_UUIDS[2],\n    caseRule: rule!CMGT_EXT_DATA_FraudulentTransactions_Case,\n    studioFieldsRule: rule!CMGT_EXT_DATA_FraudulentTransactions_CaseStudioFields,\n    referenceTaskRule: rule!CMGT_EXT_DATA_FraudulentTransactions_ReferenceTasks,\n    taskBlockRule: rule!CMGT_EXT_DATA_FraudulentTransactions_TaskBlocks,\n    caseTypeWorkFlowRule: rule!CMGT_EXT_DATA_FraudulentTransactions_WorkflowTasks,\n    documentRule: rule!CMGT_EXT_DATA_FraudulentTransactions_Documents,\n    commentRule: rule!CMGT_EXT_DATA_FraudulentTransactions_Comments,\n    taskUpdateRule: rule!CMGT_EXT_DATA_FraudulentTransactions_Task_StatusUpdate,\n    automationRule: rule!CMGT_EXT_DATA_FraudulentTransactions_AutomationRules,\n    emailTemplateRule: rule!CMGT_EXT_DATA_FraudulentTransactions_EmailTemplates\n  )\n}"
    },
    "_a-0000eab0-e049-8000-9c27-011c48011c48_1011527": {
      "name": "CMGT_UTIL_DropNonWritableRelationshipsFromRecord",
      "type": "Expression Rule",
      "sail_code": "/*\nThe main rule to \"cleanse\" the input of a WriteRecords SS node to remove non-writable relationships.\n\nSTANDARD USAGE:\n- Use this in tandem with rule CMGT_UTIL_MergeWriteRecordIdsToProcessVariable (see that description)\n- In the input of a WriteRecords SS (NOT in a previous script task), do:\n  A - Expressionable input to \"Records\" intput\n  B - rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord(\n        records: pv![the pv to write],\n        relationships: {list of record relationships that are not allowed to be written}\n      )\n\nIMPORTANT GENERAL NOTES: \n- The reason to run this in the input of the WriteRecords SS instead of a previous script task\nis that, when used with CMGT_UTIL_MergeWriteRecordIdsToProcessVariable, you can maintain the relationships\nthat you had to drop before writing.\n  -> For example, if you are writing \"Case\" but it has a child-relationship \"Address\" that cannot be written,\n    - this will drop \"Address\" before attempting to write\n    - if the output is configured properly it will reattach \"Address\" in the output\n    - the overall result is that you basically ran the node as if \"Address\" was ignored, \n      so that you can use it later in the process flow\n*/\n#\"SYSTEM_SYSRULES_forEach\"(\n  items: a!flatten(ri!records),\n  expression: reduce(\n    rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord_Reducer(\n      record: _,\n      relationship: _\n    ),\n    fv!item,\n    ri!relationships\n  )\n)"
    },
    "_a-0000ed9c-71ef-8000-9d58-011c48011c48_3988340": {
      "name": "CMGT_CFG_ENUM_ACT_SEND_EMAIL",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_SEND_EMAIL,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:30808437-7386-42dc-8605-9d75e19508d3\",\n  image: cons!CMGT_DOC_IMAGE_AUTOMATION_TYPE_SEND_EMAIL,\n  description: #\"urn:appian:translation-string:v1:5efb7150-37e9-41f6-b9cc-ddbc1850e07d\",\n  isCustom: false(),\n  /*process to be run to send en email*/\n  PmConstant: cons!CMGT_PM_TASK_COMPLETE_AUTOMATED_TASK_SEND_EMAIL,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_SendEmail_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_AUTOMATION,\n  createdBy: \"system\"\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_20741": {
      "name": "CMGT_QR_GetDocument",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Document,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.caseId,\n      operator: \"=\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.taskId,\n      operator: \"=\",\n      value: ri!taskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.documentId,\n      operator: \"in\",\n      value: ri!documentId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.commentDocumentMap.commentId,\n      operator: \"=\",\n      value: ri!commentId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.documentName,\n      operator: \"in\",\n      value: ri!documentFileNames\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.modifiedOn,\n      operator: \"=\",\n      value: ri!includeModifiedOn\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Document.modifiedOn,\n      operator: \"<>\",\n      value: ri!excludeModifiedOn\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_Document.case,\n    recordType!CMGT_Document.task,\n    recordType!CMGT_Document.createdByUser,\n    recordType!CMGT_Document.modifiedByUser\n  },\n  pagingInfo: ri!pagingInfo,\n  sort: a!defaultValue(\n    value: ri!sort,\n    default: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!CMGT_Document.createdOn,\n      ascending: false\n    )\n  ),\n  relatedRecordData: ri!relatedRecordData,\n  groupByFields: ri!groupByFields,\n  logicalExpressions: ri!additionalLogicalExpression,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e9fa-aa45-8000-9bda-011c48011c48_293777": {
      "name": "CMGT_CaseEventHistory_Constructor",
      "type": "Expression Rule",
      "sail_code": "recordType!CMGT_EventHistory_Case(\n  recordType!CMGT_EventHistory_Case.caseId: ri!caseId,\n  recordType!CMGT_EventHistory_Case.timestamp: a!defaultValue(value: ri!timestamp, default: now()),\n  recordType!CMGT_EventHistory_Case.username: rule!CMGT_formatEventInitiator(initiator: ri!initiator),\n  recordType!CMGT_EventHistory_Case.caseEventTypeId: ri!eventTypeId,\n  recordType!CMGT_EventHistory_Case.details: if(\n    a!isNotNullOrEmpty(ri!details),\n    #\"SYSTEM_SYSRULES_toJson_v1\"(\n      value: ri!details,\n      removeNullOrEmptyFields: false\n    ),\n    null\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16337": {
      "name": "CMGT_EXT_AddDateTimeWithAdjustedDayLightSaving",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_EXT_AdjustDateTimeForDayLightSaving(\n  datetime: a!addDateTime(\n    startDateTime: ri!startDateTime,\n    years: ri!years,\n    months: ri!months,\n    days: ri!days,\n    hours: ri!hours,\n    minutes: ri!minutes,\n    seconds: ri!seconds,\n    useProcessCalendar: ri!useProcessCalendar,\n    processCalendarName: ri!processCalendarName\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_24762": {
      "name": "CMGT_QR_GetRole",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Role,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  fields: {\n    ri!fields,\n    recordType!CMGT_Role.usernameUser,\n    recordType!CMGT_Role.roleType,\n    recordType!CMGT_Role.createdByUser,\n    recordType!CMGT_Role.modifiedByUser,\n    recordType!CMGT_Role.case,\n    recordType!CMGT_Role.task\n  },\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Role.caseId,\n      operator: \"in\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Role.taskId,\n      operator: \"=\",\n      value: ri!taskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Role.roleTypeId,\n      operator: \"in\",\n      value: ri!roleTypeId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Role.username,\n      operator: \"in\",\n      value: ri!usernames\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Role.groupId,\n      operator: \"in\",\n      value: ri!groupIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Role.roleId,\n      operator: \"in\",\n      value: ri!roleId\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  groupByFields: ri!groupByFields,\n  sort: a!defaultValue(\n    ri!sort,\n    #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!CMGT_Role.modifiedOn,\n      ascending: false\n    )\n  ),\n  relatedRecordData: ri!relatedRecordData,\n  logicalExpressions: ri!additionalLogicalExpression,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "000beaeb-2dd9-8000-0981-7f0000014e7a": {
      "name": "CMGT_Task_Complete_AutomatedTask_Wrapper",
      "type": "Process Model",
      "sail_code": "// Output: ?\npv!index + 1\n\n// Input: ?\n=rule!CMGT_UTIL_Filter( records: a!flatten(pv!tasks), fieldValuePairs: { a!map( field: recordType!CMGT_Task.isCurrent, value: true ), a!map( field: recordType!CMGT_Task.taskBehaviorTypeId, value: cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION ) })\n\n// Output: ?\ncount({ ac!automatedTasks })\n\n// Input: ?\nrule!CMGT_UTIL_Filter(\n  records: rule!CMGT_CFG_ENUM_ACTIONS(),\n  field: \"actionCode\",\n  value: a!flatten(\n    pv!automatedTasks[recordType!CMGT_Task.automationTaskAction.actionCode]\n  )[pv!index],\n  /*To avoid list return type */\n  filterType: \"FIRST_MATCH\"\n).PmConstant\n\n// Input: ?\na!localVariables(\n  local!pmParamsEval: rule!CMGT_UTIL_Filter(\n    records: rule!CMGT_CFG_ENUM_ACTIONS(),\n    field: \"actionCode\",\n    value: a!flatten(\n      pv!automatedTasks[recordType!CMGT_Task.automationTaskAction.actionCode]\n    )[pv!index],\n    /*To avoid list return type */\n    filterType: \"FIRST_MATCH\"\n  ),\n  local!pmParamsEval.pmParameterEvalRule(\n    task: pv!automatedTasks[pv!index]\n  )\n)\n\n// Input: ?\n= {\n  tasks: #\"urn:appian:function:v1:a:update\"(\n    rule!CMGT_QR_GetTask(\n      taskId: pv!automatedTasks[recordType!CMGT_Task.taskId],\n      includeRoles: true(),\n      includeBranches: true(),\n      includeMilestone: true()\n    ),\n    recordType!CMGT_Task.statusId,\n    cons!CMGT_REFID_STATUS_TASK_COMPLETED\n  ),\n  initiator: cons!CMGT_TXT_AUTOMATED_SYSTEM,\n  automationEvaluationLoopExecutions: pv!automationEvaluationLoopExecutions,\n  context: pv!context\n}"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_56355": {
      "name": "CMGT_UTIL_SystemTimezone",
      "type": "Expression Rule",
      "sail_code": "usertimezone(\"Administrator\")"
    },
    "_a-0000e9ef-12e0-8000-9bce-011c48011c48_258837": {
      "name": "CMGT_SUB_SetCaseFolderSecurity_Logic",
      "type": "Expression Rule",
      "sail_code": "a!flatten(\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!cases,\n    expression: a!localVariables(\n      /*Get the public folder for the case (the one with runtime security)*/\n      local!folder: rule!CMGT_UTIL_GetSubFolderByType(\n        parentFolderId: fv!item[recordType!CMGT_Case.folderId],\n        folderType: cons!CMGT_TXT_CASE_SUB_FOLDERS[2]\n      ),\n      /*Get the current security*/\n      local!folderSecurity: rule!CMGT_PLUGIN_ReturnContentRoleMap(folder: local!folder),\n      local!currentEditorUsers: touser(\n        a!flatten(local!folderSecurity.editorUsers)\n      ),\n      /*Determine all users who should be in the security role map*/\n      /* 1) All roles for the case - roles will never be null*/\n      local!userRolesForCase: fv!item[recordType!CMGT_Case.roles.username],\n      local!usersWhoAreNotInternal: touser(\n        reject(\n          #\"urn:appian:function:v1:a:isusermemberofgroup?okey=a!isUserMemberOfGroup\"(\n            username: _,\n            groups: cons!CMGT_GRP_INTERNAL_USERS\n          ),\n          local!userRolesForCase\n        )\n      ),\n      if(\n        and(\n          a!isNullOrEmpty(local!usersWhoAreNotInternal),\n          a!isNullOrEmpty(local!currentEditorUsers)\n        ),\n        {},\n        a!localVariables(\n          /*Calculate the diff between current and desired security role map*/\n          local!userEditorsToAddToFolder: difference(\n            local!usersWhoAreNotInternal,\n            local!currentEditorUsers\n          ),\n          local!usersToRemoveFromFolder: difference(\n            local!currentEditorUsers,\n            local!usersWhoAreNotInternal\n          ),\n          /*Create an output of modifications to make, if there are some to make*/\n          if(\n            and(\n              a!isNullOrEmpty(local!userEditorsToAddToFolder),\n              a!isNullOrEmpty(local!usersToRemoveFromFolder)\n            ),\n            {},\n            {\n              a!map(\n                caseId: fv!item[recordType!CMGT_Case.caseId],\n                folder: local!folder,\n                editors: local!userEditorsToAddToFolder,\n                removes: local!usersToRemoveFromFolder,\n                admins: {},\n                viewers: {}\n              )\n            }\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ecf6-527e-8000-9bbc-011c48011c48_56681": {
      "name": "CMGT_CFG_ENUM_ACTIONS",
      "type": "Expression Rule",
      "sail_code": "/*Contains the list of all actions for use in the Automation \nand their attributes. */\n{\nrule!CMGT_CFG_ENUM_ACT_ASSIGN_CASE(),\nrule!CMGT_CFG_ENUM_ACT_REASSIGN_CASE(),\nrule!CMGT_CFG_ENUM_ACT_ASSIGN_TASK(),\nrule!CMGT_CFG_ENUM_ACT_REASSIGN_TASK(),\nrule!CMGT_CFG_ENUM_ACT_WORKFLOW_ROUTING(),\nrule!CMGT_CFG_ENUM_ACT_SEND_EMAIL()\n  /* to add a new action, copy the above expression rule and replace the \n  values with the process model constant and attributes \n  of the newly configured action */\n  \n}"
    },
    "_a-0000ea0e-71db-8000-9be6-011c48011c48_470477": {
      "name": "CMGT_TaskEventHistory_Constructor",
      "type": "Expression Rule",
      "sail_code": "recordType!CMGT_EventHistory_Task(\n  recordType!CMGT_EventHistory_Task.taskId: ri!taskId,\n  recordType!CMGT_EventHistory_Task.timestamp: a!defaultValue(value: ri!timestamp, default: now()),\n  recordType!CMGT_EventHistory_Task.username: rule!CMGT_formatEventInitiator(initiator: ri!initiator),\n  recordType!CMGT_EventHistory_Task.taskEventTypeId: ri!eventTypeId,\n  recordType!CMGT_EventHistory_Task.details: if(\n    a!isNotNullOrEmpty(ri!details),\n    #\"SYSTEM_SYSRULES_toJson_v1\"(value: ri!details),\n    null\n  )\n)"
    },
    "_a-0000ec06-54a3-8000-9cca-011c48011c48_2514373": {
      "name": "CMGT_EXT_UTIL_RandomXObjectsFromArray",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!array),\n  null,\n  a!match(\n    value: a!defaultValue(value: ri!noOfObjects, default: 1),\n    equals: 1,\n    then: index(\n      rule!CMGT_EXT_UTIL_ShuffleArray(array: ri!array),\n      1,\n      {}\n    ),\n    whenTrue: and(fv!value > 1, fv!value < length(ri!array)),\n    then: index(\n      rule!CMGT_EXT_UTIL_ShuffleArray(array: ri!array),\n      enumerate(fv!value) + 1,\n      {}\n    ),\n    /* Returning all the objects when the noOfObjects is greater than the array length    */\n    whenTrue: fv!value >= length(ri!array),\n    then: rule!CMGT_EXT_UTIL_ShuffleArray(array: ri!array),\n    default: {}\n  )\n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_145917": {
      "name": "CMGT_UTIL_Distinct",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(ri!value),\n  union(\n    a!flatten(ri!value),\n    a!flatten(ri!value)\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16481": {
      "name": "CMGT_EXT_Document_SetEvents",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!context,\n  equals: \"CASE\",\n  then: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!documents,\n    expression: /*EVENTS THAT ARE PROCESS-SPECIFIC (based on \"eventType\" input)*/\n    /*Case documents*/\n    a!match(\n      value: ri!eventType,\n      equals: \"DELETE\",\n      then: rule!CMGT_CaseEventHistory_Constructor(\n        caseId: fv!item[recordType!CMGT_Document.caseId],\n        initiator: fv!item[recordType!CMGT_Document.modifiedBy],\n        eventTypeId: cons!CMGT_REFID_EVENT_TYPE_CASE_DELETE_DOCUMENT,\n        details: a!map(\n          value: concat(\n            document(\n              documentId: fv!item[recordType!CMGT_Document.appianDocId],\n              property: \"name\"\n            ),\n            \".\",\n            lower(\n              document(\n                documentId: fv!item[recordType!CMGT_Document.appianDocId],\n                property: \"extension\"\n              )\n            )\n          )\n        ),\n        timestamp: fv!item[recordType!CMGT_Document.modifiedOn]\n      ),\n      equals: \"CREATE\",\n      then: rule!CMGT_CaseEventHistory_Constructor(\n        caseId: fv!item[recordType!CMGT_Document.caseId],\n        initiator: fv!item[recordType!CMGT_Document.modifiedBy],\n        eventTypeId: cons!CMGT_REFID_EVENT_TYPE_CASE_UPLOAD_DOCUMENT,\n        details: a!map(\n          value: concat(\n            document(\n              documentId: fv!item[recordType!CMGT_Document.appianDocId],\n              property: \"name\"\n            ),\n            \".\",\n            lower(\n              document(\n                documentId: fv!item[recordType!CMGT_Document.appianDocId],\n                property: \"extension\"\n              )\n            )\n          )\n        ),\n        timestamp: fv!item[recordType!CMGT_Document.modifiedOn]\n      ),\n      default: {}\n    )\n  ),\n  equals: \"TASK\",\n  then: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!documents,\n    expression: /*EVENTS THAT ARE PROCESS-SPECIFIC (based on \"eventType\" input)*/\n    /*Task documents*/a!match(\n      value: ri!eventType,\n      equals: \"DELETE\",\n      then: rule!CMGT_TaskEventHistory_Constructor(\n        taskId: fv!item[recordType!CMGT_Document.taskId],\n        initiator: fv!item[recordType!CMGT_Document.modifiedBy],\n        eventTypeId: cons!CMGT_REFID_EVENT_TYPE_TASK_DELETE_DOCUMENT,\n        details: a!map(\n          value: concat(\n            document(\n              documentId: fv!item[recordType!CMGT_Document.appianDocId],\n              property: \"name\"\n            ),\n            \".\",\n            lower(\n              document(\n                documentId: fv!item[recordType!CMGT_Document.appianDocId],\n                property: \"extension\"\n              )\n            )\n          )\n        ),\n        timestamp: fv!item[recordType!CMGT_Document.modifiedOn]\n      ),\n      equals: \"CREATE\",\n      then: rule!CMGT_TaskEventHistory_Constructor(\n        taskId: fv!item[recordType!CMGT_Document.taskId],\n        initiator: fv!item[recordType!CMGT_Document.modifiedBy],\n        eventTypeId: cons!CMGT_REFID_EVENT_TYPE_TASK_UPLOAD_DOCUMENT,\n        details: a!map(\n          value: concat(\n            document(\n              documentId: fv!item[recordType!CMGT_Document.appianDocId],\n              property: \"name\"\n            ),\n            \".\",\n            lower(\n              document(\n                documentId: fv!item[recordType!CMGT_Document.appianDocId],\n                property: \"extension\"\n              )\n            )\n          )\n        ),\n        timestamp: fv!item[recordType!CMGT_Document.modifiedOn]\n      ),\n      default: {}\n    )\n  ),\n  default: {}\n)"
    },
    "_a-0000e9c0-fc38-8000-9bb5-011c48011c48_118173": {
      "name": "CMGT_TaskBranch_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskBranches,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {},\n    /*Only modify these fields if they are currently null (default value)*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_TaskBranch.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_TaskBranch.isCurrent,\n        value: true()\n      ),\n      a!map(\n        field: recordType!CMGT_TaskBranch.isRequired,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16255": {
      "name": "CMGT_EXT_Role_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!roles,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    alwaysOverwrite: {},\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_Role.modifiedOn,\n        value: a!defaultValue(ri!timestamp,now())\n      ),\n      a!map(\n        field: recordType!CMGT_Role.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_Role.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_Role.createdOn,\n        value: a!defaultValue(ri!timestamp,now())\n      ),\n      a!map(\n        field: recordType!CMGT_Role.createdBy,\n        value: ri!initiator\n      )\n    }\n  )\n)"
    },
    "0009ec12-80d9-8000-fa34-7f0000014e7a": {
      "name": "CMGT_EXT_Task_Create",
      "type": "Process Model",
      "sail_code": "// Input: ?\nremove(\n  rule!CMGT_UTIL_RejectBlank(\n    array: pv!tasks[recordType!CMGT_Task.beforeTaskInstanceBranches]\n  ),\n  {\n    recordType!CMGT_TaskBranch.beforeTaskInstance,\n    recordType!CMGT_TaskBranch.afterTaskInstance\n  }\n)\n\n// Input: ?\n=recordType!CMGT_TaskBranch\n\n// Output: ?\nrule!CMGT_EXT_Task_SetMetaData(\n  tasks: pv!tasks,\n  initiator: pv!initiator\n)\n\n// Input: ?\n= { caseId: index( pv!tasks[recordType!CMGT_Task.caseId], 1, null ), parentProcessId: pv!parentProcessId, datasetUuids: pv!datasetUuids}\n\n// Input: ?\nrule!CMGT_Task_WriteRecordsProperties(\n  tasks: pv!tasks,\n  isInput: true\n)\n\n// Input: ?\n=recordType!CMGT_Task\n\n// Input: ?\n=rule!CMGT_QR_GetTask(\n  caseId: a!flatten(\n    pv!tasks[recordType!CMGT_Task.caseId]\n  )[1],\n  fields: {\n    recordType!CMGT_Task.conditionSet,\n    recordType!CMGT_Task.conditionSet,\n    recordType!CMGT_Task.automationTaskAction,\n    recordType!CMGT_Task.sendEmailTask,\n    recordType!CMGT_Task.taskResponseOptions,\n    recordType!CMGT_Task.beforeTaskInstanceBranches\n  }\n)\n\n// Input: ?\n=parentProcessId"
    },
    "_a-0000ed7d-5e46-8000-9d4b-011c48011c48_3821612": {
      "name": "CMGT_CFG_ENUM_ACT_REASSIGN_TASK",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_REASSIGN_TASK,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:22b56237-493d-43a4-99d4-4849ebaa4861\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_TaskAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_TASK,\n  createdBy: \"system\"\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180481": {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(a!flatten(ri!array)),\n  reject(a!isNullOrEmpty(_), a!flatten(ri!array))\n)"
    },
    "_a-0000eb60-4595-8000-9c6e-011c48011c48_1742745": {
      "name": "CMGT_WFL_QR_GetCaseTypeWorkflowTask",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask,\n  executeWhen: ri!executeWhen,\n  returnType: ri!returnType,\n  sort: ri!sort,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskBlockId,\n      operator: \"in\",\n      value: ri!taskBlockId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.milestoneId,\n      operator: \"=\",\n      value: ri!referenceMilestoneId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid,\n      operator: \"=\",\n      value: ri!caseTypeUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.isActive,\n      operator: \"in\",\n      value: {\n        true,\n        if(\n          a!defaultValue(ri!includeInactive, false),\n          false,\n          {}\n        )\n      }\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTaskId,\n      operator: \"=\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskId,\n      operator: \"=\",\n      value: ri!caseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskIntentionCode,\n      operator: \"in\",\n      value: a!defaultValue(ri!taskIntentionCodes,{cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_WORKFLOW})\n    ),\n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!includeMilestones,\n      {\n        recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceMilestone\n      },\n      {}\n    ),\n    if(\n      ri!includeCaseType,\n      {\n        recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseType\n      },\n      {}\n    ),\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTask,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTask,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskBehaviorType,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet,\n    #\"urn:appian:record-relationship:v1:d6ebee27-6e86-47e3-a9b8-71fdd0348854/ef9cc417-d6ce-4fee-bd86-fa71ab64f8a1/eb49dd52-e1ed-4e4c-a3ab-903f4eadb20c/aa71274b-fe14-4420-b400-573007a0049d\",\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction,\n  },\n  relatedRecordData: {\n    ri!relatedRecordData,\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.sortOrder,\n        ascending: true\n      )\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ec06-54a3-8000-9cca-011c48011c48_2514381": {
      "name": "CMGT_EXT_UTIL_ShuffleArray",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!arrayLength: count(ri!array),\n  local!shuffledIndicies: tointeger(\n    rule!CMGT_UTIL_Distinct(\n      value: floor(\n        rand(local!arrayLength * 10) * local!arrayLength\n      ) + 1\n    )\n  ),\n  index(ri!array, local!shuffledIndicies, {})\n)"
    },
    "_a-0000ea1d-36f5-8000-9bef-011c48011c48_538451": {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "sail_code": "/*Reference:\nhttps://community.appian.com/w/the-appian-playbook/846/generating-uuids-guids*/\nfn!lower(\n  concat(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "af326a29-a1c8-4399-a28d-996f85819d9e": {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    apply(\n      rule!CMGT_UTIL_Filter_CreateFieldValuePair(\n        field: _,\n        value: ri!value,\n        allFields: a!flatten(ri!field)\n      ),\n      a!flatten(ri!field)\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!CMGT_UTIL_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ec34-7771-8000-9bb0-011c48011c48_132003": {
      "name": "CMGT_EXT_UTIL_ReturnDatsetDetailsByDatasetName",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  rule!CMGT_UTIL_Filter(\n    records: rule!CMGT_EXT_ENUM_DATASET(),\n    field: \"datasetUuid\",\n    value: ri!datasetUuids\n  ),\n  cast(typeof(a!map()), fv!item)\n)"
    },
    "_a-0000ec06-54a3-8000-9cca-011c48011c48_2514329": {
      "name": "CMGT_EXT_UTIL_RandomDateTime",
      "type": "Expression Rule",
      "sail_code": "/*By default ignoring the day light saving time (2.00 AM to 3.00 AM of day light saving start date) \nas attempting to write this date might error out */\na!localVariables(\n  local!returnCount: a!defaultValue(value: ri!returnCount, default: 1),\n  local!dateTimes: #\"SYSTEM_SYSRULES_forEach\"(\n    items: enumerate(local!returnCount),\n    expression: rule!CMGT_EXT_UTIL_AdjustDateTimeForDayLightSaving(\n      dateTime: ri!toDate - rule!CMGT_EXT_UTIL_RandomInt(\n        between: { 0, tointeger(ri!toDate - ri!fromDate) },\n        numOfDigits: 2\n      )\n    )\n  ),\n  if(\n    ri!sortAscending,\n    rule!CMGT_EXT_UTIL_SortArray(array: local!dateTimes, ascending: true()),\n    local!dateTimes\n  )\n)"
    },
    "_a-0000ecf6-527e-8000-9bbc-011c48011c48_59897": {
      "name": "CMGT_CFG_ENUM_ACT_ASSIGN_TASK",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_ASSIGN_TASK,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:5f11c5ad-d08d-4d59-86d6-c7464038329c\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_TaskAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_TASK,\n  createdBy: \"system\"\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_19509": {
      "name": "CMGT_QR_GetCase",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Case,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.caseId,\n      operator: \"in\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.dueOn,\n      operator: \">\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate - 1,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn,true)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.dueOn,\n      operator: \"<=\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn,true)\n      )\n    )\n  },\n  logicalExpressions: ri!additionalLogicalExpression,\n  fields: {\n    ri!fields,\n    if(\n      ri!excludeRelatedRecords,\n      {},\n      {\n        recordType!CMGT_Case.status,\n        recordType!CMGT_Case.priority,\n        recordType!CMGT_Case.caseType\n      }\n    ),\n    if(\n      ri!includeAssignees,\n      {\n        recordType!CMGT_Case.roles,\n        recordType!CMGT_Case.roles\n      },\n      {}\n    ),\n    if(\n      ri!includePrimaryContact,\n      {\n        recordType!CMGT_Case.caseEntityMap,\n        #\"urn:appian:record-relationship:v1:d81cdd0e-c54d-4b8e-beec-b7ae37fefe7f/9455b8a8-142d-4976-8b8d-83403eedad6a/043457e2-ee0b-4c7a-8210-8671bbe73128/2a2b64c2-0530-4e0a-a173-d26a396e3cc9\"\n      },\n      {}\n    )\n  },\n  relatedRecordData: {\n    ri!relatedRecordData,\n    if(\n      ri!includePrimaryContact,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Case.caseEntityMap,\n        limit: 1,\n        filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!CMGT_CaseEntityMap.entity.entityTypeId,\n          operator: \"=\",\n          value: cons!CMGT_REFID_ENTITY_TYPE_CONTACT\n        )\n      ),\n      {}\n    ),\n    if(\n      ri!includeAssignees,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Case.roles,\n        filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!CMGT_Role.roleTypeId,\n          operator: \"in\",\n          value: {\n            cons!CMGT_REFID_ROLE_TYPE_USER_ASSIGNEE,\n            cons!CMGT_REFID_ROLE_TYPE_GROUP_ASSIGNEE\n          }\n        )\n      ),\n      {}\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568470": {
      "name": "CMGT_PLUGIN_ReturnContentRoleMap",
      "type": "Expression Rule",
      "sail_code": "returncontentrolemap(\n  a!defaultValue(ri!folder, ri!document),\n  false\n)"
    }
  }
}