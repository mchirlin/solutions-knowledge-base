{
  "_metadata": {
    "bundle_id": "AS_GCM_Manage_Clause_Inclusion_Reasons"
  },
  "objects": {
    "_a-0000e3e6-fb42-8000-9ba5-011c48011c48_187421": {
      "name": "AS_CO_UT_displayValue",
      "type": "Expression Rule",
      "sail_code": "displayvalue(\n  \n  ri!value,\n  \n  ri!inArray,\n  \n  ri!replacement,\n  \n  if(\n    \n    ri!firstIsDefault,\n    ri!replacement[1],\n    \n    ri!lastIsDefault,\n    ri!replacement[count(ri!replacement)],\n    \n    ri!customDefault\n  )\n)"
    },
    "_a-0000ed08-d796-8000-9dda-011c48011c48_14552306": {
      "name": "AS_CO_UT_Filter_Reducer",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!newIndices: a!match(\n    value: null,\n    /*Null groups and documents don't filter properly, adding logic to support that*/\n    whenTrue: and(\n      a!isNullOrEmpty(ri!fieldValuePair.value),\n      runtimetypeof(ri!records[ri!fieldValuePair.field]) = 'type!{http://www.appian.com/ae/types/2009}Group?list'\n    ),\n    then: wherecontains(\n      cast(\n        'type!{http://www.appian.com/ae/types/2009}Group',\n        null\n      ),\n      ri!records[ri!fieldValuePair.field]\n    ),\n    whenTrue: and(\n      a!isNullOrEmpty(ri!fieldValuePair.value),\n      runtimetypeof(ri!records[ri!fieldValuePair.field]) = 'type!{http://www.appian.com/ae/types/2009}Document?list'\n    ),\n    then: wherecontains(\n      cast(\n        'type!{http://www.appian.com/ae/types/2009}Document',\n        null\n      ),\n      ri!records[ri!fieldValuePair.field]\n    ),\n    whenTrue: ri!matchType = \"CONTAINS\",\n    then: where(\n      apply(\n        rule!AS_CO_UT_ContainsValueByField(\n          record: _,\n          field: ri!fieldValuePair.field,\n          value: touniformstring(ri!fieldValuePair.value)\n        ),\n        ri!records\n      )\n    ),\n    whenTrue: ri!matchType = \"EXACT\",\n    /*Standard filter logic*/\n    then: wherecontains(\n      touniformstring(ri!fieldValuePair.value),\n      touniformstring(ri!records[ri!fieldValuePair.field])\n    ),\n    default: fn!error(\n      \"Invalid matchType, must be one of: EXACT, CONTAINS\"\n    )\n  ),\n  if(\n    ri!matchingCriteria = \"ANY\",\n    union(ri!previousIndices, local!newIndices),\n    intersection(ri!previousIndices, local!newIndices)\n  )\n)"
    },
    "_a-0000e675-e3a8-8000-9bcb-011c48011c48_1454668": {
      "name": "AS_GCM_BL_returnSmartMatrixColumnForRefClauses",
      "type": "Expression Rule",
      "sail_code": "/*The rule returns all the possible combinations of columns*/\na!localVariables(\n  local!contractTypeIds: tointeger(\n    rule!AS_CO_UT_indexPath(\n      cdt: rule!AS_CO_UT_Filter(\n        records: ri!contractTypeMaps,\n        field: \"isActive\",\n        value: true\n      ),\n      field: \"contractType.contractTypeId\"\n    )\n  ),\n  if(\n    or(\n      ri!clauseSet.refCategory.refDataId = cons!AS_GCM_REF_ID_CATEGORY_AMENDMENT,\n      ri!clauseSet.refCategory.refDataId = cons!AS_GCM_REF_ID_CATEGORY_MODIFICATION,\n      toboolean(ri!clauseSet.isExistingVehicle) = true,\n      rule!AS_CO_UT_isBlank(local!contractTypeIds)\n    ),\n    null,\n    rule!AS_CO_UT_rejectNullValuesFromArray(\n      array: rule!AS_CO_UT_displayValueMultiple(\n        values: local!contractTypeIds,\n        inArray: {\n          cons!AS_GCM_CONTRACT_TYPE_ID_FP_SUP,\n          cons!AS_GCM_CONTRACT_TYPE_ID_CR_SUP,\n          cons!AS_GCM_CONTRACT_TYPE_ID_FP_RD,\n          cons!AS_GCM_CONTRACT_TYPE_ID_CR_RD,\n          cons!AS_GCM_CONTRACT_TYPE_ID_FP_SVC,\n          cons!AS_GCM_CONTRACT_TYPE_ID_CR_SVC,\n          cons!AS_GCM_CONTRACT_TYPE_ID_FP_CON,\n          cons!AS_GCM_CONTRACT_TYPE_ID_CR_CON,\n          cons!AS_GCM_CONTRACT_TYPE_ID_TM_LH,\n          cons!AS_GCM_CONTRACT_TYPE_ID_LMV,\n          cons!AS_GCM_CONTRACT_TYPE_ID_COM_SVC,\n          cons!AS_GCM_CONTRACT_TYPE_ID_DDR,\n          cons!AS_GCM_CONTRACT_TYPE_ID_AE,\n          cons!AS_GCM_CONTRACT_TYPE_ID_FAC,\n          cons!AS_GCM_CONTRACT_TYPE_ID_IND_DEL,\n          cons!AS_GCM_CONTRACT_TYPE_ID_TRN,\n          cons!AS_GCM_CONTRACT_TYPE_ID_SAP,\n          cons!AS_GCM_CONTRACT_TYPE_ID_UTL_SVC,\n          cons!AS_GCM_CONTRACT_TYPE_ID_CP_CS\n        },\n        replacement: if(\n          ri!returnRelationshipId,\n          {\n            recordType!AS GCM R Clause.fpSup.refDataId,\n            recordType!AS GCM R Clause.crSup.refDataId,\n            recordType!AS GCM R Clause.fpRd.refDataId,\n            recordType!AS GCM R Clause.crRd.refDataId,\n            recordType!AS GCM R Clause.fpSvc.refDataId,\n            recordType!AS GCM R Clause.crSvc.refDataId,\n            recordType!AS GCM R Clause.fpCon.refDataId,\n            recordType!AS GCM R Clause.crCon.refDataId,\n            recordType!AS GCM R Clause.tmLh.refDataId,\n            recordType!AS GCM R Clause.lmv.refDataId,\n            recordType!AS GCM R Clause.comSvc.refDataId,\n            recordType!AS GCM R Clause.ddr.refDataId,\n            recordType!AS GCM R Clause.ae.refDataId,\n            recordType!AS GCM R Clause.fac.refDataId,\n            recordType!AS GCM R Clause.indDel.refDataId,\n            recordType!AS GCM R Clause.trn.refDataId,\n            recordType!AS GCM R Clause.sap.refDataId,\n            recordType!AS GCM R Clause.utlSvc.refDataId,\n            recordType!AS GCM R Clause.cpCs.refDataId\n          },\n          {\n            recordType!AS GCM R Clause.fpSupId,\n            recordType!AS GCM R Clause.crSupId,\n            recordType!AS GCM R Clause.fpRdId,\n            recordType!AS GCM R Clause.crRdId,\n            recordType!AS GCM R Clause.fpSvcId,\n            recordType!AS GCM R Clause.crSvcId,\n            recordType!AS GCM R Clause.fpConId,\n            recordType!AS GCM R Clause.crConId,\n            recordType!AS GCM R Clause.tmLhId,\n            recordType!AS GCM R Clause.lmvId,\n            recordType!AS GCM R Clause.comSvcId,\n            recordType!AS GCM R Clause.ddrId,\n            recordType!AS GCM R Clause.aeId,\n            recordType!AS GCM R Clause.facId,\n            recordType!AS GCM R Clause.indDelId,\n            recordType!AS GCM R Clause.trnId,\n            recordType!AS GCM R Clause.sapId,\n            recordType!AS GCM R Clause.utlSvcId,\n            recordType!AS GCM R Clause.cpCsId\n          }\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ed08-d796-8000-9dda-011c48011c48_14552299": {
      "name": "AS_CO_UT_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    value: ri!fieldValuePairs,\n    default: #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AS_CO_UT_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(value: ri!filterType, default: \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ebe1-785a-8000-9d61-011c48011c48_11947076": {
      "name": "AS_GCM_QR_GetClauseInclusionReasons",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS GCM Clause Set Clause Inclusion Reason,\n  returnType: a!defaultValue(\n    value: ri!returnType,\n    default: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY\n  ),\n  executeWhen: and(\n    ri!executeWhen,\n    or(\n      any(\n        rule!AS_CO_UT_isNotBlank(_),\n        {\n          ri!additionalFilters,\n          ri!logicalExpression,\n          ri!aggregationFields\n        }\n      ),\n      rule!AS_CO_UT_isNotBlank(ri!reasonIds),\n      rule!AS_CO_UT_isNotBlank(ri!relationIds)\n    )\n  ),\n  fields: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      ri!fields,\n      if(\n        ri!includeRelatedRecords,\n        {\n          recordType!AS GCM Clause Set Clause Inclusion Reason.refContractType,\n          recordType!AS GCM Clause Set Clause Inclusion Reason.refTemplate,\n          recordType!AS GCM Clause Set Clause Inclusion Reason.ruleConditionVersion\n        },\n        {}\n      )\n    }\n  ),\n  /* To ensure proper null checks, we'll force all queryFilter values to not be null */\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM Clause Set Clause Inclusion Reason.reasonId,\n      operator: \"in\",\n      value: ri!reasonIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM Clause Set Clause Inclusion Reason.relationId,\n      operator: \"in\",\n      value: ri!relationIds\n    ),\n    ri!additionalFilters\n  },\n  aggregationFields: ri!aggregationFields,\n  relatedRecordData: ri!relatedRecordData\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76433": {
      "name": "AS_CO_UT_indexPath",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldsAndIndices: rule!AS_CO_UT_zINTERNAL_indexPath_nestedFieldArrayHandler(field: ri!field),\n\n  reduce(\n    index(_, _, ri!indexDefault),\n    ri!cdt,\n    local!fieldsAndIndices\n  )\n)"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39070": {
      "name": "AS_CO_UT_booleanDefaultFalse",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  if(\n    isnull(ri!boolean),\n    false,\n    ri!boolean\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782": {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  not(rule!AS_CO_UT_isBlank(ri!input))\n)"
    },
    "0009ebe9-8a70-8000-a7f1-7f0000014e7a": {
      "name": "AS GCM Manage Clause Inclusion Reasons",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=cons!AS_GCM_TXT_DATA_SOURCE\n\n// Input: ?\n=\"AS_GCM_INCLUSION_REASONS\"\n\n// Input: ?\n=pv!clauseSet.setId\n\n// Input: ?\n=pv!clauseSetTemplate.refTemplate.templateId\n\n// Input: ?\n= #\"SYSTEM_SYSRULES_toJson_v1\"( #\"SYSTEM_SYSRULES_forEach\"( items: pv!contractTypeMaps, expression: a!map( contractId: fv!item.contractType.contractTypeId, fieldName: tostring( rule!AS_GCM_BL_returnSmartMatrixColumnForRefClauses(contractTypeMaps: fv!item)[1] ) ) ))\n\n// Input: ?\n=pv!evalId\n\n// Input: ?\n=pv!satisfiedRuleIds\n\n// Input: ?\n=#\"SYSTEM_SYSRULES_toJson_v1\"( value: { { addedViaFAR: cons!AS_GCM_REF_ID_CLAUSE_ADDED_VIA_FAR_MATRIX, addedViaRule: cons!AS_GCM_REF_ID_CLAUSE_ADDED_VIA_RULE, addedViaTemplate: cons!AS_GCM_REF_ID_CLAUSE_ADDED_VIA_TEMPLATE, usageIncluded: cons!AS_GCM_REF_ID_USAGE_INCLUDED, usageRequired: cons!AS_GCM_REF_ID_USAGE_REQUIRED } })\n\n// Output: ?\na!localVariables(\n  local!result: a!match(\n    value: rule!AS_CO_UT_indexPath(\n      cdt: ac!Parameters,\n      field: \"OUT_REASON_IDS.REASON_ID\",\n      indexDefault: null()\n    ),\n    whenTrue: rule!AS_CO_UT_isNotBlank(fv!value),\n    then: rule!AS_CO_UT_indexPath(\n      cdt: ac!Parameters,\n      field: \"OUT_REASON_IDS.REASON_ID\",\n      indexDefault: null\n    ),\n    default: #\"SYSTEM_SYSRULES_fromJson_v1\"(\n      a!defaultValue(\n        value: rule!AS_CO_UT_indexPath(\n          cdt: ac!Parameters,\n          field: \"OUT_REASON_IDS\",\n          indexDefault: \"[0]\"\n        ),\n        default: \"[0]\"\n      )\n    )\n  ),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!result,\n    expression: recordType!AS GCM Clause Set Clause Inclusion Reason(\n      recordType!AS GCM Clause Set Clause Inclusion Reason.reasonId: fv!item\n    )\n  )\n)\n\n// Output: ?\npv!syncInstanceIndex+1\n\n// Input: ?\n=recordType!AS GCM Clause Set Clause Inclusion Reason\n\n// Input: ?\n= a!localVariables( local!relationIds: rule!AS_CO_UT_rejectNullValuesFromArray( array: index(pv!clauseSetClauses, \"relationId\", null) ), tointeger( todatasubset( arrayToPage: append( tointeger( rule!AS_GCM_QR_GetClauseInclusionReasons( returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY, executeWhen: a!isNotNullOrEmpty(local!relationIds), relationIds: local!relationIds, fields: recordType!AS GCM Clause Set Clause Inclusion Reason.reasonId )[recordType!AS GCM Clause Set Clause Inclusion Reason.reasonId] ), pv!clauseInclusionReasons[recordType!AS GCM Clause Set Clause Inclusion Reason.reasonId] ), pagingConfiguration: #\"SYSTEM_SYSRULES_pagingInfo\"( startIndex: ( a!defaultValue(pv!syncInstanceIndex, 1) - 1 ) * cons!AS_GCM_INT_SYNC_RECORDS_MAX_LIMIT + 1, batchSize: cons!AS_GCM_INT_SYNC_RECORDS_MAX_LIMIT ) ).data ))"
    },
    "_a-0000e6c8-d132-8000-9bbe-011c48011c48_469266": {
      "name": "AS_CO_UT_queryRecord",
      "type": "Expression Rule",
      "sail_code": "/*\n\nPLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE\n\nPlease DO NOT auto-format this rule\n\n*/\n\n\n/*Error handling*/\nif(\n  rule!AS_CO_UT_isBlank(ri!returnType),\n  fn!error(concat(\"Null `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  not(contains(rule!AS_CO_CONS_QE_RETURN_TYPES(), ri!returnType)),\n  fn!error(concat(\"Unknown `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  rule!AS_CO_UT_isBlank(ri!recordType),\n  fn!error(concat(\"Null `recordType` passed to AS_CO_UT_queryRecord.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` is required (cannot be null) for `returnType` DATA_SUBSET\")),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isNotBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` must be null when the `returnType` is not DATA_SUBSET, instead use `sort` to pass custom-sorting and `startIndex` & `batchSize` will be automatically calculated for you\")),\n  and(\n    not(isnull(ri!pagingInfo)),\n    rule!AS_CO_UT_isNotBlank(ri!sort)\n  ),\n  fn!error(concat(\"`sort` parameter must be null when `pagingInfo` is provided.  Use the sort field of the provided `pagingInfo` instead.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You must provide an input for `aggregationFields` when `returnType` is AGGREGATION\"),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!fields)\n  ),\n  fn!error(\"You cannot provide an input for `fields` when `returnType` is AGGREGATION.  Use `aggregationFields` instead.\"),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You cannot provide an input for `aggregationFields` when `returnType` is not AGGREGATION.  Use `fields` instead.\"),\n  and(\n    rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n    not(contains(\n      {cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY, cons!AS_CO_ENUM_QE_RETURN_TYPE_SINGLE_OBJECT, cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET},\n      ri!returnType\n    )),\n  ),\n  fn!error(\"'castToCdtType' is only supported for SINGLE_OBJECT, OBJECT_ARRAY, and DATA_SUBSET return types\"),\n\n  a!localVariables(\n\n    /*Determine the castResultToType*/\n    local!castResultToType: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   'type!{http://www.appian.com/ae/types/2009}Map',\n        /*SINGLE_OBJECT*/ a!defaultValue(ri!castToCdtType, ri!recordType),\n        /*OBJECT_ARRAY*/  rule!AS_CO_UT_returnArrayTypeNumber(type: a!defaultValue(ri!castToCdtType, ri!recordType)),\n        /*AGGREGATION*/   'type!{http://www.appian.com/ae/types/2009}Map?list',\n        /*TOTAL_COUNT*/   'type!{http://www.appian.com/ae/types/2009}Integer',\n      }\n    ),\n\n    /*Determine the batchSize*/\n    local!batchSize: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   ri!pagingInfo.batchSize,\n        /*SINGLE_OBJECT*/ 1,\n        /*OBJECT_ARRAY*/  a!defaultValue(ri!pagingInfo.batchSize, cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE),\n        /*AGGREGATION*/   cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE,\n        /*TOTAL_COUNT*/   1,\n      }\n    ),\n\n    /*Determine the pagingInfo*/\n    local!pagingInfo: if(\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n      /*Use specific pagingInfo for DATA_SUBSET*/\n      ri!pagingInfo,\n      /*Otherwise calculate pagingInfo for all other returnTypes*/\n      #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: local!batchSize,\n        sort: ri!sort\n      )\n    ),\n\n    /*Determine the fetchTotalCount*/\n    local!fetchTotalCount: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   true,\n        /*SINGLE_OBJECT*/ false,\n        /*OBJECT_ARRAY*/  false,\n        /*AGGREGATION*/   false,\n        /*TOTAL_COUNT*/   true,\n      }\n    ),\n\n    /*Execute the query*/\n    local!queryResult: a!refreshVariable(\n      value: if(\n        ri!executeWhen = false,\n        null(\n          if(\n            ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n            rule!AS_CO_TYPE_Dictionary(),\n            ri!recordType\n          )\n        ),\n        #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n          recordType: ri!recordType,\n          fields: a!defaultValue(\n            ri!fields,\n            ri!aggregationFields\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            logicalExpressions: {\n              #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                operator: \"AND\",\n                ignoreFiltersWithEmptyValues: true,\n                filters: a!defaultValue(ri!filters, {})\n              ),\n              a!defaultValue(ri!logicalExpression, {})\n            }\n          ),\n          pagingInfo: local!pagingInfo,\n          fetchTotalCount: local!fetchTotalCount,\n          relatedRecordData: ri!relatedRecordData\n        )\n      ),\n      refreshOnVarChange: ri!triggerRefresh,\n      refreshAfter: {\"RECORD_ACTION\"}\n    ),\n\n    /*Parse the queryResult*/\n    local!queryResultParse: choose(\n      rule!AS_CO_UT_chooseWherecontainsHelper(\n        value: ri!returnType,\n        inArray: rule!AS_CO_CONS_QE_RETURN_TYPES()\n      ),\n      /*Default, required value based on how AS_CO_UT_chooseWherecontainsHelper operates*/ \"\",\n      /*DATA_SUBSET*/   if(\n        rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n        /*Note that for a data subset, the parent is a map, but we allow casting the child 'data' field as well*/\n        rule!AS_CO_UT_updateCdtFieldsByFieldValuePairs(\n          cdt: local!queryResult,\n          fieldValuePairs: {\n            field: \"data\",\n            value: cast(\n              rule!AS_CO_UT_returnArrayTypeNumber(type: ri!castToCdtType),\n              local!queryResult.data\n            )\n          }\n        ),\n        local!queryResult\n      ),\n      /*SINGLE_OBJECT*/ local!queryResult.data,\n      /*OBJECT_ARRAY*/  local!queryResult.data,\n      /*AGGREGATION*/   local!queryResult.data,\n      /*TOTAL_COUNT*/   local!queryResult.totalCount,\n    ),\n\n    rule!AS_CO_UT_cast(\n      type: local!castResultToType,\n      value: local!queryResultParse\n    )\n  )\n)\n\n/*\n\nDOCUMENTATION\n\nThis rule is designed to minimize the overhead with querying data and then casting the result\n\n\nRequired Inputs:\n\n1. recordType\n- This is a recordtype! input of the data type to be queried against\n\n2. returnType\n- This depends on the purpose for the query, and should be one of the returnTypes in rule!AS_CO_CONS_QE_RETURN_TYPES\n-- DATA_SUBSET - This will return a DataSubset; pagingInfo is required\n-- SINGLE_OBJECT - This will return a single record whose type is the recordType; pagingInfo must be null\n-- ARRAY_OBJECT - This will return an array of records whose type is an array of the recordType; pagingInfo must be null\n-- AGGREGATION - This will return an array of Dictionaries; pagingInfo must be null\n---- NOTE: If you need Aggregation with paging controls, such as for a grid, use returnType DATA_SUBSET\n-- TOTAL_COUNT - This will return an Integer of the total count; pagingInfo must be null\n\n\nOptional Inputs:\n\n3. executeWhen\n- The query will not execute if this is false, the query will execute if this is true or null\n-- This is meant to operate in a similar manner to the showWhen parameter of components\n- Use this to skip execution of a query without needing to wrap if() statements around the rule\n-- Examples of this would be to skip querying if your filter value is a null ID\n- If the query does not execute, this will return a null value whose type is based on the returnType input\n\n4. triggerRefresh\n- By default, the query will always re-execute whenever any inputs change\n- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change (e.g. after a record action)\n\n5. filters\n- Array of filters to apply to the query, built with a!queryFilter()\n- These filters will be applied with an AND operator\n- These filters will apply in addition to the logicalExpression input, combining both with an AND operator\n\n6. logicalExpression\n- A logical expression to apply to the query, built with a!queryLogicalExpression()\n- This logical expression will apply in addition to the filters input, combining both with an AND operator\n\n7. aggregationFields\n- Aggregation to apply to the query, built with a!aggregationField()\n\n8. fields\n- List of recordFields and relatedRecordFields to return.  When querying a record, any relatedRecordFields are not returned\nby default, and must be specifically requested.\n\n9. pagingInfo\n- Paging info to apply to the query, built with a!pagingInfo() or derived from fv!pagingInfo in grids\n- This is required if passing returnType DATA_SUBSET, otherwise it must be null\n- For returnTypes that are not DATA_SUBSET, the batch size will be automatically calculated depending on the returnType\n-- For example, passing SINGLE_OBJECT will automatically apply a batch size of 1, whereas ARRAY_OBJECT and AGGREGATION will automatically apply a batch size of the defined query batch size maximum\n\n10. sort\n- Array of sort to apply to the query, built with a!sortInfo()\n- This is meant to be used with returnType ARRAY_OBJECT and AGGREGATION, since pagingInfo is not required for these, but a specified sort may be used\n- Cannot be used in conjunction with pagingInfo.sort\n\n11. castToCdtType\n- Any cdt type to the cast the result set. \n- This is meant to be used with only returnType OBJECT_ARRAY and SINGLE_OBJECT.\n\n*/"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_41232": {
      "name": "AS_CO_UT_displayValueMultiple",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    rule!AS_CO_UT_booleanDefaultFalse(ri!firstIsDefault),\n    rule!AS_CO_UT_booleanDefaultFalse(ri!lastIsDefault)\n  ),\n  fn!error(\n    \"firstIsDefault and lastIsDefault cannot both be true\"\n  ),\n  if(\n    and(\n      or(ri!firstIsDefault, ri!lastIsDefault),\n      rule!AS_CO_UT_isNotBlank(ri!customDefaults)\n    ),\n    fn!error(\n      \"customDefault will never be used and should not be passed when either firstIsDefault or lastIsDefault is true\"\n    ),\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!values,\n      expression: rule!AS_CO_UT_displayValue(\n        value: fv!item,\n        inArray: ri!inArray,\n        replacement: ri!replacement,\n        firstIsDefault: ri!firstIsDefault,\n        lastIsDefault: ri!lastIsDefault,\n        customDefault: index(ri!customDefaults, fv!index, null)\n      )\n    )\n  )\n)"
    },
    "_a-0000ed08-d796-8000-9dda-011c48011c48_14567642": {
      "name": "AS_CO_UT_ContainsValueByField",
      "type": "Expression Rule",
      "sail_code": "contains(\n  touniformstring(ri!record[ri!field]),\n  touniformstring(ri!value)\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76367": {
      "name": "AS_CO_UT_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AS_CO_UT_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536": {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    }
  }
}