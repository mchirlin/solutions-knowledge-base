{
  "_metadata": {
    "bundle_id": "AIA_Create_Extraction_Model"
  },
  "objects": {
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_76923": {
      "name": "SHRD_ReformatLabelAsKey",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!clean: cleanwith(ri!label, \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 \"),\n  local!words: split(local!clean, \" \"),\n  local!proper: joinarray(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!words,\n      expression: if(\n        fv!isFirst,\n        lower(fv!item),\n        proper(fv!item)\n      )\n    ),\n    \"\"\n  ),\n  local!proper\n)"
    },
    "_a-0000ee6e-3b90-8000-9bac-011c48011c48_73130": {
      "name": "AIA_Template_ToggleField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!useRecord: and(\n    a!isNotNullOrEmpty(ri!record),\n    a!isNotNullOrEmpty(ri!field)\n  ),\n  local!value: a!defaultValue(\n    ri!value,\n    if(\n      local!useRecord,\n      a!defaultValue(ri!record[ri!field], ri!defaultValue),\n      ri!defaultValue\n    )\n  ),\n  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n    spacing: \"SPARSE\",\n    items: {\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n            icon: if(\n              local!value,\n              \"toggle-on\",\n              \"toggle-off\"\n            ),\n            size: \"MEDIUM_PLUS\",\n            color: if(\n              local!value,\n              \"ACCENT\",\n              ri!brandingMap.gray3\n            ),\n            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n              saveInto: {\n                if(\n                  local!useRecord,\n                  a!save(\n                    ri!record[ri!field],\n                    not(local!value)\n                  ),\n                  {}\n                ),\n                ri!saveInto\n              }\n            ),\n            linkStyle: \"STANDALONE\",\n            altText: if(\n              local!value,\n              #\"urn:appian:translation-string:v1:2bcaa33e-f7f3-49e1-a731-448d50b81aa5\"(#\"urn:appian:translation-variable:v1:579fd534-6b9b-425f-bc9f-b634242559ae\": ri!label),\n              #\"urn:appian:translation-string:v1:5d5ccfce-4251-4290-af1d-2bca780b08dd\"(#\"urn:appian:translation-variable:v1:aa7f15e8-7ec1-4fe5-bee9-f84f3f6c85ca\": ri!label)\n            )\n          ),\n\n        ),\n        width: \"MINIMIZE\"\n      ),\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!label,\n              style: \"STRONG\",\n            ),\n            char(\n              10\n            ),\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!description,\n              color: ri!brandingMap.gray3\n            )\n          }\n        )\n      )\n    }\n  )\n)"
    },
    "b03c3875-eac2-4e36-bbbc-b012d9cd3c15": {
      "name": "AIA Create Extraction Model",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=deletedVersionsRecords\n\n// Output: ?\nAC!CountOfRecordsDeleted\n\n// Input: ?\n=pv!record\n\n// Input: ?\n=recordType!AIA Extraction Model\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\na!flatten(\n  #\"SYSTEM_SYSRULES_forEach\"(\n    pv!record[recordType!AIA Extraction Model.versions],\n    #\"urn:appian:function:v1:a:update\"(\n      fv!item,\n      recordType!AIA Model Version Example.modelVersionId,\n      pv!record[recordType!AIA Extraction Model.versions.modelVersionId]\n    )\n  )\n)\n\n// Input: ?\n=recordType!AIA Model Version Example\n\n// Input: ?\n=pv!fields\n\n// Input: ?\n=recordType!AIA Extraction Model Version Field\n\n// Output: ?\n#\"SYSTEM_SYSRULES_forEach\"(\n  a!flatten(pv!record[recordType!AIA Extraction Model.versions]),\n  #\"urn:appian:function:v1:a:update\"(\n    fv!item,\n    recordType!AIA Extraction Model Version Field.sectionId,\n    displayvalue(\n      fv!item[recordType!AIA Extraction Model Version Field.section],\n      a!flatten(pv!record[recordType!AIA Extraction Model.versions.sections.name]),\n      a!flatten(pv!record[recordType!AIA Extraction Model.versions.sections.id]),\n      null\n    )\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_101277": {
      "name": "AIA_ExtractionModel_Sub_ModelDetails",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!AIA_UTIL_LoadBrandingMap(),\n  local!extractionKey: rule!AIA_Extraction_GetModelByKey(\n    key: ri!extractionModel[recordType!AIA Extraction Model.key]\n  ),\n  local!keyBeforeUpdate: a!refreshVariable(\n    value: ri!extractionModel[recordType!AIA Extraction Model.key],\n    refreshOnReferencedVarChange: false()\n  ),\n  local!id: if(\n    a!isNullOrEmpty(\n      ri!extractionModel[recordType!AIA Extraction Model.useLandscapeView]\n    ),\n    1,\n    if(\n      ri!extractionModel[recordType!AIA Extraction Model.useLandscapeView] = false(),\n      1,\n      2\n    )\n  ),\n  #\"SYSTEM_SYSRULES_columnsLayout\"(\n    columns: {\n      #\"SYSTEM_SYSRULES_columnLayout\"(\n        width: \"WIDE\",\n        contents: {\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                width: \"3X\",\n                item: #\"SYSTEM_SYSRULES_textField\"(\n                  label: #\"urn:appian:translation-string:v1:1d2ee947-3116-4cca-8a1f-26fe5bcc2914\",\n                  labelPosition: \"ABOVE\",\n                  value: ri!extractionModel[recordType!AIA Extraction Model.name],\n                  saveInto: {\n                    a!save(\n                      ri!extractionModel[recordType!AIA Extraction Model.name],\n                      if(\n                        a!isNullOrEmpty(save!value),\n                        save!value,\n                        trim(save!value)\n                      )\n                    ),\n                    if(\n                      a!defaultValue(ri!isUpdate, false),\n                      {},\n                      a!save(\n                        ri!extractionModel[recordType!AIA Extraction Model.key],\n                        rule!SHRD_ReformatLabelAsKey(\n                          label: ri!extractionModel[recordType!AIA Extraction Model.name]\n                        )\n                      )\n                    )\n                  },\n                  validations: if(\n                    local!keyBeforeUpdate = ri!extractionModel[recordType!AIA Extraction Model.key],\n                    null,\n                    if(\n                      a!isNotNullOrEmpty(local!extractionKey),\n                      #\"urn:appian:translation-string:v1:01646892-24f8-4fc4-9743-02e148f59881\",\n                      null\n                    )\n                  ),\n                  characterLimit: 255,\n                  required: true\n                ),\n\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                width: \"1X\",\n                item: #\"SYSTEM_SYSRULES_textField\"(\n                  label: #\"urn:appian:translation-string:v1:2b3a2e79-0b85-4b52-bbf6-b2e8d08f1447\",\n                  readOnly: true,\n                  value: if(\n                    a!isNotNullOrEmpty(\n                      ri!ExtractionModel[recordType!AIA Extraction Model.key]\n                    ),\n                    ri!ExtractionModel[recordType!AIA Extraction Model.key],\n                    \"-\"\n                  )\n                )\n              )\n            }\n          ),\n          #\"SYSTEM_SYSRULES_textField\"(\n            label: #\"urn:appian:translation-string:v1:be96096c-d32a-4708-a91d-b5dda4f2f30c\",\n            labelPosition: \"ABOVE\",\n            value: ri!extractionModel[recordType!AIA Extraction Model.description],\n            saveInto: ri!extractionModel[recordType!AIA Extraction Model.description],\n            characterLimit: 255,\n            required: false\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(),\n          #\"SYSTEM_SYSRULES_cardChoiceField\"(\n            label: #\"urn:appian:translation-string:v1:15a9a086-e855-4486-a118-3a89c2f5a3aa\",\n            labelPosition: \"ABOVE\",\n            data: {\n              /*Manual Configuration*/\n              a!map(\n                id: 1,\n                value: false(),\n                icon: \"columns\",\n                primaryText: #\"urn:appian:translation-string:v1:c45e9f8d-6be6-4710-a893-3cf449fae2b7\",\n                secondaryText: #\"urn:appian:translation-string:v1:59929c27-c2a9-49e2-ad19-43e9e119884b\",\n                order: 1\n              ),\n              /*Describe Fields*/\n              a!map(\n                id: 2,\n                icon: \"layer-group\",\n                primaryText: #\"urn:appian:translation-string:v1:9afcefcd-9325-4efd-a63b-ce3a70e42cce\",\n                secondaryText: #\"urn:appian:translation-string:v1:7a5a383a-0bd0-4503-98b8-b263f7a2bb2c\",\n                order: 2\n              )\n            },\n            sort: {\n              #\"SYSTEM_SYSRULES_sortInfo\"(field: \"order\", ascending: true)\n            },\n            cardTemplate: #\"SYSTEM_SYSRULES_cardTemplateBarTextStacked\"(\n              id: fv!data.id,\n              primaryText: fv!data.primaryText,\n              secondaryText: fv!data.secondaryText,\n              icon: fv!data.icon,\n              iconColor: local!brandingMap.Gray4\n            ),\n            value: local!id,\n            saveInto: {\n              local!id,\n              a!save(\n                ri!extractionModel[recordType!AIA Extraction Model.useLandscapeView],\n                if(local!id = 1, false(), true())\n              )\n            },\n            maxSelections: 1,\n            showShadow: false()\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(),\n          rule!AIA_Extraction_Sub_ModelAdvancedSettings(\n            extractionModel: ri!extractionModel,\n            brandingMap: local!brandingMap\n          ),\n\n        },\n\n      ),\n      #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"EXTRA_NARROW\")\n    }\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_94194": {
      "name": "AIA_Extraction_GetModelByKey",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!key),\n  null,\n  #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Extraction Model,\n    filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Extraction Model.key,\n      operator: \"includes\",\n      value: ri!key\n    ),\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      1,\n      1\n    )\n  ).data\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12129": {
      "name": "AIA_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!brandingDefault: getbrandingconfig(\n    cons!AIA_DOC_DEFAULT_BRANDING_CONFIG,\n    true()\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!brandingDefault.defaultBranding.key,\n        local!brandingDefault.customBranding.key\n      },\n      {\n        local!brandingDefault.defaultBranding.value,\n        local!brandingDefault.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_54910": {
      "name": "AIA_Extraction_Sub_ModelAdvancedSettings",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!data: {\n    a!map(\n      label: #\"urn:appian:translation-string:v1:b4c5b2fa-2efa-4c02-8bc4-4483abf45026\",\n      description: #\"urn:appian:translation-string:v1:f1335769-cd4c-4332-916a-bebc374a7f3d\",\n      field: recordType!AIA Extraction Model.useBoundingBoxes,\n      defaultValue: true\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:66cb074d-ca1b-43ae-ad1c-6ca5f789bf69\",\n      description: #\"urn:appian:translation-string:v1:02f80e7c-5a8b-4757-8f52-4d2999483723\",\n      field: recordType!AIA Extraction Model.useAdvancedLayout,\n      defaultValue: false\n    ),\n    a!map(\n      label: #\"urn:appian:translation-string:v1:47f91894-b6c5-4818-b270-90f6a09d41af\",\n      description: #\"urn:appian:translation-string:v1:7b4e785f-673f-41af-bfc6-481d55aca6b0\",\n      field: recordType!AIA Extraction Model.useAutoRotation,\n      defaultValue: false\n    )\n  },\n  #\"SYSTEM_SYSRULES_boxLayout\"(\n    label: #\"urn:appian:translation-string:v1:56a1dc4a-e4aa-4411-90bb-4bb18e200214\",\n    labelHeadingTag: \"H3\",\n    isCollapsible: true,\n    style: ri!brandingMap.blue0,\n    showBorder: false,\n    isInitiallyCollapsed: false,\n    padding: \"NONE\",\n    contents: {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        showBorder: false,\n        padding: \"STANDARD\",\n        marginAbove: \"NONE\",\n        marginBelow: \"NONE\",\n        style: ri!brandingMap.AppianBackground,\n        contents: {\n          #\"SYSTEM_SYSRULES_forEach\"(\n            local!data,\n            rule!AIA_Template_ToggleField(\n              record: ri!extractionModel,\n              field: fv!item.field,\n              brandingMap: ri!brandingMap,\n              defaultValue: fv!item.defaultValue,\n              label: fv!item.label,\n              description: fv!item.description\n            )\n          )\n        }\n      )\n    }\n  )\n)"
    },
    "16fbbd81-808b-4034-9c28-8a7f0c99da0f": {
      "name": "AIA_ExtractionModel_RecordAction_UpdateDetails",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_formLayout_v1\"(\n  skipAutoFocus: true(),\n  label: #\"urn:appian:translation-string:v1:90eda86e-7c63-4761-9a46-214dfa85e4a2\",\n  contents: rule!AIA_ExtractionModel_Sub_ModelDetails(\n    extractionModel: ri!extractionModel,\n    isUpdate: true\n  ),\n  buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n    primaryButtons: {\n      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: #\"urn:appian:translation-string:v1:25a51cae-0560-410b-9b56-ba2b024e6364\",\n        submit: true,\n        style: \"SOLID\",\n        validate: true,\n        saveInto: {\n          a!save(\n            ri!extractionModel[recordType!AIA Extraction Model.modifiedBy],\n            loggedInUser()\n          ),\n          a!save(\n            ri!extractionModel[recordType!AIA Extraction Model.modifiedOn],\n            now()\n          )\n        }\n      )\n    },\n    secondaryButtons: {\n      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n        value: true,\n        saveInto: ri!cancel,\n        submit: true,\n        style: \"OUTLINE\",\n        validate: false\n      )\n    }\n  )\n)"
    },
    "_a-0000ec44-cb49-8000-9be6-011c48011c48_80190": {
      "name": "AIA_Test_GetLatestExtractionModel",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Model,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Extraction Model,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Extraction Model.modelId\n          )\n        }\n      )\n    ).data[recordType!AIA Extraction Model.modelId],\n    1,\n    null\n  ),\n  /*fields: {*/\n    /*'recordType!{f00f33ce-439e-4c81-9931-a244a643c0e8}AIA Extraction Model Version.relationships.{31afa576-bd49-4f56-a2db-1df39df27f26}extractionModel',*/\n    /*'recordType!{f00f33ce-439e-4c81-9931-a244a643c0e8}AIA Extraction Model Version.relationships.{3e78fcff-a033-4b81-a754-e8fff1062c32}fields'*/\n  /*},*/\n)"
    }
  }
}