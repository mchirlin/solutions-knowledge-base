{
  "_metadata": {
    "bundle_id": "AIA_Classification_Instance_-_reconcileInstance"
  },
  "objects": {
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_52446": {
      "name": "AIA_ClassificationInstance_RecordAction_Reconcile",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!options: a!defaultValue(\n    ri!ClassificationInstance[recordType!AIA Classification Instance.modelVersion.categories.name],\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Classification Model Version Category,\n      filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Classification Model Version Category.modelVersionId,\n        operator: \"=\",\n        value: ri!ClassificationInstance[recordType!AIA Classification Instance.modelVersionId]\n      ),\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        1,\n        1000,\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Classification Model Version Category.sortOrder,\n          ascending: true\n        )\n      )\n    ).data[recordType!AIA Classification Model Version Category.name]\n  ),\n  /*Load Branding Data for Styling*/\n  local!brandingMap: rule!AIA_UTIL_LoadBrandingMap(),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n              label: #\"urn:appian:translation-string:v1:b474d5fb-8889-465d-b1f3-8588844bba79\",\n              labelSize: \"MEDIUM_PLUS\",\n              labelColor: \"STANDARD\",\n              divider: \"NONE\",\n              marginAbove: \"LESS\",\n              marginBelow: \"NONE\",\n              labelHeadingTag: \"H1\"\n            )\n          },\n          padding: \"LESS\",\n          showBorder: false\n        ),\n        #\"SYSTEM_SYSRULES_horizontalLine\"(marginBelow: \"NONE\")\n      },\n      height: \"AUTO\",\n      padding: \"NONE\",\n      marginBelow: \"NONE\",\n      showBorder: false\n    ),\n    isTitleBarFixed: true,\n    showTitleBarDivider: true,\n    contentsWidth: \"FULL\",\n    contents: {\n      if(\n        ri!ClassificationInstance[recordType!AIA Classification Instance.modelVersion.allowMultipleOutputs] = true,\n        rule!AIA_ClassificationInstance_Reconcile_Sub_MultipleOutcomes(\n          classificationInstance: ri!ClassificationInstance,\n          options: local!options,\n          brandingMap: local!brandingMap\n        ),\n        rule!AIA_ClassificationInstance_Reconcile_Sub_SingleOutcome(\n          ClassificationInstance: ri!ClassificationInstance,\n          options: local!options,\n          brandingMap: local!brandingMap\n        )\n      )\n    },\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      /* Cancel Button */\n      secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n        submit: true(),\n        validate: false(),\n        value: true,\n        saveInto: ri!cancel,\n        loadingIndicator: true()\n      ),\n      /* Submit Button */\n      primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: #\"urn:appian:translation-string:v1:d16bad4f-bd7d-4749-973b-caf37acbd5cb\",\n        submit: true(),\n        validate: true(),\n        saveInto: {\n          a!save(\n            ri!ClassificationInstance[recordType!AIA Classification Instance.statusId],\n            cons!AIA_INSTANCE_STATUS_RECONCILED_MANUALLY\n          )\n        },\n        style: \"SOLID\"\n      )\n    ),\n    isButtonFooterFixed: true,\n    showButtonDivider: true\n  )\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_53548": {
      "name": "AIA_Classification_GetInstanceById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Classification Instance,\n  identifier: ri!identifier,\n  relatedRecordData: {\n    ri!relatedRecordData,\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Classification Instance.modelVersion,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Classification Model Version Category.sortOrder,\n        ascending: true\n      )\n    )\n  },\n  fields: {\n    recordType!AIA Classification Instance.outcomes,\n    recordType!AIA Classification Instance.modelVersion.model.modelId,\n    recordType!AIA Classification Instance.modelVersion.model.uuid,\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion,\n    a!defaultValue(ri!additionalFields, {})\n  }\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92467": {
      "name": "AIA_MTR_ClassificationInstanceClassifiedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179359": {
      "name": "AIA_MTR_ConfidenceThresholdDisabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_182002": {
      "name": "AIA_MTR_ClassificationModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180853": {
      "name": "AIA_MTR_ExtractionInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483991": {
      "name": "AIA_MTR_ModelTestSuiteUpdated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92592": {
      "name": "AIA_MTR_ExtractionInstanceValidationIgnore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483964": {
      "name": "AIA_MTR_ModelTestRunInitiated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92585": {
      "name": "AIA_MTR_ExtractionInstanceValidationAccept",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_125328": {
      "name": "AIA_FormatDocument",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!documentId),\n  try(document(ri!documentId, \"name\"), \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"),\n  if(\n    a!isNotNullOrEmpty(ri!instance),\n    a!localVariables(\n      local!isExtraction: runtimetypeof(ri!instance) = typeof(recordType!AIA Extraction Instance()),\n      if(\n        local!isExtraction,\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Extraction Instance.documentId],\n            ri!instance[recordType!AIA Extraction Instance.sourceDocumentId]\n          )\n        ),\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Classification Instance.documentId],\n            ri!instance[recordType!AIA Classification Instance.sourceDocumentId]\n          )\n        )\n      )\n    ),\n    \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92578": {
      "name": "AIA_MTR_ExtractionModelVersionAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec60-a08d-8000-9bee-011c48011c48_121190": {
      "name": "AIA_ViewEml",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!mailMap: #\"SYSTEM_SYSRULES_fromJson_v1\"(reademlfile(ri!eml)),\n  local!contents: a!refreshVariable(\n    value: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_textField\"(\n              label: \"From\",\n              labelPosition: \"ABOVE\",\n              value: local!mailMap.from,\n              refreshAfter: \"UNFOCUS\",\n              readOnly: true,\n              validations: {}\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_textField\"(\n              label: \"To\",\n              labelPosition: \"ABOVE\",\n              value: local!mailMap.to,\n              saveInto: {},\n              refreshAfter: \"UNFOCUS\",\n              readOnly: true,\n              validations: {}\n            )\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        labelPosition: \"COLLAPSED\",\n        showWhen: ri!style = \"SECTION\",\n        value: #\"SYSTEM_SYSRULES_richTextHeader\"(text: local!mailMap.subject)\n      ),\n      #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n        labelPosition: \"COLLAPSED\",\n        value: local!mailMap.body,\n        saveInto: {},\n        height: \"MEDIUM\",\n        readOnly: true,\n        validations: {}\n      )\n    },\n    refreshAlways: true\n  ),\n  if(\n    ri!style = \"SECTION\",\n    #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n      label: \"Email\",\n      labelSize: \"MEDIUM\",\n      labelHeadingTag: \"H2\",\n      labelColor: \"STANDARD\",\n      contents: local!contents,\n      divider: \"ABOVE\"\n    ),\n    #\"SYSTEM_SYSRULES_formLayout_v1\"(\n      skipAutoFocus: true(),\n      label: local!mailMap.subject,\n      contents: local!contents,\n      buttons: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n        buttons: {\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: \"Close\",\n            submit: true,\n            style: \"OUTLINE\"\n          )\n        },\n        align: \"START\",\n        marginBelow: \"NONE\"\n      )\n    )\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92488": {
      "name": "AIA_MTR_ExtractionInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee35-0ca2-8000-9ba6-011c48011c48_13646": {
      "name": "AIA_LogMetric",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!name,\n  /* Classification Model Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_CREATED,\n  then: rule!AIA_MTR_ClassificationModelCreated(),\n  /* Classification Instance Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ClassificationInstanceCreated(),\n  /* Classification Instance Reconciled */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ClassificationInstanceReconciled(),\n  /* Classification Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFIED_WITH_ERRORS,\n  then: rule!AIA_MTR_ClassificationInstanceClassifiedWithErrors(),\n  /* Classification Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFICATION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ClassificationInstanceError(),\n  \n  /* Extraction Model Created */\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_CREATED,\n  then: rule!AIA_MTR_ExtractionModelCreated(),\n  /* Extraction Instance Created */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ExtractionInstanceCreated(),\n  /* Extraction Instance Reconciled */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ExtractionInstanceReconciled(),\n  /* Extraction Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTED_WITH_ERRORS,\n  then: rule!AIA_MTR_ExtractionInstanceExtractedWithErrors(),\n  /* Extraction Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ExtractionInstanceError(),\n  \n  /* Triggered when AI review raises an error (field level) */\n  equals: cons!AIA_MTR_AI_REVIEW_FIELD,\n  then: rule!AIA_MTR_ExtractionInstanceFieldAiReview(),\n  /* Triggered when AI review raises an error (instance level, this instance has 1 or more errors raised by AI review) */\n  equals: cons!AIA_MTR_AI_REVIEW_INSTANCE,\n  then: rule!AIA_MTR_ExtractionInstanceAiReview(),\n  /* Triggered when model is created with AI review turned on OR AI review is turned on for a model */\n  equals: cons!AIA_MTR_AI_REVIEW_MODEL_VERSION,\n  then: rule!AIA_MTR_ExtractionModelVersionAiReview(),\n  /* Triggered when user clicks accept */\n  equals: cons!AIA_MTR_AI_REVIEW_ACCEPT,\n  then: rule!AIA_MTR_ExtractionInstanceValidationAccept(),\n  /* Triggered when user clicks ignored */\n  equals: cons!AIA_MTR_AI_REVIEW_IGNORE,\n  then: rule!AIA_MTR_ExtractionInstanceValidationIgnore(),\n  /*triggered when spot check ocnfigured*/\n  equals: cons!AIA_MTR_SPOT_CHECK_MODEL_VERSION,\n  then: rule!AIA_MTR_ModelVersionConfigureSampling(),\n  /* Triggered when a model validation rule of type AI validation creates a validation instance */\n  equals: cons!AIA_MTR_AI_VALIDATION_RULE_OCCURANCE,\n  then: rule!AIA_MTR_InstanceValidationAiRuleOccurance(),\n  /*Confidence Threshold Enabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_ENABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdEnabled(),\n  /*Confidence Threshold Disabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_DISABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdDisabled(),\n  /*Extraction Model Version Restored*/\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ExtractionModelVersionRestore(),\n  /*Classification Model Version Restored*/\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ClassificationModelVersionRestore(),\n  /*Model Test Suite Created*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_CREATED,\n  then: rule!AIA_MTR_ModelTestSuiteCreated(),\n  /*Model Test Suite Updated*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_UPDATED,\n  then: rule!AIA_MTR_ModelTestSuiteUpdated(),\n  /*Model Test Run Initiated*/\n  equals: cons!AIA_MTR_MODEL_TEST_RUN_INITIATED,\n  then: rule!AIA_MTR_ModelTestRunInitiated(),\n  /*Classification Model Version Created with Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_MODEL_VERSION_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationModelVersionCreated(),\n  /*Classification Instance Created for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceCreated(),\n  /*Classification Instance Reconciled for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceReconciled(),\n  default: null\n)"
    },
    "_a-0000eeb2-df20-8000-9bfe-011c48011c48_154565": {
      "name": "AIA_MTR_InstanceValidationAiRuleOccurance",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180846": {
      "name": "AIA_MTR_ClassificationModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180860": {
      "name": "AIA_MTR_ClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180834": {
      "name": "AIA_MTR_ExtractionModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "0003ec39-5e96-8000-fdb3-7f0000014e7a": {
      "name": "AIA Classification Reconcile Instance",
      "type": "Process Model",
      "sail_code": "// Input: ?\na!map(\n  instance: pv!ClassificationInstance,\n  instanceId: pv!ClassificationInstance[recordType!AIA Classification Instance.id],\n  uuid: pv!ClassificationInstance[recordType!AIA Classification Instance.modelVersion.model.uuid]\n)\n\n// Input: ?\ncons!AIA_REF_TRIGGER_TYPE_ID_RECONCILE\n\n// Input: ?\n=pv!ClassificationInstance\n\n// Input: ?\ntrue()\n\n// Output: ?\nac!ProcessInfo.pv.ClassificationInstance\n\n// Input: ?\n=a!flatten( { rule!AIA_LogMetric( name: cons!AIA_MTR_CLASSIFICATION_INSTANCE_RECONCILED), if( pv!ClassificationInstance[recordType!AIA Classification Instance.modelVersion.allowMultipleOutputs], rule!AIA_LogMetric( name: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_RECONCILED ), {} ) })"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12129": {
      "name": "AIA_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!brandingDefault: getbrandingconfig(\n    cons!AIA_DOC_DEFAULT_BRANDING_CONFIG,\n    true()\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!brandingDefault.defaultBranding.key,\n        local!brandingDefault.customBranding.key\n      },\n      {\n        local!brandingDefault.defaultBranding.value,\n        local!brandingDefault.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505631": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179352": {
      "name": "AIA_MTR_ConfidenceThresholdEnabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eea3-15ee-8000-9bd4-011c48011c48_137447": {
      "name": "AIA_MTR_ModelVersionConfigureSampling",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed57-e2bf-8000-9c54-011c48011c48_15225797": {
      "name": "AIA_ViewCsv",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_paragraphField\"(\n  label: rule!AIA_FormatDocument(\n    documentId: ri!document,\n  ),\n  labelPosition: \"COLLAPSED\",\n  height: \"TALL\",\n  readOnly: true,\n  value: rule!SHRD_ReadDocumentContent(\n    document: ri!document\n  )\n)"
    },
    "_a-0000ec2c-7618-8000-9bc8-011c48011c48_912344": {
      "name": "AIA_UTIL_displayInlineDocument",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!showWhen: a!defaultValue(ri!showWhen, true),\n  a!match(\n    value: try(\n      lower(document(ri!documentId, \"extension\")),\n      null\n    ),\n    whenTrue: rule!AIA_IsDocumentExtension(\n      document: ri!documentId,\n      extensions: cons!AIA_AI_SUPPORTED_DOC_TYPES\n    ),\n    then: reconcileDocumentViewer(\n      label: rule!AIA_FormatDocument(\n        documentId: ri!documentId,\n      ),\n      labelPosition: \"COLLAPSED\",\n      documentUrl: document(\n        ri!documentId,\n        \"url\"\n      ),\n      height: ri!height,\n      showWhen: local!showWhen\n    ),\n    whenTrue: contains(cons!AIA_TEXT_BASED_EXTENSIONS, tostring(fv!value)),\n    then: #\"SYSTEM_SYSRULES_cardLayout\"(\n      padding: \"STANDARD\",\n      showBorder: false,\n      contents: rule!AIA_ViewCsv(document: ri!documentId),\n      showWhen: local!showWhen\n    ),\n    equals: \"eml\",\n    then: #\"SYSTEM_SYSRULES_cardLayout\"(\n      padding: \"STANDARD\",\n      showBorder: false,\n      contents: rule!AIA_ViewEml(eml: ri!documentId, style: \"SECTION\"),\n      showWhen: local!showWhen\n    ),\n    default: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: #\"urn:appian:translation-string:v1:c6755e7b-0e3e-4450-a5e8-83768c5f51ff\"\n        ),\n        \" \",\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text:#\"urn:appian:translation-string:v1:cdd19acd-88fc-46ad-9184-5bcf62ebd2b3\",\n          link: #\"SYSTEM_SYSRULES_documentDownloadLink\"(document: ri!documentId),\n          linkStyle: \"STANDALONE\"\n        ),\n        \" \",\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(text:#\"urn:appian:translation-string:v1:8831778e-03c2-46c1-aeae-baa89c699eca\")\n      },\n      showWhen: local!showWhen\n    )\n  )\n)"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_181995": {
      "name": "AIA_MTR_ExtractionModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee3e-060c-8000-9bb8-011c48011c48_203441": {
      "name": "SHRD_ReadDocumentContent",
      "type": "Expression Rule",
      "sail_code": "/*readdocumentcontent(ri!document)*/\n\nqueryfile(\n  ri!document,\n  \"TEXT\",\n  now()\n).result"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180874": {
      "name": "AIA_MTR_ClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef2c-4192-8000-9e56-011c48011c48_353021": {
      "name": "AIA_ClassificationInstanceOutcome_Initialize",
      "type": "Expression Rule",
      "sail_code": "recordType!AIA Classification Instance Outcome(\n  recordType!AIA Classification Instance Outcome.instanceId: ri!classificationInstanceId,\n  recordType!AIA Classification Instance Outcome.modelVersionId: ri!modelVersionId,\n  recordType!AIA Classification Instance Outcome.documentId: ri!documentId,\n  recordType!AIA Classification Instance Outcome.pageCount: ri!pageCount,\n  recordType!AIA Classification Instance Outcome.classification: ri!classification,\n  recordType!AIA Classification Instance Outcome.classificationOverride: ri!classificationOverride,\n  recordType!AIA Classification Instance Outcome.reasoning: ri!reasoning,\n  recordType!AIA Classification Instance Outcome.isSplit: ri!isSplit,\n  recordType!AIA Classification Instance Outcome.splitPagesJson: ri!splitPagesJson,\n  recordType!AIA Classification Instance Outcome.splitPagesJsonOverride: ri!splitPagesJsonOverride,\n  recordType!AIA Classification Instance Outcome.outcomeOverride: ri!outcomeOverride,\n  recordType!AIA Classification Instance Outcome.createdBy: ri!initiator,\n  recordType!AIA Classification Instance Outcome.createdOn: now(),\n  recordType!AIA Classification Instance Outcome.modifiedBy: ri!initiator,\n  recordType!AIA Classification Instance Outcome.modifiedOn: now()\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180867": {
      "name": "AIA_MTR_ExtractionInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92474": {
      "name": "AIA_MTR_ClassificationInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40839": {
      "name": "AIA_Test_GetLatestExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v3\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.instanceUuid,\n    recordType!AIA Extraction Instance.modelVersion.versionId,\n    recordType!AIA Extraction Instance.modelVersion.modelId,\n    recordType!AIA Extraction Instance.modelVersion.uuid,\n    recordType!AIA Extraction Instance.modelVersion.extractionModel.key,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.fieldCount,\n    recordType!AIA Extraction Instance.sections,\n    recordType!AIA Extraction Instance.boundingBoxes,\n    recordType!AIA Extraction Instance.responseDocumentId,\n    recordType!AIA Extraction Instance.sourceDocumentId\n  }\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_52454": {
      "name": "AIA_Test_GetLatestClassificationInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Classification Instance,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Classification Instance,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Classification Instance.id\n          )\n        }\n      )\n    ).data[recordType!AIA Classification Instance.id],\n    1,\n    null\n  ),\n  fields: {\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.outcomes,\n    recordType!AIA Classification Instance.refInstanceStatus\n  },\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92481": {
      "name": "AIA_MTR_ExtractionInstanceExtractedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_182518": {
      "name": "AIA_IsDocumentExtension",
      "type": "Expression Rule",
      "sail_code": "and(\n  a!isNotNullOrEmpty(ri!document),\n  contains(\n    lower(ri!extensions),\n    lower(document(\n      ri!document,\n      \"extension\"\n    ))\n  )\n)"
    },
    "_a-0000ef36-91aa-8000-9e87-011c48011c48_384518": {
      "name": "AIA_ClassificationInstance_Reconcile_Sub_SingleOutcome",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n          alignVertical: \"MIDDLE\",\n          items: {\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                labelPosition: \"COLLAPSED\",\n                value: {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:dca3f237-770e-4f9e-834f-23edfbf0ab8a\" & \" \",\n                    style: \"STRONG\"\n                  )\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              width: \"MINIMIZE\",\n              item: #\"SYSTEM_SYSRULES_tagField\"(\n                labelPosition: \"COLLAPSED\",\n                marginBelow: \"NONE\",\n                tags: {\n                  #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                    text: \" \" & #\"urn:appian:translation-string:v1:970b8414-e656-4d3a-93bf-00a63ec5cb24\",\n                    backgroundColor: ri!brandingMap.Orange1,\n                    textColor: ri!brandingMap.Orange4\n                  )\n                },\n                align: \"CENTER\"\n              ),\n              showWhen: a!isNotNullOrEmpty(ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classificationOverride])\n            )\n          },\n\n        ),\n        {\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: if(\n                a!isNullOrEmpty(ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification]),\n                #\"urn:appian:translation-string:v1:292b446a-770a-44a6-9cad-f1b8b8c93b11\",\n                #\"urn:appian:translation-string:v1:24078d1b-9b32-4e35-a90c-43286d78af84\"(\n                  #\"urn:appian:translation-variable:v1:4857ce0f-2bfd-4239-803e-68ba3c83d147\": ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification]\n                )\n              )\n            ),\n            align: \"CENTER\",\n            showWhen: not(\n              contains(\n                touniformstring(ri!options),\n                ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification]\n              )\n            )\n          ),\n          #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n            choiceLabels: ri!options,\n            choiceValues: ri!options,\n            label: #\"urn:appian:translation-string:v1:f04e5814-41aa-4705-bb0e-968fe8fc8ec5\",\n            labelPosition: \"COLLAPSED\",\n            value: a!defaultValue(\n              ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classificationOverride],\n              ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification]\n            ),\n            saveInto: {\n              a!save(\n                ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classificationOverride],\n                if(\n                  save!value = ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification],\n                  null,\n                  save!value\n                )\n              )\n            },\n            choiceStyle: \"CARDS\",\n            choicePosition: \"START\"\n          )\n        },\n        /*Reasoning*/\n        #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_headingField\"(\n              text: #\"urn:appian:translation-string:v1:0fbb330e-2edd-4e0b-8477-525f957226e6\"(\n                #\"urn:appian:translation-variable:v1:66195964-9b75-4317-bb58-2d5113186b47\": ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification]\n              ),\n              size: \"EXTRA_SMALL\",\n              headingTag: \"H2\",\n              fontWeight: \"BOLD\"\n            ),\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_textField\"(\n                  labelPosition: \"COLLAPSED\",\n                  value: ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.reasoning],\n                  readOnly: true\n                )\n              },\n              shape: ri!brandingMap.CardShape,\n              showBorder: ri!brandingMap.CardShowBorder\n            )\n          },\n          showWhen: and(\n            a!isNotNullOrEmpty(ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.classification]),\n            a!isNotNullOrEmpty(ri!ClassificationInstance[recordType!AIA Classification Instance.outcomes][1][recordType!AIA Classification Instance Outcome.reasoning])\n          ),\n          marginAbove: \"STANDARD\"\n        )\n      },\n      width: \"NARROW_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        rule!AIA_UTIL_displayInlineDocument(\n          documentId: ri!ClassificationInstance[recordType!AIA Classification Instance.documentId],\n          height: \"TALL\"\n        )\n      }\n    )\n  },\n  spacing: \"SPARSE\",\n  showDividers: \"TRUE\"\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_26889": {
      "name": "AIA_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AIA_UTIL_Filter_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505670": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef36-91aa-8000-9e87-011c48011c48_385617": {
      "name": "AIA_ClassificationInstance_Reconcile_Sub_MultipleOutcomes",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!activeOutcomes: rule!AIA_UTIL_Filter(\n    records: ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n    field: recordType!AIA Classification Instance Outcome.outcomeOverride,\n    value: {\n      cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_REMOVED,\n      cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_DELETED\n    },\n    filterType: \"REJECT\"\n  ),\n  /*Maps with keys for pages and isValid for each active outcome.\n  Used to determine which pages of the larger document are covered and whether any missing/invalid page ranges have been given*/\n  local!pageOutcomeMaps: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!activeOutcomes,\n    expression: a!localVariables(\n      local!currentOutcomeSplitPagesJson: rule!AIA_ExtractJson(\n        json: a!defaultValue(\n          fv!item[recordType!AIA Classification Instance Outcome.splitPagesJsonOverride],\n          fv!item[recordType!AIA Classification Instance Outcome.splitPagesJson]\n        )\n      ),\n      local!startPageNumber: tointeger(local!currentOutcomeSplitPagesJson.startPageNumber),\n      local!endPageNumber: tointeger(local!currentOutcomeSplitPagesJson.endPageNumber),\n      local!isValid: and(\n        a!isNotNullOrEmpty(local!startPageNumber),\n        a!isNotNullOrEmpty(local!endPageNumber),\n        local!startPageNumber > 0,\n        local!endPageNumber > 0,\n        local!endPageNumber >= local!startPageNumber\n      ),\n      a!map(\n        pages: if(\n          local!isValid,\n          enumerate(local!endPageNumber - local!startPageNumber + 1) + local!startPageNumber,\n          {}\n        ),\n        isValid: local!isValid\n      )\n    )\n  ),\n  /*Maps containing what pages are duplicated in splits and what pages from the original document are not contained in any split*/\n  local!warningMaps: #\"SYSTEM_SYSRULES_forEach\"(\n    items: enumerate(ri!classificationInstance[recordType!AIA Classification Instance.pageCount]) + 1,\n    expression: a!map(\n      duplicatePages: if(\n        length(\n          wherecontains(\n            fv!item,\n            tointeger(a!flatten(local!pageOutcomeMaps.pages))\n          )\n        ) > 1,\n        fv!item,\n        {}\n      ),\n      pagesNotContainedInSplits: if(\n        contains(\n          tointeger(a!flatten(local!pageOutcomeMaps.pages)),\n          fv!item\n        ),\n        {},\n        fv!item\n      )\n    )\n  ),\n  #\"SYSTEM_SYSRULES_paneLayout\"(\n    panes: {\n      #\"SYSTEM_SYSRULES_pane\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n            expression: a!localVariables(\n              local!currentOutcomeSplitPagesJson: rule!AIA_ExtractJson(\n                json: a!defaultValue(\n                  fv!item[recordType!AIA Classification Instance Outcome.splitPagesJsonOverride],\n                  fv!item[recordType!AIA Classification Instance Outcome.splitPagesJson]\n                )\n              ),\n              #\"SYSTEM_SYSRULES_boxLayout\"(\n                label: a!defaultValue(\n                  fv!item[recordType!AIA Classification Instance Outcome.classificationOverride],\n                  fv!item[recordType!AIA Classification Instance Outcome.classification],\n                  #\"urn:appian:translation-string:v1:30e7aea8-0fc7-4996-ba6d-7adce844780e\"\n                ),\n                contents: {\n                  #\"SYSTEM_SYSRULES_cardLayout\"(\n                    contents: {\n                      #\"SYSTEM_SYSRULES_columnsLayout\"(\n                        columns: {\n                          #\"SYSTEM_SYSRULES_columnLayout\"(\n                            contents: {\n                              /*Start Page / End Page*/\n                              #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                                items: {\n                                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                    item: #\"SYSTEM_SYSRULES_integerField\"(\n                                      label: #\"urn:appian:translation-string:v1:f2c5530f-1dbf-4a75-8971-1d5aafc9a646\",\n                                      value: local!currentOutcomeSplitPagesJson.startPageNumber,\n                                      saveInto: a!save(\n                                        fv!item[recordType!AIA Classification Instance Outcome.splitPagesJsonOverride],\n                                        a!localVariables(\n                                          local!splitPagesJsonToSave: a!map(\n                                            splitType: cons!AIA_TXT_CLASSIFICATION_SPLIT_TYPE_PAGE_RANGE,\n                                            startPageNumber: save!value,\n                                            endPageNumber: local!currentOutcomeSplitPagesJson.endPageNumber\n                                          ),\n                                          if(\n                                            #\"SYSTEM_SYSRULES_toJson_v1\"(local!splitPagesJsonToSave) = fv!item[recordType!AIA Classification Instance Outcome.splitPagesJson],\n                                            null,\n                                            #\"SYSTEM_SYSRULES_toJson_v1\"(local!splitPagesJsonToSave)\n                                          )\n                                        )\n                                      ),\n                                      required: true,\n                                      validations: {\n                                        /*Start Page Can't Be Greater Than End Page*/\n                                        if(\n                                          and(\n                                            a!isNotNullOrEmpty(tointeger(local!currentOutcomeSplitPagesJson.startPageNumber)),\n                                            a!isNotNullOrEmpty(tointeger(local!currentOutcomeSplitPagesJson.endPageNumber)),\n                                            tointeger(local!currentOutcomeSplitPagesJson.startPageNumber) > tointeger(local!currentOutcomeSplitPagesJson.endPageNumber)\n                                          ),\n                                          #\"urn:appian:translation-string:v1:85e27c71-292b-4f49-8a0d-55cefd77a0eb\",\n                                          {}\n                                        ),\n                                        /*Start Page Must Be Greater than 0*/\n                                        if(\n                                          and(\n                                            a!isNotNullOrEmpty(tointeger(local!currentOutcomeSplitPagesJson.startPageNumber)),\n                                            tointeger(local!currentOutcomeSplitPagesJson.startPageNumber) <= 0\n                                          ),\n                                          #\"urn:appian:translation-string:v1:28de51bd-731a-4267-bb17-45a2e1b069f8\"(\n                                            #\"urn:appian:translation-variable:v1:a68490da-07fa-41f5-9d68-544aa1bc64a6\": #\"urn:appian:translation-string:v1:f2c5530f-1dbf-4a75-8971-1d5aafc9a646\",\n                                            #\"urn:appian:translation-variable:v1:71279c7b-4ad1-42be-9b16-c833fabd69a4\": 0\n                                          ),\n                                          {}\n                                        ),\n                                        /*Start Page Cannot Exceed Max Pages*/\n                                        if(\n                                          and(\n                                            a!isNotNullOrEmpty(tointeger(local!currentOutcomeSplitPagesJson.startPageNumber)),\n                                            tointeger(local!currentOutcomeSplitPagesJson.startPageNumber) > ri!classificationInstance[recordType!AIA Classification Instance.pageCount]\n                                          ),\n                                          #\"urn:appian:translation-string:v1:2d14aef6-424b-480c-9800-7da375a7fd93\"(\n                                            #\"urn:appian:translation-variable:v1:0d2ab899-194e-4ea9-8978-c7bec5ac1c0d\": #\"urn:appian:translation-string:v1:f2c5530f-1dbf-4a75-8971-1d5aafc9a646\"\n                                          ),\n                                          {}\n                                        )\n                                      }\n                                    ),\n                                    width: \"MINIMIZE\"\n                                  ),\n                                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                    item: #\"SYSTEM_SYSRULES_integerField\"(\n                                      label: #\"urn:appian:translation-string:v1:d58361fa-deae-4d60-8192-131753fe69ab\",\n                                      value: local!currentOutcomeSplitPagesJson.endPageNumber,\n                                      saveInto: a!save(\n                                        fv!item[recordType!AIA Classification Instance Outcome.splitPagesJsonOverride],\n                                        a!localVariables(\n                                          local!splitPagesJsonToSave: a!map(\n                                            splitType: cons!AIA_TXT_CLASSIFICATION_SPLIT_TYPE_PAGE_RANGE,\n                                            startPageNumber: local!currentOutcomeSplitPagesJson.startPageNumber,\n                                            endPageNumber: save!value\n                                          ),\n                                          if(\n                                            #\"SYSTEM_SYSRULES_toJson_v1\"(local!splitPagesJsonToSave) = fv!item[recordType!AIA Classification Instance Outcome.splitPagesJson],\n                                            null,\n                                            #\"SYSTEM_SYSRULES_toJson_v1\"(local!splitPagesJsonToSave)\n                                          )\n                                        )\n                                      ),\n                                      required: true,\n                                      validations: {\n                                        /*End Page must be Greater than 1*/\n                                        if(\n                                          and(\n                                            a!isNotNullOrEmpty(tointeger(local!currentOutcomeSplitPagesJson.endPageNumber)),\n                                            tointeger(local!currentOutcomeSplitPagesJson.endPageNumber) <= 0\n                                          ),\n                                          #\"urn:appian:translation-string:v1:28de51bd-731a-4267-bb17-45a2e1b069f8\"(\n                                            #\"urn:appian:translation-variable:v1:a68490da-07fa-41f5-9d68-544aa1bc64a6\": #\"urn:appian:translation-string:v1:d58361fa-deae-4d60-8192-131753fe69ab\",\n                                            #\"urn:appian:translation-variable:v1:71279c7b-4ad1-42be-9b16-c833fabd69a4\": 0\n                                          ),\n                                          {}\n                                        ),\n                                        /*End Page Cannot Exceed Max Pages*/\n                                        if(\n                                          and(\n                                            a!isNotNullOrEmpty(tointeger(local!currentOutcomeSplitPagesJson.endPageNumber)),\n                                            tointeger(local!currentOutcomeSplitPagesJson.endPageNumber) > ri!classificationInstance[recordType!AIA Classification Instance.pageCount]\n                                          ),\n                                          #\"urn:appian:translation-string:v1:2d14aef6-424b-480c-9800-7da375a7fd93\"(\n                                            #\"urn:appian:translation-variable:v1:0d2ab899-194e-4ea9-8978-c7bec5ac1c0d\": #\"urn:appian:translation-string:v1:d58361fa-deae-4d60-8192-131753fe69ab\"\n                                          ),\n                                          {}\n                                        )\n                                      }\n                                    ),\n                                    width: \"MINIMIZE\"\n                                  )\n                                }\n                              ),\n                              /*Category Label / Override Tag*/\n                              #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                                items: {\n                                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                    item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                      labelPosition: \"COLLAPSED\",\n                                      value: {\n                                        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                          text: #\"urn:appian:translation-string:v1:dca3f237-770e-4f9e-834f-23edfbf0ab8a\" & \" \",\n                                          style: \"STRONG\"\n                                        )\n                                      }\n                                    )\n                                  ),\n                                  #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                                    item: #\"SYSTEM_SYSRULES_tagField\"(\n                                      labelPosition: \"COLLAPSED\",\n                                      tags: {\n                                        #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                                          text: \" \" & #\"urn:appian:translation-string:v1:970b8414-e656-4d3a-93bf-00a63ec5cb24\",\n                                          backgroundColor: ri!brandingMap.Orange1,\n                                          textColor: ri!brandingMap.Orange4\n                                        )\n                                      },\n                                      marginBelow: \"NONE\",\n                                      align: \"CENTER\"\n                                    ),\n                                    showWhen: a!isNotNullOrEmpty(\n                                      fv!item[recordType!AIA Classification Instance Outcome.classificationOverride]\n                                    ),\n                                    width: \"MINIMIZE\"\n                                  )\n                                },\n                                alignVertical: \"MIDDLE\"\n                              ),\n                              /*AI Skill Classification Didn't Match Any Options Warning*/\n                              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                labelPosition: \"COLLAPSED\",\n                                value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                  text: if(\n                                    a!isNullOrEmpty(fv!item[recordType!AIA Classification Instance Outcome.classification]),\n                                    #\"urn:appian:translation-string:v1:292b446a-770a-44a6-9cad-f1b8b8c93b11\",\n                                    #\"urn:appian:translation-string:v1:24078d1b-9b32-4e35-a90c-43286d78af84\"(\n                                      #\"urn:appian:translation-variable:v1:4857ce0f-2bfd-4239-803e-68ba3c83d147\": fv!item[recordType!AIA Classification Instance Outcome.classification]\n                                    )\n                                  )\n                                ),\n                                showWhen: and(\n                                  a!isNullOrEmpty(fv!item[recordType!AIA Classification Instance Outcome.outcomeOverride]),\n                                  not(\n                                    contains(\n                                      touniformstring(ri!options),\n                                      fv!item[recordType!AIA Classification Instance Outcome.classification]\n                                    )\n                                  )\n                                ),\n                                align: \"CENTER\"\n                              ),\n                              /*Classification / Category*/\n                              #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n                                label: #\"urn:appian:translation-string:v1:f04e5814-41aa-4705-bb0e-968fe8fc8ec5\",\n                                labelPosition: \"COLLAPSED\",\n                                value: a!defaultValue(\n                                  fv!item[recordType!AIA Classification Instance Outcome.classificationOverride],\n                                  fv!item[recordType!AIA Classification Instance Outcome.classification]\n                                ),\n                                saveInto: {\n                                  a!save(\n                                    fv!item[recordType!AIA Classification Instance Outcome.classificationOverride],\n                                    if(\n                                      save!value = fv!item[recordType!AIA Classification Instance Outcome.classification],\n                                      null,\n                                      save!value\n                                    )\n                                  )\n                                },\n                                choiceLabels: ri!options,\n                                choiceValues: ri!options,\n                                choiceStyle: \"CARDS\",\n                                choicePosition: \"START\",\n                                required: true\n                              )\n                            },\n                            width: \"NARROW_PLUS\"\n                          ),\n                          #\"SYSTEM_SYSRULES_columnLayout\"(\n                            contents: {\n                              #\"SYSTEM_SYSRULES_columnsLayout\"(\n                                columns: {\n                                  /*Classification Reasoning*/\n                                  #\"SYSTEM_SYSRULES_columnLayout\"(\n                                    contents: {\n                                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                        labelPosition: \"COLLAPSED\",\n                                        value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                          text: #\"urn:appian:translation-string:v1:aa5d9587-dd60-403b-9130-b87a91526023\"(\n                                            #\"urn:appian:translation-variable:v1:bda9b49e-cf18-4b5f-bfc4-941315560b60\": fv!item[recordType!AIA Classification Instance Outcome.classification]\n                                          ),\n                                          style: \"STRONG\"\n                                        ),\n                                        showWhen: a!isNotNullOrEmpty(fv!item[recordType!AIA Classification Instance Outcome.reasoning])\n                                      ),\n                                      #\"SYSTEM_SYSRULES_cardLayout\"(\n                                        contents: {\n                                          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                            labelPosition: \"COLLAPSED\",\n                                            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                              text: fv!item[recordType!AIA Classification Instance Outcome.reasoning]\n                                            )\n                                          )\n                                        },\n                                        showWhen: a!isNotNullOrEmpty(fv!item[recordType!AIA Classification Instance Outcome.reasoning]),\n                                        style: ri!brandingMap.White,\n                                        showBorder: \"FALSE\"\n                                      )\n                                    }\n                                  ),\n                                  /*Remove Outcome*/\n                                  #\"SYSTEM_SYSRULES_columnLayout\"(\n                                    contents: {\n                                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                        labelPosition: \"COLLAPSED\",\n                                        value: {\n                                          #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                            icon: \"trash\",\n                                            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                              label: #\"urn:appian:translation-string:v1:81c7b8e7-9c7e-46e7-aac2-ad9c55bfcfb7\",\n                                              saveInto: if(\n                                                a!isNullOrEmpty(fv!item[recordType!AIA Classification Instance Outcome.classificationInstanceOutcomeId]),\n                                                a!save(\n                                                  ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n                                                  remove(\n                                                    ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n                                                    fv!index\n                                                  )\n                                                ),\n                                                /*If the Outcome already had an outcomeOverride of Added, then this Outcome was manually added during a previous reconciliation.*/\n                                                /*In this case, we can hard delete this record*/\n                                                if(\n                                                  fv!item[recordType!AIA Classification Instance Outcome.outcomeOverride] = cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_ADDED,\n                                                  a!save(\n                                                    fv!item[recordType!AIA Classification Instance Outcome.outcomeOverride],\n                                                    cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_DELETED\n                                                  ),\n                                                  a!save(\n                                                    fv!item[recordType!AIA Classification Instance Outcome.outcomeOverride],\n                                                    cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_REMOVED\n                                                  )\n                                                )\n                                              )\n                                            ),\n                                            size: \"STANDARD\",\n                                            color: ri!brandingMap.Gray3,\n                                            linkStyle: \"STANDALONE\"\n                                          ),\n                                          \" \"\n                                        },\n                                        showWhen: rule!AIA_UTIL_Filter(\n                                          records: ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n                                          field: recordType!AIA Classification Instance Outcome.outcomeOverride,\n                                          value: {\n                                            cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_REMOVED,\n                                            cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_DELETED\n                                          },\n                                          filterType: \"REJECT_COUNT\"\n                                        ) > 1,\n                                        align: \"RIGHT\"\n                                      )\n                                    },\n                                    width: \"EXTRA_NARROW\"\n                                  )\n                                }\n                              )\n                            }\n                          )\n                        },\n                        spacing: \"SPARSE\"\n                      )\n                    },\n                    style: ri!brandingMap.DefaultPageBackground,\n                    showBorder: false,\n                    shape: \"SEMI_ROUNDED\"\n                  )\n                },\n                showWhen: and(\n                  fv!item[recordType!AIA Classification Instance Outcome.outcomeOverride] <> cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_REMOVED,\n                  fv!item[recordType!AIA Classification Instance Outcome.outcomeOverride] <> cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_DELETED\n                ),\n                isCollapsible: true,\n                isInitiallyCollapsed: not(fv!isFirst),\n                marginBelow: \"STANDARD\",\n                style: ri!brandingMap.Blue0,\n                showBorder: false,\n                padding: \"NONE\",\n                shape: \"SEMI_ROUNDED\"\n              )\n            )\n          ),\n          /*Add Outcome Link*/\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: {\n                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                    icon: \"plus-circle\"\n                  ),\n                  \" \",\n                  #\"urn:appian:translation-string:v1:51680280-cbc0-448b-8e1e-2760df9354c7\"\n                },\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: a!save(\n                    ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n                    append(\n                      ri!classificationInstance[recordType!AIA Classification Instance.outcomes],\n                      rule!AIA_ClassificationInstanceOutcome_Initialize(\n                        classificationInstanceId: ri!classificationInstance[recordType!AIA Classification Instance.id],\n                        modelVersionId: ri!classificationInstance[recordType!AIA Classification Instance.modelVersionId],\n                        documentId: ri!classificationInstance[recordType!AIA Classification Instance.documentId],\n                        pageCount: ri!classificationInstance[recordType!AIA Classification Instance.pageCount],\n                        outcomeOverride: cons!AIA_TXT_CLASSIFICATION_OUTCOME_OVERRIDE_ADDED,\n                        initiator: loggedInUser()\n                      )\n                    )\n                  )\n                ),\n                linkStyle: \"STANDALONE\"\n              )\n            },\n            marginAbove: \"LESS\"\n          ),\n          /*Warning Banners*/\n          #\"SYSTEM_SYSRULES_messageBanner\"(\n            showWhen: and(\n              local!pageOutcomeMaps.isValid,\n              a!isNotNullOrEmpty(a!flatten(local!warningMaps.pagesNotContainedInSplits))\n            ),\n            primaryText: #\"urn:appian:translation-string:v1:de59ab61-bc5b-4eed-9bef-966c2bd14cbf\",\n            secondaryText: if(\n              length(a!flatten(local!warningMaps.pagesNotContainedInSplits)) = 1,\n              #\"urn:appian:translation-string:v1:607878f9-0f1a-4cf3-b650-51edb9430ca3\"(\n                #\"urn:appian:translation-variable:v1:51bcad80-666e-4109-a204-96d264f1bd0c\": a!flatten(local!warningMaps.pagesNotContainedInSplits)\n              ),\n              #\"urn:appian:translation-string:v1:40e07729-2c61-4906-aec1-01c40169472a\"(\n                #\"urn:appian:translation-variable:v1:8a8ddb3b-c980-4005-aa2a-ff29399cf372\": joinarray(\n                  a!flatten(local!warningMaps.pagesNotContainedInSplits),\n                  \", \"\n                )\n              )\n            ),\n            highlightColor: \"WARN\",\n            backgroundColor: \"WARN\",\n            icon: \"exclamation-triangle\",\n            showDecorativeBar: false\n          ),\n          #\"SYSTEM_SYSRULES_messageBanner\"(\n            showWhen: and(\n              local!pageOutcomeMaps.isValid,\n              a!isNotNullOrEmpty(a!flatten(local!warningMaps.duplicatePages))\n            ),\n            primaryText: #\"urn:appian:translation-string:v1:bb79cdae-4e1a-4beb-b89f-60e6f37d2c53\",\n            secondaryText: if(\n              length(a!flatten(local!warningMaps.duplicatePages)) = 1,\n              #\"urn:appian:translation-string:v1:042d1481-d581-499b-8e70-37f750d253b4\"(\n                #\"urn:appian:translation-variable:v1:73c1afca-bc26-4ef4-9226-1fcd2537fdf0\": a!flatten(local!warningMaps.duplicatePages)\n              ),\n              #\"urn:appian:translation-string:v1:7fb1e157-c23b-4b7f-9445-7fdeec5efda0\"(\n                #\"urn:appian:translation-variable:v1:c975b61c-9fdb-48f5-9310-10ec3cfa75db\": joinarray(\n                  a!flatten(local!warningMaps.duplicatePages),\n                  \", \"\n                )\n              )\n            ),\n            highlightColor: \"NEGATIVE\",\n            backgroundColor: \"ERROR\",\n            icon: \"exclamation-triangle\",\n            showDecorativeBar: false\n          ),\n        },\n        width: \"WIDE\"\n      ),\n      /*Document Preview*/\n      #\"SYSTEM_SYSRULES_pane\"(\n        contents: {\n          rule!AIA_UTIL_displayInlineDocument(\n            documentId: ri!ClassificationInstance[recordType!AIA Classification Instance.documentId],\n            height: \"TALL\"\n          )\n        }\n      )\n    }\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505575": {
      "name": "AIA_MTR_MultipleOutputsClassificationModelVersionCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483943": {
      "name": "AIA_MTR_ModelTestSuiteCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92571": {
      "name": "AIA_MTR_ExtractionInstanceAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40909": {
      "name": "AIA_ExtractJson",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!firstTry: rule!AIA_ExtractJsonInner(\n    json: ri!json\n  ),\n  local!result: if(\n    a!isNotNullOrEmpty(local!firstTry),\n    local!firstTry,\n    a!localVariables(\n      local!secondTry: rule!AIA_ExtractJsonInner(\n        json: index(split(ri!json, \"Appian's private AI\"), 1, null),\n      ),\n      if(\n        a!isNotNullOrEmpty(local!secondTry),\n        local!secondTry,\n        a!localVariables(\n          local!thirdTry: rule!AIA_ExtractJsonInner(\n            json: index(split(ri!json, \"Appian's private AI\"), 2, null),\n          ),\n          if(\n            a!isNotNullOrEmpty(local!thirdTry),\n            local!thirdTry,\n            a!localVariables(\n              local!forthTry: rule!AIA_ExtractJsonInner(\n                json: index(split(ri!json, \"<output>\"), 1, null),\n              ),\n              if(\n                a!isNotNullOrEmpty(local!forthTry),\n                local!forthTry,\n                a!localVariables(\n                  local!fifthTry: rule!AIA_ExtractJsonInner(\n                    json: index(split(ri!json, \"</entities>\"), 1, null),\n                  ),\n                  local!fifthTry\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  ),\n  local!finalResult: if(\n    a!isNullOrEmpty(local!result),\n    null,\n    if(\n      a!defaultValue(ri!returnList, true),\n      local!result,\n      if(\n        rule!SHRD_IsList(local!result),\n        null,\n        local!result\n      )\n    )\n  ),\n  /* Handle scenario where the result comes back as properties of a $schema */\n  if(\n    or(\n      a!defaultValue(ri!returnList, true),\n      a!isNullOrEmpty(local!finalResult),\n      not(contains(\n        a!keys(local!finalResult),\n        \"$schema\"\n      ))\n    ),\n    local!finalResult,\n    local!finalResult.properties\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92564": {
      "name": "AIA_MTR_ExtractionInstanceFieldAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    }
  }
}