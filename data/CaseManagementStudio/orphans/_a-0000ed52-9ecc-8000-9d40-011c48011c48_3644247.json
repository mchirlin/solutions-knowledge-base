{
  "uuid": "_a-0000ed52-9ecc-8000-9d40-011c48011c48_3644247",
  "name": "CMGT_SendEmailTask_SetMetaData",
  "type": "Expression Rule",
  "description": "Set metadata for CMGT_SendEmailTask",
  "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!sendEmailTask,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_SendEmailTask.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_SendEmailTask.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_SendEmailTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_SendEmailTask.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_SendEmailTask.isActive,\n        value: true\n      )\n    },\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_SendEmailTask.emailTemplateAttachments,\n        value: rule!CMGT_EmailTemplateAttachment_SetMetaData(\n          emailTemplateAttachments: fv!item[recordType!CMGT_SendEmailTask.emailTemplateAttachments],\n          initiator: ri!initiator\n        ),\n        applyWhen: rule!CMGT_UTIL_IsNotBlank(\n          fv!item[recordType!CMGT_SendEmailTask.emailTemplateAttachments]\n        )\n      )\n    }\n  )\n)",
  "calls": [
    {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_EmailTemplateAttachment_SetMetaData",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_SendEmailTask",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    },
    {
      "name": "CMGT_CreateCaseTask",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    }
  ],
  "called_by": [
    {
      "name": "CMGT_Task_SetMetaData",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    }
  ]
}