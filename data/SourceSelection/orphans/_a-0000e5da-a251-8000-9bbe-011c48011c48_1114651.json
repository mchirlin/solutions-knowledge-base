{
  "uuid": "_a-0000e5da-a251-8000-9bbe-011c48011c48_1114651",
  "name": "AS_GSS_UT_disableClaimTaskActions",
  "type": "Expression Rule",
  "description": "Logics to disable / enable claim task actions",
  "sail_code": "or(\n  /*Check if all tasks are blank*/\n  rule!AS_CO_UT_isBlank(ri!tasks),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!tasks,\n    expression: if(\n      /*Returns false (enabled) when the task behaviour type is \"Complete Evaluation\"*/\n      tostring(\n        fv!item.taskBehaviorType.behaviorSubtypeCode\n      ) = cons!AS_GSS_TMG_ENUM_TASK_BEHAVIOR_SUBTYPE_CODE_COMPLETE_EVALUATION,\n      /*Changed it to true because we are not using claim tasks for criteria tasks only using it for process tasks*/\n      true,\n      if(\n        /*First check that the task status is assigned*/\n        rule!AS_CO_UT_not(\n          contains(\n            {\n              cons!AS_GSS_TMG_REF_ID_TASK_STATUS_ASSIGNED,\n              cons!AS_GSS_TMG_REF_ID_TASK_STATUS_IN_PROGRESS\n            },\n            fv!item.taskStatus.taskStatusId\n          )\n        ),\n        true,\n        if(\n          /*Then check if there is a default assignee on the task*/\n          rule!AS_CO_UT_isNotBlank(fv!item.groupAssignee),\n          /*Return false (not disabled) if EITHER the user is in the default assignee group OR the user is the individual assignee*/\n          and(\n            rule!AS_CO_UT_not(\n              rule!AS_CO_UT_isUserMemberOfGroups(\n                groups: fv!item.groupAssignee,\n                user: loggedInUser()\n              )\n            ),\n            rule!AS_CO_UT_not(fv!item.userAssignee = loggedInUser())\n          ),\n          /*Return false (not disabled) if the user is the individual assignee*/\n          rule!AS_CO_UT_not(fv!item.userAssignee = loggedInUser())\n        )\n      )\n    )\n  )\n)",
  "calls": [
    {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_not",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_isUserMemberOfGroups",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_TMG_ENUM_TASK_BEHAVIOR_SUBTYPE_CODE_COMPLETE_EVALUATION",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_ASSIGNED",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_IN_PROGRESS",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_TMG_REF_ID_TASK_STATUS_QUEUED",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    }
  ],
  "called_by": []
}