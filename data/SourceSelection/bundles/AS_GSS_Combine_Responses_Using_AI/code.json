{
  "_metadata": {
    "bundle_id": "AS_GSS_Combine_Responses_Using_AI"
  },
  "objects": {
    "_a-0000eb16-753f-8000-9d01-011c48011c48_9518400": {
      "name": "AS_GSS_UT_deepIndex",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(value: ri!indexArray),\n  ri!item,\n  if(\n    a!isNullOrEmpty(value: ri!item),\n    {},\n    reduce(index(_, _, {}), ri!item, ri!indexArray)\n  )\n)"
    },
    "0002ee7d-0147-8000-dd1d-7f0000014e7a": {
      "name": "AS GSS Summarize With Azure OpenAI",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=pv!input\n\n// Input: ?\n=pv!prompt\n\n// Input: ?\n=pv!assistantText\n\n// Output: ?\nAC!Error\n\n// Output: ?\nAC!Result\n\n// Output: ?\nAC!Success\n\n// Output: ?\nindex(\n  rule!AS_GSS_UT_deepIndex(\n    item: ac!Result,\n    indexArray: { \"Response\", \"Chat Completions\" }\n  ),\n  1,\n  null\n)"
    },
    "_a-0000ee83-219b-8000-9e3e-011c48011c48_16983438": {
      "name": "AS_GSS_MTR_SAVE_combinedConsensusResponsesUsingConsensusNativeAI",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp: 1, local!temp)"
    },
    "0002ee86-0b44-8000-ddf7-7f0000014e7a": {
      "name": "AS GSS Combine Responses Using AI",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=cons!AS_GSS_ENT_CONSENSUS_RESP_AI_SUMMARY\n\n// Input: ?\n= 'type!{urn:com:appian:types:AS:GSS}AS_GSS_ConsensusResponseAiSummary'( consensusId: pv!consensusId, prompt: index( pv!formattedConsensusResponseInputs, \"responsesFormatted\", null ), response: if( a!isNullOrEmpty(pv!combinedResponseMap), null, #\"SYSTEM_SYSRULES_toJson_v1\"( value: pv!combinedResponseMap, removeNullOrEmptyFields: false() ) ), errorInfo: if( a!isNullOrEmpty(pv!combinedResponseErrorMap), null, #\"SYSTEM_SYSRULES_toJson_v1\"( value: pv!combinedResponseErrorMap, removeNullOrEmptyFields: false() ) ), isSuccess: pv!isCombinedResponseSuccess, createdBy: pp!initiator, createdDatetime: now(), usedAppianAi: pv!useNativeAi)\n\n// Output: ?\nAC!StoredValues\n\n// Input: ?\n=cons!AS_GSS_ENT_CONSENSUS_RESP_AI_SUMMARY\n\n// Input: ?\n= 'type!{urn:com:appian:types:AS:GSS}AS_GSS_ConsensusResponseAiSummary'( consensusId: pv!consensusId, prompt: index( pv!formattedConsensusResponseInputs, \"justificationFormatted\", null ), response: if( a!isNullOrEmpty(pv!combinedjustificationMap), null, #\"SYSTEM_SYSRULES_toJson_v1\"( value: pv!combinedjustificationMap, removeNullOrEmptyFields: false() ) ), errorInfo: if( a!isNullOrEmpty(pv!combinedJustificationErrorMap), null, #\"SYSTEM_SYSRULES_toJson_v1\"( value: pv!combinedJustificationErrorMap, removeNullOrEmptyFields: false() ) ), isSuccess: pv!isCombinedJustificationSuccess, createdBy: pp!initiator, createdDatetime: now(), usedAppianAi: pv!useNativeAi)\n\n// Output: ?\nAC!StoredValues\n\n// Input: ?\n=pv!formattedConsensusResponseInputs.responsesFormatted\n\n// Input: ?\n=cons!AS_GSS_COMBINE_CONSENSUS_RESPONSES_PROMPT\n\n// Input: ?\n=useNativeAi\n\n// Input: ?\n=index(\n  rule!AS_GSS_UT_deepIndex(\n    item: pv!combinedResponseMap,\n    indexArray: { \"Response\", \"Chat Completions\" }\n  ),\n  1,\n  null\n)\n\n// Input: ?\n=pv!formattedConsensusResponseInputs.justificationFormatted\n\n// Input: ?\n=cons!AS_GSS_COMBINE_CONSENSUS_JUSTIFICATIONS_PROMPT\n\n// Input: ?\n=useNativeAi\n\n// Input: ?\n= a!localVariables( local!isSuccess: a!defaultValue( value: pv!isCombinedJustificationSuccess, default: false() ), if( a!isNullOrEmpty(pv!useNativeAi), \"Unknown\", a!match( value: pv!useNativeAi, whenTrue: and(fv!value, local!isSuccess), then: rule!AS_GSS_MTR_SAVE_combinedConsensusResponsesUsingConsensusNativeAI(), whenTrue: local!isSuccess, then: rule!AS_GSS_MTR_SAVE_combinedConsensusResponsesUsingConsensusAI(), default: \"Unknown\" ) ))"
    },
    "0002ee7f-7e38-8000-dd72-7f0000014e7a": {
      "name": "AS GSS Summarize With Native AI",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=pv!input\n\n// Input: ?\n=pv!runtimePrompt\n\n// Output: ?\nAC!Success\n\n// Output: ?\nif(\n  a!isNullOrEmpty(ac!Response),\n  {},\n  a!map(\n    \"Response\": { \"Chat Completions\": { ac!Response } }\n  )\n)\n\n// Output: ?\nif(\n  a!isNullOrEmpty(ac!ErrorMessage),\n  {},\n  a!map(\n    title: \"Appian AI Skills Error\",\n    message: ac!ErrorMessage\n  )\n)"
    },
    "_a-0000eb85-3dbf-8000-9d30-011c48011c48_11001634": {
      "name": "AS_GSS_MTR_SAVE_combinedConsensusResponsesUsingConsensusAI",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp: 1, local!temp)"
    },
    "0002ee7f-845b-8000-dd77-7f0000014e7a": {
      "name": "AS GSS Summarize With AI",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=assistantText\n\n// Input: ?\n=input\n\n// Input: ?\n=prompt\n\n// Input: ?\n=input\n\n// Input: ?\n=prompt"
    }
  }
}