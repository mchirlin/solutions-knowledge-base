{
  "_metadata": {
    "bundle_id": "AIA_Model_Test_Suite_-_urnappiantranslation-stringv141736883-9a8c-4821-bf82-58c9"
  },
  "objects": {
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_34388": {
      "name": "AIA_UTIL_displayDateTime",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!dateTime),\n  \"\",\n  cast(\n    'type!{http://www.appian.com/ae/types/2009}Text',\n    if(\n      ri!isDisplayTime,\n      text(ri!dateTime, \"mmm d, yyyy h:mm a\"),\n      text(ri!dateTime, \"mmm d, yyyy\")\n    )\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92467": {
      "name": "AIA_MTR_ClassificationInstanceClassifiedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179359": {
      "name": "AIA_MTR_ConfidenceThresholdDisabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_37482": {
      "name": "AIA_UTIL_displayRequestId",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!requestId),\n  ri!defaultValue,\n  concat(\"#\", text(ri!requestId, \"000#\"))\n)"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_182002": {
      "name": "AIA_MTR_ClassificationModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee66-4fc0-8000-9baa-011c48011c48_54294": {
      "name": "SHRD_UTIL_length",
      "type": "Expression Rule",
      "sail_code": "/*Gets the length of a value passed in wrapped in an array*/\nlength({ri!value})"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180853": {
      "name": "AIA_MTR_ExtractionInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483991": {
      "name": "AIA_MTR_ModelTestSuiteUpdated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92592": {
      "name": "AIA_MTR_ExtractionInstanceValidationIgnore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483964": {
      "name": "AIA_MTR_ModelTestRunInitiated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92585": {
      "name": "AIA_MTR_ExtractionInstanceValidationAccept",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_125328": {
      "name": "AIA_FormatDocument",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!documentId),\n  try(document(ri!documentId, \"name\"), \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"),\n  if(\n    a!isNotNullOrEmpty(ri!instance),\n    a!localVariables(\n      local!isExtraction: runtimetypeof(ri!instance) = typeof(recordType!AIA Extraction Instance()),\n      if(\n        local!isExtraction,\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Extraction Instance.documentId],\n            ri!instance[recordType!AIA Extraction Instance.sourceDocumentId]\n          )\n        ),\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Classification Instance.documentId],\n            ri!instance[recordType!AIA Classification Instance.sourceDocumentId]\n          )\n        )\n      )\n    ),\n    \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92578": {
      "name": "AIA_MTR_ExtractionModelVersionAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef3f-2bc1-8000-9f8b-011c48011c48_452655": {
      "name": "AIA_IsClassificationInstance",
      "type": "Expression Rule",
      "sail_code": "runtimetypeof(\n  ri!Instance\n) = typeof(\n  recordType!AIA Classification Instance()\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92488": {
      "name": "AIA_MTR_ExtractionInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee35-0ca2-8000-9ba6-011c48011c48_13646": {
      "name": "AIA_LogMetric",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!name,\n  /* Classification Model Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_CREATED,\n  then: rule!AIA_MTR_ClassificationModelCreated(),\n  /* Classification Instance Created */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ClassificationInstanceCreated(),\n  /* Classification Instance Reconciled */\n  equals: cons!AIA_MTR_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ClassificationInstanceReconciled(),\n  /* Classification Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFIED_WITH_ERRORS,\n  then: rule!AIA_MTR_ClassificationInstanceClassifiedWithErrors(),\n  /* Classification Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_CLASSIFICATION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ClassificationInstanceError(),\n  \n  /* Extraction Model Created */\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_CREATED,\n  then: rule!AIA_MTR_ExtractionModelCreated(),\n  /* Extraction Instance Created */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_ExtractionInstanceCreated(),\n  /* Extraction Instance Reconciled */\n  equals: cons!AIA_MTR_EXTRACTION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_ExtractionInstanceReconciled(),\n  /* Extraction Instance with Validation Errors */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTED_WITH_ERRORS,\n  then: rule!AIA_MTR_ExtractionInstanceExtractedWithErrors(),\n  /* Extraction Instance with Critical Error */\n  equals: cons!AIA_MTR_INSTANCE_STATUS_EXTRACTION_CRITICAL_ERROR,\n  then: rule!AIA_MTR_ExtractionInstanceError(),\n  \n  /* Triggered when AI review raises an error (field level) */\n  equals: cons!AIA_MTR_AI_REVIEW_FIELD,\n  then: rule!AIA_MTR_ExtractionInstanceFieldAiReview(),\n  /* Triggered when AI review raises an error (instance level, this instance has 1 or more errors raised by AI review) */\n  equals: cons!AIA_MTR_AI_REVIEW_INSTANCE,\n  then: rule!AIA_MTR_ExtractionInstanceAiReview(),\n  /* Triggered when model is created with AI review turned on OR AI review is turned on for a model */\n  equals: cons!AIA_MTR_AI_REVIEW_MODEL_VERSION,\n  then: rule!AIA_MTR_ExtractionModelVersionAiReview(),\n  /* Triggered when user clicks accept */\n  equals: cons!AIA_MTR_AI_REVIEW_ACCEPT,\n  then: rule!AIA_MTR_ExtractionInstanceValidationAccept(),\n  /* Triggered when user clicks ignored */\n  equals: cons!AIA_MTR_AI_REVIEW_IGNORE,\n  then: rule!AIA_MTR_ExtractionInstanceValidationIgnore(),\n  /*triggered when spot check ocnfigured*/\n  equals: cons!AIA_MTR_SPOT_CHECK_MODEL_VERSION,\n  then: rule!AIA_MTR_ModelVersionConfigureSampling(),\n  /* Triggered when a model validation rule of type AI validation creates a validation instance */\n  equals: cons!AIA_MTR_AI_VALIDATION_RULE_OCCURANCE,\n  then: rule!AIA_MTR_InstanceValidationAiRuleOccurance(),\n  /*Confidence Threshold Enabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_ENABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdEnabled(),\n  /*Confidence Threshold Disabled*/\n  equals: cons!AIA_MTR_CONFIDENCE_THRESHOLD_DISABLED,\n  then: rule!AIA_MTR_ConfidenceThresholdDisabled(),\n  /*Extraction Model Version Restored*/\n  equals: cons!AIA_MTR_EXTRACTION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ExtractionModelVersionRestore(),\n  /*Classification Model Version Restored*/\n  equals: cons!AIA_MTR_CLASSIFICATION_MODEL_VERSION_RESTORE,\n  then: rule!AIA_MTR_ClassificationModelVersionRestore(),\n  /*Model Test Suite Created*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_CREATED,\n  then: rule!AIA_MTR_ModelTestSuiteCreated(),\n  /*Model Test Suite Updated*/\n  equals: cons!AIA_MTR_MODEL_TEST_SUITE_UPDATED,\n  then: rule!AIA_MTR_ModelTestSuiteUpdated(),\n  /*Model Test Run Initiated*/\n  equals: cons!AIA_MTR_MODEL_TEST_RUN_INITIATED,\n  then: rule!AIA_MTR_ModelTestRunInitiated(),\n  /*Classification Model Version Created with Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_MODEL_VERSION_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationModelVersionCreated(),\n  /*Classification Instance Created for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_CREATED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceCreated(),\n  /*Classification Instance Reconciled for a Model Version that Allows Multiple Outputs*/\n  equals: cons!AIA_MTR_MULTIPLE_OUTPUTS_CLASSIFICATION_INSTANCE_RECONCILED,\n  then: rule!AIA_MTR_MultipleOutputsClassificationInstanceReconciled(),\n  default: null\n)"
    },
    "_a-0000eeb2-df20-8000-9bfe-011c48011c48_154565": {
      "name": "AIA_MTR_InstanceValidationAiRuleOccurance",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180846": {
      "name": "AIA_MTR_ClassificationModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180860": {
      "name": "AIA_MTR_ClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee6e-3b90-8000-9bac-011c48011c48_85019": {
      "name": "AIA_IsExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "runtimetypeof(\n  ri!Instance\n) = typeof(\n  recordType!AIA Extraction Instance()\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180834": {
      "name": "AIA_MTR_ExtractionModelCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eea3-15ee-8000-9bd4-011c48011c48_138762": {
      "name": "AIA_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CCM_Comment_SetMetaData can be used in both the Claim process and the individual Comment process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!AIA_UTIL_rejectNullValuesFromArray(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!AIA_UTIL_isBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12129": {
      "name": "AIA_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!brandingDefault: getbrandingconfig(\n    cons!AIA_DOC_DEFAULT_BRANDING_CONFIG,\n    true()\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!brandingDefault.defaultBranding.key,\n        local!brandingDefault.customBranding.key\n      },\n      {\n        local!brandingDefault.defaultBranding.value,\n        local!brandingDefault.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_36163": {
      "name": "SHRD_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!maxBatchSize: 5000,\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          local!maxBatchSize\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"RECORD_BY_ID\",\n    then: a!map(\n      castToType: ri!recordType,\n      fetchTotalCount: false,\n      isArray: false,\n      queryRecordByIdentifier: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          local!maxBatchSize\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, RECORD_BY_ID, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: if(\n          local!queryParams.queryRecordByIdentifier,\n          #\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n            recordType: ri!recordType,\n            identifier: index({ri!identifier},1,null),\n            /*If fields is sent in using a!selectionFields(), then adding the fields contained in ri!relatedRecordData will break the query*/\n            fields: reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  if(\n                    or(\n                      typeof(ri!fields) = typeof(#\"SYSTEM_SYSRULES_selectionFields\"()),\n                      typeof(ri!fields) = typeof({#\"SYSTEM_SYSRULES_selectionFields\"()})\n                    ),\n                    {},\n                    index(ri!relatedRecordData, \"relationship\", {})\n                  )\n                }\n              )\n            ),\n            relatedRecordData: ri!relatedRecordData\n          ),\n          #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n            recordType: ri!recordType,\n            fields: if(\n              a!isNullOrEmpty(ri!groupByFields),\n              reject(\n                a!isNullOrEmpty,\n                a!flatten(\n                  {\n                    ri!fields,\n                    index(ri!relatedRecordData, \"relationship\", {})\n                  }\n                )\n              ),\n              #\"SYSTEM_SYSRULES_aggregationFields\"(\n                groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                  items: ri!groupByFields,\n                  expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n                ),\n                measures: #\"SYSTEM_SYSRULES_measure\"(\n                  field: ri!groupByFields[1],\n                  function: \"COUNT\",\n                  alias: \"count\"\n                )\n              )\n            ),\n            filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n              operator: \"AND\",\n              ignoreFiltersWithEmptyValues: true,\n              logicalExpressions: {\n                ri!logicalExpressions,\n                if(\n                  and(\n                    a!isNotNullOrEmpty(ri!searchFields),\n                    a!isNotNullOrEmpty(ri!searchTerm)\n                  ),\n                  #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                    operator: \"AND\",\n                    logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                      items: split(trim(ri!searchTerm), \" \"),\n                      expression: a!localVariables(\n                        local!splitSearchTerm: fv!item,\n                        /*   Initiate filter for each field by the value provided in searchTerm   */\n                        #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                          operator: \"OR\",\n                          filters: #\"SYSTEM_SYSRULES_forEach\"(\n                            items: ri!searchFields,\n                            expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                              field: fv!item,\n                              operator: \"includes\",\n                              value: local!splitSearchTerm\n                            )\n                          )\n                        )\n                      )\n                    )\n                  ),\n                  {}\n                )\n              },\n              filters: ri!filters\n            ),\n            pagingInfo: if(\n              a!isNullOrEmpty(ri!groupByFields),\n              local!queryParams.pagingInfo,\n              #\"urn:appian:function:v1:a:update\"(\n                local!queryParams.pagingInfo,\n                \"sort\",\n                null\n              )\n            ),\n            fetchTotalCount: local!queryParams.fetchTotalCount,\n            relatedRecordData: if(\n              a!isNullOrEmpty(ri!groupByFields),\n              ri!relatedRecordData,\n              {}\n            )\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          index(local!queryResult,\"data\",{})\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          index(local!queryResult,\"data\",{})\n        ),\n        equals: \"RECORD_BY_ID\",\n        /*do not need to cast for queryRecordByIdentifier*/\n        then: local!queryResult,\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: cast(\n          local!queryParams.castToType,\n          index(local!queryResult,\"totalCount\",{})\n        ),\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505631": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eec9-5676-8000-9c92-011c48011c48_179352": {
      "name": "AIA_MTR_ConfidenceThresholdEnabled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eea3-15ee-8000-9bd4-011c48011c48_137447": {
      "name": "AIA_MTR_ModelVersionConfigureSampling",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000edb0-f009-8000-9ba8-011c48011c48_97176": {
      "name": "AIA_UTIL_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AIA_UTIL_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000eeca-c121-8000-9cab-011c48011c48_181995": {
      "name": "AIA_MTR_ExtractionModelVersionRestore",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef32-7e3d-8000-9c5b-011c48011c48_1397663": {
      "name": "SHRD_UTIL_HeaderField",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n              spacing: \"DENSE\",\n              marginAbove: \"NONE\",\n              marginBelow: \"NONE\",\n              alignVertical: \"MIDDLE\",\n              stackWhen: \"NEVER\",\n              items: {\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  width: \"MINIMIZE\",\n                  showWhen: a!isNotNullOrEmpty(ri!labelIcon),\n                  item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    labelPosition: \"COLLAPSED\",\n                    marginAbove: \"NONE\",\n                    marginBelow: \"NONE\",\n                    align: \"LEFT\",\n                    value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                      icon: ri!labelIcon,\n                      altText: ri!iconAltText,\n                      color: a!defaultValue(\n                        value: ri!labelColor,\n                        default: \"STANDARD\"\n                      )\n                    )\n                  )\n                ),\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_headingField\"(\n                    text: ri!label,\n                    size: a!defaultValue(value: ri!labelSize, default: \"SMALL\"),\n                    fontWeight: \"SEMI_BOLD\",\n                    color: a!defaultValue(\n                      value: ri!labelColor,\n                      default: \"STANDARD\"\n                    ),\n                    headingTag: a!defaultValue(\n                      value: ri!labelHeadingTag,\n                      default: \"H2\"\n                    ),\n                    marginAbove: \"NONE\",\n                    marginBelow: \"NONE\"\n                  )\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: ri!secondaryText,\n                style: \"EMPHASIS\",\n                color: a!defaultValue(\n                  value: ri!labelColor,\n                  default: ri!brandingMap.Gray3\n                ),\n                size: \"SMALL\"\n              ),\n              labelPosition: \"COLLAPSED\",\n              showWhen: a!isNotNullOrEmpty(ri!secondaryText)\n            )\n          },\n          width: if(\n            a!isNotNullOrEmpty(ri!rightSideContents),\n            \"AUTO\",\n            \"MEDIUM\"\n          )\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: ri!rightSideContents,\n          width: \"AUTO\"\n        )\n      },\n      alignVertical: \"TOP\",\n      marginAbove: \"NONE\",\n      marginBelow: \"NONE\",\n      stackWhen: { \"NEVER\" }\n    )\n  },\n  showWhen: a!defaultValue(ri!showWhen, true),\n  divider: a!defaultValue(ri!divider, \"NONE\"),\n  marginAbove: a!defaultValue(ri!marginAbove, \"NONE\"),\n  marginBelow: a!defaultValue(ri!marginBelow, \"LESS\")\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180874": {
      "name": "AIA_MTR_ClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000edb0-f009-8000-9ba8-011c48011c48_97164": {
      "name": "AIA_UTIL_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    },
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_180867": {
      "name": "AIA_MTR_ExtractionInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92474": {
      "name": "AIA_MTR_ClassificationInstanceError",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40839": {
      "name": "AIA_Test_GetLatestExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v3\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.instanceUuid,\n    recordType!AIA Extraction Instance.modelVersion.versionId,\n    recordType!AIA Extraction Instance.modelVersion.modelId,\n    recordType!AIA Extraction Instance.modelVersion.uuid,\n    recordType!AIA Extraction Instance.modelVersion.extractionModel.key,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.fieldCount,\n    recordType!AIA Extraction Instance.sections,\n    recordType!AIA Extraction Instance.boundingBoxes,\n    recordType!AIA Extraction Instance.responseDocumentId,\n    recordType!AIA Extraction Instance.sourceDocumentId\n  }\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_34420": {
      "name": "AIA_UTIL_displayUserFullName",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!userName),\n  ri!defaultValue,\n  try(\n    tostring(\n      concat(\n        user(ri!userName, \"firstName\"),\n        \" \",\n        user(ri!userName, \"lastName\")\n      )\n    ),\n    a!defaultValue(ri!defaultValue, \"System\")\n  )\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_52454": {
      "name": "AIA_Test_GetLatestClassificationInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Classification Instance,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Classification Instance,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Classification Instance.id\n          )\n        }\n      )\n    ).data[recordType!AIA Classification Instance.id],\n    1,\n    null\n  ),\n  fields: {\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.outcomes,\n    recordType!AIA Classification Instance.refInstanceStatus\n  },\n)"
    },
    "_a-0000eead-6b09-8000-9bee-011c48011c48_148667": {
      "name": "AIA_QR_getModelTestSuite",
      "type": "Expression Rule",
      "sail_code": "rule!SHRD_UTIL_QueryRecord(\n  recordType: recordType!AIA Model Test Suite,\n  returnType: ri!returnType,\n  fields: ri!fields,\n  executeWhen: ri!executeWhen,\n  pagingInfo: ri!pagingInfo,\n  identifier: ri!ids,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Model Test Suite.modelUuid,\n      operator: \"=\",\n      value: ri!uuid,\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Model Test Suite.testSuiteId,\n      operator: \"in\",\n      value: ri!ids\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Model Test Suite.testSuiteId,\n      operator: \"not in\",\n      value: ri!idsToExclude\n    ),\n  },\n  sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n    field: recordType!AIA Model Test Suite.testSuiteId,\n    ascending: true\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92481": {
      "name": "AIA_MTR_ExtractionInstanceExtractedWithErrors",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "12ebd02b-4afa-4f62-8acc-b5e60ea24f85": {
      "name": "AIA_ModelTestSuite_RecordAction_CreateOrUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*Branding Data for styling*/\n  local!brandingMap: rule!AIA_UTIL_LoadBrandingMap(),\n  local!modelTestSuite: ri!modelTestSuite,\n  local!isUpdate: a!isNotNullOrEmpty(local!modelTestSuite[recordType!AIA Model Test Suite.testSuiteId]),\n  local!suiteCaseCount: rule!SHRD_UTIL_length(\n    value: local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases]\n  ),\n\n  local!fieldMap: a!match(\n    value: ri!modelTestSuite[recordType!AIA Model Test Suite.modelType],\n    default: error(\"modelTestSuite.modelType cannot be null\"),\n    equals: cons!AIA_MODEL_TYPE_VALUES[1],\n    then: a!map(\n      instanceRecordType: recordType!AIA Extraction Instance,\n      caseToInstanceRelationship: recordType!AIA Model Test Suite Case.extractionInstance,\n      /*all fields used in grid and save intos must be listed in from instance in this map*/\n      instanceFields: a!map(\n        uuidField: recordType!AIA Extraction Instance.instanceUuid,\n        idField: recordType!AIA Extraction Instance.id,\n        testInstanceField: recordType!AIA Extraction Instance.testInstance,\n        documentIdField: recordType!AIA Extraction Instance.documentId,\n        sourceDocumentIdField: recordType!AIA Extraction Instance.sourceDocumentId,\n        statusIdField: recordType!AIA Extraction Instance.statusId,\n        createdOnField: recordType!AIA Extraction Instance.createdOn,\n        createdByField: recordType!AIA Extraction Instance.createdBy,\n        instanceFieldCountField: recordType!AIA Extraction Instance.totalFieldCount,\n        /*all fields below this are nested within instance,*/\n        modelIdField: recordType!AIA Extraction Instance.modelVersion.modelId,\n        versionIdField: recordType!AIA Extraction Instance.modelVersion.versionId,\n        modelFieldCountField: recordType!AIA Extraction Instance.modelVersion.extractionModel.fieldsCount\n      )\n    ),\n    equals: cons!AIA_MODEL_TYPE_VALUES[2],\n    then: a!map(\n      instanceRecordType: recordType!AIA Classification Instance,\n      caseToInstanceRelationship: recordType!AIA Model Test Suite Case.classificationInstance,\n      instanceFields: a!map(\n        uuidField: recordType!AIA Classification Instance.instanceUuid,\n        idField: recordType!AIA Classification Instance.id,\n        testInstanceField: recordType!AIA Classification Instance.testInstance,\n        documentIdField: recordType!AIA Classification Instance.documentId,\n        sourceDocumentIdField: recordType!AIA Classification Instance.sourceDocumentId,\n        statusIdField: recordType!AIA Classification Instance.statusId,\n        createdOnField: recordType!AIA Classification Instance.createdOn,\n        createdByField: recordType!AIA Classification Instance.createdBy,\n        instanceFieldCountField: null,\n        /*all fields below this are nested withn instance,*/\n        modelIdField: recordType!AIA Classification Instance.modelVersion.modelId,\n        versionIdField: recordType!AIA Classification Instance.modelVersion.versionId,\n        modelFieldCountField: null\n      )\n    )\n  ),\n\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: if(\n      local!isUpdate,\n      #\"urn:appian:translation-string:v1:41736883-9a8c-4821-bf82-58c976cfc8d3\",\n      #\"urn:appian:translation-string:v1:9fc4cc40-e227-40d0-8636-5b141897e46b\"\n    ),\n    showTitleBarDivider: true,\n    contentsWidth: \"FULL\",\n    contents: #\"SYSTEM_SYSRULES_paneLayout\"(\n      panes: {\n        #\"SYSTEM_SYSRULES_pane\"(\n          contents: {\n            rule!SHRD_UTIL_HeaderField(\n              label: #\"urn:appian:translation-string:v1:f7965b36-e448-43fc-b16a-466d6f2d584e\",\n              brandingMap: local!brandingMap\n            ),\n            #\"SYSTEM_SYSRULES_gridField_v5\"(\n              label: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(#\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:f7965b36-e448-43fc-b16a-466d6f2d584e\"),\n              labelPosition: \"COLLAPSED\",\n              showSearchBox: true,\n              showRefreshButton: true,\n              borderStyle: \"LIGHT\",\n              shadeAlternateRows: false(),\n              rowHeader: 1,\n              spacing: \"STANDARD\",\n              initialSorts: {\n                #\"SYSTEM_SYSRULES_sortInfo\"(\n                  field: local!fieldMap.instanceFields.idField,\n                  ascending: false\n                )\n              },\n              data: #\"SYSTEM_SYSRULES_recordData\"(\n                recordType: local!fieldMap.instanceRecordType,\n                fields: rule!AIA_UTIL_rejectNullValuesFromArray(\n                  array: a!flatten(\n                    #\"SYSTEM_SYSRULES_forEach\"(\n                      items: a!keys(local!fieldMap.instanceFields),\n                      expression: local!fieldMap.instanceFields[fv!item]\n                    )\n                  )\n                ),\n                filters: {\n                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                    field: local!fieldMap.instanceFields.modelIdField,\n                    operator: \"=\",\n                    value: ri!modelTestSuite[recordType!AIA Model Test Suite.modelId]\n                  ),\n                  #\"SYSTEM_SYSRULES_queryFilter\"(\n                    field: local!fieldMap.instanceFields.testInstanceField,\n                    operator: \"=\",\n                    value: true()\n                  )\n                }\n              ),\n              columns: {\n                /*Instance*/\n                #\"SYSTEM_SYSRULES_gridColumn\"(\n                  label: #\"urn:appian:translation-string:v1:11c554c3-1e1c-43a1-9ac8-a846f702995f\",\n                  width: \"2X\",\n                  value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    value: {\n                      /*Document Name with Link*/\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: rule!AIA_FormatDocument(\n                          instance: fv!row\n                        ),\n                        color: local!brandingMap.Gray4,\n                        style: \"STRONG\"\n                      ),\n                      char(10),\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        color: local!brandingMap.Gray3,\n                        size: \"SMALL\",\n                        text: {\n                          rule!AIA_UTIL_displayRequestId(\n                            requestId: fv!row[local!fieldMap.instanceFields.idField]\n                          ),\n                          cons!SHRD_DOT_SEPARATOR,\n                          #\"urn:appian:translation-string:v1:0dc23859-ec54-488e-8e0e-54f234016331\"(\n                            #\"urn:appian:translation-variable:v1:6432df6d-081e-454e-a970-7f0e3444fc73\": fv!row[local!fieldMap.instanceFields.versionIdField]\n                          ),\n                          /*unreconciled warning*/\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            showWhen: not(\n                              contains(\n                                cons!AIA_INSTANCE_STATUS_RECONCILED_ALL,\n                                fv!row[local!fieldMap.instanceFields.statusIdField]\n                              )\n                            ),\n                            text: {\n                              cons!SHRD_DOT_SEPARATOR,\n                              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                icon: \"exclamation-triangle\",\n                                color: local!brandingMap.Orange3\n                              ),\n                              \" \",\n                              #\"urn:appian:translation-string:v1:92e80e69-0c96-45e1-bfdc-134c21f5f6d2\"\n                            }\n                          ),\n                          /*outdated warning*/\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            showWhen: and(\n                              a!isNotNullOrEmpty(local!fieldMap.instanceFields.instanceFieldCountField),\n                              a!isNotNullOrEmpty(local!fieldMap.instanceFields.modelFieldCountField),\n                              fv!row[local!fieldMap.instanceFields.instanceFieldCountField] <> fv!row[local!fieldMap.instanceFields.modelFieldCountField]\n                            ),\n                            text: {\n                              cons!SHRD_DOT_SEPARATOR,\n                              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                icon: \"exclamation-triangle\",\n                                color: local!brandingMap.Orange3\n                              ),\n                              \" \",\n                              #\"urn:appian:translation-string:v1:acbac9a0-c26f-4934-afa4-3cb593900c69\"\n                            }\n                          )\n                        }\n                      )\n                    }\n                  )\n                ),\n                /*Initiated*/\n                #\"SYSTEM_SYSRULES_gridColumn\"(\n                  width: \"1X\",\n                  align: \"END\",\n                  label: #\"urn:appian:translation-string:v1:cda32959-933a-49f8-999f-971eeaa0c035\",\n                  sortField: local!fieldMap.instanceFields.createdOnField,\n                  value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    value: {\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: rule!AIA_UTIL_displayDateTime(\n                          isDisplayTime: true(),\n                          dateTime: fv!row[local!fieldMap.instanceFields.createdOnField]\n                        ),\n                        color: local!brandingMap.Gray4,\n                        size: \"SMALL\"\n                      ),\n                      char(10),\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: rule!AIA_UTIL_displayUserFullName(\n                          userName: fv!row[local!fieldMap.instanceFields.createdByField]\n                        ),\n                        color: local!brandingMap.Gray3,\n                        size: \"SMALL\"\n                      )\n                    }\n                  )\n                )\n              },\n              selectable: true,\n              selectionValue: index(\n                local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                local!fieldMap.caseToInstanceRelationship,\n                local!fieldMap.instanceFields.idField,\n                {}\n              ),\n              selectionSaveInto: {\n                a!save(\n                  local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                  append(\n                    if(\n                      a!isNullOrEmpty(fv!deselectedRows),\n                      local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                      remove(\n                        local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                        wherecontains(\n                          fv!deselectedRows[local!fieldMap.instanceFields.uuidField],\n                          local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases.baselineInstanceUuid]\n                        )\n                      )\n                    ),\n                    rule!AIA_ModelTestSuiteCase_InitializeSuiteForMultipleInstances(\n                      modelTestSuiteId: local!modelTestSuite[recordType!AIA Model Test Suite.testSuiteId],\n                      baselineInstances: fv!selectedRows,\n                      /*shouldnt be needed to do this dif, but adding in case it was cause of issue where multiple cases with same uuid were being created*/\n                      baselineInstanceUuids: difference(\n                        touniformstring(fv!selectedRows[local!fieldMap.instanceFields.uuidField]),\n                        touniformstring(local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases.baselineInstanceUuid])\n                      )\n                    )\n                  )\n                )\n              }\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_pane\"(\n          contents: {\n            rule!SHRD_UTIL_HeaderField(\n              label: #\"urn:appian:translation-string:v1:0b6c396c-0e36-4eb7-8dd9-5ab939fe9e8c\",\n              brandingMap: local!brandingMap,\n              rightSideContents: #\"SYSTEM_SYSRULES_tagField\"(\n                labelPosition: \"COLLAPSED\",\n                marginAbove: \"NONE\",\n                marginBelow: \"NONE\",\n                align: \"END\",\n                tags: #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                  text: local!suiteCaseCount,\n                  backgroundColor: local!brandingMap.Gray0\n                )\n              )\n            ),\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              showBorder: false,\n              showShadow: false,\n              style: local!brandingMap.AppianBackground,\n              marginBelow: \"STANDARD\",\n              contents: {\n                #\"SYSTEM_SYSRULES_columnsLayout\"(\n                  columns: {\n                    #\"SYSTEM_SYSRULES_columnLayout\"(\n                      width: \"3X\",\n                      contents: {\n                        #\"SYSTEM_SYSRULES_textField\"(\n                          label: #\"urn:appian:translation-string:v1:8dbc4902-d0fb-4a2f-913c-9b26bc6250c0\",\n                          labelPosition: \"ABOVE\",\n                          value: local!modelTestSuite[recordType!AIA Model Test Suite.name],\n                          saveInto: local!modelTestSuite[recordType!AIA Model Test Suite.name],\n                          characterLimit: 255,\n                          showCharacterCount: false,\n                          required: true\n                        )\n                      }\n                    ),\n                    #\"SYSTEM_SYSRULES_columnLayout\"(width: \"1X\")\n                  }\n                ),\n                #\"SYSTEM_SYSRULES_paragraphField\"(\n                  label: #\"urn:appian:translation-string:v1:be96096c-d32a-4708-a91d-b5dda4f2f30c\",\n                  value: local!modelTestSuite[recordType!AIA Model Test Suite.description],\n                  saveInto: local!modelTestSuite[recordType!AIA Model Test Suite.description],\n                  characterLimit: 255,\n                  showCharacterCount: false,\n                  height: \"SHORT\"\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_gridLayout\"(\n              label: #\"urn:appian:translation-string:v1:e349de12-26ce-4f07-a2d6-818892336ae7\"(#\"urn:appian:translation-variable:v1:cd1d1493-da70-4c8d-a90a-53b50b533f19\": #\"urn:appian:translation-string:v1:0b6c396c-0e36-4eb7-8dd9-5ab939fe9e8c\"),\n              labelPosition: \"COLLAPSED\",\n              shadeAlternateRows: false,\n              borderStyle: \"LIGHT\",\n              headerCells: {\n                #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(label: #\"urn:appian:translation-string:v1:11c554c3-1e1c-43a1-9ac8-a846f702995f\", align: \"LEFT\"),\n                #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(label: #\"urn:appian:translation-string:v1:cda32959-933a-49f8-999f-971eeaa0c035\", align: \"RIGHT\"),\n                #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(label: \"\", align: \"CENTER\")\n              },\n              columnConfigs: {\n                #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 2),\n                #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(weight: 1),\n                #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\")\n              },\n              rows: #\"SYSTEM_SYSRULES_forEach\"(\n                items: local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                expression: a!localVariables(\n                  /*cache instance in local to make field reference shorter (just for readility)*/\n                  local!baselineInstance: fv!item[local!fieldMap.caseToInstanceRelationship],\n                  #\"SYSTEM_SYSRULES_gridRowLayout\"(\n                    contents: {\n                      /*Instance Detail Field*/\n                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        value: {\n                          /*Document Name with Link*/\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            text: rule!AIA_FormatDocument(\n                              instance: local!baselineInstance\n                            ),\n                            color: local!brandingMap.Gray4,\n                            style: \"STRONG\"\n                          ),\n                          char(10),\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            color: local!brandingMap.Gray3,\n                            size: \"SMALL\",\n                            text: {\n                              rule!AIA_UTIL_displayRequestId(\n                                requestId: local!baselineInstance[local!fieldMap.instanceFields.idField]\n                              ),\n                              cons!SHRD_DOT_SEPARATOR,\n                              #\"urn:appian:translation-string:v1:0dc23859-ec54-488e-8e0e-54f234016331\"(\n                                #\"urn:appian:translation-variable:v1:6432df6d-081e-454e-a970-7f0e3444fc73\": local!baselineInstance[local!fieldMap.instanceFields.versionIdField]\n                              ),\n                              /*unreconciled warning*/\n                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                showWhen: not(\n                                  contains(\n                                    cons!AIA_INSTANCE_STATUS_RECONCILED_ALL,\n                                    local!baselineInstance[local!fieldMap.instanceFields.statusIdField]\n                                  )\n                                ),\n                                text: {\n                                  cons!SHRD_DOT_SEPARATOR,\n                                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                    icon: \"exclamation-triangle\",\n                                    color: local!brandingMap.Orange3\n                                  ),\n                                  \" \",\n                                  #\"urn:appian:translation-string:v1:92e80e69-0c96-45e1-bfdc-134c21f5f6d2\"\n                                }\n                              ),\n                              /*outdated warning*/\n                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                showWhen: and(\n                                  a!isNotNullOrEmpty(local!fieldMap.instanceFields.instanceFieldCountField),\n                                  a!isNotNullOrEmpty(local!fieldMap.instanceFields.modelFieldCountField),\n                                  local!baselineInstance[local!fieldMap.instanceFields.instanceFieldCountField] <> local!baselineInstance[local!fieldMap.instanceFields.modelFieldCountField]\n                                ),\n                                text: {\n                                  cons!SHRD_DOT_SEPARATOR,\n                                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                    icon: \"exclamation-triangle\",\n                                    color: local!brandingMap.Orange3\n                                  ),\n                                  \" \",\n                                  #\"urn:appian:translation-string:v1:acbac9a0-c26f-4934-afa4-3cb593900c69\"\n                                }\n                              )\n                            }\n                          )\n                        }\n                      ),\n                      /*Initiated Detail Field*/\n                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        align: \"RIGHT\",\n                        value: {\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            text: rule!AIA_UTIL_displayDateTime(\n                              isDisplayTime: true(),\n                              dateTime: local!baselineInstance[local!fieldMap.instanceFields.createdOnField]\n                            ),\n                            color: local!brandingMap.Gray4,\n                            size: \"SMALL\"\n                          ),\n                          char(10),\n                          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                            text: rule!AIA_UTIL_displayUserFullName(\n                              userName: local!baselineInstance[local!fieldMap.instanceFields.createdByField]\n                            ),\n                            color: local!brandingMap.Gray3,\n                            size: \"SMALL\"\n                          )\n                        }\n                      ),\n                      /*delete icon*/\n                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                          icon: \"remove\",\n                          caption: #\"urn:appian:translation-string:v1:f19e94dd-200e-4f3f-bb88-736377c41752\",\n                          color: local!brandingMap.gray4,\n                          linkStyle: \"STANDALONE\",\n                          link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                            saveInto: a!save(\n                              local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                              remove(\n                                local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                                fv!index\n                              )\n                            )\n                          )\n                        )\n                      )\n                    }\n                  )\n                )\n              )\n            )\n          }\n        )\n      }\n    ),\n    validations: {\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:bfb5d72b-6617-4661-82ee-0b19b89dbb2f\",\n        showWhen: local!suiteCaseCount < 1,\n        validateAfter: \"SUBMIT\"\n      ),\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:76398188-78a0-437b-a1ce-1fe8ce8458ff\",\n        showWhen: local!suiteCaseCount > 100,\n        validateAfter: \"SUBMIT\"\n      )\n    },\n    showButtonDivider: true,\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:4d40defb-10bc-4a8a-bd4e-a7d76f054fdc\",\n          saveInto: {\n            a!save(\n              ri!modelTestSuiteCasesToDelete,\n              /*save any existing test cases with baseline uuids that are not in the updated local variable list for deletion*/\n              rule!AIA_UTIL_Filter(\n                records: ri!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases],\n                field: recordType!AIA Model Test Suite Case.baselineInstanceUuid,\n                value: local!modelTestSuite[recordType!AIA Model Test Suite.modelTestSuiteCases.baselineInstanceUuid],\n                filterType: \"REJECT\"\n              )\n            ),\n            a!save(\n              ri!modelTestSuite,\n              rule!AIA_UTIL_SetRecordFields(\n                record: local!modelTestSuite,\n                alwaysOverwrite: {\n                  a!map(\n                    field: recordType!AIA Model Test Suite.modifiedBy,\n                    value: loggedInUser()\n                  ),\n                  a!map(\n                    field: recordType!AIA Model Test Suite.modifiedOn,\n                    value: now()\n                  )\n                },\n                neverOverwrite: {\n                  a!map(\n                    field: recordType!AIA Model Test Suite.createdBy,\n                    value: loggedInUser()\n                  ),\n                  a!map(\n                    field: recordType!AIA Model Test Suite.createdOn,\n                    value: now()\n                  )\n                }\n              )\n            )\n          },\n          submit: true,\n          style: \"SOLID\",\n          color: local!brandingMap.AccentColor\n        )\n      },\n      secondaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n          value: true,\n          saveInto: ri!cancel,\n          submit: true,\n          style: \"OUTLINE\",\n          validate: false\n        )\n      }\n    )\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_26889": {
      "name": "AIA_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AIA_UTIL_Filter_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  )\n)"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505670": {
      "name": "AIA_MTR_MultipleOutputsClassificationInstanceReconciled",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "d508ce97-de76-4112-aa59-559557255976": {
      "name": "AIA Model Test Suite Create Or Update",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=pv!modelTestSuite\n\n// Input: ?\n=recordType!AIA Model Test Suite\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\n=pv!modelTestSuiteCasesToDelete\n\n// Input: ?\n=rule!AIA_LogMetric( name: if( a!isNotNullOrEmpty(pv!modelTestSuite[recordType!AIA Model Test Suite.testSuiteId]), /*existing pk, update*/ cons!AIA_MTR_MODEL_TEST_SUITE_UPDATED, /*else, create*/ cons!AIA_MTR_MODEL_TEST_SUITE_CREATED ))"
    },
    "_a-0000ef55-14e0-8000-a041-011c48011c48_505575": {
      "name": "AIA_MTR_MultipleOutputsClassificationModelVersionCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef46-744c-8000-9fed-011c48011c48_483943": {
      "name": "AIA_MTR_ModelTestSuiteCreated",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92571": {
      "name": "AIA_MTR_ExtractionInstanceAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef3f-2bc1-8000-9f8b-011c48011c48_452609": {
      "name": "AIA_ModelTestSuiteCase_InitializeSuiteForMultipleInstances",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof({recordType!AIA Model Test Suite Case()}),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!baselineInstanceUuids,\n    expression: rule!AIA_UTIL_SetRecordFields(\n      record: recordType!AIA Model Test Suite Case(\n        recordType!AIA Model Test Suite Case.modelTestSuiteId: ri!modelTestSuiteId,\n        recordType!AIA Model Test Suite Case.baselineInstanceUuid: fv!item,\n        recordType!AIA Model Test Suite Case.createdBy: loggedInUser(),\n        recordType!AIA Model Test Suite Case.createdOn: now(),\n        recordType!AIA Model Test Suite Case.modifiedBy: loggedInUser(),\n        recordType!AIA Model Test Suite Case.modifiedOn: now()\n      ),\n      childRelationships: if(\n        a!isNullOrEmpty(ri!baselineInstances),\n        {},\n        a!localVariables(\n          local!instanceFieldMap: a!match(\n            value: index(ri!baselineInstances,1,ri!baselineInstances),\n            default: a!map(),\n            whenTrue: rule!AIA_IsExtractionInstance(Instance: fv!value),\n            then: a!map(\n              instanceRelationship: recordType!AIA Model Test Suite Case.extractionInstance,\n              uuidField: recordType!AIA Extraction Instance.instanceUuid\n            ),\n            whenTrue: rule!AIA_IsClassificationInstance(Instance: fv!value),\n            then: a!map(\n              instanceRelationship: recordType!AIA Model Test Suite Case.classificationInstance,\n              uuidField: recordType!AIA Classification Instance.instanceUuid\n            )\n          ),\n          local!relevantInstance: rule!AIA_UTIL_Filter(\n            records: ri!baselineInstances,\n            field: local!instanceFieldMap.uuidField,\n            value: fv!item,\n            filterType: \"FIRST_MATCH\"\n          ),\n          a!map(\n            field: local!instanceFieldMap.instanceRelationship,\n            value: local!relevantInstance,\n            applyWhen: a!isNotNullOrEmpty(local!relevantInstance)\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ee78-c4db-8000-9bae-011c48011c48_92564": {
      "name": "AIA_MTR_ExtractionInstanceFieldAiReview",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ef3f-2bc1-8000-9f8b-011c48011c48_451741": {
      "name": "AIA_Test_GetLatestModelTestSuite",
      "type": "Expression Rule",
      "sail_code": "rule!SHRD_UTIL_QueryRecord(\n  recordType: recordType!AIA Model Test Suite,\n  returnType: \"RECORD_BY_ID\",\n  fields: #\"SYSTEM_SYSRULES_selectionFields\"(\n    allFieldsFromRecordType: {\n      recordType!AIA Model Test Suite,\n      recordType!AIA Model Test Suite.modelTestSuiteCases,\n      recordType!AIA Model Test Suite.modelTestSuiteCases,\n      #\"urn:appian:record-relationship:v1:cfc72308-7728-469d-b7d1-88a289f669d8/f13c4001-6a66-48a6-a22b-70da72df7515/bca2a259-648e-4221-a473-9ba1ca539087/5162b7ef-b5b5-4edc-a3d9-870a7f5127c0\",\n      #\"urn:appian:record-relationship:v1:cfc72308-7728-469d-b7d1-88a289f669d8/f13c4001-6a66-48a6-a22b-70da72df7515/bca2a259-648e-4221-a473-9ba1ca539087/5162b7ef-b5b5-4edc-a3d9-870a7f5127c0/31afa576-bd49-4f56-a2db-1df39df27f26\",\n      recordType!AIA Model Test Suite.modelTestSuiteCases,\n      #\"urn:appian:record-relationship:v1:cfc72308-7728-469d-b7d1-88a289f669d8/f13c4001-6a66-48a6-a22b-70da72df7515/980b87d5-4c25-4ed7-a873-cba45078d196/35ad02e9-44ce-4800-8e27-c5e3373fb868\",\n      #\"urn:appian:record-relationship:v1:cfc72308-7728-469d-b7d1-88a289f669d8/f13c4001-6a66-48a6-a22b-70da72df7515/980b87d5-4c25-4ed7-a873-cba45078d196/35ad02e9-44ce-4800-8e27-c5e3373fb868/ea7a4335-c413-450b-bd99-1a002d82908d\"\n    }\n  ),\n  identifier: rule!SHRD_UTIL_QueryRecord(\n    recordType: recordType!AIA Model Test Suite,\n    returnType: \"SINGLE_OBJECT\",\n    fields: {\n      recordType!AIA Model Test Suite.testSuiteId\n    },\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!AIA Model Test Suite.modifiedOn,\n      ascending: false\n    )\n  )[recordType!AIA Model Test Suite.testSuiteId]\n)"
    }
  }
}