{
  "_metadata": {
    "bundle_id": "AS_GCM_Clause_Usage_Report_-_if_rvrecordrecordTypeAS_GCM_Clause_Usage_Reportclau"
  },
  "objects": {
    "000aedcc-509c-8000-d0ff-7f0000014e7a": {
      "name": "AS GCM Manage Clause Usage Report Clauses",
      "type": "Process Model",
      "sail_code": "// Input: ?\n={pv!clauseUsageReport}\n\n// Input: ?\n={recordType!AS GCM Clause Usage Report}\n\n// Input: ?\n=pv!removedClauses"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75618": {
      "name": "AS_CO_UT_left",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  if(\n    rule!AS_CO_UT_isBlank(ri!text),\n    \"\",\n    left(\n      ri!text,\n      rule!AS_CO_UT_replaceNull(nullableValue: ri!numChars, replacementValue: len(ri!text))\n    )\n  )\n)"
    },
    "_a-0000e615-fd0f-8000-9bc1-011c48011c48_1163937": {
      "name": "AS_GCM_QR_getRefClause",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS GCM R Clause,\n  returnType: a!defaultValue(\n    value: ri!returnType,\n    default: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY\n  ),\n  executeWhen: and(\n    ri!executeWhen,\n    or(\n      any(\n        rule!AS_CO_UT_isNotBlank(_),\n        {\n          ri!additionalFilters,\n          ri!logicalExpression,\n          ri!aggregationFields\n        }\n      ),\n      rule!AS_CO_UT_isNotBlank(ri!clauseIds),\n      rule!AS_CO_UT_isNotBlank(ri!clauseNumbers),\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT\n    )\n  ),\n  fields: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      ri!fields,\n      if(\n        ri!includeRelatedRecords,\n        {\n          recordType!AS GCM R Clause.refFormat,\n          recordType!AS GCM R Clause.ucfSection,\n          recordType!AS GCM R Clause.refSource,\n          recordType!AS GCM R Clause.refType,\n          recordType!AS GCM R Clause.additionalSections\n        },\n        {}\n      )\n    }\n  ),\n  /* To ensure proper null checks, we'll force all queryFilter values to not be null */\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseId,\n      operator: \"in\",\n      value: ri!clauseIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseNumber,\n      operator: \"in\",\n      value: ri!clauseNumbers\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n      operator: \"in\",\n      value: #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!alternateValues,\n        expression: joinarray({ ri!clauseNumbers[1], fv!item }, \" | \")\n      ),\n      applyWhen: and(\n        /*  For Efficiency we enfore the ri!clauseNumbers value to be exactly 1     */\n        rule!AS_GAM_UT_ArrayLength(ri!clauseNumbers) = 1,\n        rule!AS_CO_UT_isNotBlank(ri!alternateValues)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.deviation,\n      operator: \"=\",\n      value: false,\n      applyWhen: rule!AS_CO_UT_booleanDefaultFalse(ri!excludeDeviations)\n    ),\n    ri!additionalFilters\n  },\n  aggregationFields: ri!aggregationFields,\n  relatedRecordData: ri!relatedRecordData\n)"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53654": {
      "name": "AS_GCM_CO_UT_loadBundleFromFolder",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!lang: \"en_US\",\n/* below is deprecated for now, uncomment to support multi-language display */\n  /*if(*/\n    /*isnull(ri!langISOCode),*/\n    /*userlocale(loggedInUser()),*/\n    /*ri!langISOCode*/\n  /*),*/\n  local!bundleName: rule!AS_GCM_determineValueBySolutionFlavor(\n    options: cons!AS_GCM_TXT_VALID_SOLUTION_FLAVORS\n  ),\n  /*local!bundleName*/\n  local!output: loadbundlepropertiesfile(\n    cons!AS_GCM_FLD_PROPERTIES_FILES,\n    local!lang,\n    local!bundleName\n  )[local!bundleName],\n  local!output\n)"
    },
    "_a-0000edca-8e92-8000-9e0b-011c48011c48_15874701": {
      "name": "AS_GCM_QR_GetClauseUsageReportClauses",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS GCM Clause Usage Report Clauses,\n  returnType: a!defaultValue(\n    value: ri!returnType,\n    default: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY\n  ),\n  executeWhen: and(\n    ri!executeWhen,\n    or(\n      any(\n        rule!AS_CO_UT_isNotBlank(_),\n        {\n          ri!additionalFilters,\n          ri!logicalExpression,\n          ri!aggregationFields\n        }\n      ),\n      rule!AS_CO_UT_isNotBlank(ri!reportIds),\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT\n    )\n  ),\n  fields: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      ri!fields,\n      if(ri!includeRelatedRecords, {}, {})\n    }\n  ),\n  /* To ensure proper null checks, we'll force all queryFilter values to not be null */\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM Clause Usage Report Clauses.reportId,\n      operator: \"in\",\n      value: ri!reportIds\n    ),\n    ri!additionalFilters\n  },\n  aggregationFields: ri!aggregationFields,\n  relatedRecordData: ri!relatedRecordData,\n  sort: ri!sort\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73980": {
      "name": "AS_CO_UT_replaceNull",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(ri!nullableValue),\n  ri!replacementValue,\n  ri!nullableValue\n)"
    },
    "_a-0000ec50-376f-8000-9d94-011c48011c48_12909959": {
      "name": "AS_GCM_getColorBasedOnColorName",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!colorName,\n  /* White Colors */\n  equals: \"WHITE\",\n  then: cons!AS_GCM_HEX_CODE_WHITE,\n  equals: \"WHITE_2\",\n  then: cons!AS_GCM_HEX_CODE_WHITE_2,\n  /* Gray Colors */\n  equals: \"GRAY_0\",\n  then: cons!AS_GCM_HEX_CODE_GRAY_0,\n  equals: \"GRAY_1\",\n  then: \"#EDEDF2\",\n  equals: \"GRAY_2\",\n  then: \"#DCDCE5\",\n  equals: \"GRAY_3\",\n  then: cons!AS_GCM_HEX_CODE_GRAY_3,\n  equals: \"GRAY_4\",\n  then: \"#2E2E35\",\n  /* Orange Colors */\n  equals: \"ORANGE_1\",\n  then: \"#FFEED3\",\n  equals: \"ORANGE_2\",\n  then: \"#FFDCA3\",\n  equals: \"ORANGE_3\",\n  then: \"#FAA92F\",\n  equals: \"ORANGE_4\",\n  then: \"#995C00\",\n  /* Blue Colors */\n  equals: \"BLUE_0\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_0,\n  equals: \"BLUE_1\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_1,\n  equals: \"BLUE_2\",\n  then: \"#AFBFF8\",\n  equals: \"BLUE_3\",\n  then: \"#2322F0\",\n  equals: \"BLUE_4\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_4,\n  equals: \"BLUE_5\",\n  then: \"#E9EDFC\",\n  equals: \"BLUE_6\",\n  then: \"#08088D\",\n  equals: \"BLUE_7\",\n  then: \"#DCDEF5\",\n  /* Green Colors  */\n  equals: \"GREEN_1\",\n  then: \"#E3FBDF\",\n  equals: \"GREEN_4\",\n  then: \"#117C00\",\n  /* Teal Colors */\n  equals: \"TEAL_1\",\n  then: \"#E2FAF9\",\n  equals: \"TEAL_3\",\n  then: \"#56ADC0\",\n  equals: \"TEAL_4\",\n  then: \"#2C6770\",\n  /* Purple Colors */\n  equals: \"PURPLE_1\",\n  then: \"#F2E9FF\",\n  equals: \"PURPLE_3\",\n  then: \"#B561FF\",\n  equals: \"PURPLE_4\",\n  then: \"#790DA1\",\n  /* Red Colors */\n  equals: \"RED_4\",\n  then: \"#9F0019\",\n  /* Yellow Colors */\n  equals: \"YELLOW_0\",\n  then: \"#FFFCEB\",\n  equals: \"YELLOW_1\",\n  then: \"#FFF6C9\",\n  equals: \"YELLOW_4\",\n  then: \"#856C00\",\n  /* Appian Colors */\n  equals: \"APPIAN_BACKGROUND\",\n  then: cons!AS_GCM_HEX_CODE_APPIAN_BACKGROUND,\n  equals: \"ACCENT\",\n  then: \"#2322f0\",\n  default: ri!colorName\n)"
    },
    "_a-0000edca-8e92-8000-9e0b-011c48011c48_15871423": {
      "name": "AS_GCM_FM_ManageClauseUsageReportClauses",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!bundle: rule!AS_GCM_CO_UT_loadBundleFromFolder(langISOCode: null()),\n  local!availableClausesCount: rule!AS_GCM_QR_getRefClause(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT,\n    executeWhen: true\n  ),\n  local!clauseUsageReportClauses: rule!AS_GCM_QR_GetClauseUsageReportClauses(\n    reportIds: ri!clauseUsageReport[recordType!AS GCM Clause Usage Report.reportId],\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      1,\n      cons!AS_GCM_CO_INT_QUERY_RECORD_MAX_BATCH_SIZE\n    ),\n    executeWhen: true\n  ).data,\n  local!selectedClauses: local!clauseUsageReportClauses[recordType!AS GCM Clause Usage Report Clauses.clauseId],\n  #\"SYSTEM_SYSRULES_formLayout_v1\"(\n    label: \"Select Clauses\",\n    contents: {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: #\"SYSTEM_SYSRULES_columnsLayout\"(\n          columns: {\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_headingField\"(\n                  text: concat(\n                    \"\",\n                    \" (\",\n                    local!availableClausesCount,\n                    \")\"\n                  ),\n                  size: \"SMALL\",\n                  headingTag: \"H2\",\n                  color: \"STANDARD\",\n                  fontWeight: \"SEMI_BOLD\",\n                  marginBelow: \"STANDARD\"\n                ),\n                #\"SYSTEM_SYSRULES_gridField_v3\"(\n                  label: \"\",\n                  rowHeader: 1,\n                  labelPosition: \"COLLAPSED\",\n                  emptyGridMessage: \"\",\n                  data: #\"SYSTEM_SYSRULES_recordData\"(\n                    recordType: recordType!AS GCM R Clause,\n\n                  ),\n                  columns: {\n                    rule!AS_GCM_UI_refClauseTitleGridColumn(\n                      disableSorting: true,\n                      width: \"2X\",\n                      customTruncationLimit: cons!AS_GCM_INT_CLAUSE_TITLE_CUSTOM_TRUNCATION_LIMIT,\n                      bundle: local!bundle,\n                      linkShowWhen: false,\n                      showSource: false,\n                      showEffectiveDate: false,\n                      showTruncatedClauseTitle: false\n                    ),\n                    #\"SYSTEM_SYSRULES_gridColumn\"(\n                      label: \"\",\n                      value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        value: fv!row[recordType!AS GCM R Clause.refSource.refLabel],\n                        preventWrapping: true\n                      ),\n                      width: \"1X\"\n                    ),\n                    #\"SYSTEM_SYSRULES_gridColumn\"(\n                      label: \"\",\n                      value: #\"SYSTEM_SYSRULES_tagField\"(\n                        tags: #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                          text: rule!AS_GCM_DSP_clauseStatus(\n                            isActive: fv!row[recordType!AS GCM R Clause.isActive],\n                            bundle: local!bundle\n                          ),\n                          backgroundColor: if(\n                            fv!row[recordType!AS GCM R Clause.isActive],\n                            rule!AS_GCM_getColorBasedOnColorName(colorName: \"GREEN_1\"),\n                            rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_1\")\n                          ),\n                          textColor: if(\n                            fv!row[recordType!AS GCM R Clause.isActive],\n                            rule!AS_GCM_getColorBasedOnColorName(colorName: \"GREEN_4\"),\n                            rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_4\")\n                          )\n                        )\n                      ),\n                      width: \"1X\"\n                    )\n                  },\n                  selectable: true,\n                  userFilters: {\n                    #\"urn:appian:user-filter:v1:83b74fc4-71d0-456a-8b20-12ea04b76cd1/4b4bc120-45e6-45cf-962b-ddf5431b5fb8\",\n                    #\"urn:appian:user-filter:v1:83b74fc4-71d0-456a-8b20-12ea04b76cd1/f94d8c3c-9506-4b7e-8a0a-b73b53baf2e6\",\n                    #\"urn:appian:user-filter:v1:83b74fc4-71d0-456a-8b20-12ea04b76cd1/72b58b53-ced9-4027-afa2-5946c8a16f3e\"\n                  },\n                  showRefreshButton: false,\n                  selectionValue: local!selectedClauses,\n                  selectionSaveInto: { local!selectedClauses },\n                  validations: {},\n                  borderStyle: \"LIGHT\",\n                  shadeAlternateRows: false\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_headingField\"(\n                  text: concat(\n                    \"\",\n                    \" (\",\n                    length({ local!selectedClauses }),\n                    \")\"\n                  ),\n                  size: \"SMALL\",\n                  headingTag: \"H2\",\n                  color: \"STANDARD\",\n                  fontWeight: \"SEMI_BOLD\",\n                  marginBelow: \"STANDARD\"\n                ),\n                #\"SYSTEM_SYSRULES_gridField_v3\"(\n                  label: \"\",\n                  labelPosition: \"COLLAPSED\",\n                  rowHeader: 1,\n                  emptyGridMessage: \"\",\n                  showRefreshButton: false,\n                  data: if(\n                    rule!AS_CO_UT_isNotBlank(local!selectedClauses),\n                    #\"SYSTEM_SYSRULES_recordData\"(\n                      recordType: recordType!AS GCM R Clause,\n                      filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n                        field: recordType!AS GCM R Clause.clauseId,\n                        operator: \"in\",\n                        value: tointeger(local!selectedClauses)\n                      )\n                    ),\n                    #\"SYSTEM_SYSRULES_recordData\"(\n                      recordType: recordType!AS GCM R Clause,\n                      filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n                        field: recordType!AS GCM R Clause.clauseId,\n                        operator: \"is null\"\n                      )\n                    ),\n\n                  ),\n                  columns: {\n                    rule!AS_GCM_UI_refClauseTitleGridColumn(\n                      disableSorting: true,\n                      width: \"2X\",\n                      customTruncationLimit: cons!AS_GCM_INT_CLAUSE_TITLE_CUSTOM_TRUNCATION_LIMIT,\n                      bundle: local!bundle,\n                      linkShowWhen: false,\n                      showSource: false,\n                      showEffectiveDate: false,\n                      showType: false,\n                      showTruncatedClauseTitle: false\n                    ),\n                    #\"SYSTEM_SYSRULES_gridColumn\"(\n                      label: \"\",\n                      value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        value: fv!row[recordType!AS GCM R Clause.refSource.refLabel],\n                        preventWrapping: true\n                      ),\n                      width: \"1X\"\n                    ),\n                    #\"SYSTEM_SYSRULES_gridColumn\"(\n                      label: \"\",\n                      value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        labelPosition: \"COLLAPSED\",\n                        value: {\n                          #\"SYSTEM_SYSRULES_richTextIcon\"(\n                            icon: \"close\",\n                            altText: \"Remove\",\n                            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                              label: if(\n                                cons!AS_GCM_TOGGLE_AUTOMATION_TESTING_ENABLED,\n                                fv!row[recordType!AS GCM R Clause.clauseTitle],\n                                \"\"\n                              ),\n                              saveInto: {\n                                a!save(\n                                  local!selectedClauses,\n                                  difference(\n                                    tointeger(local!selectedClauses),\n                                    fv!identifier\n                                  )\n                                )\n                              }\n                            ),\n                            linkStyle: \"STANDALONE\",\n                            color: \"ACCENT\"\n                          )\n                        },\n                        align: \"RIGHT\"\n                      ),\n                      width: \"ICON\"\n                    )\n                  },\n                  selectable: false,\n                  validations: {},\n                  borderStyle: \"LIGHT\",\n                  shadeAlternateRows: false\n                )\n              }\n            ),\n\n          },\n          marginAbove: \"EVEN_LESS\",\n          marginBelow: \"NONE\",\n          spacing: \"SPARSE\",\n          showDividers: true\n        ),\n        padding: \"NONE\",\n        showBorder: false\n      )\n    },\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"\",\n          style: \"SOLID\",\n          submit: true,\n          value: cons!AS_CO_ENUM_USER_ACTION_SUBMIT,\n          saveInto: {\n            ri!userAction,\n            /*CLAUSES TO ADD*/\n            a!save(\n              ri!clauseUsageReport[recordType!AS GCM Clause Usage Report.clauses],\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: difference(\n                  tointeger(local!selectedClauses),\n                  tointeger(\n                    local!clauseUsageReportClauses[recordType!AS GCM Clause Usage Report Clauses.clauseId]\n                  )\n                ),\n                expression: recordType!AS GCM Clause Usage Report Clauses(\n                  recordType!AS GCM Clause Usage Report Clauses.clauseId: fv!item\n                )\n              )\n            ),\n            /*CLAUSES TO REMOVE*/\n            a!save(\n              ri!removedClauses,\n              rule!AS_GCM_filterRecords(\n                records: local!clauseUsageReportClauses,\n                field: recordType!AS GCM Clause Usage Report Clauses.clauseId,\n                value: local!selectedClauses,\n                filterType: \"REJECT\"\n              )\n            )\n          },\n          disabled: a!isNullOrEmpty(local!selectedClauses)\n        )\n      },\n      secondaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Cancel\",\n          submit: true,\n          style: \"OUTLINE\"\n        )\n      }\n    ),\n    skipAutoFocus: true\n  )\n)"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53662": {
      "name": "AS_GAM_CO_I18N_UT_displayLabel",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Text',\n  a!localVariables(\n    local!result: a!refreshVariable(\n      value: if(\n        rule!AS_CO_UT_isBlank(ri!bundleKey),\n        null,\n        if(\n          rule!AS_CO_UT_isBlank(ri!arguments),\n          rule!AS_CO_UT_replaceNull(\n            nullableValue: ri!bundle[ri!bundleKey],\n            replacementValue: ri!bundleKey\n          ),\n          rule!AS_GAM_CO_I18N_UT_replaceArguments(\n            bundleKey: ri!bundle[ri!bundleKey],\n            arguments: ri!arguments\n          )\n        )\n      ),\n      refreshAlways: true\n    ),\n    local!result\n  )\n)"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39082": {
      "name": "AS_CO_UT_booleanDefaultTrue",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  if(\n    isnull(ri!boolean),\n    true,\n    ri!boolean\n  )\n)"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39070": {
      "name": "AS_CO_UT_booleanDefaultFalse",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  if(\n    isnull(ri!boolean),\n    false,\n    ri!boolean\n  )\n)"
    },
    "_a-0000eb97-b2e8-8000-9d39-011c48011c48_11129558": {
      "name": "AS_GCM_UI_refClauseTitleGridColumn",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridColumn\"(\n  label: \"\",\n  sortField: if(\n    rule!AS_CO_UT_booleanDefaultFalse(ri!disableSorting),\n    {},\n    recordType!AS GCM R Clause.fullClauseTitle\n  ),\n  value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: {\n        rule!AS_GCM_CO_DSP_primaryRecordListField(\n          recordTitle: a!match(\n            value: rule!AS_CO_UT_booleanDefaultFalse(ri!showTruncatedClauseTitle),\n            whenTrue: and(\n              rule!AS_CO_UT_isNotBlank(ri!customTruncationLimit),\n              len(\n                fv!row[recordType!AS GCM R Clause.clauseTitle]\n              ) > ri!customTruncationLimit\n            ),\n            then: rule!AS_GCM_DSP_clauseRecordTitle(\n              clauseNumber: fv!row[recordType!AS GCM R Clause.clauseNumber],\n              clauseTitle: fv!row[recordType!AS GCM R Clause.clauseTitle],\n              clauseTitleLength: ri!customTruncationLimit,\n              alternateValue: fv!row[recordType!AS GCM R Clause.alternateValue],\n              deviation: fv!row[recordType!AS GCM R Clause.deviation]\n            ),\n            whenTrue: fv!value,\n            then: fv!row[recordType!AS GCM R Clause.truncatedClauseTitle],\n            default: fv!row[recordType!AS GCM R Clause.fullClauseTitle]\n          ),\n          recordType: recordType!AS GCM R Clause,\n          recordIdentifier: fv!row[recordType!AS GCM R Clause.clauseId],\n          linkShowWhen: ri!linkShowWhen\n        ),\n        if(\n          or(\n            rule!AS_CO_UT_booleanDefaultTrue(ri!showType),\n            rule!AS_CO_UT_booleanDefaultTrue(ri!showSource),\n            rule!AS_CO_UT_booleanDefaultTrue(ri!showEffectiveDate)\n          ),\n          {\n            char(10),\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: joinarray(\n                {\n                  index(\n                    {\n                      rule!AS_GAM_CO_I18N_UT_displayLabel(\n                        bundle: ri!bundle,\n                        bundleKey: fv!row[recordType!AS GCM R Clause.refType.refKey]\n                      ),\n                      rule!AS_GAM_CO_I18N_UT_displayLabel(\n                        bundle: ri!bundle,\n                        bundleKey: fv!row[recordType!AS GCM R Clause.refSource.refKey]\n                      ),\n                      fv!row[recordType!AS GCM R Clause.effectiveDate]\n                    },\n                    {\n                      where(\n                        {\n                          rule!AS_CO_UT_booleanDefaultTrue(ri!showType),\n                          rule!AS_CO_UT_booleanDefaultTrue(ri!showSource),\n                          rule!AS_CO_UT_booleanDefaultTrue(ri!showEffectiveDate)\n                        }\n                      )\n                    },\n                    null\n                  )\n                },\n                \" â€¢ \"\n              ),\n              color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\"),\n              size: \"SMALL\"\n            )\n          },\n          {}\n        )\n      }\n    ),\n    tooltip: if(\n      and(\n        or(\n          and(\n            rule!AS_CO_UT_isNotBlank(ri!customTruncationLimit),\n            len(\n              fv!row[recordType!AS GCM R Clause.clauseTitle]\n            ) > ri!customTruncationLimit\n          ),\n          and(\n            rule!AS_CO_UT_booleanDefaultFalse(ri!showTruncatedClauseTitle),\n            len(\n              fv!row[recordType!AS GCM R Clause.clauseTitle]\n            ) > cons!AS_GCM_ENUM_TEXT_LIMIT_FOR_CLAUSE_TITLE\n          )\n        ),\n        not(\n          rule!AS_CO_UT_booleanDefaultFalse(ri!preventWrapping)\n        )\n      ),\n      fv!row[recordType!AS GCM R Clause.fullClauseTitle],\n      {}\n    ),\n    preventWrapping: rule!AS_CO_UT_booleanDefaultFalse(ri!preventWrapping)\n  ),\n  align: \"START\",\n  width: a!defaultValue(value: ri!width, default: null)\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782": {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  not(rule!AS_CO_UT_isBlank(ri!input))\n)"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53557": {
      "name": "AS_GCM_CO_DSP_primaryRecordListField",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_richTextItem_v1\"(\n  text: {\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: { #\"SYSTEM_SYSRULES_richTextIcon\"(icon: ri!icon), \" \" },\n      showWhen: rule!AS_CO_UT_isNotBlank(ri!icon)\n    ),\n    ri!recordTitle\n  },\n  link: #\"SYSTEM_SYSRULES_recordLink\"(\n    label: ri!recordTitle,\n    recordtype: ri!recordType,\n    identifier: ri!recordIdentifier,\n    showWhen: ri!linkShowWhen\n  ),\n  linkStyle: \"STANDALONE\",\n  size: \"STANDARD\",\n  style: ri!style,\n  showWhen: ri!showWhen,\n  color: ri!color\n)"
    },
    "_a-0000e6c8-d132-8000-9bbe-011c48011c48_469266": {
      "name": "AS_CO_UT_queryRecord",
      "type": "Expression Rule",
      "sail_code": "/*\n\nPLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE\n\nPlease DO NOT auto-format this rule\n\n*/\n\n\n/*Error handling*/\nif(\n  rule!AS_CO_UT_isBlank(ri!returnType),\n  fn!error(concat(\"Null `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  not(contains(rule!AS_CO_CONS_QE_RETURN_TYPES(), ri!returnType)),\n  fn!error(concat(\"Unknown `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  rule!AS_CO_UT_isBlank(ri!recordType),\n  fn!error(concat(\"Null `recordType` passed to AS_CO_UT_queryRecord.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` is required (cannot be null) for `returnType` DATA_SUBSET\")),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isNotBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` must be null when the `returnType` is not DATA_SUBSET, instead use `sort` to pass custom-sorting and `startIndex` & `batchSize` will be automatically calculated for you\")),\n  and(\n    not(isnull(ri!pagingInfo)),\n    rule!AS_CO_UT_isNotBlank(ri!sort)\n  ),\n  fn!error(concat(\"`sort` parameter must be null when `pagingInfo` is provided.  Use the sort field of the provided `pagingInfo` instead.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You must provide an input for `aggregationFields` when `returnType` is AGGREGATION\"),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!fields)\n  ),\n  fn!error(\"You cannot provide an input for `fields` when `returnType` is AGGREGATION.  Use `aggregationFields` instead.\"),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You cannot provide an input for `aggregationFields` when `returnType` is not AGGREGATION.  Use `fields` instead.\"),\n  and(\n    rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n    not(contains(\n      {cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY, cons!AS_CO_ENUM_QE_RETURN_TYPE_SINGLE_OBJECT, cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET},\n      ri!returnType\n    )),\n  ),\n  fn!error(\"'castToCdtType' is only supported for SINGLE_OBJECT, OBJECT_ARRAY, and DATA_SUBSET return types\"),\n\n  a!localVariables(\n\n    /*Determine the castResultToType*/\n    local!castResultToType: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   'type!{http://www.appian.com/ae/types/2009}Map',\n        /*SINGLE_OBJECT*/ a!defaultValue(ri!castToCdtType, ri!recordType),\n        /*OBJECT_ARRAY*/  rule!AS_CO_UT_returnArrayTypeNumber(type: a!defaultValue(ri!castToCdtType, ri!recordType)),\n        /*AGGREGATION*/   'type!{http://www.appian.com/ae/types/2009}Map?list',\n        /*TOTAL_COUNT*/   'type!{http://www.appian.com/ae/types/2009}Integer',\n      }\n    ),\n\n    /*Determine the batchSize*/\n    local!batchSize: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   ri!pagingInfo.batchSize,\n        /*SINGLE_OBJECT*/ 1,\n        /*OBJECT_ARRAY*/  a!defaultValue(ri!pagingInfo.batchSize, cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE),\n        /*AGGREGATION*/   cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE,\n        /*TOTAL_COUNT*/   1,\n      }\n    ),\n\n    /*Determine the pagingInfo*/\n    local!pagingInfo: if(\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n      /*Use specific pagingInfo for DATA_SUBSET*/\n      ri!pagingInfo,\n      /*Otherwise calculate pagingInfo for all other returnTypes*/\n      #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: local!batchSize,\n        sort: ri!sort\n      )\n    ),\n\n    /*Determine the fetchTotalCount*/\n    local!fetchTotalCount: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   true,\n        /*SINGLE_OBJECT*/ false,\n        /*OBJECT_ARRAY*/  false,\n        /*AGGREGATION*/   false,\n        /*TOTAL_COUNT*/   true,\n      }\n    ),\n\n    /*Execute the query*/\n    local!queryResult: a!refreshVariable(\n      value: if(\n        ri!executeWhen = false,\n        null(\n          if(\n            ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n            rule!AS_CO_TYPE_Dictionary(),\n            ri!recordType\n          )\n        ),\n        #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n          recordType: ri!recordType,\n          fields: a!defaultValue(\n            ri!fields,\n            ri!aggregationFields\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            logicalExpressions: {\n              #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                operator: \"AND\",\n                ignoreFiltersWithEmptyValues: true,\n                filters: a!defaultValue(ri!filters, {})\n              ),\n              a!defaultValue(ri!logicalExpression, {})\n            }\n          ),\n          pagingInfo: local!pagingInfo,\n          fetchTotalCount: local!fetchTotalCount,\n          relatedRecordData: ri!relatedRecordData\n        )\n      ),\n      refreshOnVarChange: ri!triggerRefresh,\n      refreshAfter: {\"RECORD_ACTION\"}\n    ),\n\n    /*Parse the queryResult*/\n    local!queryResultParse: choose(\n      rule!AS_CO_UT_chooseWherecontainsHelper(\n        value: ri!returnType,\n        inArray: rule!AS_CO_CONS_QE_RETURN_TYPES()\n      ),\n      /*Default, required value based on how AS_CO_UT_chooseWherecontainsHelper operates*/ \"\",\n      /*DATA_SUBSET*/   if(\n        rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n        /*Note that for a data subset, the parent is a map, but we allow casting the child 'data' field as well*/\n        rule!AS_CO_UT_updateCdtFieldsByFieldValuePairs(\n          cdt: local!queryResult,\n          fieldValuePairs: {\n            field: \"data\",\n            value: cast(\n              rule!AS_CO_UT_returnArrayTypeNumber(type: ri!castToCdtType),\n              local!queryResult.data\n            )\n          }\n        ),\n        local!queryResult\n      ),\n      /*SINGLE_OBJECT*/ local!queryResult.data,\n      /*OBJECT_ARRAY*/  local!queryResult.data,\n      /*AGGREGATION*/   local!queryResult.data,\n      /*TOTAL_COUNT*/   local!queryResult.totalCount,\n    ),\n\n    rule!AS_CO_UT_cast(\n      type: local!castResultToType,\n      value: local!queryResultParse\n    )\n  )\n)\n\n/*\n\nDOCUMENTATION\n\nThis rule is designed to minimize the overhead with querying data and then casting the result\n\n\nRequired Inputs:\n\n1. recordType\n- This is a recordtype! input of the data type to be queried against\n\n2. returnType\n- This depends on the purpose for the query, and should be one of the returnTypes in rule!AS_CO_CONS_QE_RETURN_TYPES\n-- DATA_SUBSET - This will return a DataSubset; pagingInfo is required\n-- SINGLE_OBJECT - This will return a single record whose type is the recordType; pagingInfo must be null\n-- ARRAY_OBJECT - This will return an array of records whose type is an array of the recordType; pagingInfo must be null\n-- AGGREGATION - This will return an array of Dictionaries; pagingInfo must be null\n---- NOTE: If you need Aggregation with paging controls, such as for a grid, use returnType DATA_SUBSET\n-- TOTAL_COUNT - This will return an Integer of the total count; pagingInfo must be null\n\n\nOptional Inputs:\n\n3. executeWhen\n- The query will not execute if this is false, the query will execute if this is true or null\n-- This is meant to operate in a similar manner to the showWhen parameter of components\n- Use this to skip execution of a query without needing to wrap if() statements around the rule\n-- Examples of this would be to skip querying if your filter value is a null ID\n- If the query does not execute, this will return a null value whose type is based on the returnType input\n\n4. triggerRefresh\n- By default, the query will always re-execute whenever any inputs change\n- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change (e.g. after a record action)\n\n5. filters\n- Array of filters to apply to the query, built with a!queryFilter()\n- These filters will be applied with an AND operator\n- These filters will apply in addition to the logicalExpression input, combining both with an AND operator\n\n6. logicalExpression\n- A logical expression to apply to the query, built with a!queryLogicalExpression()\n- This logical expression will apply in addition to the filters input, combining both with an AND operator\n\n7. aggregationFields\n- Aggregation to apply to the query, built with a!aggregationField()\n\n8. fields\n- List of recordFields and relatedRecordFields to return.  When querying a record, any relatedRecordFields are not returned\nby default, and must be specifically requested.\n\n9. pagingInfo\n- Paging info to apply to the query, built with a!pagingInfo() or derived from fv!pagingInfo in grids\n- This is required if passing returnType DATA_SUBSET, otherwise it must be null\n- For returnTypes that are not DATA_SUBSET, the batch size will be automatically calculated depending on the returnType\n-- For example, passing SINGLE_OBJECT will automatically apply a batch size of 1, whereas ARRAY_OBJECT and AGGREGATION will automatically apply a batch size of the defined query batch size maximum\n\n10. sort\n- Array of sort to apply to the query, built with a!sortInfo()\n- This is meant to be used with returnType ARRAY_OBJECT and AGGREGATION, since pagingInfo is not required for these, but a specified sort may be used\n- Cannot be used in conjunction with pagingInfo.sort\n\n11. castToCdtType\n- Any cdt type to the cast the result set. \n- This is meant to be used with only returnType OBJECT_ARRAY and SINGLE_OBJECT.\n\n*/"
    },
    "_a-0000e615-fd0f-8000-9bc1-011c48011c48_1163967": {
      "name": "AS_GCM_DSP_clauseRecordTitle",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isNotBlank(ri!clauseTitle),\n  a!localVariables(\n    local!clauseTitle: if(\n      rule!AS_CO_UT_isBlank(ri!clauseTitleLength),\n      ri!clauseTitle,\n      rule!AS_CO_UT_left(\n        text: ri!clauseTitle,\n        numChars: ri!clauseTitleLength\n      ) & if(\n        len(ri!clauseTitle) > ri!clauseTitleLength,\n        \"...\",\n        null\n      )\n    ),\n    joinarray(\n      rule!AS_CO_UT_rejectNullValuesFromArray(\n        {\n          ri!clauseNumber,\n          local!clauseTitle,\n          if(\n            rule!AS_CO_UT_isBlank(ri!alternateValue),\n            null,\n            concat(\n              cons!AS_GCM_CLAUSE_TITLE_ALTERNATE,\n              char(32),\n              ri!alternateValue\n            )\n          ),\n          if(\n            rule!AS_CO_UT_booleanDefaultFalse(ri!deviation),\n            cons!AS_GCM_CLAUSE_TITLE_DEVIATION,\n            null\n          )\n        }\n      ),\n      \" | \"\n    )\n  ),\n  ri!clauseNumber\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76367": {
      "name": "AS_CO_UT_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AS_CO_UT_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000e615-fd0f-8000-9bc1-011c48011c48_1163736": {
      "name": "AS_GCM_DSP_clauseStatus",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!isActive = true,\n  \"\",\n  if(\n    ri!isActive = false,\n    \"\",\n    \"-\"\n  )\n)"
    },
    "_a-0000eb32-2fbb-8000-9d0d-011c48011c48_9761091": {
      "name": "AS_GCM_filterRecords",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AS_GCM_filterRecords_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536": {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    }
  }
}