{
  "uuid": "_a-0000e40a-de32-8000-9ba8-011c48011c48_260812-tmg-am-am",
  "name": "AS_GSS_TMG_DSP_modificationCommentForTemplateAudit",
  "type": "Interface",
  "description": "Returns the comment for Template changes audit",
  "sail_code": "a!localVariables(\n  local!templateTaskRef: rule!AS_GSS_TMG_QE_getTemplateTask(\n    templateTaskId: ri!templateAuditEntry.itemId\n  ),\n  local!refData: rule!AS_GSS_QE_getRefDataByTypes(\n    refTypes: {\n      cons!AS_GSS_REF_TYPE_OPERATION,\n      cons!AS_GSS_REF_TYPE_ITEM_DURATION_UNIT\n    }\n  ),\n  local!taskRef: rule!AS_GSS_TMG_QE_getTaskRefs(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY\n  ),\n  local!refDocTemplates: rule!AS_GSS_QE_getRefDocumentTemplate(isActive: true),\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    value: {\n      /*Added, Edited, Deactivated or Deleted*/\n      rule!AS_ADT_DSP_displayAuditActionCodeText(\n        actionCode: ri!templateAuditEntry.actionCode\n      ),\n      if(\n        contains(\n          {\n            cons!AS_ADT_ENUM_AUDIT_ACTION_CODE_DEACTIVATE,\n            cons!AS_ADT_ENUM_AUDIT_ACTION_CODE_REACTIVATE\n          },\n          tostring(ri!templateAuditEntry.actionCode)\n        ),\n        {\n          if(\n            tostring(\n              ri!selectedTemplate.templateType.refDataId\n            ) = cons!AS_GSS_REF_ID_TEMPLATE_TYPE_DOCUMENT_REVIEW,\n            \"the review \",\n            \"the process \"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: ri!selectedTemplate.templateName,\n            style: \"STRONG\"\n          )\n        },\n        {}\n      ),\n      if(\n        tointeger(\n          ri!selectedTemplate.templateType.refDataId\n        ) = cons!AS_GSS_REF_ID_TEMPLATE_TYPE_DOCUMENT_REVIEW,\n        rule!AS_GSS_TMG_DSP_displayAuditModificationForReviews(\n          i18nData: ri!i18nData,\n          fieldName: ri!templateAuditEntry.fieldChanges.fieldName,\n          oldValue: ri!templateAuditEntry.fieldChanges.oldValue,\n          newValue: ri!templateAuditEntry.fieldChanges.newValue,\n          templateAuditEntry: ri!templateAuditEntry,\n          taskRefData: ri!taskRefData,\n          templateTaskRef: local!templateTaskRef,\n          template: ri!selectedTemplate,\n          itemId: ri!templateAuditEntry.itemId\n        ),\n        rule!AS_GSS_TMG_DSP_displayAuditModificationForTemplate(\n          i18nData: ri!i18nData,\n          fieldName: ri!templateAuditEntry.fieldChanges.fieldName,\n          oldValue: ri!templateAuditEntry.fieldChanges.oldValue,\n          newValue: ri!templateAuditEntry.fieldChanges.newValue,\n          templateAuditEntry: ri!templateAuditEntry,\n          taskRefData: ri!taskRefData,\n          templateTaskRef: local!templateTaskRef,\n          template: ri!selectedTemplate,\n          itemId: ri!templateAuditEntry.itemId\n        )\n      ),\n      if(\n        ri!templateAuditEntry.actionCode = cons!AS_ADT_ENUM_AUDIT_ACTION_CODE_MODIFY,\n        /*Log changes if value was modified*/\n        {\n          char(10),\n          #\"SYSTEM_SYSRULES_richTextBulletedList\"(\n            items: {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: {\n                      \"Changed from\",\n\n                      \" \"\n                    },\n                    size: \"SMALL\"\n                  ),\n                  rule!AS_ADT_DSP_displayAuditActionValue(\n                    /*i18nData: ri!i18nData,*/\n                    value: ri!templateAuditEntry.fieldChanges.oldValue,\n                    displayText: rule!AS_GSS_TMG_DSP_returnExpressionsBasedOnFieldNames(\n                      fieldName: ri!templateAuditEntry.fieldChanges.fieldName,\n                      value: ri!templateAuditEntry.fieldChanges.oldValue,\n                      refData: local!refData,\n                      taskRef: local!taskRef,\n                      refDocTemplates: local!refDocTemplates\n                    )\n                  ),\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: {\n                      \" \",\n                      \"to\",\n\n\n                      \" \"\n                    },\n                    size: \"SMALL\"\n                  ),\n                  rule!AS_ADT_DSP_displayAuditActionValue(\n                    /*i18nData: ri!i18nData,*/\n                    value: ri!templateAuditEntry.fieldChanges.newValue,\n                    displayText: rule!AS_GSS_TMG_DSP_returnExpressionsBasedOnFieldNames(\n                      fieldName: ri!templateAuditEntry.fieldChanges.fieldName,\n                      value: ri!templateAuditEntry.fieldChanges.newValue,\n                      refData: local!refData,\n                      taskRef: local!taskRef,\n                      refDocTemplates: local!refDocTemplates\n                    )\n                  )\n                }\n              )\n            }\n          )\n        },\n        {}\n      )\n    }\n  )\n)",
  "calls": [
    {
      "name": "AS_GSS_TMG_QE_getTemplateTask",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_QE_getRefDataByTypes",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_TMG_QE_getTaskRefs",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_QE_getRefDocumentTemplate",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_ADT_DSP_displayAuditActionCodeText",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_TMG_DSP_displayAuditModificationForReviews",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_TMG_DSP_displayAuditModificationForTemplate",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_ADT_DSP_displayAuditActionValue",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_TMG_DSP_returnExpressionsBasedOnFieldNames",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_REF_TYPE_OPERATION",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_REF_TYPE_ITEM_DURATION_UNIT",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_ADT_ENUM_AUDIT_ACTION_CODE_DEACTIVATE",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_ADT_ENUM_AUDIT_ACTION_CODE_REACTIVATE",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_REF_ID_TEMPLATE_TYPE_DOCUMENT_REVIEW",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_ADT_ENUM_AUDIT_ACTION_CODE_MODIFY",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    }
  ],
  "called_by": [
    {
      "name": "AS_GSS_TMG_GRD_templateChangesAudit",
      "type": "Interface",
      "dep_type": "CALLS"
    }
  ]
}