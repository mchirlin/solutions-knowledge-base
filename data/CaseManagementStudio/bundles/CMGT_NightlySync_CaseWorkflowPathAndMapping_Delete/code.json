{
  "_metadata": {
    "bundle_id": "CMGT_NightlySync_CaseWorkflowPathAndMapping_Delete"
  },
  "objects": {
    "_a-0000ed38-5af1-8000-9d31-011c48011c48_3554294": {
      "name": "CMGT_GetCompletedCaseIdsPastGivenDays",
      "type": "Expression Rule",
      "sail_code": "/*Querying the cases that are completed before the given days from current date and time*/\nrule!CMGT_QR_GetCase(\n  returnType: \"DATA_SUBSET\",\n  additionalFilters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.completedOn,\n      operator: \"<\",\n      value: rule!CMGT_UTIL_ConvertDateTimeToTimezone(\n        datetime: now(),\n        timezone: rule!CMGT_UTIL_SystemTimezone()\n      ) - a!defaultValue(value: ri!givenDays, default: 0)\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.activeTasksCount,\n      operator: \"=\",\n      value: 0\n    )\n  },\n  fields: {\n    recordType!CMGT_Case.caseId\n  },\n  excludeRelatedRecords: true,\n  pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n    startIndex: a!defaultValue(ri!startIndex, 1),\n    batchSize: a!defaultValue(\n      ri!batchSize,\n      cons!CMGT_INT_QUERY_MAX_BATCH_SIZE\n    ),\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!CMGT_Case.caseId,\n      ascending: true\n    )\n  )\n).identifiers"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_56355": {
      "name": "CMGT_UTIL_SystemTimezone",
      "type": "Expression Rule",
      "sail_code": "usertimezone(\"Administrator\")"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_56367": {
      "name": "CMGT_UTIL_ConvertDateTimeToTimezone",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(value: ri!dateTime),\n  null(),\n  local(\n    gmt(ri!dateTime),\n    a!defaultValue(\n      value: ri!timezone,\n      default: rule!CMGT_UTIL_SystemTimezone()\n    )\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_19509": {
      "name": "CMGT_QR_GetCase",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Case,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.caseId,\n      operator: \"in\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.dueOn,\n      operator: \">\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate - 1,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn,true)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Case.dueOn,\n      operator: \"<=\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn,true)\n      )\n    )\n  },\n  logicalExpressions: ri!additionalLogicalExpression,\n  fields: {\n    ri!fields,\n    if(\n      ri!excludeRelatedRecords,\n      {},\n      {\n        recordType!CMGT_Case.status,\n        recordType!CMGT_Case.priority,\n        recordType!CMGT_Case.caseType\n      }\n    ),\n    if(\n      ri!includeAssignees,\n      {\n        recordType!CMGT_Case.roles,\n        recordType!CMGT_Case.roles\n      },\n      {}\n    ),\n    if(\n      ri!includePrimaryContact,\n      {\n        recordType!CMGT_Case.caseEntityMap,\n        #\"urn:appian:record-relationship:v1:d81cdd0e-c54d-4b8e-beec-b7ae37fefe7f/9455b8a8-142d-4976-8b8d-83403eedad6a/043457e2-ee0b-4c7a-8210-8671bbe73128/2a2b64c2-0530-4e0a-a173-d26a396e3cc9\"\n      },\n      {}\n    )\n  },\n  relatedRecordData: {\n    ri!relatedRecordData,\n    if(\n      ri!includePrimaryContact,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Case.caseEntityMap,\n        limit: 1,\n        filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!CMGT_CaseEntityMap.entity.entityTypeId,\n          operator: \"=\",\n          value: cons!CMGT_REFID_ENTITY_TYPE_CONTACT\n        )\n      ),\n      {}\n    ),\n    if(\n      ri!includeAssignees,\n      #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!CMGT_Case.roles,\n        filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n          field: recordType!CMGT_Role.roleTypeId,\n          operator: \"in\",\n          value: {\n            cons!CMGT_REFID_ROLE_TYPE_USER_ASSIGNEE,\n            cons!CMGT_REFID_ROLE_TYPE_GROUP_ASSIGNEE\n          }\n        )\n      ),\n      {}\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "0002ed38-c661-8000-1d71-7f0000014e7a": {
      "name": "CMGT_NightlySync_CaseWorkflowPathAndMapping_Delete",
      "type": "Process Model",
      "sail_code": "// Input: ?\npv!caseIds[tp!instanceindex]\n\n// Output: ?\nrule!CMGT_GetCompletedCaseIdsPastGivenDays(\n  givenDays: cons!CMGT_INT_DAYS_CHECK_FOR_CLOSED_CASES,\n  batchSize:cons!CMGT_INT_MAX_POSSIBLE_PROCESS_NODE_MNI_INSTANCES,\n  startIndex:pv!startIndex\n)\n\n// Output: ?\npv!startIndex+cons!CMGT_INT_MAX_POSSIBLE_PROCESS_NODE_MNI_INSTANCES"
    }
  }
}