{
  "_metadata": {
    "bundle_id": "AS_GCM_QNM_T_Rule_-_Create_Rules_with_AI"
  },
  "objects": {
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76433": {
      "name": "AS_CO_UT_indexPath",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldsAndIndices: rule!AS_CO_UT_zINTERNAL_indexPath_nestedFieldArrayHandler(field: ri!field),\n\n  reduce(\n    index(_, _, ri!indexDefault),\n    ri!cdt,\n    local!fieldsAndIndices\n  )\n)"
    },
    "_a-0000e2cd-bc96-8000-9ba2-011c48011c48_84411": {
      "name": "AS_CO_I18N_UT_getAndDisplayLabelSingle",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  a!localVariables(\n  \n    local!bundleKeyParse: rule!AS_CO_I18N_UT_parseBundleKey(\n      bundleKey: ri!bundleKey\n    ),\n    \n    local!i18nData: rule!AS_CO_I18N_UT_loadBundleFromFolder(\n      bundleFolder: ri!bundleFolder,\n      bundleNames: local!bundleKeyParse.bundleName,\n      localeAgnostic: ri!localeAgnostic\n    ),\n    \n    rule!AS_CO_I18N_UT_displayLabel(\n      i18nData: local!i18nData,\n      bundleKey: ri!bundleKey,\n      arguments: ri!arguments\n    )\n  )\n)"
    },
    "_a-0000e615-fd0f-8000-9bc1-011c48011c48_1163937": {
      "name": "AS_GCM_QR_getRefClause",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  recordType: recordType!AS GCM R Clause,\n  returnType: a!defaultValue(\n    value: ri!returnType,\n    default: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY\n  ),\n  executeWhen: and(\n    ri!executeWhen,\n    or(\n      any(\n        rule!AS_CO_UT_isNotBlank(_),\n        {\n          ri!additionalFilters,\n          ri!logicalExpression,\n          ri!aggregationFields\n        }\n      ),\n      rule!AS_CO_UT_isNotBlank(ri!clauseIds),\n      rule!AS_CO_UT_isNotBlank(ri!clauseNumbers),\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_TOTAL_COUNT\n    )\n  ),\n  fields: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      ri!fields,\n      if(\n        ri!includeRelatedRecords,\n        {\n          recordType!AS GCM R Clause.refFormat,\n          recordType!AS GCM R Clause.ucfSection,\n          recordType!AS GCM R Clause.refSource,\n          recordType!AS GCM R Clause.refType,\n          recordType!AS GCM R Clause.additionalSections\n        },\n        {}\n      )\n    }\n  ),\n  /* To ensure proper null checks, we'll force all queryFilter values to not be null */\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseId,\n      operator: \"in\",\n      value: ri!clauseIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseNumber,\n      operator: \"in\",\n      value: ri!clauseNumbers\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n      operator: \"in\",\n      value: #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!alternateValues,\n        expression: joinarray({ ri!clauseNumbers[1], fv!item }, \" | \")\n      ),\n      applyWhen: and(\n        /*  For Efficiency we enfore the ri!clauseNumbers value to be exactly 1     */\n        rule!AS_GAM_UT_ArrayLength(ri!clauseNumbers) = 1,\n        rule!AS_CO_UT_isNotBlank(ri!alternateValues)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.deviation,\n      operator: \"=\",\n      value: false,\n      applyWhen: rule!AS_CO_UT_booleanDefaultFalse(ri!excludeDeviations)\n    ),\n    ri!additionalFilters\n  },\n  aggregationFields: ri!aggregationFields,\n  relatedRecordData: ri!relatedRecordData\n)"
    },
    "_a-0000e2cd-bc96-8000-9ba2-011c48011c48_81720": {
      "name": "AS_CO_I18N_UT_loadBundleFromFolder",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Dictionary',\n  a!localVariables(\n    \n    local!locale: if(\n      ri!localeAgnostic,\n      null,\n      rule!AS_CO_I18N_UT_getUserLocale(user: loggedInUser())\n    ),\n    \n    if(\n      rule!AS_CO_UT_isBlank(ri!bundleFolder),\n      \n      null,\n      \n      a!localVariables(\n        /*Wrapping this in a local variable to ensure caching -- it will only re-execute if inputs change*/\n        local!bundleData: loadbundlepropertiesfile(\n          ri!bundleFolder,\n          local!locale,\n          a!flatten(ri!bundleNames)\n        ),\n        \n        local!bundleData\n      )\n    )\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73980": {
      "name": "AS_CO_UT_replaceNull",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(ri!nullableValue),\n  ri!replacementValue,\n  ri!nullableValue\n)"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39082": {
      "name": "AS_CO_UT_booleanDefaultTrue",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  if(\n    isnull(ri!boolean),\n    true,\n    ri!boolean\n  )\n)"
    },
    "_a-0000ef32-86c3-8000-9e6c-011c48011c48_18244989": {
      "name": "AS_GCM_CPS_CreateRulesWithAI",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!bundle: rule!AS_GCM_CO_UT_loadBundleFromFolder(langISOCode: null()),\n  local!isShowInstruction: false,\n  if(\n    local!isShowInstruction,\n    rule!AS_GCM_FM_CreateRulesWithAI_Instruction(\n      bundle: local!bundle,\n      isShowInstruction: local!isShowInstruction\n    ),\n    rule!AS_GCM_FM_CreateRulesWithAI_Prompt(\n      bundle: local!bundle,\n      isShowInstruction: local!isShowInstruction,\n      buttonAction: ri!buttonAction,\n      prompt: ri!prompt\n    )\n  )\n)"
    },
    "_a-0000ef4e-32c4-8000-9e72-011c48011c48_18401335": {
      "name": "AS_GCM_MTR_SAVE_GenerateRulesUsingAI_RuleCreated",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp: 1, local!temp)"
    },
    "_a-0000ef4e-32c4-8000-9e72-011c48011c48_18401445": {
      "name": "AS_GCM_MTR_SAVE_GenerateRulesUsingAI_RuleCreated_Active",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp: 1, local!temp)"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53662": {
      "name": "AS_GAM_CO_I18N_UT_displayLabel",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Text',\n  a!localVariables(\n    local!result: a!refreshVariable(\n      value: if(\n        rule!AS_CO_UT_isBlank(ri!bundleKey),\n        null,\n        if(\n          rule!AS_CO_UT_isBlank(ri!arguments),\n          rule!AS_CO_UT_replaceNull(\n            nullableValue: ri!bundle[ri!bundleKey],\n            replacementValue: ri!bundleKey\n          ),\n          rule!AS_GAM_CO_I18N_UT_replaceArguments(\n            bundleKey: ri!bundle[ri!bundleKey],\n            arguments: ri!arguments\n          )\n        )\n      ),\n      refreshAlways: true\n    ),\n    local!result\n  )\n)"
    },
    "_a-0000ef3b-bde5-8000-9e6e-011c48011c48_18277843": {
      "name": "AS_GCM_COL_CreateRulesWithAI_InProgress",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_imageField_v1\"(\n          label: \"\",\n          labelPosition: \"COLLAPSED\",\n          helpTooltip: \"\",\n          images: {\n            #\"SYSTEM_SYSRULES_documentImage\"(\n              document: cons!AS_GCM_DOC_CREATE_RULES_WITH_AI_INPROGRESS\n            )\n          },\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"STANDARD\",\n          align: \"CENTER\",\n          size: \"EXTRA_SMALL\",\n          style: \"STANDARD\",\n          isThumbnail: false\n        ),\n        #\"SYSTEM_SYSRULES_headingField\"(\n          text: \"Generating Rules\",\n          marginBelow: \"EVEN_LESS\",\n          align: \"CENTER\",\n          size: \"EXTRA_SMALL\",\n          fontWeight: \"SEMI_BOLD\",\n          headingTag: \"H2\"\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: {\n                \"Processing instructions and creating rules.\"\n              },\n              color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n            )\n          },\n          marginBelow: \"EVEN_LESS\",\n          align: \"CENTER\"\n        ),\n        #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n          buttons: {\n            #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n              label: \"Refresh\",\n              icon: \"refresh\",\n              size: \"SMALL\",\n              style: \"OUTLINE\",\n              submit: true\n            )\n          },\n          marginAbove: \"LESS\",\n          marginBelow: \"EVEN_MORE\",\n          align: \"CENTER\"\n        )\n      },\n      width: \"MEDIUM_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n  },\n  marginAbove: \"EVEN_MORE\",\n  marginBelow: \"EVEN_MORE\",\n  alignVertical: \"MIDDLE\"\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536": {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    },
    "_a-0000ef4e-32c4-8000-9e72-011c48011c48_18401437": {
      "name": "AS_GCM_MTR_SAVE_GenerateRulesUsingAI_RuleCreated_Draft",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp: 1, local!temp)"
    },
    "_a-0000ef44-f79b-8000-9e70-011c48011c48_18336410": {
      "name": "AS_GCM_CPS_CreateRulesWithAI_PreviewExpand",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_messageBanner\"(\n    primaryText: \"\",\n    secondaryText: if(\n      toboolean(ri!ruleMap.isDepthLevelExceeded) = true,\n      rule!AS_GAM_CO_I18N_UT_displayLabel(\n        bundle: ri!bundle,\n        bundleKey: \"txt_RuleDepthLevelExceedMessage\",\n        arguments: {\n          cons!AS_GCM_INT_MAX_RULE_CONDITION_GROUP_NESTING_LEVEL\n        }\n      ),\n      \"This rule cannot be created due to unrecognised clause data or invalid parameters. Refine your prompt or create the rule manually\"\n    ),\n    marginBelow: \"NONE\",\n    backgroundColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"WHITE\"),\n    highlightColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"ORANGE_3\"),\n    icon: \"exclamation-triangle\",\n    showDecorativeBar: false,\n    announceBehavior: \"DISPLAY_AND_ANNOUNCE\",\n    showWhen: and(\n      or(\n        toboolean(ri!ruleMap.isDepthLevelExceeded) = true,\n        toboolean(ri!ruleMap.isAllDataMissing) = true\n      ),\n      ri!isAiGenerationSummary <> true\n    )\n  ),\n  #\"SYSTEM_SYSRULES_headingField\"(\n    text: \"Rule Preview\",\n    fontWeight: \"BOLD\",\n    headingTag: \"H3\",\n    size: \"EXTRA_SMALL\",\n    marginBelow: \"STANDARD\"\n  ),\n  rule!AS_GCM_CRD_CreateRulesWithAI_PreviewConditions_Recursion(\n    ruleConditions: ri!ruleMap.conditions,\n    ruleConditionGroups: ri!ruleMap.conditionGroups,\n    operator: ri!ruleMap.operator,\n    bundle: ri!bundle\n  ),\n  rule!AS_GCM_CPS_CreateRulesWithAI_PreviewClauses(\n    clauses: ri!ruleMap.includeClauses,\n    validClauses: ri!validClauses,\n    usageRefId: cons!AS_GCM_REF_ID_USAGE_INCLUDED,\n    bundle: ri!bundle,\n    isAiGenerationSummary: ri!isAiGenerationSummary\n  ),\n  rule!AS_GCM_CPS_CreateRulesWithAI_PreviewClauses(\n    clauses: ri!ruleMap.excludeClauses,\n    validClauses: ri!validClauses,\n    usageRefId: cons!AS_GCM_REF_ID_USAGE_EXCLUDED,\n    bundle: ri!bundle,\n    isAiGenerationSummary: ri!isAiGenerationSummary\n  )\n}"
    },
    "_a-0000eb32-2fbb-8000-9d0d-011c48011c48_9760853": {
      "name": "AS_GCM_setRecordFields",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!AS_CO_UT_rejectNullValuesFromArray(\n      a!flatten(\n        {\n          ri!alwaysOverwrite,\n          ri!childRelationships,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: ri!neverOverwrite,\n            expression: #\"urn:appian:function:v1:a:update\"(\n              fv!item,\n              \"value\",\n              /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n              rule!AS_CO_UT_replaceNull(\n                nullableValue: ri!record[fv!item.field],\n                replacementValue: fv!item.value\n              )\n            )\n          )\n        }\n      )\n    ),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000e2cd-bc96-8000-9ba2-011c48011c48_81818": {
      "name": "AS_CO_I18N_UT_displayLabel",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Text',\n  with(\n    local!bundleKeyParse: rule!AS_CO_I18N_UT_parseBundleKey(bundleKey: ri!bundleKey),\n    local!label: if(\n      rule!AS_CO_UT_isBlank(local!bundleKeyParse.bundleName),\n      ri!i18nData[local!bundleKeyParse.labelKey],\n      ri!i18nData[local!bundleKeyParse.bundleName][local!bundleKeyParse.labelKey]\n    ),\n    local!updatedLabel: rule!AS_CO_UT_replaceNull(\n      nullableValue: local!label,\n      replacementValue: ri!bundleKey\n    ),\n    local!updatedLabelForArguments: if(\n      rule!AS_CO_UT_isBlank(ri!arguments),\n      local!updatedLabel,\n      reduce(\n        rule!AS_CO_I18N_UT_replaceArgument(input: _, index: _, arguments: ri!arguments),\n        local!updatedLabel,\n        enumerate(count(ri!arguments)) + 1\n      )\n    ),\n    local!updatedLabelForArguments\n  )\n)"
    },
    "_a-0000ef3b-bde5-8000-9e6e-011c48011c48_18309389": {
      "name": "AS_GCM_FM_CreateRulesWithAI_StateWrapper",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!bundle: rule!AS_GCM_CO_UT_loadBundleFromFolder(langISOCode: null),\n  local!isInvalidResponse: and(\n    rule!AS_CO_UT_isNotBlank(ri!response),\n    isvalidjson(ri!response),\n    rule!AS_CO_UT_isNotBlank(\n      rule!AS_CO_UT_indexPath(\n        cdt: #\"SYSTEM_SYSRULES_fromJson_v1\"(ri!response),\n        field: \"error\",\n        indexDefault: null\n      )\n    )\n  ),\n  local!confirmationRequired: and(\n    rule!AS_CO_UT_isBlank(ri!response),\n    rule!AS_CO_UT_isBlank(ri!isSuccess)\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n      title: \"Create Rules with AI\",\n      titleColor: \"STANDARD\",\n      stampIcon: \"\"\n    ),\n    contents: a!match(\n      value: ri!isSuccess,\n      whenTrue: or(\n        and(\n          ri!isSuccess = true,\n          rule!AS_CO_UT_isBlank(ri!errorMessage),\n          rule!AS_CO_UT_isBlank(ri!response)\n        ),\n        and(\n          local!isInvalidResponse,\n          ri!isSuccess = true()\n        ),\n        and(\n          not(isvalidjson(ri!response)),\n          rule!AS_CO_UT_isNotBlank(ri!response)\n        )\n      ),\n      then: rule!AS_GCM_FM_CreateRulesWithAI_Empty(\n        bundle: local!bundle,\n        buttonAction: ri!buttonAction\n      ),\n      whenTrue: fv!value = false,\n      then: rule!AS_GCM_COL_CreateRulesWithAI_ErrorState(\n        bundle: local!bundle,\n        errorMessage: ri!errorMessage,\n        retryShowWhen: not(ri!hideErrorStateRetry),\n        buttonAction: ri!buttonAction\n      ),\n      default: rule!AS_GCM_COL_CreateRulesWithAI_InProgress(bundle: local!bundle)\n    ),\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {},\n      secondaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Cancel\",\n          confirmHeader: if(\n            local!confirmationRequired,\n            \"Cancel rule generation?\",\n            null()\n          ),\n          confirmMessage: if(\n            local!confirmationRequired,\n            \"The rule generation process will stop and any progress will be lost.\",\n            null()\n          ),\n          value: cons!AS_CO_ENUM_USER_ACTION_CANCEL,\n          saveInto: ri!buttonAction,\n          validate: false,\n          submit: true,\n          style: \"OUTLINE\"\n        )\n      }\n    ),\n    contentsWidth: \"FULL\",\n    showTitleBarDivider: true,\n    showButtonDivider: true,\n    focusOnFirstInput: false\n  )\n)"
    },
    "_a-0000ea95-3eb3-8000-9cc0-011c48011c48_8052294": {
      "name": "AS_GCM_blankSave",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp, a!save(local!temp, {}))"
    },
    "_a-0000ef4e-32c4-8000-9e72-011c48011c48_18399274": {
      "name": "AS_GCM_MTR_SAVE_GenerateRulesUsingAI_PromptSubmission",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53654": {
      "name": "AS_GCM_CO_UT_loadBundleFromFolder",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!lang: \"en_US\",\n/* below is deprecated for now, uncomment to support multi-language display */\n  /*if(*/\n    /*isnull(ri!langISOCode),*/\n    /*userlocale(loggedInUser()),*/\n    /*ri!langISOCode*/\n  /*),*/\n  local!bundleName: rule!AS_GCM_determineValueBySolutionFlavor(\n    options: cons!AS_GCM_TXT_VALID_SOLUTION_FLAVORS\n  ),\n  /*local!bundleName*/\n  local!output: loadbundlepropertiesfile(\n    cons!AS_GCM_FLD_PROPERTIES_FILES,\n    local!lang,\n    local!bundleName\n  )[local!bundleName],\n  local!output\n)"
    },
    "_a-0000ef3b-bde5-8000-9e6e-011c48011c48_18285794": {
      "name": "AS_GCM_APPREF_GCM_AI_STARTPROCESS_generateRulesUsingNativeAI",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /* Return the entry-point rule if it exists, or else returns a no-op */\n  /* Make sure you use a refreshAlways: true */\n  local!rule: a!refreshVariable(\n    value: rule!AS_FRM_getRuleReferenceOrNoOp(\n      ruleName: \"AS_GCM_AI_ENTRYPOINT_STARTPROCESS_generateRulesUsingNativeAI\"\n    ),\n    refreshAlways: true\n  ),\n  /* Actually execute the rule */\n  local!rule(\n    /* This should always be passed in every app reference rule */\n    /* which returns a default value if the rule does not exist */\n    ifNull_default: {},\n    /* Entrypoint-specific inputs for that rule */\n    userInputPrompt: ri!userInputPrompt\n  )\n)"
    },
    "_a-0000ef44-f79b-8000-9e70-011c48011c48_18336451": {
      "name": "AS_GCM_CRD_CreateRulesWithAI_PreviewConditions_Recursion",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!activeCount: count(\n    a!flatten(\n      {\n        where(index(ri!ruleConditions, \"isActive\", {})),\n        where(\n          index(ri!ruleConditionGroups, \"isActive\", {})\n        )\n      }\n    )\n  ),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        showWhen: rule!AS_CO_UT_isNotBlank(ri!parentConditionGroupName),\n        labelPosition: \"COLLAPSED\",\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: {\n              \"Condition Group\",\n              char(32),\n              ri!parentConditionGroupName\n            },\n            size: \"STANDARD\",\n            color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_4\"),\n            style: \"STRONG\"\n          )\n        },\n        marginAbove: \"NONE\",\n        marginBelow: \"LESS\"\n      ),\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: index(\n          ri!ruleConditions,\n          where(index(ri!ruleConditions, \"isActive\", {})),\n          {}\n        ),\n        expression: {\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            showWhen: and(\n              contains(\n                ldrop(where(ri!ruleConditions.isActive), 1),\n                fv!index\n              ),\n              local!activeCount > 1\n            ),\n            value: {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: ri!operator,\n                color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\"),\n                size: \"SMALL\",\n                style: \"STRONG\"\n              )\n            },\n            marginAbove: \"EVEN_LESS\",\n            marginBelow: \"LESS\"\n          ),\n          #\"SYSTEM_SYSRULES_cardLayout\"(\n            contents: {\n              rule!AS_GCM_CPS_FormatAiGeneratedRuleConditions(condition: fv!item, bundle: ri!bundle)\n            },\n            marginAbove: \"NONE\",\n            marginBelow: \"EVEN_LESS\",\n            height: \"AUTO\",\n            style: rule!AS_GCM_getColorBasedOnColorName(\n              colorName: if(\n                mod(\n                  a!defaultValue(value: ri!depthLevel, default: 0),\n                  2\n                ) = 0,\n                rule!AS_GCM_getColorBasedOnColorName(colorName: \"WHITE\"),\n                rule!AS_GCM_getColorBasedOnColorName(colorName: \"APPIAN_BACKGROUND\")\n              )\n            ),\n            showBorder: true,\n            borderColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_1\"),\n            shape: \"SEMI_ROUNDED\",\n            decorativeBarPosition: \"NONE\",\n            decorativeBarColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_1\")\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: index(\n          ri!ruleConditionGroups,\n          where(\n            index(ri!ruleConditionGroups, \"isActive\", {})\n          ),\n          {}\n        ),\n        expression: {\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            showWhen: and(\n              or(\n                index(ri!ruleConditions, \"isActive\", false),\n                contains(\n                  ldrop(\n                    where(ri!ruleConditionGroups.isActive),\n                    1\n                  ),\n                  fv!index\n                )\n              ),\n              local!activeCount > 1\n            ),\n            value: {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: ri!operator,\n                color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\"),\n                size: \"SMALL\",\n                style: \"STRONG\"\n              )\n            },\n            marginAbove: \"EVEN_LESS\",\n            marginBelow: \"LESS\"\n          ),\n          rule!AS_GCM_CRD_CreateRulesWithAI_PreviewConditions_Recursion(\n            depthLevel: a!defaultValue(value: ri!depthLevel, default: 0) + 1,\n            operator: fv!item.operator,\n            parentConditionGroupName: fv!item.groupName,\n            ruleConditions: fv!item.conditions,\n            ruleConditionGroups: fv!item.conditionGroups,\n            bundle: ri!bundle\n          )\n        }\n      )\n    },\n    marginAbove: \"NONE\",\n    marginBelow: \"EVEN_LESS\",\n    height: \"AUTO\",\n    style: rule!AS_GCM_getColorBasedOnColorName(\n      colorName: if(\n        mod(\n          a!defaultValue(value: ri!depthLevel, default: 0),\n          2\n        ) = 0,\n        rule!AS_GCM_getColorBasedOnColorName(colorName: \"APPIAN_BACKGROUND\"),\n        rule!AS_GCM_getColorBasedOnColorName(colorName: \"WHITE\")\n      )\n    ),\n    showBorder: true,\n    borderColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_1\"),\n    shape: \"SEMI_ROUNDED\",\n    decorativeBarPosition: \"NONE\",\n    decorativeBarColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_1\")\n  )\n)"
    },
    "_a-0000e2cd-bc96-8000-9ba2-011c48011c48_81749": {
      "name": "AS_CO_UT_checkIfUserExists",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  and(\n    rule!AS_CO_UT_isNotBlank(ri!user),\n    isusernametaken(ri!user)\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_74104": {
      "name": "AS_CO_VD_textValidation",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Text',\n  a!localVariables(\n    local!length: len(ri!value),\n    local!minLength: rule!AS_CO_UT_replaceNull(\n      nullableValue: ri!minLength,\n      replacementValue: 0\n    ),\n    if(\n      /* Does not meet exact length requirement */\n      and(\n        rule!AS_CO_UT_isNotBlank(ri!minLength),\n        rule!AS_CO_UT_isNotBlank(ri!maxLength),\n        ri!minLength = ri!maxLength,\n        local!length <> ri!minLength\n      ),\n      rule!AS_CO_UT_replaceNull(\n        nullableValue: rule!AS_CO_UT_replaceNull(\n          nullableValue: ri!maxLengthMessage,\n          replacementValue: ri!minLengthMessage\n        ),\n        replacementValue: rule!AS_CO_UT_displayCommonObjectBundleLabel(\n          bundleKey: if(\n            ri!minLength = 1,\n            \"AS.CO.CommonObjects.vld_EnterExactlySingle\",\n            \"AS.CO.CommonObjects.vld_EnterExactlyMultiple\"\n          ),\n          arguments: ri!minLength\n        )\n      ),\n      /*Too short*/\n      if(\n        local!length < ri!minLength,\n        rule!AS_CO_UT_replaceNull(\n          nullableValue: ri!minLengthMessage,\n          replacementValue: rule!AS_CO_UT_displayCommonObjectBundleLabel(\n            bundleKey: \"AS.CO.CommonObjects.vld_EnterAtLeast\",\n            arguments: local!minLength\n          )\n        ),\n        /*Too long*/\n        if(\n          and(\n            rule!AS_CO_UT_isNotBlank(ri!maxLength),\n            local!length > ri!maxLength\n          ),\n          rule!AS_CO_UT_replaceNull(\n            nullableValue: ri!maxLengthMessage,\n            replacementValue: rule!AS_CO_UT_displayCommonObjectBundleLabel(\n              bundleKey: if(\n                ri!maxLength = 1,\n                \"AS.CO.CommonObjects.vld_EnterNoMoreThanSingle\",\n                \"AS.CO.CommonObjects.vld_EnterNoMoreThanMultiple\"\n              ),\n              arguments: ri!maxLength\n            )\n          ),\n          /*Valid*/\n          \"\"\n        )\n      )\n    )\n  )\n)"
    },
    "ad3e3248-147a-4657-9381-d4722855a152": {
      "name": "AS_GCM_CPS_FormatAiGeneratedRuleConditions",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    labelPosition: \"COLLAPSED\",\n    value: {\n      ri!condition.clauseDataType,\n      char(32),\n      char(32),\n      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n        text: ri!condition.operator,\n        color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n      ),\n      char(32),\n      char(32),\n      joinarray(\n        {\n          if(\n            and(\n              rule!AS_CO_UT_isNotBlank(\n                index(ri!condition, \"clauseDataTypeId\", null)\n              ),\n              contains(\n                {\n                  cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_CONTRACTING_OFFICER,\n                  cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_CONTRACT_SPECIALIST,\n                  cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_CONTRACT_OFFICER_REP\n                },\n                index(ri!condition, \"clauseDataTypeId\", null)\n              )\n            ),\n            rule!AS_CO_UT_displayUser(user: ri!condition.value),\n            joinarray(ri!condition.value, \", \")\n          ),\n          ri!condition.compValue\n        },\n        char(32) & \"\" & char(32)\n      )\n    },\n    marginBelow: \"NONE\",\n    showWhen: rule!AS_CO_UT_isNotBlank(ri!condition)\n  ),\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    value: {\n      #\"SYSTEM_SYSRULES_richTextIcon\"(\n        icon: \"exclamation-triangle\",\n        color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"ORANGE_3\")\n      ),\n      char(32),\n      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n        text: ri!condition.missingDataDescription,\n        color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n      )\n    },\n    showWhen: toboolean(ri!condition.isMissingData) = true\n  )\n}"
    },
    "_a-0000e447-933d-8000-9baa-011c48011c48_33160": {
      "name": "AS_CO_UT_displayCommonObjectBundleLabel",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  rule!AS_CO_I18N_UT_getAndDisplayLabelSingle(\n    bundleFolder: cons!AS_CO_I18N_FLD_INTERNATIONALIZATION_FILES,\n    bundleKey: ri!bundleKey,\n    arguments: ri!arguments,\n    localeAgnostic: false\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76367": {
      "name": "AS_CO_UT_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AS_CO_UT_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_74131": {
      "name": "AS_CO_DSP_standardReadOnlyField",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_textField\"(\n  label: ri!label,\n  labelPosition: rule!AS_CO_UT_getLabelPosition(\n    label: ri!label,\n    labelPosition: ri!labelPosition,\n    readOnly: true\n  ),\n  instructions: ri!instructions,\n  helpTooltip: ri!helpTooltip,\n  value: rule!AS_CO_UT_replaceNull(\n    nullableValue: ri!value,\n    replacementValue: if(\n      rule!AS_CO_UT_booleanDefaultTrue(\n        ri!showHyphenIfValueNull\n      ),\n      \"-\",\n      \"\"\n    )\n  ),\n  showWhen: ri!showWhen,\n  readOnly: true,\n  align: ri!align,\n  accessibilityText: ri!accessibilityText\n)"
    },
    "_a-0000ef4e-32c4-8000-9e72-011c48011c48_18426497": {
      "name": "AS_GCM_FM_CreateRulesWithAI_Confirmation",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!bundle: rule!AS_GCM_CO_UT_loadBundleFromFolder(langISOCode: null),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n      title: \"Create Rules with AI\",\n      titleColor: \"STANDARD\",\n      stampIcon: \"\"\n    ),\n    contents: {\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\"),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            contents: {\n              #\"SYSTEM_SYSRULES_imageField_v1\"(\n                label: \"\",\n                labelPosition: \"COLLAPSED\",\n                helpTooltip: \"\",\n                images: {\n                  #\"SYSTEM_SYSRULES_documentImage\"(\n                    document: cons!AS_GCM_DOC_CREATE_RULES_WITH_AI_CONFIRMATION\n                  )\n                },\n                marginAbove: \"EVEN_MORE\",\n                marginBelow: \"STANDARD\",\n                align: \"CENTER\",\n                size: \"EXTRA_SMALL\",\n                style: \"STANDARD\",\n                isThumbnail: false\n              ),\n              #\"SYSTEM_SYSRULES_headingField\"(\n                text: \"Rule creation in progress\",\n                headingTag: \"H2\",\n                marginBelow: \"EVEN_LESS\",\n                align: \"CENTER\",\n                size: \"EXTRA_SMALL\",\n                fontWeight: \"SEMI_BOLD\"\n              ),\n              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                labelPosition: \"COLLAPSED\",\n                value: {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: \"The following rules are being created. You can view and manage them from the rules grid.\",\n                    color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n                  )\n                },\n                marginBelow: \"EVEN_LESS\",\n                align: \"CENTER\"\n              ),\n              #\"SYSTEM_SYSRULES_columnsLayout\"(\n                columns: {\n                  #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\"),\n                  #\"SYSTEM_SYSRULES_columnLayout\"(\n                    contents: {\n                      #\"SYSTEM_SYSRULES_cardLayout\"(\n                        contents: {\n                          #\"SYSTEM_SYSRULES_gridField_v5\"(\n                            label: \"Rules List\",\n                            labelPosition: \"COLLAPSED\",\n                            data: #\"SYSTEM_SYSRULES_forEach\"(\n                              items: ri!ruleName,\n                              expression: a!map(name: fv!item)\n                            ),\n                            columns: {\n                              #\"SYSTEM_SYSRULES_gridColumn\"(\n                                label: \"Rules List\",\n                                value: fv!row.name\n                              )\n                            },\n                            validations: {}\n                          )\n                        },\n                        marginBelow: \"STANDARD\",\n                        height: \"AUTO\",\n                        style: rule!AS_GCM_getColorBasedOnColorName(colorName: \"APPIAN_BACKGROUND\"),\n                        showBorder: false(),\n                        padding: \"STANDARD\"\n                      ),\n\n                    }\n                  ),\n                  #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\")\n                },\n                marginAbove: \"STANDARD\"\n              ),\n              #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                buttons: {\n                  #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                    label: \"Close\",\n                    style: \"OUTLINE\",\n                    submit: true()\n                  )\n                },\n                marginAbove: \"LESS\",\n                marginBelow: \"EVEN_MORE\",\n                align: \"CENTER\"\n              )\n            }\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\")\n        }\n      )\n    },\n    contentsWidth: \"FULL\",\n    showTitleBarDivider: true,\n    showButtonDivider: true,\n    focusOnFirstInput: false\n  )\n)"
    },
    "_a-0000e571-774f-8000-b919-01ef9001ef90_29043": {
      "name": "AS_FRM_doesRuleExist",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!ruleExists: doesruleexist(ri!ruleName),\n  local!ruleExists\n)"
    },
    "_a-0000e438-fdf5-8000-9ba8-011c48011c48_19869": {
      "name": "AS_CO_I18N_UT_parseBundleKey",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Dictionary',\n  with(\n    local!split: split(\n      ri!bundleKey,\n      \".\"\n    ),\n    local!bundleName: joinarray(\n      remove(\n        local!split,\n        count(\n          local!split\n        )\n      ),\n      \".\"\n    ),\n    local!labelKey: local!split[count(\n      local!split\n    )],\n    {\n      bundleName: local!bundleName,\n      labelKey: local!labelKey\n    }\n  )\n)"
    },
    "_a-0000eb32-2fbb-8000-9d0d-011c48011c48_9761091": {
      "name": "AS_GCM_filterRecords",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AS_GCM_filterRecords_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "fbbb62e3-aa6e-41bf-bfaf-9b7d8073651b": {
      "name": "AS_GCM_CastAiGeneratedRulesToRecordType",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!clauses: rule!AS_GCM_QR_getRefClause(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY,\n    fields: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n    excludeDeviations: true,\n    additionalFilters: #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n      operator: \"in\",\n      value: rule!AS_CO_UT_rejectNullValuesFromArray(\n        a!flatten(\n          {\n            ri!rules.includeClauses,\n            ri!rules.excludeClauses\n          }\n        )\n      )\n    )\n  ),\n  a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!rules,\n      expression: a!localVariables(\n        local!isDraft: if(\n          fv!item.isMissingData,\n          true(),\n          rule!AS_CO_UT_indexPath(\n            cdt: fv!item,\n            field: \"isDraft\",\n            indexDefault: false()\n          )\n        ),\n        rule!AS_CO_UT_rejectNullValuesFromArray(\n          if(\n            /*Excluding Conditions with missing data*/\n            or(\n              rule!AS_CO_UT_isBlank(fv!item.ruleName),\n              rule!AS_CO_UT_isBlank(fv!item.operatorId),\n              and(\n                rule!AS_CO_UT_isBlank(fv!item.conditions),\n                rule!AS_CO_UT_isBlank(fv!item.conditionGroups)\n              )\n            ),\n            {},\n            recordType!AS GCM QNM T Rule(\n              recordType!AS GCM QNM T Rule.ruleName: fv!item.ruleName,\n              recordType!AS GCM QNM T Rule.refOperatorId: fv!item.operatorId,\n              recordType!AS GCM QNM T Rule.conditions: rule!AS_GCM_CastAiGeneratedRuleConditionsToRecordType(conditions: fv!item.conditions),\n              recordType!AS GCM QNM T Rule.conditionGroups: rule!AS_GCM_CastAiGeneratedRuleConditionGroupsToRecordType_Recursion(\n                conditionGroups: fv!item.conditionGroups,\n                depthLevel: 1\n              ),\n              recordType!AS GCM QNM T Rule.aiExecution: recordType!AS GCM QNM T Rule AI Execution(\n                recordType!AS GCM QNM T Rule AI Execution.userInputPrompt: ri!userInputPrompt,\n                recordType!AS GCM QNM T Rule AI Execution.aiGeneratedRule: #\"SYSTEM_SYSRULES_toJson_v1\"(fv!item),\n                recordType!AS GCM QNM T Rule AI Execution.createdBy: loggedInUser(),\n                recordType!AS GCM QNM T Rule AI Execution.createdDatetime: now()\n              ),\n              recordType!AS GCM QNM T Rule.createdBy: loggedInUser(),\n              recordType!AS GCM QNM T Rule.createdDatetime: now(),\n              recordType!AS GCM QNM T Rule.modifiedBy: loggedInUser(),\n              recordType!AS GCM QNM T Rule.modifiedDatetime: now(),\n              recordType!AS GCM QNM T Rule.isActive: if(local!isDraft = true(), null(), true),\n              recordType!AS GCM QNM T Rule.isDraft: local!isDraft,\n              recordType!AS GCM QNM T Rule.conditionClauses: rule!AS_CO_UT_rejectNullValuesFromArray(\n                {\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    items: fv!item.includeClauses,\n                    expression: a!localVariables(\n                      local!clause: rule!AS_GCM_filterRecords(\n                        records: local!clauses,\n                        field: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n                        value: fv!item\n                      ),\n                      if(\n                        rule!AS_CO_UT_isBlank(local!clause),\n                        {},\n                        recordType!AS GCM QNM T Rule Condition Clause(\n                          recordType!AS GCM QNM T Rule Condition Clause.refClauseId: local!clause[recordType!AS GCM R Clause.clauseId],\n                          recordType!AS GCM QNM T Rule Condition Clause.refUsageId: cons!AS_GCM_REF_ID_USAGE_INCLUDED,\n                          recordType!AS GCM QNM T Rule Condition Clause.createdBy: loggedInUser(),\n                          recordType!AS GCM QNM T Rule Condition Clause.createdDatetime: now(),\n                          recordType!AS GCM QNM T Rule Condition Clause.modifiedBy: loggedInUser(),\n                          recordType!AS GCM QNM T Rule Condition Clause.modifiedDatetime: now(),\n                          recordType!AS GCM QNM T Rule Condition Clause.isActive: true\n                        )\n                      )\n                    )\n                  ),\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    items: fv!item.excludeClauses,\n                    expression: a!localVariables(\n                      local!clause: rule!AS_GCM_filterRecords(\n                        records: local!clauses,\n                        field: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n                        value: fv!item\n                      ),\n                      if(\n                        rule!AS_CO_UT_isBlank(local!clause),\n                        {},\n                        recordType!AS GCM QNM T Rule Condition Clause(\n                          recordType!AS GCM QNM T Rule Condition Clause.refClauseId: local!clause[recordType!AS GCM R Clause.clauseId],\n                          recordType!AS GCM QNM T Rule Condition Clause.refUsageId: cons!AS_GCM_REF_ID_USAGE_EXCLUDED,\n                          recordType!AS GCM QNM T Rule Condition Clause.createdBy: loggedInUser(),\n                          recordType!AS GCM QNM T Rule Condition Clause.createdDatetime: now(),\n                          recordType!AS GCM QNM T Rule Condition Clause.modifiedBy: loggedInUser(),\n                          recordType!AS GCM QNM T Rule Condition Clause.modifiedDatetime: now(),\n                          recordType!AS GCM QNM T Rule Condition Clause.isActive: true\n                        )\n                      )\n                    )\n                  )\n                }\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ef44-f79b-8000-9e70-011c48011c48_18358836": {
      "name": "AS_GCM_COL_CreateRulesWithAI_ErrorState",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_imageField_v1\"(\n          label: \"\",\n          labelPosition: \"COLLAPSED\",\n          helpTooltip: \"\",\n          images: {\n            #\"SYSTEM_SYSRULES_documentImage\"(\n              document: cons!AS_GCM_DOC_CREATE_RULES_WITH_AI_ERROR_STATE\n            )\n          },\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"STANDARD\",\n          align: \"CENTER\",\n          size: \"EXTRA_SMALL\",\n          style: \"STANDARD\",\n          isThumbnail: false\n        ),\n        #\"SYSTEM_SYSRULES_headingField\"(\n          text: \"Couldn't generate rules\",\n          marginBelow: \"EVEN_LESS\",\n          align: \"CENTER\",\n          size: \"EXTRA_SMALL\",\n          fontWeight: \"SEMI_BOLD\",\n          headingTag: \"H2\"\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: { ri!errorMessage },\n              color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n            )\n          },\n          marginBelow: \"EVEN_LESS\",\n          align: \"CENTER\"\n        ),\n        #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n          buttons: {\n            #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n              showWhen: a!defaultValue(value: ri!retryShowWhen, default: true),\n              label: \"Retry\",\n              value: cons!AS_GCM_ENUM_USER_ACTION_RETRY,\n              saveInto: ri!buttonAction,\n              icon: \"repeat-alt\",\n              style: \"OUTLINE\",\n              submit: true\n            )\n          },\n          marginAbove: \"LESS\",\n          marginBelow: \"EVEN_MORE\",\n          align: \"CENTER\"\n        )\n      },\n      width: \"MEDIUM_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n  },\n  marginAbove: \"EVEN_MORE\",\n  marginBelow: \"EVEN_MORE\",\n  alignVertical: \"MIDDLE\"\n)"
    },
    "_a-0000ef44-f79b-8000-9e70-011c48011c48_18336899": {
      "name": "AS_GCM_CPS_CreateRulesWithAI_PreviewClauses",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n    items: {\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_headingField\"(\n          text: if(\n            ri!usageRefId = cons!AS_GCM_REF_ID_USAGE_INCLUDED,\n            \"\",\n            \"\"\n          ),\n          fontWeight: \"BOLD\",\n          size: \"EXTRA_SMALL\",\n          headingTag: \"H3\",\n          marginBelow: \"NONE\",\n          marginAbove: \"STANDARD\"\n        ),\n        width: \"MINIMIZE\"\n      ),\n      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n        item: #\"SYSTEM_SYSRULES_tagField\"(\n          labelPosition: \"COLLAPSED\",\n          tags: {\n            #\"SYSTEM_SYSRULES_tagItem_v1\"(\n              text: rule!AS_GAM_UT_ArrayLength(ri!clauses),\n              backgroundColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_0\"),\n              textColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_4\")\n            )\n          },\n          marginBelow: \"NONE\",\n          size: \"SMALL\"\n        )\n      )\n    },\n    alignVertical: \"BOTTOM\"\n  ),\n  #\"SYSTEM_SYSRULES_messageBanner\"(\n    primaryText: \"\",\n    secondaryText: if(\n      ri!usageRefId = cons!AS_GCM_REF_ID_USAGE_INCLUDED,\n      rule!AS_GAM_CO_I18N_UT_displayLabel(\n        bundle: ri!bundle,\n        bundleKey: if(\n          ri!isAiGenerationSummary,\n          \"txt_NoClausesIncludedAiReport\",\n          \"txt_NoClausesIncluded\"\n        )\n      ),\n      rule!AS_GAM_CO_I18N_UT_displayLabel(\n        bundle: ri!bundle,\n        bundleKey: if(\n          ri!isAiGenerationSummary,\n          \"txt_NoClausesExcludedAiReport\",\n          \"txt_NoClausesExcluded\"\n        )\n      )\n    ),\n    backgroundColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"BLUE_0\"),\n    highlightColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"BLUE_3\"),\n    icon: \"info-circle\",\n    shape: \"SEMI_ROUNDED\",\n    showDecorativeBar: false,\n    announceBehavior: \"DISPLAY_AND_ANNOUNCE\",\n    showWhen: rule!AS_CO_UT_isBlank(ri!clauses)\n  ),\n  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n    value: (\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: touniformstring(a!flatten(ri!clauses)),\n        expression: {\n          char(8226),\n          if(\n            contains(\n              touniformstring(\n                ri!validClauses[recordType!AS GCM R Clause.clauseNumberWithAlternate]\n              ),\n              tostring(fv!item)\n            ),\n            {},\n            {\n              char(32),\n              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: \"exclamation-triangle\",\n                color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"ORANGE_3\"),\n                caption: rule!AS_GAM_CO_I18N_UT_displayLabel(\n                  bundle: ri!bundle,\n                  bundleKey: \"cpt_ClauseNotFound\",\n                  arguments: { tostring(fv!item) }\n                )\n              )\n            }\n          ),\n          char(32),\n          tostring(fv!item),\n          char(10)\n        }\n      )\n    ),\n    showWhen: rule!AS_CO_UT_isNotBlank(ri!clauses)\n  )\n}"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_74400": {
      "name": "AS_CO_INP_paragraphField",
      "type": "Interface",
      "sail_code": "if(\n  ri!readOnly,\n  rule!AS_CO_DSP_standardReadOnlyField(\n    label: ri!label,\n    instructions: ri!instructions,\n    value: ri!value,\n    labelPosition: ri!labelPosition,\n    helpTooltip: ri!helpTooltip,\n    showWhen: ri!showWhen,\n    accessibilityText: ri!accessibilityText,\n    align: null,\n    showHyphenIfValueNull: ri!showHyphenIfValueNull\n  ),\n  #\"SYSTEM_SYSRULES_paragraphField\"(\n    label: ri!label,\n    labelPosition: rule!AS_CO_UT_getLabelPosition(\n      label: ri!label,\n      labelPosition: ri!labelPosition,\n      readOnly: false\n    ),\n    height: ri!height,\n    instructions: ri!instructions,\n    helpTooltip: ri!helpTooltip,\n    placeholder: ri!placeholder,\n    value: ri!value,\n    /* We are using nested saveIntos to automatically perform a trim on any value */\n    /* before executing the actual saves */\n    /* Saves can be nested in this format to allow for better reusability */\n    saveInto: a!save(ri!saveInto, trim(save!value)),\n    showWhen: ri!showWhen,\n    required: if(ri!readOnly, false, ri!required),\n    /* Updated requiredMessage parameter to show default validation text*/\n    requiredMessage: rule!AS_CO_UT_displayRequiredMessage(\n      label: ri!label,\n      requiredMessage: ri!requiredMessage\n    ),\n    readOnly: ri!readOnly,\n    disabled: ri!disabled,\n    validations: if(\n      ri!readOnly,\n      {},\n      a!flatten(\n        {\n          ri!validations,\n          rule!AS_CO_VD_textValidation(value: ri!value, maxLength: ri!maxLength)\n        }\n      )\n    ),\n    validationGroup: ri!validationGroup,\n    accessibilitytext: ri!accessibilityText,\n    characterLimit: ri!characterLimit,\n    showCharacterCount: ri!showCharacterCount\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76004": {
      "name": "AS_CO_I18N_UT_getUserLocale",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  userlocale(ri!user)\n)"
    },
    "_a-0000e2cd-bc96-8000-9ba2-011c48011c48_91550": {
      "name": "AS_CO_I18N_UT_replaceArgument",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  if(\n    isnull(ri!input),\n    ri!input,\n    substitute(\n      ri!input,\n      /*The standard argument format is `[%x]` where `x` is the argument position*/\n      concat(\"[%\", ri!index, \"]\"),\n      fn!index(ri!arguments, ri!index, \"\")\n    )\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73660": {
      "name": "AS_CO_UT_displayUser",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  if(\n    rule!AS_CO_UT_checkIfUserExists(user: ri!user),\n    concat(fn!user(ri!user, \"firstName\"), \" \", fn!user(ri!user, \"lastName\")),\n    if(\n      and(ri!showHyphenIfValueNull = true, isnull(ri!user)),\n      \"-\",\n      ri!user\n    )\n  )\n)"
    },
    "_a-0000ef32-86c3-8000-9e6c-011c48011c48_18227306": {
      "name": "AS_GCM_FM_CreateRulesWithAI_Instruction",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_formLayout_v2\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n              items: {\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_tagField\"(\n                    labelPosition: \"COLLAPSED\",\n                    tags: {\n                      #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                        text: 1,\n                        backgroundColor: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_0\"),\n                        textColor: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_4\")\n                      )\n                    }\n                  ),\n                  width: \"MINIMIZE\"\n                ),\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_headingField\"(\n                    text: \"Describe your Rule\",\n                    headingTag: \"H2\",\n                    marginBelow: \"NONE\",\n                    size: \"EXTRA_SMALL\",\n                    fontWeight: \"SEMI_BOLD\"\n                  )\n                )\n              },\n              alignVertical: \"MIDDLE\"\n            ),\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              label: \"\",\n              labelPosition: \"COLLAPSED\",\n              images: {\n                #\"SYSTEM_SYSRULES_documentImage\"(\n                  document: cons!AS_GCM_DOC_DESCRIBE_YOUR_RULE_IMAGE\n                )\n              },\n              size: \"LARGE\",\n              style: \"STANDARD\",\n              isThumbnail: false\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextBulletedList\"(\n                  items: {\n                    \"Enter the conditions for the rule.\",\n                    \"Specify the clauses to include or exclude.\",\n                    \"Alternatively, paste the prescription text.\",\n                    \"Define multiple rules in a single prompt as required.\"\n                  }\n                )\n              }\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n              items: {\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_tagField\"(\n                    labelPosition: \"COLLAPSED\",\n                    tags: {\n                      #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                        text: 2,\n                        backgroundColor: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_0\"),\n                        textColor: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_4\")\n                      )\n                    }\n                  ),\n                  width: \"MINIMIZE\"\n                ),\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_headingField\"(\n                    text: \"Review and Select Rules\",\n                    headingTag: \"H2\",\n                    marginBelow: \"NONE\",\n                    size: \"EXTRA_SMALL\",\n                    fontWeight: \"SEMI_BOLD\"\n                  )\n                )\n              },\n              alignVertical: \"MIDDLE\"\n            ),\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              label: \"\",\n              labelPosition: \"COLLAPSED\",\n              images: {\n                #\"SYSTEM_SYSRULES_documentImage\"(\n                  document: cons!AS_GCM_DOC_REVIEW_AND_SELECT_RULE_IMAGE\n                )\n              },\n              size: \"LARGE\",\n              style: \"STANDARD\",\n              isThumbnail: false\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextBulletedList\"(\n                  items: {\n                    \"AI extracts the conditions and maps them with available clause set data to generate rules.\",\n                    \"Review and select the preferred rules.\",\n                    \"Check highlighted conditions that AI could not map.\"\n                  }\n                )\n              }\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n              items: {\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_tagField\"(\n                    labelPosition: \"COLLAPSED\",\n                    tags: {\n                      #\"SYSTEM_SYSRULES_tagItem_v1\"(\n                        text: 3,\n                        backgroundColor: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_0\"),\n                        textColor: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_4\")\n                      )\n                    }\n                  ),\n                  width: \"MINIMIZE\"\n                ),\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_headingField\"(\n                    text: \"Save Rules and Refine Later\",\n                    headingTag: \"H2\",\n                    marginBelow: \"NONE\",\n                    size: \"EXTRA_SMALL\",\n                    fontWeight: \"SEMI_BOLD\"\n                  )\n                )\n              },\n              alignVertical: \"MIDDLE\"\n            ),\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              label: \"\",\n              labelPosition: \"COLLAPSED\",\n              images: {\n                #\"SYSTEM_SYSRULES_documentImage\"(\n                  document: cons!AS_GCM_DOC_SAVE_RULES_AND_REFINE_IMAGE\n                )\n              },\n              size: \"LARGE\",\n              style: \"STANDARD\",\n              isThumbnail: false\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextBulletedList\"(\n                  items: {\n                    \"Save the rule as a draft, if needed. Draft rules are not considered during clause set creation.\",\n                    \"Edit these rules from the rules grid.\",\n                    \"Use the questionnaire data to provide the missing conditions for the rules.\"\n                  }\n                )\n              }\n            )\n          }\n        )\n      }\n    )\n  },\n  buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n    primaryButtons: {},\n    secondaryButtons: {\n      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: \"Close\",\n        value: false,\n        saveInto: { ri!isShowInstruction },\n        style: \"OUTLINE\"\n      )\n    }\n  ),\n  titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n    title: \"How it works\",\n    titleColor: \"STANDARD\"\n  ),\n  contentsWidth: \"FULL\",\n  showTitleBarDivider: true,\n  showButtonDivider: true,\n  focusOnFirstInput: false\n)"
    },
    "_a-0000ef3b-bde5-8000-9e6e-011c48011c48_18307559": {
      "name": "AS_GCM_FM_CreateRulesWithAI_Preview",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!bundle: rule!AS_GCM_CO_UT_loadBundleFromFolder(langISOCode: null),\n  local!selectAll,\n  local!validClauses: rule!AS_GCM_QR_getRefClause(\n    returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY,\n    fields: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n    excludeDeviations: true,\n    additionalFilters: #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM R Clause.clauseNumberWithAlternate,\n      operator: \"in\",\n      value: rule!AS_CO_UT_rejectNullValuesFromArray(\n        a!flatten(\n          {\n            ri!rulesMap.includeClauses,\n            ri!rulesMap.excludeClauses\n          }\n        )\n      )\n    )\n  ),\n  local!validRulesMap: rule!AS_CO_UT_rejectNullValuesFromArray(\n    array: #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!rulesMap,\n      expression: if(\n        and(\n          rule!AS_CO_UT_isBlank(fv!item.conditions),\n          rule!AS_CO_UT_isBlank(fv!item.conditionGroups)\n        ),\n        null,\n        fv!item\n      )\n    )\n  ),\n  local!rulesMap: a!match(\n    value: local!validRulesMap,\n    whenTrue: rule!AS_CO_UT_isBlank(index(fv!value, \"ruleName\", {})),\n    then: {},\n    whenTrue: rule!AS_GAM_UT_ArrayLength(fv!value) = 1,\n    then: rule!AS_GCM_setRecordFields(\n      record: index(fv!value, 1, {}),\n      alwaysOverwrite: {\n        a!map(\n          field: \"isAllDataMissing\",\n          value: and(\n            rule!AS_CO_UT_indexPath(\n              cdt: index(fv!value, 1, {}),\n              field: \"conditions.isMissingData\",\n              indexDefault: null\n            ),\n            rule!AS_CO_UT_indexPath(\n              cdt: index(fv!value, 1, {}),\n              field: \"conditionGroups.isMissingData\",\n              indexDefault: null\n            )\n          )\n        ),\n        a!map(\n          field: \"isMissingData\",\n          value: or(\n            fv!value.isMissingData,\n            rule!AS_CO_UT_isNotBlank(\n              difference(\n                touniformstring(\n                  a!flatten(\n                    {\n                      fv!value.includeClauses,\n                      fv!value.excludeClauses\n                    }\n                  )\n                ),\n                touniformstring(\n                  local!validClauses[recordType!AS GCM R Clause.clauseNumberWithAlternate]\n                )\n              )\n            )\n          )\n        ),\n        a!map(field: \"isSelected\", value: true),\n        a!map(field: \"isCollapsed\", value: false),\n        a!map(\n          field: \"isDepthLevelExceeded\",\n          value: rule!AS_CO_UT_isNotBlank(\n            a!flatten(\n              index(\n                a!flatten(\n                  index(\n                    a!flatten(\n                      index(\n                        a!flatten(index(fv!value, \"conditionGroups\", {})),\n                        \"conditionGroups\",\n                        {}\n                      )\n                    ),\n                    \"conditionGroups\",\n                    {}\n                  )\n                ),\n                \"conditionGroups\",\n                {}\n              )\n            )\n          )\n        )\n      }\n    ),\n    default: #\"SYSTEM_SYSRULES_forEach\"(\n      items: fv!value,\n      expression: rule!AS_GCM_setRecordFields(\n        record: fv!item,\n        alwaysOverwrite: {\n          a!map(\n            field: \"isAllDataMissing\",\n            value: and(\n              rule!AS_CO_UT_indexPath(\n                cdt: fv!item,\n                field: \"conditions.isMissingData\",\n                indexDefault: null\n              ),\n              rule!AS_CO_UT_indexPath(\n                cdt: fv!item,\n                field: \"conditionGroups.isMissingData\",\n                indexDefault: null\n              )\n            )\n          ),\n          a!map(\n            field: \"isMissingData\",\n            value: or(\n              fv!item.isMissingData,\n              rule!AS_CO_UT_isNotBlank(\n                difference(\n                  touniformstring(\n                    a!flatten(\n                      {\n                        fv!item.includeClauses,\n                        fv!item.excludeClauses\n                      }\n                    )\n                  ),\n                  touniformstring(\n                    local!validClauses[recordType!AS GCM R Clause.clauseNumberWithAlternate]\n                  )\n                )\n              )\n            )\n          ),\n          a!map(field: \"isSelected\", value: false),\n          a!map(field: \"isCollapsed\", value: true),\n          a!map(\n            field: \"isDepthLevelExceeded\",\n            value: rule!AS_CO_UT_isNotBlank(\n              a!flatten(\n                index(\n                  a!flatten(\n                    index(\n                      a!flatten(\n                        index(\n                          a!flatten(index(fv!item, \"conditionGroups\", {})),\n                          \"conditionGroups\",\n                          {}\n                        )\n                      ),\n                      \"conditionGroups\",\n                      {}\n                    )\n                  ),\n                  \"conditionGroups\",\n                  {}\n                )\n              )\n            )\n          )\n        }\n      )\n    )\n  ),\n  local!isShowMissingDataBannerMsg: or(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!rulesMap,\n      expression: and(\n        toboolean(fv!item.isDepthLevelExceeded) <> true,\n        toboolean(fv!item.isMissingData) = true\n      )\n    )\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n      title: \"Create Rules with AI\",\n      titleColor: \"STANDARD\"\n    ),\n    contents: {\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        labelPosition: \"COLLAPSED\",\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: {\n              #\"SYSTEM_SYSRULES_richTextIcon\"(icon: \"arrow-left\"),\n              char(32),\n              \"Back to Prompt\"\n            },\n            link: #\"SYSTEM_SYSRULES_submitLink\"(\n              value: cons!AS_GCM_ENUM_USER_ACTION_BACK_TO_PROMPT,\n              saveInto: {\n                ri!buttonAction,\n                rule!AS_GCM_MTR_SAVE_GenerateRulesUsingAI_AIResponseRejection()\n              }\n            ),\n            linkStyle: \"STANDALONE\",\n            color: \"ACCENT\",\n            style: \"STRONG\"\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_headingField\"(\n            text: \"Generated Rules\",\n            headingTag: \"H2\",\n            marginBelow: \"EVEN_LESS\",\n            align: \"START\",\n            size: \"SMALL\",\n            fontWeight: \"SEMI_BOLD\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: {\n              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: {\n                  \"Review and select the rules you want to create. You can view the created rules in the Rules Grid.\"\n                },\n                color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_3\")\n              )\n            },\n            marginBelow: \"STANDARD\",\n            align: \"LEFT\"\n          ),\n          #\"SYSTEM_SYSRULES_messageBanner\"(\n            primaryText: \"Rules saved as drafts.\",\n            secondaryText: \"Some rules contain unrecognized or invalid conditions. Finish setting them up by mapping with the questionnaire data or the relevant parameters from the rules grid.\",\n            backgroundColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"YELLOW_0\"),\n            highlightColor: rule!AS_GCM_getColorBasedOnColorName(colorName: \"ORANGE_3\"),\n            icon: \"exclamation-triangle\",\n            shape: \"SEMI_ROUNDED\",\n            showDecorativeBar: false,\n            announceBehavior: \"DISPLAY_AND_ANNOUNCE\",\n            showWhen: local!isShowMissingDataBannerMsg\n          ),\n          /* Select All */\n          #\"SYSTEM_SYSRULES_columnsLayout\"(\n            columns: {\n              #\"SYSTEM_SYSRULES_columnLayout\"(\n                contents: {\n                  #\"SYSTEM_SYSRULES_checkboxField_v1\"(\n                    value: local!selectAll,\n                    saveInto: {\n                      local!selectAll,\n                      a!save(\n                        local!rulesMap,\n                        #\"SYSTEM_SYSRULES_forEach\"(\n                          items: local!rulesMap,\n                          expression: if(\n                            or(\n                              toboolean(fv!item.isDepthLevelExceeded) = true,\n                              toboolean(fv!item.isAllDataMissing) = true\n                            ),\n                            fv!item,\n                            #\"urn:appian:function:v1:a:update\"(fv!item, \"isSelected\", local!selectAll)\n                          )\n                        )\n                      )\n                    },\n                    choiceLabels: {\n                      rule!AS_GAM_CO_I18N_UT_displayLabel(\n                        bundle: local!bundle,\n                        bundleKey: \"txt_GeneratedRulesSelect\",\n                        arguments: {\n                          rule!AS_GAM_UT_ArrayLength(\n                            wherecontains(\n                              true,\n                              toboolean(local!rulesMap.isSelected)\n                            )\n                          ),\n                          rule!AS_GAM_UT_ArrayLength(local!rulesMap)\n                        }\n                      )\n                    },\n                    choiceValues: { true },\n                    accessibilityText: if(\n                      toboolean(local!selectAll) = true,\n                      \"Selected\",\n                      \"Not Selected\"\n                    )\n                  )\n                },\n                width: \"AUTO\"\n              ),\n              #\"SYSTEM_SYSRULES_columnLayout\"(\n                contents: {\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    labelPosition: \"COLLAPSED\",\n                    value: {\n                      if(\n                        and(\n                          rule!AS_CO_UT_indexPath(\n                            cdt: local!rulesMap,\n                            field: \"isMissingData\",\n                            indexDefault: false()\n                          )\n                        ),\n                        #\"SYSTEM_SYSRULES_richTextIcon\"(\n                          icon: \"toggle-on\",\n                          altText: \"Disabled. Rules contain unmapped conditions\",\n                          color: rule!AS_GCM_getColorBasedOnColorName(\"BLUE_7\"),\n                          linkStyle: \"STANDALONE\"\n                        ),\n                        and(\n                          rule!AS_CO_UT_indexPath(\n                            cdt: local!rulesMap,\n                            field: \"isDraft\",\n                            indexDefault: false()\n                          )\n                        ),\n                        #\"SYSTEM_SYSRULES_richTextIcon\"(\n                          icon: \"toggle-on\",\n                          altText: \"Mark all as Draft\",\n                          color: \"ACCENT\",\n                          link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                            value: false(),\n                            saveInto: {\n                              a!save(\n                                local!rulesMap,\n                                #\"SYSTEM_SYSRULES_forEach\"(\n                                  items: local!rulesMap,\n                                  expression: if(\n                                    fv!item.isMissingData = true(),\n                                    #\"urn:appian:function:v1:a:update\"(fv!item, \"isDraft\", true()),\n                                    #\"urn:appian:function:v1:a:update\"(fv!item, \"isDraft\", false())\n                                  )\n                                )\n                              )\n                            }\n                          ),\n                          linkStyle: \"STANDALONE\"\n                        ),\n                        #\"SYSTEM_SYSRULES_richTextIcon\"(\n                          icon: \"toggle-off\",\n                          altText: \"Mark all as Draft\",\n                          color: \"ACCENT\",\n                          link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                            value: true(),\n                            saveInto: {\n                              a!save(\n                                local!rulesMap,\n                                #\"SYSTEM_SYSRULES_forEach\"(\n                                  items: local!rulesMap,\n                                  expression: #\"urn:appian:function:v1:a:update\"(fv!item, \"isDraft\", true())\n                                )\n                              )\n                            }\n                          ),\n                          linkStyle: \"STANDALONE\"\n                        )\n                      ),\n                      \" \",\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: \"Mark all as Draft\",\n                        color: if(\n                          and(\n                            rule!AS_CO_UT_indexPath(\n                              cdt: local!rulesMap,\n                              field: \"isMissingData\",\n                              indexDefault: false()\n                            )\n                          ),\n                          rule!AS_GCM_getColorBasedOnColorName(\"GRAY_2\"),\n                          \"STANDARD\"\n                        )\n                      )\n                    },\n                    align: \"RIGHT\",\n                    showWhen: and(\n                      and(\n                        rule!AS_CO_UT_indexPath(\n                          cdt: local!rulesMap,\n                          field: \"isDepthLevelExceeded\",\n                          indexDefault: false()\n                        )\n                      ) = false(),\n                      and(\n                        rule!AS_CO_UT_indexPath(\n                          cdt: local!rulesMap,\n                          field: \"isAllDataMissing\",\n                          indexDefault: false()\n                        )\n                      ) = false()\n                    )\n                  )\n                }\n              )\n            },\n            showWhen: rule!AS_GAM_UT_ArrayLength(local!rulesMap) > 1,\n            marginAbove: \"STANDARD\"\n          ),\n          /* Rule Card */\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!rulesMap,\n            expression: #\"SYSTEM_SYSRULES_cardLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_columnsLayout\"(\n                  columns: {\n                    #\"SYSTEM_SYSRULES_columnLayout\"(\n                      contents: {\n                        #\"SYSTEM_SYSRULES_checkboxField_v1\"(\n                          value: if(fv!item.isSelected, true, {}),\n                          saveInto: {\n                            fv!item.isSelected,\n                            if(\n                              toboolean(fv!item.isSelected) = true,\n                              null,\n                              a!save(local!selectAll, null)\n                            ),\n                            if(\n                              rule!AS_GAM_UT_ArrayLength(\n                                wherecontains(\n                                  true,\n                                  toboolean(local!rulesMap.isSelected)\n                                )\n                              ) = rule!AS_GAM_UT_ArrayLength(local!rulesMap),\n                              a!save(local!selectAll, true),\n                              null\n                            )\n                          },\n                          choiceLabels: { \"\" },\n                          choiceValues: { true },\n                          accessibilityText: if(\n                            toboolean(fv!item.isSelected) = true,\n                            rule!AS_GAM_CO_I18N_UT_displayLabel(\n                              bundle: local!bundle,\n                              bundleKey: \"acs_SelectedRule\",\n                              arguments: { fv!item.ruleName }\n                            ),\n                            rule!AS_GAM_CO_I18N_UT_displayLabel(\n                              bundle: local!bundle,\n                              bundleKey: \"acs_NotSelectedRule\",\n                              arguments: { fv!item.ruleName }\n                            )\n                          ),\n                          disabled: or(\n                            toboolean(fv!item.isDepthLevelExceeded) = true,\n                            toboolean(fv!item.isAllDataMissing) = true\n                          )\n                        )\n                      },\n                      width: \"EXTRA_NARROW\",\n                      showWhen: rule!AS_GAM_UT_ArrayLength(local!rulesMap) > 1\n                    ),\n                    #\"SYSTEM_SYSRULES_columnLayout\"(\n                      contents: {\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: fv!item.ruleName, style: \"STRONG\"),\n                            if(\n                              fv!item.isMissingData,\n                              {\n                                char(32),\n                                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                  icon: \"exclamation-triangle\",\n                                  caption: if(\n                                    rule!AS_GAM_UT_ArrayLength(local!rulesMap) = 1,\n                                    \"Rule requires review.\",\n                                    \"Rule requires review. Expand for details.\"\n                                  ),\n                                  color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"ORANGE_3\")\n                                )\n                              },\n                              {}\n                            )\n                          }\n                        ),\n                        #\"SYSTEM_SYSRULES_paragraphField\"(\n                          value: fv!item.ruleDescription,\n                          readOnly: true\n                        ),\n                        if(\n                          toboolean(fv!item.isCollapsed) = false,\n                          rule!AS_GCM_CPS_CreateRulesWithAI_PreviewExpand(\n                            bundle: local!bundle,\n                            ruleMap: fv!item,\n                            validClauses: local!validClauses\n                          ),\n                          {}\n                        ),\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: {\n                                \"View details\",\n                                char(32),\n                                #\"SYSTEM_SYSRULES_richTextIcon\"(icon: \"chevron-down\")\n                              },\n                              color: \"ACCENT\",\n                              style: { \"STRONG\" },\n                              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                value: false,\n                                saveInto: fv!item.isCollapsed\n                              ),\n                              linkStyle: \"STANDALONE\",\n                              showWhen: toboolean(fv!item.isCollapsed) = true\n                            ),\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: {\n                                \"Hide details\",\n                                char(32),\n                                #\"SYSTEM_SYSRULES_richTextIcon\"(icon: \"chevron-up\")\n                              },\n                              color: \"ACCENT\",\n                              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                value: true,\n                                saveInto: fv!item.isCollapsed\n                              ),\n                              linkStyle: \"STANDALONE\",\n                              style: { \"STRONG\" },\n                              showWhen: toboolean(fv!item.isCollapsed) = false\n                            )\n                          },\n                          accessibilityText: concat(\n                            \"Activating this link may cause the page to reload\",\n                            char(32),\n                            if(\n                              toboolean(fv!item.isCollapsed) = true,\n                              rule!AS_GAM_CO_I18N_UT_displayLabel(\n                                bundle: local!bundle,\n                                bundleKey: \"acs_ViewDetails\",\n                                arguments: { fv!item.ruleName }\n                              ),\n                              rule!AS_GAM_CO_I18N_UT_displayLabel(\n                                bundle: local!bundle,\n                                bundleKey: \"acs_HideDetails\",\n                                arguments: { fv!item.ruleName }\n                              )\n                            )\n                          ),\n                          showWhen: rule!AS_GAM_UT_ArrayLength(local!rulesMap) > 1\n                        )\n                      },\n                      width: \"AUTO\"\n                    ),\n                    #\"SYSTEM_SYSRULES_columnLayout\"(\n                      contents: {\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: {\n                            if(\n                              rule!AS_CO_UT_indexPath(\n                                cdt: fv!item,\n                                field: \"isMissingData\",\n                                indexDefault: false()\n                              ) = true(),\n                              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                icon: \"toggle-on\",\n                                color: rule!AS_GCM_getColorBasedOnColorName(\"BLUE_7\"),\n                                altText: rule!AS_GAM_CO_I18N_UT_displayLabel(\n                                  bundle: local!bundle,\n                                  bundleKey: \"acs_MarkAsDraftDisabled\",\n                                  arguments: fv!item.ruleName\n                                ),\n                                linkStyle: \"STANDALONE\"\n                              ),\n                              rule!AS_CO_UT_indexPath(\n                                cdt: fv!item,\n                                field: \"isDraft\",\n                                indexDefault: false()\n                              ) = true(),\n                              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                icon: \"toggle-on\",\n                                altText: rule!AS_GAM_CO_I18N_UT_displayLabel(\n                                  bundle: local!bundle,\n                                  bundleKey: \"acs_MarkAsDraft\",\n                                  arguments: fv!item.ruleName\n                                ),\n                                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                  value: false(),\n                                  saveInto: {\n                                    a!save(\n                                      fv!item,\n                                      #\"urn:appian:function:v1:a:update\"(fv!item, \"isDraft\", false())\n                                    )\n                                  }\n                                ),\n                                linkStyle: \"STANDALONE\",\n                                color: \"ACCENT\"\n                              ),\n                              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                icon: \"toggle-off\",\n                                altText: rule!AS_GAM_CO_I18N_UT_displayLabel(\n                                  bundle: local!bundle,\n                                  bundleKey: \"acs_MarkAsDraft\",\n                                  arguments: fv!item.ruleName\n                                ),\n                                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                  value: true(),\n                                  saveInto: {\n                                    a!save(\n                                      fv!item,\n                                      #\"urn:appian:function:v1:a:update\"(fv!item, \"isDraft\", true())\n                                    )\n                                  }\n                                ),\n                                linkStyle: \"STANDALONE\",\n                                color: \"ACCENT\"\n                              )\n                            ),\n                            \" \",\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: \"Mark as Draft\",\n                              color: if(\n                                rule!AS_CO_UT_indexPath(\n                                  cdt: fv!item,\n                                  field: \"isMissingData\",\n                                  indexDefault: false()\n                                ) = true(),\n                                rule!AS_GCM_getColorBasedOnColorName(\"GRAY_2\"),\n                                \"STANDARD\"\n                              )\n                            )\n                          },\n                          align: \"RIGHT\",\n                          showWhen: and(\n                            rule!AS_CO_UT_indexPath(\n                              cdt: fv!item,\n                              field: \"isDepthLevelExceeded\",\n                              indexDefault: false()\n                            ) = false(),\n                            rule!AS_CO_UT_indexPath(\n                              cdt: fv!item,\n                              field: \"isAllDataMissing\",\n                              indexDefault: false()\n                            ) = false()\n                          )\n                        )\n                      },\n                      width: \"NARROW\"\n                    )\n                  },\n                  alignVertical: \"TOP\"\n                )\n              },\n              marginBelow: \"STANDARD\",\n              style: rule!AS_GCM_getColorBasedOnColorName(\"WHITE\"),\n              padding: \"STANDARD\",\n              shape: \"SEMI_ROUNDED\"\n            )\n          )\n        },\n        marginAbove: \"STANDARD\"\n      )\n    },\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Create Rules\",\n          value: cons!AS_CO_ENUM_USER_ACTION_SUBMIT,\n          disabled: if(\n            rule!AS_GAM_UT_ArrayLength(local!rulesMap) = 1,\n            or(\n              toboolean(local!rulesMap.isDepthLevelExceeded) = true,\n              toboolean(local!rulesMap.isAllDataMissing) = true\n            ),\n            not(\n              or(\n                toboolean(index(local!rulesMap, \"isSelected\", {}))\n              )\n            )\n          ),\n          submit: true,\n          style: \"SOLID\",\n          saveInto: {\n            ri!buttonAction,\n            a!save(\n              ri!rulesMap,\n              rule!AS_GCM_filterRecords(\n                records: { local!rulesMap },\n                field: \"isSelected\",\n                value: true\n              )\n            )\n          }\n        )\n      },\n      secondaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Cancel\",\n          style: \"OUTLINE\",\n          submit: true,\n          value: cons!AS_CO_ENUM_USER_ACTION_CANCEL,\n          saveInto: {\n            ri!buttonAction,\n            rule!AS_GCM_MTR_SAVE_GenerateRulesUsingAI_AIResponseRejection()\n          }\n        )\n      }\n    ),\n    contentsWidth: \"FULL\",\n    showTitleBarDivider: true,\n    showButtonDivider: true\n  )\n)"
    },
    "_a-0000ec50-376f-8000-9d94-011c48011c48_12909959": {
      "name": "AS_GCM_getColorBasedOnColorName",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!colorName,\n  /* White Colors */\n  equals: \"WHITE\",\n  then: cons!AS_GCM_HEX_CODE_WHITE,\n  equals: \"WHITE_2\",\n  then: cons!AS_GCM_HEX_CODE_WHITE_2,\n  /* Gray Colors */\n  equals: \"GRAY_0\",\n  then: cons!AS_GCM_HEX_CODE_GRAY_0,\n  equals: \"GRAY_1\",\n  then: \"#EDEDF2\",\n  equals: \"GRAY_2\",\n  then: \"#DCDCE5\",\n  equals: \"GRAY_3\",\n  then: cons!AS_GCM_HEX_CODE_GRAY_3,\n  equals: \"GRAY_4\",\n  then: \"#2E2E35\",\n  /* Orange Colors */\n  equals: \"ORANGE_1\",\n  then: \"#FFEED3\",\n  equals: \"ORANGE_2\",\n  then: \"#FFDCA3\",\n  equals: \"ORANGE_3\",\n  then: \"#FAA92F\",\n  equals: \"ORANGE_4\",\n  then: \"#995C00\",\n  /* Blue Colors */\n  equals: \"BLUE_0\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_0,\n  equals: \"BLUE_1\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_1,\n  equals: \"BLUE_2\",\n  then: \"#AFBFF8\",\n  equals: \"BLUE_3\",\n  then: \"#2322F0\",\n  equals: \"BLUE_4\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_4,\n  equals: \"BLUE_5\",\n  then: \"#E9EDFC\",\n  equals: \"BLUE_6\",\n  then: \"#08088D\",\n  equals: \"BLUE_7\",\n  then: \"#DCDEF5\",\n  /* Green Colors  */\n  equals: \"GREEN_1\",\n  then: \"#E3FBDF\",\n  equals: \"GREEN_4\",\n  then: \"#117C00\",\n  /* Teal Colors */\n  equals: \"TEAL_1\",\n  then: \"#E2FAF9\",\n  equals: \"TEAL_3\",\n  then: \"#56ADC0\",\n  equals: \"TEAL_4\",\n  then: \"#2C6770\",\n  /* Purple Colors */\n  equals: \"PURPLE_1\",\n  then: \"#F2E9FF\",\n  equals: \"PURPLE_3\",\n  then: \"#B561FF\",\n  equals: \"PURPLE_4\",\n  then: \"#790DA1\",\n  /* Red Colors */\n  equals: \"RED_4\",\n  then: \"#9F0019\",\n  /* Yellow Colors */\n  equals: \"YELLOW_0\",\n  then: \"#FFFCEB\",\n  equals: \"YELLOW_1\",\n  then: \"#FFF6C9\",\n  equals: \"YELLOW_4\",\n  then: \"#856C00\",\n  /* Appian Colors */\n  equals: \"APPIAN_BACKGROUND\",\n  then: cons!AS_GCM_HEX_CODE_APPIAN_BACKGROUND,\n  equals: \"ACCENT\",\n  then: \"#2322f0\",\n  default: ri!colorName\n)"
    },
    "2884b641-8173-430f-8b71-a82b0d90b9df": {
      "name": "AS_GCM_CastAiGeneratedRuleConditionGroupsToRecordType_Recursion",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_rejectNullValuesFromArray(\n  array: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!conditionGroups,\n    expression: a!localVariables(\n      local!conditions: rule!AS_GCM_CastAiGeneratedRuleConditionsToRecordType(conditions: fv!item.conditions),\n      local!conditionGroups: rule!AS_GCM_CastAiGeneratedRuleConditionGroupsToRecordType_Recursion(\n        conditionGroups: fv!item.conditionGroups,\n        depthLevel: ri!depthLevel + 1\n      ),\n      /*Excluding Condition groups with missing data*/\n      if(\n        or(\n          rule!AS_CO_UT_isBlank(fv!item.groupName),\n          rule!AS_CO_UT_isBlank(fv!item.operatorId),\n          and(\n            rule!AS_CO_UT_isBlank(local!conditions),\n            rule!AS_CO_UT_isBlank(local!conditionGroups)\n          )\n        ),\n        {},\n        recordType!AS GCM QNM T Rule Condition Group(\n          recordType!AS GCM QNM T Rule Condition Group.ruleConditionGroupName: fv!item.groupName,\n          recordType!AS GCM QNM T Rule Condition Group.refOperatorId: fv!item.operatorId,\n          recordType!AS GCM QNM T Rule Condition Group.depthLevel: ri!depthLevel,\n          recordType!AS GCM QNM T Rule Condition Group.isActive: true,\n          recordType!AS GCM QNM T Rule Condition Group.conditions: local!conditions,\n          recordType!AS GCM QNM T Rule Condition Group.conditionGroups: local!conditionGroups,\n          recordType!AS GCM QNM T Rule Condition Group.createdBy: loggedInUser(),\n          recordType!AS GCM QNM T Rule Condition Group.createdDatetime: now(),\n          recordType!AS GCM QNM T Rule Condition Group.modifiedBy: loggedInUser(),\n          recordType!AS GCM QNM T Rule Condition Group.modifiedDatetime: now()\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ef3b-bde5-8000-9e6e-011c48011c48_18308602": {
      "name": "AS_GCM_FM_CreateRulesWithAI_Empty",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_imageField_v1\"(\n          label: \"\",\n          labelPosition: \"COLLAPSED\",\n          helpTooltip: \"\",\n          images: {\n            #\"SYSTEM_SYSRULES_documentImage\"(\n              document: cons!AS_GCM_DOC_CREATE_RULES_WITH_AI_EMPTY\n            )\n          },\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"STANDARD\",\n          align: \"CENTER\",\n          size: \"EXTRA_SMALL\",\n          style: \"STANDARD\",\n          isThumbnail: false\n        ),\n        #\"SYSTEM_SYSRULES_headingField\"(\n          text: \"No rules generated\",\n          marginBelow: \"EVEN_LESS\",\n          align: \"CENTER\",\n          size: \"EXTRA_SMALL\",\n          fontWeight: \"SEMI_BOLD\",\n          headingTag: \"H2\"\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: {\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: {\n                \"Couldn't extract rules from this prompt. Try a different prompt.\"\n              },\n              color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n            )\n          },\n          marginBelow: \"EVEN_LESS\",\n          align: \"CENTER\"\n        ),\n        #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n          buttons: {\n            #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n              label: \"Back To Prompt\",\n              size: \"SMALL\",\n              style: \"OUTLINE\",\n              value: cons!AS_GCM_ENUM_USER_ACTION_BACK_TO_PROMPT,\n              saveInto: ri!buttonAction,\n              submit: true\n            )\n          },\n          marginAbove: \"LESS\",\n          marginBelow: \"EVEN_MORE\",\n          align: \"CENTER\"\n        )\n      },\n      width: \"MEDIUM_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n  },\n  marginAbove: \"EVEN_MORE\",\n  marginBelow: \"EVEN_MORE\",\n  alignVertical: \"MIDDLE\"\n)"
    },
    "_a-0000e571-774f-8000-b919-01ef9001ef90_28790": {
      "name": "AS_FRM_getRuleReferenceOrNoOp",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    cons!AS_FRM_BOOL_APPREF_ENTRYPOINT_FRAMEWORK_ENABLED,\n    rule!AS_FRM_doesRuleExist(ri!ruleName)\n  ),\n  rulereferencebyname(ruleName: ri!ruleName),\n  rule!AS_FRM_noOp\n)"
    },
    "_a-0000ef32-86c3-8000-9e6c-011c48011c48_18227270": {
      "name": "AS_GCM_FM_CreateRulesWithAI_Prompt",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_formLayout_v2\"(\n  contents: {\n    rule!AS_CO_INP_paragraphField(\n      label: \"Enter Rule Prompt\",\n      labelPosition: \"ABOVE\",\n      placeholder: \"Enter your rule requirements, describe the clause conditions or paste prescription text\",\n      value: ri!prompt,\n      saveInto: ri!prompt,\n      height: \"TALL\",\n      characterLimit: cons!AS_GCM_INT_CHAR_LIMIT_CREATE_RULE_WITH_AI_PROMPT\n    ),\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_linkField\"(\n              labelPosition: \"COLLAPSED\",\n              links: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                label: \"How it works\",\n                value: true,\n                saveInto: ri!isShowInstruction\n              ),\n              accessibilityText: \"Click to see instructions\"\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n              items: {\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(width: \"AUTO\"),\n                #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                  item: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                    buttons: {\n                      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                        label: \"Generate Rule\",\n                        saveInto: rule!AS_GCM_MTR_SAVE_GenerateRulesUsingAI_PromptSubmission(),\n                        disabled: rule!AS_CO_UT_isBlank(ri!prompt),\n                        accessibilityText: if(\n                          rule!AS_CO_UT_isBlank(ri!prompt),\n                          \"Disabled. Enter prompt to enable\",\n                          {}\n                        ),\n                        style: \"SOLID\",\n                        submit: true\n                      )\n                    },\n                    marginBelow: \"NONE\",\n                    align: \"START\"\n                  ),\n                  width: \"MINIMIZE\"\n                )\n              },\n              alignVertical: \"MIDDLE\"\n            )\n          }\n        )\n      },\n      marginBelow: \"MORE\",\n      alignVertical: \"MIDDLE\"\n    )\n  },\n  buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n    primaryButtons: {},\n    secondaryButtons: {\n      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: \"Cancel\",\n        value: cons!AS_CO_ENUM_USER_ACTION_CANCEL,\n        saveInto: ri!buttonAction,\n        validate: false,\n        submit: true,\n        style: \"OUTLINE\"\n      )\n    }\n  ),\n  titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n    title: \"Create Rules with AI\",\n    titleColor: \"STANDARD\",\n    stampIcon: \"\"\n  ),\n  contentsWidth: \"FULL\",\n  showTitleBarDivider: true,\n  showButtonDivider: true,\n  focusOnFirstInput: false\n)"
    },
    "_a-0000ef4e-32c4-8000-9e72-011c48011c48_18399469": {
      "name": "AS_GCM_MTR_SAVE_GenerateRulesUsingAI_AIResponseRejection",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782": {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  not(rule!AS_CO_UT_isBlank(ri!input))\n)"
    },
    "_a-0000e5da-a251-8000-9bbe-011c48011c48_1021202": {
      "name": "AS_GAM_UT_ArrayLength",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(ri!array),\n  0,\n  length(ri!array)\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73568": {
      "name": "AS_CO_UT_getLabelPosition",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Text',\n  rule!AS_CO_UT_replaceNull(\n    nullableValue: ri!labelPosition,\n    replacementValue: if(\n      rule!AS_CO_UT_isBlank(ri!label),\n      \"COLLAPSED\",\n      if(ri!readOnly, \"ADJACENT\", \"ABOVE\")\n    )\n  )\n)"
    },
    "_a-0000ef3b-bde5-8000-9e6e-011c48011c48_18299985": {
      "name": "AS_GCM_CastAiGeneratedRuleConditionsToRecordType",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!conditions,\n  expression: rule!AS_CO_UT_rejectNullValuesFromArray(\n    if(\n      or(\n        fv!item.isMissingData,\n        rule!AS_CO_UT_isBlank(fv!item.operatorId),\n        rule!AS_CO_UT_isBlank(fv!item.clauseDataTypeId),\n        and(\n          rule!AS_CO_UT_isBlank(fv!item.value),\n          rule!AS_CO_UT_isBlank(index(fv!item, \"valueId\", null))\n        )\n      ),\n      {},\n      recordType!AS GCM QNM T Rule Condition(\n        recordType!AS GCM QNM T Rule Condition.refOperatorId: fv!item.operatorId,\n        recordType!AS GCM QNM T Rule Condition.refClauseDataId: fv!item.clauseDataTypeId,\n        /*Formatting Value based on appropriate Clause Data Type*/\n        recordType!AS GCM QNM T Rule Condition.value: a!localVariables(\n          local!value: a!defaultValue(\n            value: index(fv!item, \"valueId\", null),\n            default: fv!item.value\n          ),\n          a!match(\n            value: fv!item.clauseDataTypeId,\n            equals: cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_ESTIMATED_DOLLAR_AMOUNT,\n            then: concat(\"[\",local!value,\"]\"),\n            equals: cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_CLAUSE_SET_TYPE,\n            then: tointeger(local!value),\n            equals: cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_CONTRACT_START_DATE,\n            equals: cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_CONTRACT_END_DATE,\n            then: #\"SYSTEM_SYSRULES_toJson_v1\"({local!value}),\n            whenTrue: typeof(local!value) = 101,\n            then: #\"SYSTEM_SYSRULES_toJson_v1\"(local!value),\n            whenTrue: and(\n              isvalidjson(local!value),\n              tointeger(count(#\"SYSTEM_SYSRULES_fromJson_v1\"(local!value))) > 1\n            ),\n            then: local!value,\n            whenTrue: and(\n              isvalidjson(local!value),\n              count(#\"SYSTEM_SYSRULES_fromJson_v1\"(local!value)) = 1\n            ),\n            then: #\"SYSTEM_SYSRULES_toJson_v1\"({ local!value }),\n            default: #\"SYSTEM_SYSRULES_toJson_v1\"({ tostring(local!value) })\n          )\n        ),\n        /*Formatting Comp value based on appropriate Clause Data Type*/\n        recordType!AS GCM QNM T Rule Condition.compValue: a!match(\n          value: fv!item.compValue,\n          whenTrue: rule!AS_CO_UT_isBlank(fv!value),\n          then: null,\n          whenTrue:  fv!item.clauseDataTypeId = cons!AS_GCM_REF_ID_CLAUSE_SET_DATA_ESTIMATED_DOLLAR_AMOUNT,\n          then: concat(\"[\",fv!value,\"]\"),\n          default: #\"SYSTEM_SYSRULES_toJson_v1\"({fv!value})\n        ),\n        recordType!AS GCM QNM T Rule Condition.isActive: true,\n        recordType!AS GCM QNM T Rule Condition.createdBy: loggedInUser(),\n        recordType!AS GCM QNM T Rule Condition.createdDatetime: now(),\n        recordType!AS GCM QNM T Rule Condition.modifiedBy: loggedInUser(),\n        recordType!AS GCM QNM T Rule Condition.modifiedDatetime: now()\n      )\n    )\n  )\n)"
    },
    "_a-0000eb44-a528-8000-9d15-011c48011c48_9978504": {
      "name": "AS_CO_UT_displayRequiredMessage",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(\n    ri!label\n  ),\n  a!defaultValue(\n    value: ri!requiredMessage,\n    default: rule!AS_CO_UT_displayCommonObjectBundleLabel(\n      bundleKey: \"AS.CO.CommonObjects.vld_RequiredMessage\",\n      arguments: stripwith(ri!label, \"*\")\n    )\n  ),\n  ri!requiredMessage\n)"
    },
    "0002ef36-b8af-8000-ea0f-7f0000014e7a": {
      "name": "AS GCM QNM Create Rules with AI",
      "type": "Process Model",
      "sail_code": "// Input: ?\nrule!AS_GCM_APPREF_GCM_AI_STARTPROCESS_generateRulesUsingNativeAI(\n  userInputPrompt: pv!prompt\n).processModel\n\n// Input: ?\nrule!AS_GCM_APPREF_GCM_AI_STARTPROCESS_generateRulesUsingNativeAI(userInputPrompt: pv!prompt).processParameters\n\n// Output: ?\nac!ProcessInfo.pv.isSuccess\n\n// Output: ?\nac!ProcessInfo.pv.aiErrorMessage\n\n// Output: ?\nac!ProcessInfo.pv.aiSkillResponse\n\n// Output: ?\na!defaultValue(\n  value: pv!errorStateRetryCount,\n  default: 0\n) + 1\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Input: ?\n=pv!prompt\n\n// Output: ?\n0\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Output: ?\nrule!AS_GCM_CastAiGeneratedRulesToRecordType(\n  rules: pv!rulesMap,\n  userInputPrompt: pv!prompt\n)\n\n// Input: ?\n=#\"SYSTEM_SYSRULES_fromJson_v1\"(pv!response)\n\n// Input: ?\npv!rules[tp!instanceindex]\n\n// Input: ?\n=pv!buttonAction\n\n// Input: ?\n=pv!isSuccess\n\n// Input: ?\n=pv!response\n\n// Input: ?\n= a!flatten( #\"SYSTEM_SYSRULES_forEach\"( items: pv!rules, expression: a!localVariables( local!allAIRuleMetric: rule!AS_GCM_MTR_SAVE_GenerateRulesUsingAI_RuleCreated(), local!draftOrActiveAIRuleMetric: if( toboolean( fv!item[recordType!AS GCM QNM T Rule.isDraft] ) = true(), rule!AS_GCM_MTR_SAVE_GenerateRulesUsingAI_RuleCreated_Draft(), rule!AS_GCM_MTR_SAVE_GenerateRulesUsingAI_RuleCreated_Active() ), { local!allAIRuleMetric, local!draftOrActiveAIRuleMetric } ) ))"
    }
  }
}