{
  "_metadata": {
    "bundle_id": "AIA_Classification_Model_-_urnappiantranslation-stringv11e2fcded-fb80-4fbf-b0c8-"
  },
  "objects": {
    "_a-0000ecfc-48c9-8000-9c55-011c48011c48_234937": {
      "name": "AIA_ENUM_LlmVersions",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!allModels: a!flatten(\n    {\n      a!map(\n        label: \"Anthropic Claude Haiku 3.0 (Fast)\",\n        value: cons!AIA_MODEL_HAIKU_3,\n      ),\n      a!map(\n        label: \"Anthropic Claude Haiku 4.5 (Fast)\",\n        value: cons!AIA_MODEL_HAIKU_4_5,\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 3.0 (Legacy, Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_3,\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 3.5 (Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_3_5\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 3.7 (Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_3_7\n      ),\n      a!map(\n        label: \"Anthropic Claude Sonnet 4.5 (Reasoning)\",\n        value: cons!AIA_MODEL_SONNET_4_5\n      ),\n      if(\n        ri!includeVision,\n        {\n          /*model values iwth | to split name and mode are used in AI Reviewer/Judge*/\n          a!map(\n            label: \"Anthropic Claude Haiku 4.5 (Vision)\",\n            value: cons!AIA_MODEL_HAIKU_4_5_MULTIMODAL,\n          ),\n          a!map(\n            label: \"Anthropic Claude Sonnet 3.5 (Vision)\",\n            value: cons!AIA_MODEL_SONNET_3_5_MULTIMODAL\n          ),\n          a!map(\n            label: \"Anthropic Claude Sonnet 3.7 (Vision)\",\n            value: cons!AIA_MODEL_SONNET_3_7_MULTIMODAL\n          ),\n          a!map(\n            label: \"Anthropic Claude Sonnet 4.5 (Vision)\",\n            value: cons!AIA_MODEL_SONNET_4_5_MULTIMODAL\n          )\n        },\n        null\n      )\n    }\n  ),\n  if(\n    a!defaultValue(ri!returnOnlySupportedLlms, true),\n    a!localVariables(\n      local!supportedModels: a!genAiModels(),\n      reject(\n        fn!isnull,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!allModels,\n          expression: if(\n            or(\n              a!isNullOrEmpty(fv!item.value),\n              contains(\n                touniformstring(local!supportedModels.id),\n                tostring(split(fv!item.value,\"|\")[1])\n              )\n            ),\n            fv!item,\n            null\n          )\n        )\n      )\n    ),\n    local!allModels\n  )\n)"
    },
    "_a-0000ecd4-7f5c-8000-9c42-011c48011c48_163335": {
      "name": "AIA_Classification_GetTestInstances",
      "type": "Expression Rule",
      "sail_code": "rule!SHRD_UTIL_QueryRecord(\n  recordType: recordType!AIA Classification Instance,\n  returnType: ri!returnType,\n  executeWhen: a!isNotNullOrEmpty(ri!modelVersion),\n  fields: {\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion\n  },\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Instance.modelVersion.versionId,\n      operator: \"<=\",\n      value: ri!modelVersion[recordType!AIA Classification Model Version.versionId]\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Instance.modelVersion.modelId,\n      operator: \"=\",\n      value: ri!modelVersion[recordType!AIA Classification Model Version.modelId]\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Instance.modelTestSuiteCase.modelTestSuiteId,\n      operator: \"=\",\n      value: ri!testSuiteId,\n      applyWhen: a!isNotNullOrEmpty(ri!testSuiteId)\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Instance.testInstance,\n      operator: \"=\",\n      value: true\n    )\n  }\n)"
    },
    "_a-0000edd9-a94f-8000-9bb2-011c48011c48_146472": {
      "name": "AIA_Test_GetLatestClassificationModel",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n  recordType: recordType!AIA Classification Model,\n  fields: {\n    recordType!AIA Classification Model.modelVersions,\n    recordType!AIA Classification Model.modelVersions\n  },\n  pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n    startIndex: 1,\n    batchSize: 1,\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!AIA Classification Model.modelId,\n      ascending: false\n    )\n  )\n).data"
    },
    "_a-0000ec5c-9eda-8000-9bec-011c48011c48_119454": {
      "name": "AIA_Classification_GetModelByKey",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!key),\n  null,\n  #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Classification Model,\n    filters: #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Model.key,\n      operator: \"includes\",\n      value: ri!key\n    ),\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      1,\n      1\n    )\n  ).data\n)"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_194872": {
      "name": "AIA_DefaultModel",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!default: cons!AIA_MODEL_HAIKU_4_5,\n  if(\n    /*check default model is enabled in env*/\n    contains(\n      a!genAiModels().id,\n      local!default\n    ),\n    /*if so, use default*/\n    local!default,\n    /*else default to first available model*/\n    tostring(index(a!genAiModels().id,1,\"\"))\n  )\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_26889": {
      "name": "AIA_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AIA_UTIL_Filter_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  )\n)"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_195035": {
      "name": "AIA_GetLLMName",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!options: rule!AIA_ENUM_LlmVersions(\n    includeVision: true,\n    returnOnlySupportedLlms: false\n  ),\n  displayvalue(\n    ri!llm,\n    local!options.value,\n    local!options.label,\n    \"\"\n  )\n)"
    },
    "_a-0000ef39-a43c-8000-9ecf-011c48011c48_429114": {
      "name": "AIA_QR_getClassificationModelVersion",
      "type": "Expression Rule",
      "sail_code": "rule!SHRD_UTIL_QueryRecord(\n  recordType: recordType!AIA Classification Model Version,\n  fields: {\n    ri!fields\n  },\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  identifier: ri!modelVersionId,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Model Version.modelVersionId,\n      operator: \"=\",\n      value: ri!modelVersionId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Model Version.modelId,\n      operator: \"=\",\n      value: ri!modelId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Model Version.status,\n      operator: \"=\",\n      value: ri!status\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Classification Model Version.model.key,\n      operator: \"=\",\n      value: ri!modelKey\n    ),\n    ri!additionalFilters\n  }\n)"
    },
    "_a-0000ed46-3c8c-8000-9bac-011c48011c48_12129": {
      "name": "AIA_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!brandingDefault: getbrandingconfig(\n    cons!AIA_DOC_DEFAULT_BRANDING_CONFIG,\n    true()\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!brandingDefault.defaultBranding.key,\n        local!brandingDefault.customBranding.key\n      },\n      {\n        local!brandingDefault.defaultBranding.value,\n        local!brandingDefault.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ee5d-151c-8000-9ba8-011c48011c48_36163": {
      "name": "SHRD_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!maxBatchSize: 5000,\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          local!maxBatchSize\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"RECORD_BY_ID\",\n    then: a!map(\n      castToType: ri!recordType,\n      fetchTotalCount: false,\n      isArray: false,\n      queryRecordByIdentifier: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          local!maxBatchSize\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      queryRecordByIdentifier: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, RECORD_BY_ID, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: if(\n          local!queryParams.queryRecordByIdentifier,\n          #\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n            recordType: ri!recordType,\n            identifier: index({ri!identifier},1,null),\n            /*If fields is sent in using a!selectionFields(), then adding the fields contained in ri!relatedRecordData will break the query*/\n            fields: reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  if(\n                    or(\n                      typeof(ri!fields) = typeof(#\"SYSTEM_SYSRULES_selectionFields\"()),\n                      typeof(ri!fields) = typeof({#\"SYSTEM_SYSRULES_selectionFields\"()})\n                    ),\n                    {},\n                    index(ri!relatedRecordData, \"relationship\", {})\n                  )\n                }\n              )\n            ),\n            relatedRecordData: ri!relatedRecordData\n          ),\n          #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n            recordType: ri!recordType,\n            fields: if(\n              a!isNullOrEmpty(ri!groupByFields),\n              reject(\n                a!isNullOrEmpty,\n                a!flatten(\n                  {\n                    ri!fields,\n                    index(ri!relatedRecordData, \"relationship\", {})\n                  }\n                )\n              ),\n              #\"SYSTEM_SYSRULES_aggregationFields\"(\n                groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                  items: ri!groupByFields,\n                  expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n                ),\n                measures: #\"SYSTEM_SYSRULES_measure\"(\n                  field: ri!groupByFields[1],\n                  function: \"COUNT\",\n                  alias: \"count\"\n                )\n              )\n            ),\n            filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n              operator: \"AND\",\n              ignoreFiltersWithEmptyValues: true,\n              logicalExpressions: {\n                ri!logicalExpressions,\n                if(\n                  and(\n                    a!isNotNullOrEmpty(ri!searchFields),\n                    a!isNotNullOrEmpty(ri!searchTerm)\n                  ),\n                  #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                    operator: \"AND\",\n                    logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                      items: split(trim(ri!searchTerm), \" \"),\n                      expression: a!localVariables(\n                        local!splitSearchTerm: fv!item,\n                        /*   Initiate filter for each field by the value provided in searchTerm   */\n                        #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                          operator: \"OR\",\n                          filters: #\"SYSTEM_SYSRULES_forEach\"(\n                            items: ri!searchFields,\n                            expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                              field: fv!item,\n                              operator: \"includes\",\n                              value: local!splitSearchTerm\n                            )\n                          )\n                        )\n                      )\n                    )\n                  ),\n                  {}\n                )\n              },\n              filters: ri!filters\n            ),\n            pagingInfo: if(\n              a!isNullOrEmpty(ri!groupByFields),\n              local!queryParams.pagingInfo,\n              #\"urn:appian:function:v1:a:update\"(\n                local!queryParams.pagingInfo,\n                \"sort\",\n                null\n              )\n            ),\n            fetchTotalCount: local!queryParams.fetchTotalCount,\n            relatedRecordData: if(\n              a!isNullOrEmpty(ri!groupByFields),\n              ri!relatedRecordData,\n              {}\n            )\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          index(local!queryResult,\"data\",{})\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          index(local!queryResult,\"data\",{})\n        ),\n        equals: \"RECORD_BY_ID\",\n        /*do not need to cast for queryRecordByIdentifier*/\n        then: local!queryResult,\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: cast(\n          local!queryParams.castToType,\n          index(local!queryResult,\"totalCount\",{})\n        ),\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "0006ecd6-9d5e-8000-04ca-7f0000014e7a": {
      "name": "AIA Classification Run All Test Instance",
      "type": "Process Model",
      "sail_code": "// Input: ?\npv!baselineClassificationInstances[tp!instanceIndex]\n\n// Input: ?\n=pv!classificationModelVersion[recordType!AIA Classification Model Version.modelVersionId]\n\n// Output: ?\nrule!AIA_Classification_GetTestInstances(modelVersion: pv!classificationModelVersion)"
    },
    "_a-0000ec5c-9eda-8000-9bec-011c48011c48_119664": {
      "name": "AIA_Classification_GetLatestModelVersionIdByKey",
      "type": "Expression Rule",
      "sail_code": "index(\n  rule!AIA_QR_getClassificationModelVersion(\n    returnType: \"SINGLE_OBJECT\",\n    fields: {\n      recordType!AIA Classification Model Version.modelVersionId\n    },\n    modelKey: ri!modelKey,\n    modelId: ri!modelId,\n    status: cons!AIA_MODEL_VERSION_STATUS_PUBLISHED,\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!AIA Classification Model Version.versionId,\n      ascending: false\n    )\n  ),\n  recordType!AIA Classification Model Version.modelVersionId,\n  tointeger(null)\n)"
    },
    "_a-0000ef39-a43c-8000-9ecf-011c48011c48_429287": {
      "name": "AIA_Classification_GetTestInstanceCount",
      "type": "Expression Rule",
      "sail_code": "a!defaultValue(\n  value: rule!AIA_Classification_GetTestInstances(\n    ModelVersion: ri!modelVersion,\n    testSuiteId: ri!testSuiteId,\n    returnType: \"TOTAL_COUNT\"\n  ),\n  default: 0\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_52454": {
      "name": "AIA_Test_GetLatestClassificationInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Classification Instance,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Classification Instance,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Classification Instance.id\n          )\n        }\n      )\n    ).data[recordType!AIA Classification Instance.id],\n    1,\n    null\n  ),\n  fields: {\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.outcomes,\n    recordType!AIA Classification Instance.refInstanceStatus\n  },\n)"
    },
    "_a-0000ec6d-e6ba-8000-9bf2-011c48011c48_134486": {
      "name": "AIA_Classification_GetLatestModelVersion",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!modelVersionId: rule!AIA_Classification_GetLatestModelVersionIdByKey(\n    modelKey: ri!modelKey,\n    modelId: ri!modelId\n  ),\n  if(\n    a!isNullOrEmpty(local!modelVersionId),\n    null,\n    rule!AIA_QR_getClassificationModelVersion(\n      returnType: \"RECORD_BY_ID\",\n      fields: {\n        recordType!AIA Classification Model Version.categories,\n        recordType!AIA Classification Model Version.model,\n        recordType!AIA Classification Model Version.examples\n      },\n      modelVersionId: local!modelVersionId,\n      relatedRecordData: #\"SYSTEM_SYSRULES_relatedRecordData\"(\n        relationship: recordType!AIA Classification Model Version.categories,\n        sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Classification Model Version Category.sortOrder,\n          ascending: true\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000eead-6b09-8000-9bee-011c48011c48_148667": {
      "name": "AIA_QR_getModelTestSuite",
      "type": "Expression Rule",
      "sail_code": "rule!SHRD_UTIL_QueryRecord(\n  recordType: recordType!AIA Model Test Suite,\n  returnType: ri!returnType,\n  fields: ri!fields,\n  executeWhen: ri!executeWhen,\n  pagingInfo: ri!pagingInfo,\n  identifier: ri!ids,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Model Test Suite.modelUuid,\n      operator: \"=\",\n      value: ri!uuid,\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Model Test Suite.testSuiteId,\n      operator: \"in\",\n      value: ri!ids\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AIA Model Test Suite.testSuiteId,\n      operator: \"not in\",\n      value: ri!idsToExclude\n    ),\n  },\n  sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n    field: recordType!AIA Model Test Suite.testSuiteId,\n    ascending: true\n  )\n)"
    },
    "_a-0000edd8-757d-8000-9bb0-011c48011c48_120611": {
      "name": "AIA_ClassificationModel_GetAlertingTestInstanceCount",
      "type": "Expression Rule",
      "sail_code": "a!defaultValue(\n  value: rule!SHRD_UTIL_QueryRecord(\n    recordType: recordType!AIA Classification Instance,\n    returnType: \"TOTAL_COUNT\",\n    executeWhen: a!isNotNullOrEmpty(ri!model),\n    filters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Classification Instance.modelVersion.modelId,\n        operator: \"=\",\n        value: ri!model[recordType!AIA Classification Model.modelId]\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Classification Instance.modelVersion.versionId,\n        operator: \"<=\",\n        value: ri!modelVersion[recordType!AIA Classification Model Version.versionId],\n        applyWhen: a!isNotNullOrEmpty(ri!modelVersion)\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Classification Instance.modelTestSuiteCase.modelTestSuiteId,\n        operator: \"=\",\n        value: ri!testSuiteId,\n        applyWhen: a!isNotNullOrEmpty(ri!testSuiteId)\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Classification Instance.testInstance,\n        operator: \"=\",\n        value: true()\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AIA Classification Instance.statusId,\n        operator: \"not in\",\n        value: cons!AIA_INSTANCE_STATUS_RECONCILED_ALL\n      )\n    }\n  ),\n  default: 0\n)"
    },
    "_a-0000ed69-99d8-8000-9ba6-011c48011c48_42488": {
      "name": "AIA_UTIL_displayAlertBanners",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  showWhen: ri!showWhen,\n  padding: ri!padding,\n  contents: {\n    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n      items: {\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: {\n              #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: a!defaultValue(ri!alertBannerIcon, \"info-circle\"),\n                color: a!defaultValue(ri!alertIconColor, ri!brandingMap.Gray3),\n                size: \"MEDIUM\"\n              )\n            }\n          ),\n          width: \"MINIMIZE\"\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          showWhen: ri!alertMessageShowWhen,\n          /* Replace this rich text with your information message */\n          item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!alertMessage,\n              color: a!defaultValue(\n                ri!alertMessageColor,\n                ri!brandingMap.Gray4\n              )\n            )\n          ),\n          width: \"MINIMIZE\"\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          /* Replace this rich text with your information message */\n          item: ri!bannerRecordAction,\n          showWhen: a!isNotNullOrEmpty(ri!bannerRecordAction)\n        )\n      },\n      alignVertical: \"MIDDLE\"\n    )\n  },\n  style: a!defaultValue(ri!bannerStyle, \"STANDARD\"),\n  marginBelow: a!defaultValue(ri!marginBelow, \"STANDARD\"),\n  showBorder: ri!brandingMap.CardShowBorder,\n  shape: \"SEMI_ROUNDED\"\n)"
    },
    "_a-0000ecd4-7f5c-8000-9c42-011c48011c48_163348": {
      "name": "AIA_ClassificationModelVersion_RecordAction_RunAllTestInstances",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!AIA_UTIL_LoadBrandingMap(),\n\n  local!modelVersions: rule!AIA_QR_getClassificationModelVersion(\n    returnType: \"OBJECT_ARRAY\",\n    modelId: ri!classificationModel[recordType!AIA Classification Model.modelId]\n  ),\n\n  /*if model version passed in, enforce selection. This mean slaunching from version record*/\n  local!allowModelVersionSelection: a!isNullOrEmpty(ri!classificationModelVersion),\n\n  /*default selected model version to latest*/\n  local!selectedModelVersion: if(\n    local!allowModelVersionSelection,\n    /*when selection allowed, default to latest version*/\n    rule!AIA_Classification_GetLatestModelVersion(\n      modelKey: ri!classificationModel[recordType!AIA Classification Model.key],\n      modelId: ri!classificationModel[recordType!AIA Classification Model.modelId]\n    ),\n    /*else set to provided value*/\n    ri!classificationModelVersion\n  ),\n\n  local!testInstanceCount: rule!AIA_Classification_GetTestInstanceCount(\n    modelVersion: local!selectedModelVersion\n  ),\n  local!alertCount: rule!AIA_ClassificationModel_GetAlertingTestInstanceCount(\n    model: ri!classificationModel,\n    modelVersion: local!selectedModelVersion\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v1\"(\n    skipAutoFocus: true(),\n    label: #\"urn:appian:translation-string:v1:9276facb-ba17-4058-b318-3c13a9a4a28c\",\n    contents: {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_stampField\"(\n            icon: \"flask\",\n            backgroundColor: local!brandingMap.Blue1,\n            contentColor: local!brandingMap.Blue4,\n            size: \"SMALL\",\n            align: \"CENTER\",\n            marginBelow: \"STANDARD\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            value: {\n              #\"urn:appian:translation-string:v1:70246883-afd2-4189-baf8-afe9b5e3dbea\"(\n                #\"urn:appian:translation-variable:v1:8a5a1671-4111-441c-8c93-f3c71bda4e79\": local!testInstanceCount\n              )\n            },\n            align: \"CENTER\"\n          )\n        },\n        padding: \"STANDARD\",\n        showBorder: false()\n      ),\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        marginBelow: \"LESS\",\n        marginAbove: \"LESS\",\n        showWhen: local!alertCount > 0,\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            width: \"MEDIUM\",\n            contents: rule!AIA_UTIL_displayAlertBanners(\n              marginBelow: \"NONE\",\n              alertBannerIcon: \"exclamation-triangle\",\n              alertIconColor: local!brandingMap.Orange3,\n              brandingMap: local!brandingMap,\n              bannerStyle: local!brandingMap.Orange1,\n              alertMessage: #\"urn:appian:translation-string:v1:8f27ed46-5a56-472a-8039-03c55aff11f2\"(\n                #\"urn:appian:translation-variable:v1:0155de79-543e-46b4-8598-049a7d947714\": local!alertCount\n              )\n            )\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"()\n        }\n      ),\n\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n            label: #\"urn:appian:translation-string:v1:35008bac-bfbd-4de6-837f-81ea140246a1\",\n            placeholder: #\"urn:appian:translation-string:v1:0dcdedef-2127-408e-94bd-a86b26de660f\",\n            required: true,\n            disabled: not(local!allowModelVersionSelection),\n            value: local!selectedModelVersion[recordType!AIA Classification Model Version.modelVersionId],\n            saveInto: {\n              a!save(\n                local!selectedModelVersion,\n                rule!AIA_UTIL_Filter(\n                  records: local!modelVersions,\n                  field: recordType!AIA Classification Model Version.modelVersionId,\n                  value: save!value,\n                  filterType: \"FIRST_MATCH\"\n                )\n              )\n            },\n            choiceLabels: #\"SYSTEM_SYSRULES_forEach\"(\n              items: local!modelVersions,\n              expression: #\"urn:appian:translation-string:v1:e545b547-89da-4d8d-ae1b-6a9484e5a972\"(\n                #\"urn:appian:translation-variable:v1:ded61c24-753f-4c3e-8ab5-88ee3619905f\": fv!item[recordType!AIA Classification Model Version.versionId],\n                #\"urn:appian:translation-variable:v1:20227dbd-035f-46e5-8d2f-d413d7b7ed50\": fv!item[recordType!AIA Classification Model Version.status],\n                #\"urn:appian:translation-variable:v1:b6e4b42e-4a95-4a54-bb0f-a4d2bd925f0d\": rule!AIA_GetLLMName(\n                  llm: a!defaultValue(\n                    value: fv!item[recordType!AIA Classification Model Version.llm],\n                    default: rule!AIA_DefaultModel()\n                  )\n                )\n              )\n            ),\n            choiceValues: local!modelVersions[recordType!AIA Classification Model Version.modelVersionId]\n          )\n        },\n        showWhen: and(\n          a!isNotNullOrEmpty(local!modelVersions),\n          length(local!modelVersions) > 1\n        ),\n        marginAbove: \"LESS\",\n        marginBelow: \"NONE\",\n        showBorder: false,\n        padding: \"NONE\"\n      )\n    },\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:e018f5d0-8c82-4a3e-8409-354cd81c1024\",\n          saveInto: {\n            a!save(\n              ri!classificationModelVersion,\n              local!selectedModelVersion\n            )\n          },\n          validate: true,\n          disabled: or(\n            a!isNullOrEmpty(local!testInstanceCount),\n            local!testInstanceCount = 0\n          ),\n          submit: true,\n          style: \"SOLID\"\n        )\n      },\n      secondaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:df61ccad-fe9a-4d7a-ba9a-d89b08f3467a\",\n          value: true,\n          saveInto: ri!cancel,\n          submit: true,\n          style: \"OUTLINE\",\n          validate: false\n        )\n      }\n    )\n  )\n)"
    }
  }
}