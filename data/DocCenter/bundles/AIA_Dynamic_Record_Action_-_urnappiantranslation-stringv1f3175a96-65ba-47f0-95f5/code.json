{
  "_metadata": {
    "bundle_id": "AIA_Dynamic_Record_Action_-_urnappiantranslation-stringv1f3175a96-65ba-47f0-95f5"
  },
  "objects": {
    "_a-0000ee21-294f-8000-9bb6-011c48011c48_182518": {
      "name": "AIA_IsDocumentExtension",
      "type": "Expression Rule",
      "sail_code": "and(\n  a!isNotNullOrEmpty(ri!document),\n  contains(\n    lower(ri!extensions),\n    lower(document(\n      ri!document,\n      \"extension\"\n    ))\n  )\n)"
    },
    "_a-0000ec67-5f00-8000-9bf0-011c48011c48_125328": {
      "name": "AIA_FormatDocument",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!documentId),\n  try(document(ri!documentId, \"name\"), \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"),\n  if(\n    a!isNotNullOrEmpty(ri!instance),\n    a!localVariables(\n      local!isExtraction: runtimetypeof(ri!instance) = typeof(recordType!AIA Extraction Instance()),\n      if(\n        local!isExtraction,\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Extraction Instance.documentId],\n            ri!instance[recordType!AIA Extraction Instance.sourceDocumentId]\n          )\n        ),\n        rule!AIA_FormatDocument(\n          documentId: a!defaultValue(\n            ri!instance[recordType!AIA Classification Instance.documentId],\n            ri!instance[recordType!AIA Classification Instance.sourceDocumentId]\n          )\n        )\n      )\n    ),\n    \"[\" & #\"urn:appian:translation-string:v1:955ba2b6-66dc-4f51-96ff-bc7facbc8d66\" & \"]\"\n  )\n)"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40839": {
      "name": "AIA_Test_GetLatestExtractionInstance",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v3\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.instanceUuid,\n    recordType!AIA Extraction Instance.modelVersion.versionId,\n    recordType!AIA Extraction Instance.modelVersion.modelId,\n    recordType!AIA Extraction Instance.modelVersion.uuid,\n    recordType!AIA Extraction Instance.modelVersion.extractionModel.key,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.fieldCount,\n    recordType!AIA Extraction Instance.sections,\n    recordType!AIA Extraction Instance.boundingBoxes,\n    recordType!AIA Extraction Instance.responseDocumentId,\n    recordType!AIA Extraction Instance.sourceDocumentId\n  }\n)"
    },
    "_a-0000ec60-a08d-8000-9bee-011c48011c48_121190": {
      "name": "AIA_ViewEml",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!mailMap: #\"SYSTEM_SYSRULES_fromJson_v1\"(reademlfile(ri!eml)),\n  local!contents: a!refreshVariable(\n    value: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_textField\"(\n              label: \"From\",\n              labelPosition: \"ABOVE\",\n              value: local!mailMap.from,\n              refreshAfter: \"UNFOCUS\",\n              readOnly: true,\n              validations: {}\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_textField\"(\n              label: \"To\",\n              labelPosition: \"ABOVE\",\n              value: local!mailMap.to,\n              saveInto: {},\n              refreshAfter: \"UNFOCUS\",\n              readOnly: true,\n              validations: {}\n            )\n          )\n        }\n      ),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        labelPosition: \"COLLAPSED\",\n        showWhen: ri!style = \"SECTION\",\n        value: #\"SYSTEM_SYSRULES_richTextHeader\"(text: local!mailMap.subject)\n      ),\n      #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n        labelPosition: \"COLLAPSED\",\n        value: local!mailMap.body,\n        saveInto: {},\n        height: \"MEDIUM\",\n        readOnly: true,\n        validations: {}\n      )\n    },\n    refreshAlways: true\n  ),\n  if(\n    ri!style = \"SECTION\",\n    #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n      label: \"Email\",\n      labelSize: \"MEDIUM\",\n      labelHeadingTag: \"H2\",\n      labelColor: \"STANDARD\",\n      contents: local!contents,\n      divider: \"ABOVE\"\n    ),\n    #\"SYSTEM_SYSRULES_formLayout_v1\"(\n      skipAutoFocus: true(),\n      label: local!mailMap.subject,\n      contents: local!contents,\n      buttons: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n        buttons: {\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: \"Close\",\n            submit: true,\n            style: \"OUTLINE\"\n          )\n        },\n        align: \"START\",\n        marginBelow: \"NONE\"\n      )\n    )\n  )\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_52454": {
      "name": "AIA_Test_GetLatestClassificationInstance",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Classification Instance,\n  identifier: index(\n    #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n      recordType: recordType!AIA Classification Instance,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: {\n          #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: recordType!AIA Classification Instance.id\n          )\n        }\n      )\n    ).data[recordType!AIA Classification Instance.id],\n    1,\n    null\n  ),\n  fields: {\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.modelVersion,\n    recordType!AIA Classification Instance.outcomes,\n    recordType!AIA Classification Instance.refInstanceStatus\n  },\n)"
    },
    "_a-0000ed57-e2bf-8000-9c54-011c48011c48_15225797": {
      "name": "AIA_ViewCsv",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_paragraphField\"(\n  label: rule!AIA_FormatDocument(\n    documentId: ri!document,\n  ),\n  labelPosition: \"COLLAPSED\",\n  height: \"TALL\",\n  readOnly: true,\n  value: rule!SHRD_ReadDocumentContent(\n    document: ri!document\n  )\n)"
    },
    "_a-0000ec2c-7618-8000-9bc8-011c48011c48_912344": {
      "name": "AIA_UTIL_displayInlineDocument",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!showWhen: a!defaultValue(ri!showWhen, true),\n  a!match(\n    value: try(\n      lower(document(ri!documentId, \"extension\")),\n      null\n    ),\n    whenTrue: rule!AIA_IsDocumentExtension(\n      document: ri!documentId,\n      extensions: cons!AIA_AI_SUPPORTED_DOC_TYPES\n    ),\n    then: reconcileDocumentViewer(\n      label: rule!AIA_FormatDocument(\n        documentId: ri!documentId,\n      ),\n      labelPosition: \"COLLAPSED\",\n      documentUrl: document(\n        ri!documentId,\n        \"url\"\n      ),\n      height: ri!height,\n      showWhen: local!showWhen\n    ),\n    whenTrue: contains(cons!AIA_TEXT_BASED_EXTENSIONS, tostring(fv!value)),\n    then: #\"SYSTEM_SYSRULES_cardLayout\"(\n      padding: \"STANDARD\",\n      showBorder: false,\n      contents: rule!AIA_ViewCsv(document: ri!documentId),\n      showWhen: local!showWhen\n    ),\n    equals: \"eml\",\n    then: #\"SYSTEM_SYSRULES_cardLayout\"(\n      padding: \"STANDARD\",\n      showBorder: false,\n      contents: rule!AIA_ViewEml(eml: ri!documentId, style: \"SECTION\"),\n      showWhen: local!showWhen\n    ),\n    default: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text: #\"urn:appian:translation-string:v1:c6755e7b-0e3e-4450-a5e8-83768c5f51ff\"\n        ),\n        \" \",\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n          text:#\"urn:appian:translation-string:v1:cdd19acd-88fc-46ad-9184-5bcf62ebd2b3\",\n          link: #\"SYSTEM_SYSRULES_documentDownloadLink\"(document: ri!documentId),\n          linkStyle: \"STANDALONE\"\n        ),\n        \" \",\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(text:#\"urn:appian:translation-string:v1:8831778e-03c2-46c1-aeae-baa89c699eca\")\n      },\n      showWhen: local!showWhen\n    )\n  )\n)"
    },
    "_a-0000ee3e-060c-8000-9bb8-011c48011c48_203441": {
      "name": "SHRD_ReadDocumentContent",
      "type": "Expression Rule",
      "sail_code": "/*readdocumentcontent(ri!document)*/\n\nqueryfile(\n  ri!document,\n  \"TEXT\",\n  now()\n).result"
    }
  }
}