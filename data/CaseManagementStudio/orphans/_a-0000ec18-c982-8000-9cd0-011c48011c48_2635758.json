{
  "uuid": "_a-0000ec18-c982-8000-9cd0-011c48011c48_2635758",
  "name": "CMGT_SELF_ValidateEmailForUserCreation",
  "type": "Expression Rule",
  "description": "Validates the email with conditions for appian user account creation",
  "sail_code": "/* This email id is being used as the user name for appian user account creation*/\n/*so we have validation to only have the @-._' as the allowed special characters*/\na!localVariables(\n  local!validationMessage: #\"urn:appian:translation-string:v1:6bb9ca7f-29ec-4064-af3e-8f241ee5d0b1\",\n  if(\n    a!isNullOrEmpty(ri!text),\n    null,\n    a!localVariables(\n      local!localPart: index(split(ri!text, \"@\"), 1, {}),\n      local!domainPart: index(split(ri!text, \"@\"), 2, {}),\n      {\n        if(\n          /*allowed character length for email address during user account creation is 74*/\n          len(ri!text) > 74,\n          #\"urn:appian:translation-string:v1:354eadcf-1b91-4637-b084-2a053c9dcf0e\"(\n            #\"urn:appian:translation-variable:v1:42309227-f174-44cd-a8b6-09ab7fc6ed26\": 74\n          ),\n          or(\n            length(split(ri!text, \" \")) > 1,\n            count(split(ri!text, \"@\")) <> 2,\n            \n          ),\n          local!validationMessage,\n          if(\n            or(\n              len(\n                cleanwith(\n                  ri!text,\n                  \"abcdefghijklmnopqrstuvwxyz1234567890-._'@\"\n                )\n              ) <> len(ri!text),\n              length(split(local!domainPart, \".\")) < 2,\n              contains(split(local!localPart, \".\"), \"\"),\n              contains(split(local!domainPart, \".\"), \"\"),\n              \n            ),\n            local!validationMessage,\n            null\n          )\n        )\n      }\n    )\n  )\n)",
  "calls": [
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    }
  ],
  "called_by": [
    {
      "name": "CMGT_SELF_SignUpDetails",
      "type": "Interface",
      "dep_type": "CALLS"
    }
  ]
}