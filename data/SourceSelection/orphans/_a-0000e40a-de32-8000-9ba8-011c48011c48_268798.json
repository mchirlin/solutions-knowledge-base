{
  "uuid": "_a-0000e40a-de32-8000-9ba8-011c48011c48_268798",
  "name": "AS_CO_UT_zINTERNAL_updateCdtFieldsByPath_handler",
  "type": "Expression Rule",
  "description": "Used by rule `AS_CO_UT_updateCdtFieldsByPath`",
  "sail_code": "cast(\n  typeof(ri!cdt),\n  if(\n\n    and(\n      rule!AS_CO_UT_isBlank(cleanwith(ri!field, \".[]\")),\n      rule!AS_CO_UT_isNotBlank(stripwith(ri!field, \"1234567890\")),\n      not(\n        /*Cannot do a \"simple\" update if its a dictionary list, map list, or the field itself is an array*/\n        or(\n          rule!AS_CO_UT_typeCompare(\n            value1: ri!cdt,\n            value2: rule!AS_CO_UT_returnNullDictionaryList()\n          ),\n          rule!AS_CO_UT_typeCompare(\n            value1: ri!cdt,\n            value2: {a!map()}\n          ),\n          and(\n            /*Both the CDT to update and the field within the CDT are list types*/\n            rule!AS_CO_UT_checkIfArrayType(\n              typeOf: ri!cdt\n            ),\n            rule!AS_CO_UT_checkIfArrayType(\n              typeOf: rule!AS_CO_UT_returnSingleTypeObject(\n                typeOf: ri!cdt\n              )[ri!field]\n            )\n          )\n        )\n      )\n    ),\n\n    /*Early exit for a simple field-update*/\n    rule!AS_CO_UT_zINTERNAL_updateCdtFields_updateHandler(\n      cdt: ri!cdt,\n      field: ri!field,\n      indices: ri!indices,\n      newValue: ri!newValue\n    ),\n\n    with(\n      local!fieldsAndIndices: rule!AS_CO_UT_zINTERNAL_indexPath_nestedFieldArrayHandler(field: ri!field),\n\n      reduce(\n        rule!AS_CO_UT_zINTERNAL_updateCdtFieldsByPath_nestHandler(\n          previous: _,\n          cdt: ri!cdt,\n          fieldsAndIndices: local!fieldsAndIndices,\n          /*Indices is only used when passing through from AS_CO_UT_updateCdtFields, never AS_CO_UT_updateCdtFieldsByPath*/\n          indices: ri!indices,\n          index: _\n        ),\n        ri!newValue,\n        reverse(rule!AS_CO_UT_enumForCount(input: local!fieldsAndIndices))\n      )\n    )\n  )\n)",
  "calls": [
    {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_typeCompare",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_returnNullDictionaryList",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_checkIfArrayType",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_returnSingleTypeObject",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_zINTERNAL_updateCdtFields_updateHandler",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_zINTERNAL_indexPath_nestedFieldArrayHandler",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_zINTERNAL_updateCdtFieldsByPath_nestHandler",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_enumForCount",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    }
  ],
  "called_by": [
    {
      "name": "AS_CO_UT_zINTERNAL_updateCdtFieldsByPathComplex_handler",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_CO_UT_updateCdtFields",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    }
  ]
}