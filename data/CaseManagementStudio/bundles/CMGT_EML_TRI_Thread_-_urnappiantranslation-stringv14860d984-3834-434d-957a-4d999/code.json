{
  "_metadata": {
    "bundle_id": "CMGT_EML_TRI_Thread_-_urnappiantranslation-stringv14860d984-3834-434d-957a-4d999"
  },
  "objects": {
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000ee54-f700-8000-9d97-011c48011c48_4558403": {
      "name": "CMGT_EML_TRI_Message_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!message,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_EML_TRI_Message.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field:  recordType!CMGT_EML_TRI_Message.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    neverOverwrite: {\n      a!map(\n        field:  recordType!CMGT_EML_TRI_Message.isActive,\n        value: true()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Message.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Message.createdBy,\n        value: ri!initiator\n      )\n    }\n  )\n)"
    },
    "_a-0000eca3-381d-8000-9cf0-011c48011c48_3109206": {
      "name": "CMGT_EML_TRI_ThreadSet_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!threadSets,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_EML_TRI_ThreadSet.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_ThreadSet.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_EML_TRI_ThreadSet.isActive,\n        value: true()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_ThreadSet.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_ThreadSet.createdBy,\n        value: ri!initiator\n      )\n    }\n  )\n)"
    },
    "_a-0000ecac-72b0-8000-9cf2-011c48011c48_3164436": {
      "name": "CMGT_EML_TRI_TriageRejectedScreen",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!CMGT_UTIL_LoadBrandingMap(),\n  {\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      /* Add whitespace above image */\n      height: a!match(\n        value: ri!context,\n        equals: \"CREATE_CASE\",\n        then: \"SHORT_PLUS\",\n        default: \"SHORT\"\n      ),\n      style: \"TRANSPARENT\",\n      showBorder: false\n    ),\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        /* Empty column layouts on both sides */\n        /* help to center the content */\n        #\"SYSTEM_SYSRULES_columnLayout\"(),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"exclamation-triangle\",\n                  color: local!brandingMap.WarningAccentColor,\n                  size: \"LARGE_PLUS\"\n                ),\n                char(10),\n                char(10),\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: #\"urn:appian:translation-string:v1:7e824c0d-76e6-4223-84e6-daabe784389d\",\n                  color: local!brandingMap.StandardTextColor,\n                  size: \"MEDIUM\",\n                  style: \"STRONG\"\n                ),\n                char(10),\n                char(10),\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: #\"urn:appian:translation-string:v1:cd66da49-1c26-4d3f-be38-b5aa83042c81\",\n                  color: local!brandingMap.StandardTextColor,\n                  size: \"STANDARD\",\n\n                ),\n                char(10),\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: #\"urn:appian:translation-string:v1:cbf4cf89-fc3c-4e3a-a1ac-cc7c2bbb3af6\",\n                  color: local!brandingMap.StandardTextColor,\n                  size: \"STANDARD\",\n\n                )\n              },\n              align: \"CENTER\"\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                label: #\"urn:appian:translation-string:v1:d8729433-dc74-4163-8575-849acf031e36\",\n                saveInto: {},\n                submit: true(),\n                style: \"SOLID\"\n              ),\n              align: \"CENTER\",\n              marginAbove: \"LESS\"\n            )\n          },\n          width: \"WIDE\"\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"()\n      },\n      stackWhen: { \"PHONE\", \"TABLET_PORTRAIT\" }\n    ),\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      /* Add whitespace below button */\n      height: a!match(\n        value: ri!context,\n        equals: \"CREATE_CASE\",\n        then: \"SHORT_PLUS\",\n        default: \"SHORT\"\n      ),\n      style: \"TRANSPARENT\",\n      showBorder: false,\n\n    )\n  }\n)"
    },
    "0002eca4-fb9b-8000-17c5-7f0000014e7a": {
      "name": "CMGT_EML_TRI_IgnoreThread",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=pv!thread\n\n// Input: ?\n=recordType!CMGT_EML_TRI_Thread\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\n#\"urn:appian:function:v1:a:update\"(\n  pv!thread,\n  {\n    recordType!CMGT_EML_TRI_Thread.threadStatus,\n    recordType!CMGT_EML_TRI_Thread.owner,\n    recordType!CMGT_EML_TRI_Thread.modifiedBy,\n    recordType!CMGT_EML_TRI_Thread.modifiedOn\n  },\n  {\n    cons!CMGT_EML_TRI_TRIAGE_STATUS_OPEN,\n    null,\n    pp!initiator,\n    now()\n  }\n)\n\n// Input: ?\n=recordType!CMGT_EML_TRI_Thread\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\n#\"urn:appian:function:v1:a:update\"(\n  pv!thread,\n  {\n    recordType!CMGT_EML_TRI_Thread.threadStatus,\n    recordType!CMGT_EML_TRI_Thread.owner,\n    recordType!CMGT_EML_TRI_Thread.modifiedBy,\n    recordType!CMGT_EML_TRI_Thread.modifiedOn\n  },\n  {\n    cons!CMGT_EML_TRI_TRIAGE_STATUS_IN_PROGRESS,\n    pp!initiator,\n    pp!initiator,\n    now()\n  }\n)\n\n// Input: ?\n=recordType!CMGT_EML_TRI_Thread\n\n// Output: ?\nAC!RecordsUpdated\n\n// Input: ?\n=pv!thread\n\n// Input: ?\n=pv!isSubmit\n\n// Output: ?\nrule!CMGT_EML_TRI_QR_GetThreads(\n  threadIds: pv!thread[recordType!CMGT_EML_TRI_Thread.threadId],\n  returnType: \"SINGLE_OBJECT\"\n)\n\n// Input: ?\n=rule!CMGT_EML_TRI_MTR_IgnoreThreadTriageAction()\n\n// Output: ?\nrule!CMGT_EML_TRI_Thread_SetMetaData(\n  threads: pv!thread,\n  initiator: pp!initiator,\n  eventType: \"IGNORE\"\n)"
    },
    "_a-0000e9f4-1323-8000-9bd3-011c48011c48_267840": {
      "name": "CMGT_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!branding: getbrandingconfig(\n    cons!CMGT_DOC_DEFAULT_BRANDING_CONFIG,\n    true\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!branding.defaultBranding.key,\n        local!branding.customBranding.key\n      },\n      {\n        local!branding.defaultBranding.value,\n        local!branding.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000e882-ff68-8000-9bb2-011c48011c48_37819-cmgt_eml_tri": {
      "name": "CMGT_EML_TRI_QR_GetThreads",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_EML_TRI_Thread,\n  returnType: ri!returnType,\n  executeWhen: ri!executeWhen,\n  triggerRefresh: ri!triggerRefresh,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_EML_TRI_Thread.threadId,\n      operator: \"in\",\n      value: ri!threadIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_EML_TRI_Thread.threadSetId,\n      operator: \"in\",\n      value: ri!threadSetIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_EML_TRI_Thread.threadStatus,\n      operator: \"in\",\n      value: ri!threadStatuses\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_EML_TRI_Thread.subject,\n      operator: \"in\",\n      value: ri!subjects\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_EML_TRI_Thread.messages.messageId,\n      operator: \"in\",\n      value: ri!messageIds\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_EML_TRI_Thread.isActive,\n      operator: \"in\",\n      value: { a!defaultValue(ri!isActive, true) }\n    ),\n    ri!additionalFilter\n  },\n  logicalExpressions: {\n    if(\n      a!isNotNullOrEmpty(ri!searchTerm),\n      {\n        #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n          operator: \"AND\",\n          logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n            items: split(trim(ri!searchTerm), \" \"),\n            expression: a!localVariables(\n              local!splitSearchTerm: fv!item,\n              #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                operator: \"OR\",\n                filters: #\"SYSTEM_SYSRULES_forEach\"(\n                  items: ri!searchFields,\n                  expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                    field: fv!item,\n                    operator: \"includes\",\n                    value: local!splitSearchTerm\n                  )\n                )\n              )\n            )\n          )\n        )\n      },\n      {}\n    ),\n    ri!additionalLogicalExpressions\n  },\n  fields: ri!fields,\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  groupByFields: ri!groupByFields,\n)"
    },
    "_a-0000eca3-381d-8000-9cf0-011c48011c48_3104219": {
      "name": "CMGT_EML_TRI_Thread_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!threads,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.threadStatus,\n        value: a!match(\n          value: ri!eventType,\n          equals: \"IGNORE\",\n          then: cons!CMGT_EML_TRI_TRIAGE_STATUS_IGNORED,\n          equals: \"LINK\",\n          then: cons!CMGT_EML_TRI_TRIAGE_STATUS_LINKED_TO_CASE,\n          whenTrue: or(\n            ri!eventType = \"NEW_THREAD\",\n            ri!eventType = \"UNLOCK\"\n          ),\n          then: cons!CMGT_EML_TRI_TRIAGE_STATUS_OPEN,\n          equals: \"LOCK\",\n          then: cons!CMGT_EML_TRI_TRIAGE_STATUS_IN_PROGRESS,\n          equals: \"CREATE_CASE\",\n          then: cons!CMGT_EML_TRI_TRIAGE_STATUS_CREATED_CASE,\n          equals: \"THREAD_PROCESSING\",\n          then: cons!CMGT_EML_TRI_TRIAGE_STATUS_PROCESSING,\n          default: cons!CMGT_EML_TRI_TRIAGE_STATUS_OPEN\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.owner,\n        value: a!match(\n          value: ri!eventType,\n          whenTrue: or(\n            ri!eventType = \"NEW_THREAD\",\n            ri!eventType = \"UNLOCK\",\n            ri!eventType = \"OPEN\",\n            \n          ),\n          then: null,\n          default: ri!initiator\n        )\n      )\n    },\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.isActive,\n        value: true()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.createdBy,\n        value: ri!initiator\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.threadSet,\n        value: rule!CMGT_EML_TRI_ThreadSet_SetMetaData(\n          threadSets: fv!item[recordType!CMGT_EML_TRI_Thread.threadSet],\n          initiator: ri!initiator\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_EML_TRI_Thread.messages,\n        value: rule!CMGT_EML_TRI_Message_SetMetaData(\n          message: fv!item[recordType!CMGT_EML_TRI_Thread.messages],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ecac-72b0-8000-9cf2-011c48011c48_3156404": {
      "name": "CMGT_EML_TRI_IgnoreThreadConfirmationScreen",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!CMGT_UTIL_LoadBrandingMap(),\n  #\"SYSTEM_SYSRULES_formLayout_v1\"(\n    contents: {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        /* Add whitespace above image */\n        height: \"EXTRA_SHORT\",\n        style: \"TRANSPARENT\",\n        showBorder: false\n      ),\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        /* Add whitespace above image */\n        height: \"EXTRA_SHORT\",\n        style: \"TRANSPARENT\",\n        showBorder: false\n      ),\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        columns: {\n          /* Empty column layouts on both sides */\n          /* help to center the content */\n          #\"SYSTEM_SYSRULES_columnLayout\"(),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            contents: {\n              #\"SYSTEM_SYSRULES_imageField_v1\"(\n                labelPosition: \"COLLAPSED\",\n                images: {\n                  #\"SYSTEM_SYSRULES_documentImage\"(\n                    document: local!brandingMap.CaseConfirmationImage\n                  )\n                },\n                size: \"SMALL\",\n                align: \"CENTER\",\n                marginAbove: \"MORE\"\n              ),\n              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                labelPosition: \"COLLAPSED\",\n                value: {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:22aa2082-039b-4205-a519-5f01764a2b49\",\n                    color: local!brandingMap.StandardTextColor,\n                    size: \"MEDIUM_PLUS\",\n                    style: \"STRONG\"\n                  ),\n                  char(10),\n                  char(10)\n                },\n                align: \"CENTER\",\n                marginBelow: \"LESS\"\n              ),\n              #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:d8729433-dc74-4163-8575-849acf031e36\",\n                  saveInto: {},\n                  submit: true(),\n                  style: \"SOLID\",\n                  color: local!brandingMap.AccentColor\n                ),\n                align: \"CENTER\"\n              )\n            },\n            width: \"WIDE\"\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"()\n        },\n        stackWhen: { \"PHONE\", \"TABLET_PORTRAIT\" }\n      ),\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        /* Add whitespace below button */\n        height: \"EXTRA_SHORT\",\n        style: \"TRANSPARENT\",\n        showBorder: false\n      )\n    }\n  )\n)"
    },
    "_a-0000ecbe-e702-8000-9cf8-011c48011c48_3225192": {
      "name": "CMGT_EML_TRI_MTR_IgnoreThreadTriageAction",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    },
    "_a-0000eca3-381d-8000-9cf0-011c48011c48_3100852": {
      "name": "CMGT_EML_TRI_EmailTriage_IgnoreThread",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_formLayout_v1\"(\n  label: #\"urn:appian:translation-string:v1:4860d984-3834-434d-957a-4d9998b581d7\",\n  instructions: #\"urn:appian:translation-string:v1:56f256a8-41bf-4958-8263-924b427aaa40\",\n  contents: {\n    #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: #\"urn:appian:translation-string:v1:63d9ef2e-9af5-4221-b19f-598f54cffc21\",\n      labelPosition: \"ABOVE\",\n      value: ri!thread[recordType!CMGT_EML_TRI_Thread.threadReasoning],\n      saveInto: ri!thread[recordType!CMGT_EML_TRI_Thread.threadReasoning],\n      characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n      required: true(),\n      requiredMessage: #\"urn:appian:translation-string:v1:d39ea8cd-a6ff-48e3-b03d-576cd1fbe258\"(\n        #\"urn:appian:translation-variable:v1:45a5309d-360e-4698-b266-96ef8e4e9fc4\": #\"urn:appian:translation-string:v1:63d9ef2e-9af5-4221-b19f-598f54cffc21\"\n      )\n    ),\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          labelPosition: \"COLLAPSED\",\n          value: {\n            #\"SYSTEM_SYSRULES_richTextIcon\"(icon: \"info-circle\", color: \"ACCENT\"),\n            \" \",\n            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: #\"urn:appian:translation-string:v1:1334840c-a4ac-4ab8-9ba0-e7c6a8705d1e\"\n            )\n          },\n          marginBelow: \"NONE\"\n        )\n      },\n      style: \"INFO\",\n      marginBelow: \"LESS\",\n      showBorder: false()\n    )\n  },\n  buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n    primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n      label: #\"urn:appian:translation-string:v1:6fe162ce-25c0-4961-99b6-24b084f8ccfd\",\n      saveInto: { a!save(ri!isSubmit, true()) },\n      style: \"SOLID\",\n      submit: true()\n    ),\n    secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n      label: #\"urn:appian:translation-string:v1:9d852b05-3c66-460f-9f70-57695e5f84ac\",\n      saveInto: {\n        a!save(ri!isSubmit, false()),\n        a!save(\n          ri!thread[recordType!CMGT_EML_TRI_Thread.threadReasoning],\n          null()\n        )\n      },\n      style: \"OUTLINE\",\n      validate: false,\n      submit: true()\n    )\n  ),\n  skipAutoFocus: true\n)"
    }
  }
}