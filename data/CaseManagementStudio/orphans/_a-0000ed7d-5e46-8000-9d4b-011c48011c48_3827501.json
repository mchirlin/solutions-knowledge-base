{
  "uuid": "_a-0000ed7d-5e46-8000-9d4b-011c48011c48_3827501",
  "name": "CMGT_Automation_FieldLevelConditionsConfiguration",
  "type": "Interface",
  "description": "interface to configure conditions sets for an automation",
  "sail_code": "{\n  /*Add Condition button*/\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: #\"urn:appian:translation-string:v1:950b835b-2e6d-405e-bd25-6e8c2d4a76cf\",\n                color: ri!brandingMap.StandardTextColor,\n                size: \"MEDIUM\",\n                style: \"STRONG\",\n\n              ),\n              showWhen: a!defaultValue(ri!showHeader, true)\n            )\n          ),\n          /*CONDITION SET - REMOVE ICON*/\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: \"times\",\n                altText: #\"urn:appian:translation-string:v1:43c9cb44-9ea0-42dc-9f1f-e35d105af6ba\"(#\"urn:appian:translation-variable:v1:41026697-ae03-4130-bc26-b990d3260ef0\": ri!conditionSetIndex, #\"urn:appian:translation-variable:v1:fd8476fb-f312-4670-8106-e7e1083f9a5d\": count(ri!topLevelRuleConditionSet[recordType!CMGT_ConditionSet.childConditionSet])),\n                caption: #\"urn:appian:translation-string:v1:cfcf9d99-94a8-4e12-a9dd-3b01ad6393d9\",\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: if(\n                    a!isNullOrEmpty(\n                      ri!conditionSet[recordType!CMGT_ConditionSet.conditionSetId]\n                    ),\n                    /*if condition set has not been written to DB, remove*/\n                    a!save(\n                      ri!topLevelRuleConditionSet[recordType!CMGT_ConditionSet.childConditionSet],\n                      remove(\n                        ri!topLevelRuleConditionSet[recordType!CMGT_ConditionSet.childConditionSet],\n                        ri!conditionSetIndex\n                      )\n                    ),\n                    /*if rule condition set has already been written to DB, then flag the condition set and its conditions as deleted*/\n                    {\n                      a!save(\n                        ri!conditionSet[recordType!CMGT_ConditionSet.isActive],\n                        false\n                      ),\n                      a!save(\n                        ri!conditionSet[recordType!CMGT_ConditionSet.condition],\n                        #\"urn:appian:function:v1:a:update\"(\n                          ri!conditionSet[recordType!CMGT_ConditionSet.condition],\n                          recordType!CMGT_Condition.isActive,\n                          false\n                        )\n                      )\n                    }\n                  )\n                ),\n                linkStyle: \"STANDALONE\",\n                color: \"NEGATIVE\",\n                size: \"MEDIUM\"\n              ),\n              align: \"RIGHT\"\n            ),\n            width: \"MINIMIZE\",\n            showWhen: count(\n              ri!topLevelRuleConditionSet[recordType!CMGT_ConditionSet.childConditionSet]\n            ) > 1\n          )\n        },\n        alignVertical: \"MIDDLE\"\n      ),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(marginBelow: \"LESS\", showWhen: a!defaultValue(ri!showHeader, true)),\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            contents: {\n              /*Row per rule condition*/\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!conditionSet[recordType!CMGT_ConditionSet.condition],\n                expression: rule!CMGT_Automation_SingleCondition(\n                  condition: fv!item,\n                  conditionSet: ri!conditionSet,\n                  index: fv!index,\n                  availableFieldsInfo: ri!availableFieldsInfo,\n                  brandingMap: ri!brandingMap,\n                  cardPadding: \"NONE\",\n                  showRemoveIcon: and(\n                    a!defaultValue(ri!conditionSet[recordType!CMGT_ConditionSet.isValid], true),\n                    ri!totalConditionsDisplayed > 1\n                    ),\n                  cardStyle: if(ri!showHeader, ri!brandingMap.InfoBackgroundColor, \"NONE\"),\n                  validationGroup: ri!validationGroup\n                )\n              )\n            }\n          )\n        },\n        alignVertical: \"BOTTOM\",\n        marginBelow: \"STANDARD\",\n        spacing: \"DENSE\"\n      ),\n      #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n        buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:e7b35588-bce6-491d-b92a-0b5029e4c9a4\",\n          icon: \"plus-circle\",\n          saveInto: a!save(\n            ri!conditionSet[recordType!CMGT_ConditionSet.condition],\n            append(\n              ri!conditionSet[recordType!CMGT_ConditionSet.condition],\n              recordType!CMGT_Condition(\n                recordType!CMGT_Condition.conditionSetUuid: ri!conditionSet[recordType!CMGT_ConditionSet.conditionSetUuid],\n                recordType!CMGT_Condition.evaluationType: cons!CMGT_REF_TXT_CONDITION_EVALUATION_TYPE_FIELD_VALUE,\n                recordType!CMGT_Condition.isActive: true,\n                recordType!CMGT_Condition.isValid: true\n              )\n            )\n          ),\n          style: \"LINK\",\n          color: \"ACCENT\"\n        ),\n        showWhen: ri!totalConditionsDisplayed < 5,\n        align: \"START\"\n      )\n    },\n    style: if(\n      ri!showHeader,\n      ri!brandingMap.InfoBackgroundColor,\n      \"NONE\"\n      ),\n    padding: \"LESS\",\n    marginBelow: \"LESS\",\n    showBorder: false,\n    shape: \"SEMI_ROUNDED\"\n  )\n}",
  "calls": [
    {
      "name": "CMGT_Automation_SingleCondition",
      "type": "Interface",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_REF_TXT_CONDITION_EVALUATION_TYPE_FIELD_VALUE",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "CMGT_ConditionSet",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    },
    {
      "name": "CMGT_Condition",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    }
  ],
  "called_by": [
    {
      "name": "CMGT_Case_ConfigureTask_Task_SingleRuleConfig",
      "type": "Interface",
      "dep_type": "CALLS"
    }
  ]
}