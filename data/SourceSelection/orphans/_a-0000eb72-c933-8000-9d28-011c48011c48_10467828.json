{
  "uuid": "_a-0000eb72-c933-8000-9d28-011c48011c48_10467828",
  "name": "AS_GSS_BL_ShowFactorWeight_CDT_v1_default",
  "type": "Expression Rule",
  "description": "This rule represents the visibilty to show or hide factor weights in the evaluation summary and consensus report tab.",
  "sail_code": "/*\n\nDESCRIPTION: This rule represents the visibilty to show or hide factor weights in the evaluation summary and consensus report tab.\nDEFAULT BEHAVIOR: Factor weights are always shown\n    hide subfactor weights if user is assigned as an evaluator\n    UNLESS they created the evaluation or are assigned as a super user on the evaluation/criteria/parent criteria\n    OR are a member of a super user group\n    assignments are not limited to the associated groups\n\nCUSTOMIZATION STEPS: \n1.Configure conditions accordingly  and set which groups can able to see the factor weights. \nSee inline comments about what each field of the conditions represents .\n\n\n\nEXPECTED OUTPUT TYPE: Boolean\n\n*/\nand(\n  ri!currentFactor.evaluation.isWeightedFactorsRequired,\n  /* \n    factor weights are always shown\n    hide subfactor weights if user is assigned as an evaluator\n    UNLESS they created the evaluation or are assigned as a super user on the evaluation/criteria/parent criteria\n    OR are a member of a super user group\n  */\n  or(\n    isnull(ri!currentFactor.parentCriteriaId),\n    not(\n      contains(\n        rule!AS_CO_UT_distinct(\n          value: a!flatten(\n            touniformstring(\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!allFactors,\n                expression: rule!AS_GSS_UT_deepIndex(\n                  item: fv!item,\n                  indexArray: { \"assignments\", \"assignee\", \"username\" }\n                )\n              )\n            )\n          )\n        ),\n        tostring(ri!loggedInUser)\n      )\n    ),\n    /*\n      as of GSS 1.7, these assignments are not limited to the associated groups\n      so we check separately from the groups memebership\n    */\n    contains(\n      touniformstring(\n        {\n          ri!currentFactor.evaluation.createdBy,\n          ri!currentFactor.evaluation.evaluationChief.username,\n          ri!currentFactor.evaluation.contractingOfficer.username,\n          ri!currentFactor.evaluation.contractingSpecialist.username,\n          ri!currentFactor.criteriaChair.username\n        }\n      ),\n      tostring(ri!loggedInUser)\n    ),\n    /* super users groups */\n    #\"urn:appian:function:v1:a:isusermemberofgroup?okey=a!isUserMemberOfGroup\"(\n      username: ri!loggedInUser,\n      matchAllGroups: false,\n      groups: {\n        cons!AS_GSS_GRP_CONTRACTING_PERSONNEL,\n        cons!AS_GSS_GRP_FACTOR_ADVISOR,\n        cons!AS_GSS_GRP_EVALUATION_CHAIRS\n      }\n    )\n  )\n)",
  "calls": [
    {
      "name": "AS_CO_UT_distinct",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_UT_deepIndex",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_GRP_CONTRACTING_PERSONNEL",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_GRP_FACTOR_ADVISOR",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_GRP_EVALUATION_CHAIRS",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GAM_GRP_CONTRACTING_OFFICER",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_zTST_showFactorWeight",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_zTST_USER_showFactorWeight_BASIC_USER_ASSIGNED_PARENT_FACTOR_CHAIR",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_zTST_USER_showFactorWeight_BASIC_USER_ASSIGNED_SUBFACTOR_CHAIR",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_zTST_USER_showFactorWeight_BASIC_USER_ASSIGNED_EVALUATION_CHIEF",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_zTST_USER_showFactorWeight_BASIC_USER_EVALUATOR",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_zTST_USER_showFactorWeight_BASIC_USER_NOT_EVALUATOR",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    }
  ],
  "called_by": []
}