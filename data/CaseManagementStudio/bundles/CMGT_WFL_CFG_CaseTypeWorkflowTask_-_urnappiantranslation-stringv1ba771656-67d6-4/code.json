{
  "_metadata": {
    "bundle_id": "CMGT_WFL_CFG_CaseTypeWorkflowTask_-_urnappiantranslation-stringv1ba771656-67d6-4"
  },
  "objects": {
    "_a-0000eccd-140e-8000-9d02-011c48011c48_3346549": {
      "name": "CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskResponseOptions,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.sortOrder,\n        value: fv!index\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field:  recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "cd60e4ec-18c8-4b78-9735-b03c35de956c": {
      "name": "CMGT_WFL_AutomationRule_CreateEdit",
      "type": "Process Model",
      "sail_code": "// Input: ?\n=pv!caseTypeWorkflowTask\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask\n\n// Output: ?\nAC!RecordsUpdated\n\n// Output: ?\nrule!CMGT_WFL_CaseTypeWorkflowTask_SetMetaData(\n  caseTypeWorkflowTasks: pv!caseTypeWorkflowTask,\n  initiator: pp!initiator\n)"
    },
    "_a-0000ed89-fd25-8000-9d52-011c48011c48_3950561": {
      "name": "CMGT_WFL_MTR_CreateWflTaskReassignTaskAutomationRule",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed02-d945-8000-9bc0-011c48011c48_71082": {
      "name": "CMGT_AutomationRule_CreateEdit_SectionWrapper",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      marginBelow: \"NONE\",\n      value: {\n        #\"SYSTEM_SYSRULES_richTextHeader\"(\n          text: #\"urn:appian:translation-string:v1:89dc3f6f-8452-40fe-9c99-8bfc5994523f\"(\n            #\"urn:appian:translation-variable:v1:fa044c92-0621-46ad-9526-901fc8516bcd\": ri!step.index,\n            #\"urn:appian:translation-variable:v1:be4ffe3f-dccb-4806-a6fa-bf8c3037595a\": ri!step.label\n          ),\n          color: \"STANDARD\",\n          size: \"MEDIUM\"\n        ),\n      }\n    ),\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      value: {\n        #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: ri!step.instructions),\n\n      }\n    ),\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n      #\"SYSTEM_SYSRULES_columnLayout\"(\n        contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n        padding: if(ri!activeStep<> ri!step.index, \"STANDARD\",a!defaultValue(ri!step.overrideCardWrapperPadding, \"STANDARD\")),\n        contents: if(\n              ri!activeStep = ri!step.index,\n          {\n            ri!step.configurationRule(\n              caseTypeWorkflowTask: ri!workingCaseTypeWorkflowTask,\n              brandingMap: ri!brandingMap,\n              availableFields:ri!availableFields,\n              actionRefreshVariable:ri!actionRefreshVariable\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              showWhen: contains({\"CONFIG_WIZARD\"}, ri!formState),\n              buttons: {\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:415e6029-5b1a-4b03-9061-acdafc2d8d45\",\n                  saveInto: { a!save(ri!activeStep, ri!activeStep - 1) },\n                  showWhen: ri!activeStep <> 1\n                ),\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:ce78298f-a341-4c00-914f-431122d93f71\",\n                  saveInto: {\n                    a!save(ri!activeStep, ri!activeStep + 1),\n                    if(\n                      ri!isLast,\n                      {\n                        a!save(ri!caseTypeWorkflowTask, ri!workingCaseTypeWorkflowTask),\n                        a!save(ri!formState, \"SUBMISSION\"),\n                      },\n                      null\n                    )\n                  },\n                  disabled: not(ri!step.isStepComplete),\n                  style: \"SOLID\"\n                )\n              },\n              align: \"START\"\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              showWhen: contains({ \"EDIT_STEP\",\"UPDATE\" }, ri!formState),\n              buttons: {\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:651cf177-f30b-485b-900f-8aaf47805737\",\n                  saveInto: {\n                    a!save(ri!activeStep, null),\n                    a!save(\n                      ri!workingCaseTypeWorkflowTask,\n                      ri!caseTypeWorkflowTask\n                    ),\n                    a!save(ri!formState, \"SUBMISSION\"),\n                    a!save(ri!actionRefreshVariable, now())\n                  },\n                  disabled: ri!hasInvalidConditions\n\n                ),\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: #\"urn:appian:translation-string:v1:3e56c457-a27a-49de-aa7d-e865696bf791\",\n                  saveInto: {\n                    a!save(ri!activeStep, null),\n                    a!save(\n                      ri!caseTypeWorkflowTask,\n                      ri!workingCaseTypeWorkflowTask\n                    ),\n                    a!save(ri!formState, \"SUBMISSION\"),\n                    a!save(ri!actionRefreshVariable, now())\n                  },\n                  disabled: or(not(ri!step.isStepComplete), ri!hasInvalidConditions),\n                  style: \"SOLID\"\n                )\n              },\n              align: \"START\"\n            )\n          },\n          {\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value:{\n                ri!step.displayRule(\n                  caseTypeWorkflowTask: ri!workingCaseTypeWorkflowTask,\n                  availableFields:ri!availableFields\n                ),\n                \" \",\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"pencil\",\n                  size: \"MEDIUM\",\n                  showWhen: and(\n                    contains({ \"SUBMISSION\",\"UPDATE\" }, ri!formState),\n                    ri!isStepComplete\n                  ),\n                  caption: #\"urn:appian:translation-string:v1:31f83bde-d514-46cb-87c2-83953148e5fd\"(\n                    #\"urn:appian:translation-variable:v1:eb159c21-ecb5-4455-97a0-a95710b86fc1\": ri!step.label\n                  ),\n                  linkStyle: \"STANDALONE\",\n                  link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                    saveInto: {\n                      a!save(ri!activeStep, ri!step.index),\n                      a!save(\n                        ri!formState, \"EDIT_STEP\"\n                      ),\n                      a!save(ri!actionRefreshVariable, now())\n                    }\n                  )\n                )\n              }\n            )\n          }\n        ),\n        style: if(ri!activeStep<> ri!step.index, ri!brandingMap.ConfigBackgroundColor,a!defaultValue(ri!step.overrideCardWrapperStyle, ri!brandingMap.ConfigBackgroundColor)),\n        showBorder: false,\n        showWhen: or(ri!activeStep=ri!step.index, ri!step.isStepComplete),\n        shape: ri!brandingMap.CardShape\n      )),\n      #\"SYSTEM_SYSRULES_columnLayout\"(width: \"NARROW\")\n    }\n    )\n  },\n  divider: if(ri!isLast, \"NONE\", \"BELOW\")\n)"
    },
    "_a-0000eb88-676f-8000-9c81-011c48011c48_1925601": {
      "name": "CMGT_CB_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_MergeMaps(\n  map1: rule!CMGT_UTIL_LoadBrandingMap(),\n  map2: a!localVariables(\n    local!branding: getbrandingconfig(\n      cons!CMGT_WFL_DOC_DEFAULT_BRANDING_CONFIG,\n      true\n    ),\n    local!output: reduce(\n      #\"urn:appian:function:v1:a:update\"(_, _, _),\n      a!map(),\n      merge(\n        {\n          local!branding.defaultBranding.key,\n          local!branding.customBranding.key\n        },\n        {\n          local!branding.defaultBranding.value,\n          local!branding.customBranding.value\n        }\n      )\n    ),\n    local!output\n  )\n)"
    },
    "_a-0000ec97-0cde-8000-9cec-011c48011c48_3058148": {
      "name": "CMGT_WFL_ConditionSet_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!conditionSets,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.isActive,\n        value: true\n      )\n    },\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.childConditionSet,\n        value: rule!CMGT_WFL_ChildConditionSet_SetMetaData(\n          conditionSets: fv!item[recordType!CMGT_CFG_ConditionSet.childConditionSet],\n          initiator: ri!initiator\n        )\n      ),\n      \n    }\n  )\n)"
    },
    "_a-0000ed89-fd25-8000-9d52-011c48011c48_3950576": {
      "name": "CMGT_WFL_MTR_CreateWflTaskAssignTaskAutomationRule",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ec87-8877-8000-9ce8-011c48011c48_3028454": {
      "name": "CMGT_WFL_CaseType_Automation_initializeConditionSet",
      "type": "Expression Rule",
      "sail_code": "  recordType!CMGT_CFG_ConditionSet(\n    recordType!CMGT_CFG_ConditionSet.conditionSetId: ri!conditionSetId,\n    recordType!CMGT_CFG_ConditionSet.conditionSetUuid: ri!parentConditionSetUUid,\n    recordType!CMGT_CFG_ConditionSet.caseTypeWorkflowTaskUuid: ri!caseTypeWorkflowTaskUuid,\n    recordType!CMGT_CFG_ConditionSet.operatorCode: cons!CMGT_TXT_SET_OPERATOR_OR,\n    recordType!CMGT_CFG_ConditionSet.isActive: true,\n    recordType!CMGT_CFG_ConditionSet.isValid: true,\n    recordType!CMGT_CFG_ConditionSet.childConditionSet: {\n      rule!CMGT_WFL_Automation_initializeChildConditionSet(\n        parentConditionSetUUid: ri!parentConditionSetUUid,\n        defaultConditions: ri!defaultConditions\n      )\n    }\n  )"
    },
    "_a-0000ecb5-acf8-8000-9cf6-011c48011c48_3213055": {
      "name": "CMGT_WFL_Automation_initializeChildConditionSet",
      "type": "Expression Rule",
      "sail_code": "/*Empty Condition Set    */\na!localVariables(\n  local!conditionSetUUID: a!refreshVariable(\n    value: rule!CMGT_UTIL_GenerateUuid_NonPlugin(),\n    refreshAlways: true\n  ),\n  recordType!CMGT_CFG_ConditionSet(\n    recordType!CMGT_CFG_ConditionSet.isActive: true,\n    recordType!CMGT_CFG_ConditionSet.isValid: true,\n    recordType!CMGT_CFG_ConditionSet.parentConditionSetUuid: ri!parentConditionSetUUid,\n    recordType!CMGT_CFG_ConditionSet.conditionSetUuid: local!conditionSetUUID,\n    recordType!CMGT_CFG_ConditionSet.operatorCode: cons!CMGT_TXT_SET_OPERATOR_AND,\n    recordType!CMGT_CFG_ConditionSet.condition: if(\n      rule!CMGT_UTIL_IsBlank(ri!defaultConditions),\n      {},\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!defaultConditions,\n        index: recordType!CMGT_CFG_Condition.conditionSetUuid,\n        value: local!conditionSetUUID\n      )\n    )\n  )\n)"
    },
    "_a-0000ed52-9ecc-8000-9d40-011c48011c48_3645765": {
      "name": "CMGT_WFL_SendEmailCaseTypeWorkflowTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!sendEmailCaseTypeWorkflowTasks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    },
    "_a-0000ec99-fdab-8000-9cee-011c48011c48_3087732": {
      "name": "CMGT_WFL_ChildConditionSet_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!conditionSets,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.isActive,\n        value: true\n      )\n    },\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_CFG_ConditionSet.condition,\n        value: rule!CMGT_WFL_Condition_SetMetaData(\n          conditions: fv!item[recordType!CMGT_CFG_ConditionSet.condition],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180568": {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "sail_code": "not(rule!CMGT_UTIL_IsBlank(ri!input))"
    },
    "_a-0000ecac-72b0-8000-9cf2-011c48011c48_3152780": {
      "name": "CMGT_returnAvailableFields",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!availableCaseFieldsCustomizations: rule!CMGT_AUTO_EVAL_AvailableFieldsCustomizationsWrapper_Case(),\n  local!availableTaskFieldsCustomizations: rule!CMGT_AUTO_EVAL_AvailableFieldsCustomizationsWrapper_Task(),\n  local!studioParentRecordTypeUuid: a!defaultValue(\n    ri!caseTypeRecordTypeUuid,\n    ri!parentCaseTypeRecordTypeUuid\n  ),\n  local!caseFields: append(\n    rule!CMGT_UTIL_RejectBlank(\n      a!flatten(\n        local!availableCaseFieldsCustomizations.fieldMapsToAdd\n      )\n    ),\n    a!flatten(\n      local!availableCaseFieldsCustomizations.customFieldsToAdd\n    )\n  ),\n  local!taskFields: if(\n    ri!scope = \"TASK\",\n    append(\n      rule!CMGT_UTIL_RejectBlank(\n        a!flatten(\n          local!availableTaskFieldsCustomizations.fieldMapsToAdd\n        )\n      ),\n      a!flatten(\n        local!availableTaskFieldsCustomizations.customFieldsToAdd\n      )\n    ),\n    null()\n  ),\n  local!controlPanelHierarchy: #\"SYSTEM_SYSRULES_controlPanelRecordHierarchyMetadata\"(\n    controlPanel: #\"urn:appian:control-panel:v1:1b82dc2b-d4df-44ed-ac7c-3cce3b4ee0e0\",\n    recordUuid: local!studioParentRecordTypeUuid\n  ),\n  local!studioFields: rule!CMGT_formatStudioFieldHierarchy(\n    controlPanelHierarchy: local!controlPanelHierarchy\n  ),\n  local!allFields: rule!CMGT_UTIL_RejectBlank(\n    a!flatten(\n      {\n        local!studioFields,\n        local!caseFields,\n        local!taskFields\n      }\n    )\n  ),\n  local!containsDuplicateNames: count(local!allFields.displayName) <> count(\n    rule!CMGT_UTIL_Distinct(local!allFields.displayName)\n  ),\n  local!formatFieldLabels: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!allFields,\n    expression: #\"urn:appian:function:v1:a:update\"(\n      data: fv!item,\n      index: \"label\",\n      value: if(\n        and(\n          local!containsDuplicateNames,\n          /*Determines is the field is a duplicate   */\n          count(\n            wherecontains(\n              fv!item.displayName,\n              local!allFields.displayName\n            )\n          ) > 1\n        ),\n        a!match(\n          value: fv!item.parentRecordTypeUuid,\n          equals: cons!CMGT_UUID_RECORD_TYPE_CASE,\n          then: concat(\"Case \", fv!item.displayName),\n          equals: cons!CMGT_UUID_RECORD_TYPE_TASK,\n          then: concat(\"Task \", fv!item.displayName),\n          default: fv!item.displayName,\n          \n        ),\n        fv!item.displayName\n      )\n    )\n  ),\n  local!formatFieldLabels\n)"
    },
    "_a-0000ecff-8d42-8000-9d21-011c48011c48_3422405": {
      "name": "CMGT_WFL_CaseTypeWorkflowTask_AutomationRule_CreateOrUpdate_RecordAction",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!CMGT_CB_UTIL_LoadBrandingMap(),\n  local!allAvailableFields: rule!CMGT_returnAvailableFields(\n    caseTypeRecordTypeUuid: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid],\n    parentCaseTypeRecordTypeUuid: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseType.parentUuid]\n  ),\n  local!availableFieldsForTriggers: rule!CMGT_UTIL_Filter(\n    records: local!allAvailableFields,\n    fieldValuePairs: {\n      a!map(\n        field: \"uuid\",\n        value: rule!CMGT_ENUM_Automation_ootbCaseRecordFieldsToReject(\n          context: cons!CMGT_TXT_AVAILABLE_FIELDS_FOR_CASE_FIELD_UPDATED_TRIGGER_CONTEXT\n        )\n      )\n    },\n    filterType: \"REJECT\"\n  ),\n  local!filteredAvailableFields: rule!CMGT_UTIL_Filter(\n    records: local!allAvailableFields,\n    fieldValuePairs: {\n      a!map(\n        field: \"uuid\",\n        value: rule!CMGT_ENUM_Automation_ootbCaseRecordFieldsToReject(context: null)\n      )\n    },\n    filterType: \"REJECT\"\n  ),\n  local!workingCaseTypeWorkflowTask: a!defaultValue(\n    ri!caseTypeWorkflowTask,\n    rule!CMGT_WFL_CFG_CaseTypeWorkflowTask_initializeAutomationRule(caseTypeUuId: null)\n  ),\n  local!isUpdate: rule!CMGT_UTIL_IsNotBlank(\n    local!workingCaseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskId]\n  ),\n  local!hasInvalidConditions: if(\n    a!isNullOrEmpty(\n      local!workingCaseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet]\n    ),\n    false,\n    not(\n      and(\n        a!defaultValue(\n          local!workingCaseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet.childConditionSet.isValid],\n          true,\n        )\n      )\n    )\n  ),\n  local!formState: if(\n    local!isUpdate,\n    \"UPDATE\",\n    \"CONFIG_WIZARD\"\n  ),\n  local!activeStep: a!refreshVariable(\n    value: if(\n      local!formState = \"CONFIG_WIZARD\",\n      1,\n      if(local!hasInvalidConditions, 2, null)\n    ),\n    refreshOnReferencedVarChange: false\n  ),\n  local!steps: {\n    a!map(\n      index: 1,\n      label: #\"urn:appian:translation-string:v1:614d3229-d99a-49d2-9150-a6413dc8348f\",\n      instructions: #\"urn:appian:translation-string:v1:120ae0fa-b33a-4a8c-bf08-1d40e6ac0499\",\n      configurationRule: rule!CMGT_WFL_AutomationRule_Configure_Trigger,\n      displayRule: rule!CMGT_WFL_AutomationRules_FormatTrigger,\n      isStepComplete: and(\n        if(\n          tointeger(local!workingCaseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.triggerId]) = cons!CMGT_REFID_TRIGGER_CASE_FIELD_UPDATED,\n          rule!CMGT_UTIL_IsNotBlank(\n            local!workingCaseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.triggerContext]\n          ),\n          true\n        ),\n        rule!CMGT_UTIL_IsNotBlank(\n          local!workingCaseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.triggerId]\n        )\n      )\n    ),\n    a!map(\n      index: 2,\n      label: #\"urn:appian:translation-string:v1:c4a780cf-13fd-409b-8d9f-86dd5041644e\",\n      instructions: #\"urn:appian:translation-string:v1:8bf0c409-f046-47e0-9f52-293dd838fd2e\",\n      configurationRule: rule!CMGT_WFL_AutomationRule_Configure_Condition,\n      displayRule: rule!CMGT_WFL_AutomationRule_Configure_Condition_Display,\n      overrideCardWrapperStyle: local!brandingMap.CardBackgroundColor,\n      overrideCardWrapperPadding: \"NONE\",\n      isStepComplete: rule!CMGT_WFL_AutomationRule_Configure_Condition_IsComplete(\n        caseTypeWorkflowTask: local!workingCaseTypeWorkflowTask\n      ),\n\n    ),\n    a!map(\n      index: 3,\n      label: #\"urn:appian:translation-string:v1:ab4f437b-4aa7-4e2c-a59f-d726a9fac1e5\",\n      instructions: #\"urn:appian:translation-string:v1:58b1c6d6-e7bf-4470-afd2-5ee008dab1d8\",\n      configurationRule: rule!CMGT_WFL_AutomationRule_Configure_Action,\n      displayRule: rule!CMGT_WFL_AutomationRule_Configure_Action_Display,\n      isStepComplete: rule!CMGT_WFL_AutomationRule_Configure_Action_IsComplete(\n        caseTypeWorkflowTask: local!workingCaseTypeWorkflowTask\n      ),\n\n    )\n  },\n  /*gets the last rule in the corresponding level in order to set the sort order for the new rule*/\n  local!lastSortOrderValue: rule!CMGT_WFL_QR_GetCaseTypeWorkflowTask(\n    includeInactive: true,\n    taskIntentionCodes: cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_TRIGGER,\n    fields: {\n      recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder\n    },\n    additionalFilters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid,\n        operator: \"=\",\n        value: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid],\n        applyWhen: rule!CMGT_UTIL_IsNotBlank(\n          ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid]\n        )\n      ),\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid,\n        operator: \"is null\",\n        applyWhen: rule!CMGT_UTIL_IsBlank(\n          ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid]\n        )\n      )\n    },\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder,\n      ascending: false\n    ),\n    returnType: \"SINGLE_OBJECT\"\n  )[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder],\n  local!actionRefreshVariable:now(),\n  #\"SYSTEM_SYSRULES_formLayout_v1\"(\n    label: if(\n      local!isUpdate,\n      #\"urn:appian:translation-string:v1:c79ca4e4-89e0-46e5-8575-4118eaedbb55\",\n      #\"urn:appian:translation-string:v1:bcda384d-81e6-4916-b22d-dbf2d8f8ff0c\"\n    ),\n    instructions: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n    contents: {\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!steps,\n        expression: rule!CMGT_AutomationRule_CreateEdit_SectionWrapper(\n          brandingMap: local!brandingMap,\n          activeStep: local!activeStep,\n          isLast: fv!isLast,\n          workingCaseTypeWorkflowTask: local!workingCaseTypeWorkflowTask,\n          caseTypeWorkflowTask: ri!caseTypeWorkflowTask,\n          step: fv!item,\n          formState: local!formState,\n          isStepComplete: fv!item.isStepComplete,\n          hasInvalidConditions: local!hasInvalidConditions,\n          availableFields:a!match(\n            value:fv!item.index,\n            equals: 1,\n            then: local!availableFieldsForTriggers,\n            equals:2,\n            then:local!filteredAvailableFields,\n            equals: 3,\n            then: null,\n            default: local!allAvailableFields\n          ),\n          actionRefreshVariable: local!actionRefreshVariable\n        )\n      )\n    },\n    buttons: {\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: if(\n            local!isUpdate,\n            #\"urn:appian:translation-string:v1:06dbafc7-e085-40de-a68a-c83054c1d7ec\",\n            #\"urn:appian:translation-string:v1:b8033487-0a9e-4a1b-8970-b49eb8ad8cc7\"\n          ),\n          saveInto: {\n            a!save(\n              ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder],\n              if(\n                rule!CMGT_UTIL_IsBlank(\n                  ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder]\n                ),\n                a!defaultValue(local!lastSortOrderValue, 0) + 1,\n                ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder]\n              )\n            )\n          },\n          submit: true,\n          style: \"SOLID\",\n          disabled: or(\n            not(\n              contains(\n                { \"SUBMISSION\", \"UPDATE\" },\n                local!formState\n              )\n            ),\n            local!hasInvalidConditions\n          )\n        ),\n        secondaryButtons: {\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: #\"urn:appian:translation-string:v1:651cf177-f30b-485b-900f-8aaf47805737\",\n            validate: false,\n            saveInto: { a!save(ri!caseTypeWorkflowTask, null) },\n            submit: true\n          ),\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: #\"urn:appian:translation-string:v1:64b63284-c3fa-4c71-9459-b67f8df25036\",\n            validate: false,\n            color: local!brandingMap.NegativeAccentColor,\n            showWhen: local!isUpdate,\n            confirmHeader: #\"urn:appian:translation-string:v1:b73db86a-7071-4fe5-be3b-ba114ee80453\",\n            confirmMessage: #\"urn:appian:translation-string:v1:1cc1483d-215c-46b2-b392-d7ef7141e78f\",\n            confirmButtonLabel: #\"urn:appian:translation-string:v1:6551b07e-c4d9-47f9-a928-142e557bf898\",\n            cancelButtonLabel: #\"urn:appian:translation-string:v1:651cf177-f30b-485b-900f-8aaf47805737\",\n            saveInto: {\n              a!save(\n                ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.isDeleted],\n                true\n              )\n            },\n            submit: true\n          )\n        }\n      )\n    }\n  )\n)"
    },
    "_a-0000eb69-802f-8000-9c71-011c48011c48_1808130": {
      "name": "CMGT_WFL_CaseTypeWorkflowTaskBranch_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!caseTypeWorkflowTaskBranch,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.isActive,\n        /*Always set this to false if it's not tied to both a before and after task*/\n        value: if(\n          or(\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.beforeCaseTypeWorkflowTaskUuid]\n            ),\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.afterCaseTypeWorkflowTaskUuid]\n            )\n          ),\n          false,\n          /*Otherwise keep it the same, unless it's null*/\n          a!defaultValue(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.isActive],\n            true\n          )\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.modifedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null (default value)*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.isRequired,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskBranch.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000ed89-fd25-8000-9d52-011c48011c48_3951187": {
      "name": "CMGT_WFL_MTR_CreateAutomationRuleWrapper",
      "type": "Expression Rule",
      "sail_code": " a!match(\n   value: ri!actionCode,\n   equals:cons!CMGT_CFG_TXT_ACT_ASSIGN_CASE,\n   then: rule!CMGT_WFL_MTR_CreateCaseTypeAssignCaseAutomationRule(),\n   equals:cons!CMGT_CFG_TXT_ACT_REASSIGN_CASE,\n   then:rule!CMGT_WFL_MTR_CreateCaseTypeReassignCaseAutomationRule(),\n   equals: cons!CMGT_CFG_TXT_ACT_ASSIGN_TASK,\n   then: rule!CMGT_WFL_MTR_CreateWflTaskAssignTaskAutomationRule(),\n   equals: cons!CMGT_CFG_TXT_ACT_REASSIGN_TASK,\n   then:rule!CMGT_WFL_MTR_CreateWflTaskReassignTaskAutomationRule(),\n   default: null\n )"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_19651": {
      "name": "CMGT_QR_GetCaseType",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_CFG_CaseType,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_CaseType.uuid,\n      operator: \"in\",\n      value: ri!caseTypeUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_CaseType.isCategory,\n      operator: \"=\",\n      value: ri!isCaseCategory\n    )\n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!excludeRelatedRecords,\n      {},\n      recordType!CMGT_CFG_CaseType.parentCaseType\n    )\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: {\n    ri!additionalLogicalExpression,\n    rule!CMGT_CaseTypeActiveLogicalExpression(includeInactive: ri!includeInactive)\n  },\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000ed89-fd25-8000-9d52-011c48011c48_3948076": {
      "name": "CMGT_WFL_MTR_CreateCaseTypeAssignCaseAutomationRule",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed89-fd25-8000-9d52-011c48011c48_3948265": {
      "name": "CMGT_WFL_MTR_CreateCaseTypeReassignCaseAutomationRule",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed08-c8b4-8000-9d25-011c48011c48_3445148": {
      "name": "CMGT_WFL_CreateCaseCaseTypeWorkflowTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!createCaseCaseTypeWorkflowTasks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseCaseTypeWorkflowTask.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseCaseTypeWorkflowTask.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseCaseTypeWorkflowTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseCaseTypeWorkflowTask.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseCaseTypeWorkflowTask.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000eb60-4595-8000-9c6e-011c48011c48_1760324": {
      "name": "CMGT_WFL_CaseTypeWorkflowTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!metric: #\"SYSTEM_SYSRULES_forEach\"(\n    items: rule!CMGT_UTIL_Filter(\n      records: rule!CMGT_UTIL_RejectBlank(a!flatten(ri!caseTypeWorkflowTasks)),\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskIntentionCode,\n      value: cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_TRIGGER\n    ),\n    expression: rule!CMGT_WFL_MTR_CreateAutomationRuleWrapper(\n      actionCode: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.actionCode]\n    )\n  ),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!caseTypeWorkflowTasks,\n    expression: rule!CMGT_UTIL_SetRecordFields(\n      record: fv!item,\n      /*Always set these fields with each update*/\n      alwaysOverwrite: {\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder,\n          value: /*only make it the index in the list if it is workflow edit*/\n          if(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskIntentionCode] = cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_TRIGGER,\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sortOrder],\n            fv!index\n          )\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.modifiedOn,\n          value: now()\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.modifedBy,\n          value: ri!initiator\n        )\n      },\n      /*Only modify these fields if they are currently null*/\n      neverOverwrite: {\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.createdBy,\n          value: ri!initiator\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.createdOn,\n          value: now()\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid,\n          value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.isActive,\n          value: true\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.isDeleted,\n          value: false\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskIntentionCode,\n          value: cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_WORKFLOW\n        )\n      },\n      childRelationships: {\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches,\n          value: rule!CMGT_WFL_CaseTypeWorkflowTaskBranch_SetMetaData(\n            caseTypeWorkflowTaskBranch: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches],\n            initiator: ri!initiator\n          )\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet,\n          value: rule!CMGT_WFL_ConditionSet_SetMetaData(\n            conditionSets: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet],\n            initiator: ri!initiator\n          )\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions,\n          value: rule!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption_SetMetaData(\n            taskResponseOptions: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions]\n          )\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.createCaseCaseTypeWorkflowTask,\n          value: rule!CMGT_WFL_CreateCaseCaseTypeWorkflowTask_SetMetaData(\n            createCaseCaseTypeWorkflowTasks: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.createCaseCaseTypeWorkflowTask],\n            initiator: ri!initiator\n          ),\n          applyWhen: a!isNotNullOrEmpty(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.createCaseCaseTypeWorkflowTask]\n          )\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask,\n          value: rule!CMGT_WFL_SendEmailCaseTypeWorkflowTask_SetMetaData(\n            sendEmailCaseTypeWorkflowTasks: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask],\n            initiator: ri!initiator\n          ),\n          applyWhen: a!isNotNullOrEmpty(\n            fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTask]\n          )\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction,\n          value: rule!CMGT_WFL_TaskAction_SetMetaData(\n            taskAction: fv!item[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction],\n            initiator: ri!initiator\n          )\n        ),\n        \n      }\n    )\n  )\n)"
    },
    "_a-0000ed12-0330-8000-9d27-011c48011c48_3481695": {
      "name": "CMGT_WFL_AutomationRule_Configure_Action_IsComplete",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(\n    ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.actionCode]\n  ),\n  false,\n  and(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction],\n      expression: a!match(\n        value: fv!item[recordType!CMGT_WFL_CFG_TaskActions.actionCode],\n        equals: cons!CMGT_CFG_TXT_ACT_ASSIGN_CASE,\n        then: rule!CMGT_WFL_AutomationRule_Configure_Action_AssignCase_IsComplete(taskAction: fv!item),\n        equals: cons!CMGT_CFG_TXT_ACT_REASSIGN_CASE,\n        then: rule!CMGT_WFL_AutomationRule_Configure_Action_AssignCase_IsComplete(taskAction: fv!item),\n        default: false\n      )\n    ),\n    \n  )\n)"
    },
    "_a-0000ed02-d945-8000-9bc0-011c48011c48_72978": {
      "name": "CMGT_WFL_CFG_CaseTypeWorkflowTask_initializeAutomationRule",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!caseTypeWorkflowTaskUuid: rule!CMGT_UTIL_GenerateUuid_NonPlugin(),\nrecordType!CMGT_WFL_CFG_CaseTypeWorkflowTask(\n  recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid: local!caseTypeWorkflowTaskUuid,\n  recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskIntentionCode: cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_TRIGGER,\n  recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid: ri!caseTypeUuId,\n  recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseType: rule!CMGT_QR_GetCaseType(\n    caseTypeUuId: ri!caseTypeUuId\n  ),\n  recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet: rule!CMGT_WFL_CaseType_Automation_initializeConditionSet(\n    caseTypeWorkflowTaskUuid: local!caseTypeWorkflowTaskUuid,\n    parentConditionSetUUid: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n  )\n)\n)"
    },
    "_a-0000ed12-0330-8000-9d27-011c48011c48_3482166": {
      "name": "CMGT_WFL_AutomationRule_Configure_Action_AssignCase_IsComplete",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!taskAction[recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule.assigneeType],\n  equals: \"GROUP\",\n  then: and(\n    a!isNotNullOrEmpty(\n      index(\n        #\"SYSTEM_SYSRULES_fromJson_v1\"(\n          ri!taskAction[recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule.assignmentJson]\n        ),\n        \"groups\",\n        null\n      )\n    ),\n    a!isNotNullOrEmpty(\n      ri!taskAction[recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule.routingType]\n    )\n  ),\n  equals: \"ROLE\",\n  then: a!isNotNullOrEmpty(\n    index(\n      #\"SYSTEM_SYSRULES_fromJson_v1\"(\n        ri!taskAction[recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule.assignmentJson]\n      ),\n      \"roles\",\n      null\n    )\n  ),\n  equals: \"USER\",\n  then: a!isNotNullOrEmpty(\n    index(\n      #\"SYSTEM_SYSRULES_fromJson_v1\"(\n        ri!taskAction[recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule.assignmentJson]\n      ),\n      \"users\",\n      null\n    )\n  ),\n  default: false\n)"
    },
    "_a-0000ed40-282d-8000-9d33-011c48011c48_3578774": {
      "name": "CMGT_WFL_CFG_CaseAssignment_QR_getAssignmentRule",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_CFG_AssignmentRules,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  sort: ri!sortInfo,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field:  recordType!CMGT_CFG_AssignmentRules.isActive,\n      operator: \"=\",\n      value: ri!isActive,\n      applyWhen: a!isNotNullOrEmpty(ri!isActive)\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field:  recordType!CMGT_CFG_AssignmentRules.assignmentRuleId,\n      operator: \"in\",\n      value: ri!assignmentRuleId,\n      applyWhen: a!isNotNullOrEmpty(ri!assignmentRuleId)\n    ),\n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!returnAllRelatedRecords,\n      {\n        recordType!CMGT_CFG_AssignmentRules.usersToExclude\n      },\n      {}\n    )\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  groupByFields: ri!groupByFields,\n  logicalExpressions: ri!additionalLogicalExpressions\n)"
    },
    "_a-0000ed08-c8b4-8000-9d25-011c48011c48_3457992": {
      "name": "CMGT_WFL_AutomationRule_Configure_Condition_IsComplete",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    /* If the condition set is not being used or is removed  */\n    rule!CMGT_UTIL_IsBlank(\n      ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet]\n    ),\n    ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet.isActive] = false,\n    \n  ),\n  true,\n  a!localVariables(\n    local!activeConditionSets: rule!CMGT_UTIL_Filter(\n      records: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet],\n      field: recordType!CMGT_CFG_ConditionSet.isActive,\n      value: true\n    ),\n    local!activeConditions: rule!CMGT_UTIL_Filter(\n      records: a!flatten(\n        local!activeConditionSets[recordType!CMGT_CFG_ConditionSet.condition]\n      ),\n      field: recordType!CMGT_CFG_Condition.isActive,\n      value: true\n    ),\n    local!isConditionSetComplete: #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!activeConditionSets,\n      expression: {\n        and(\n          rule!CMGT_UTIL_IsNotBlank(\n            fv!item[recordType!CMGT_CFG_ConditionSet.operatorCode]\n          ),\n          rule!CMGT_UTIL_IsNotBlank(\n            rule!CMGT_UTIL_Filter(\n              records: fv!item[recordType!CMGT_CFG_ConditionSet.condition],\n              field: recordType!CMGT_CFG_Condition.isActive,\n              value: true\n            )\n          ),\n        )\n      }\n    ),\n    local!isConditionComplete: #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!activeConditions,\n      expression: {\n        and(\n          all(\n            rule!CMGT_UTIL_IsNotBlank(_),\n            {\n              fv!item[recordType!CMGT_CFG_Condition.fieldPathJson],\n              fv!item[recordType!CMGT_CFG_Condition.operator]\n            }\n          ),\n          if(\n            rule!CMGT_Automation_Condition_HideValueField(operator: fv!item[recordType!CMGT_CFG_Condition.operator]),\n            true,\n            if(\n              a!isNotNullOrEmpty(\n                fv!item[recordType!CMGT_CFG_Condition.valueJson]\n              ),\n              rule!CMGT_UTIL_IsNotBlank(\n                #\"SYSTEM_SYSRULES_fromJson_v1\"(\n                  fv!item[recordType!CMGT_CFG_Condition.valueJson]\n                ).value\n              ),\n              false\n            )\n          ),\n        )\n      }\n    ),\n    and(\n      local!isConditionComplete,\n      local!isConditionSetComplete\n    )\n  )\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180481": {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(a!flatten(ri!array)),\n  reject(a!isNullOrEmpty(_), a!flatten(ri!array))\n)"
    },
    "_a-0000ed08-c8b4-8000-9d25-011c48011c48_3458254": {
      "name": "CMGT_Automation_Condition_HideValueField",
      "type": "Expression Rule",
      "sail_code": "contains(\n  {\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_BEFORE_TODAY,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_ON_OR_BEFORE_TODAY,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_AFTER_TODAY,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_ON_OR_AFTER_TODAY,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_IS_NULL,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_IS_NOT_NULL,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_BEFORE_NOW,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_AFTER_NOW,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_IS_TRUE,\n    cons!CMGT_TXT_AUTOMATION_OPERATOR_IS_FALSE\n  },\n  ri!operator\n)"
    },
    "_a-0000eb60-4595-8000-9c6e-011c48011c48_1742745": {
      "name": "CMGT_WFL_QR_GetCaseTypeWorkflowTask",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask,\n  executeWhen: ri!executeWhen,\n  returnType: ri!returnType,\n  sort: ri!sort,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskBlockId,\n      operator: \"in\",\n      value: ri!taskBlockId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.milestoneId,\n      operator: \"=\",\n      value: ri!referenceMilestoneId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeUuid,\n      operator: \"=\",\n      value: ri!caseTypeUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.isActive,\n      operator: \"in\",\n      value: {\n        true,\n        if(\n          a!defaultValue(ri!includeInactive, false),\n          false,\n          {}\n        )\n      }\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTaskId,\n      operator: \"=\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskId,\n      operator: \"=\",\n      value: ri!caseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskIntentionCode,\n      operator: \"in\",\n      value: a!defaultValue(ri!taskIntentionCodes,{cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_WORKFLOW})\n    ),\n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!includeMilestones,\n      {\n        recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceMilestone\n      },\n      {}\n    ),\n    if(\n      ri!includeCaseType,\n      {\n        recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseType\n      },\n      {}\n    ),\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTask,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.referenceTask,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.taskBehaviorType,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.beforeCaseTypeWorkflowTaskBranches,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet,\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.conditionSet,\n    #\"urn:appian:record-relationship:v1:d6ebee27-6e86-47e3-a9b8-71fdd0348854/ef9cc417-d6ce-4fee-bd86-fa71ab64f8a1/eb49dd52-e1ed-4e4c-a3ab-903f4eadb20c/aa71274b-fe14-4420-b400-573007a0049d\",\n    recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction,\n  },\n  relatedRecordData: {\n    ri!relatedRecordData,\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskResponseOptions,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!CMGT_WFL_CFG_CaseTypeWorkflowTaskResponseOption.sortOrder,\n        ascending: true\n      )\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed12-0330-8000-9d27-011c48011c48_3488853": {
      "name": "CMGT_WFL_TaskAction_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskAction,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskActions.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskActions.modifedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field:recordType!CMGT_WFL_CFG_TaskActions.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskActions.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskActions.isActive,\n        value: true\n      )\n    },\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule,\n        value: rule!CMGT_WFL_AssociatedAssignmentRule_SetMetaData(\n          assignmentRules: fv!item[recordType!CMGT_WFL_CFG_TaskActions.associatedAssignmentRule],\n          initiator: ri!initiator\n        )\n      ),\n      \n    }\n  )\n)"
    },
    "_a-0000ea1d-36f5-8000-9bef-011c48011c48_538451": {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "sail_code": "/*Reference:\nhttps://community.appian.com/w/the-appian-playbook/846/generating-uuids-guids*/\nfn!lower(\n  concat(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "af326a29-a1c8-4399-a28d-996f85819d9e": {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    apply(\n      rule!CMGT_UTIL_Filter_CreateFieldValuePair(\n        field: _,\n        value: ri!value,\n        allFields: a!flatten(ri!field)\n      ),\n      a!flatten(ri!field)\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!CMGT_UTIL_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000ec97-0cde-8000-9cec-011c48011c48_3058161": {
      "name": "CMGT_WFL_Condition_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!conditions,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field:recordType!CMGT_CFG_Condition.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_Condition.modifiedBy,\n        value: ri!initiator\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field:recordType!CMGT_CFG_Condition.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field:recordType!CMGT_CFG_Condition.createdOn,\n        value: now()\n      ),\n      a!map(\n        field:recordType!CMGT_CFG_Condition.isActive,\n        value: true\n      ),\n      a!map(\n        field:recordType!CMGT_CFG_Condition.isValid,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ed6c-5326-8000-9d46-011c48011c48_3743692": {
      "name": "CMGT_ENUM_Automation_ootbCaseRecordFieldsToReject",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*If Context is passed then these are the default fields to reject  */\n  local!defaultContextFieldsToReject: {\n    /*Created By User*/\"a5ede28b-dcb0-48e4-8a37-12ea5d27ee76\",\n    /*Created On*/\"4db722a4-2e1f-4d17-a168-0ae254a83407\",\n    /*Modified On */\"12a54b35-6aad-4cf0-b04a-700cc54a4917\",\n    \n  },\n  local!contextFieldsToReject: a!match(\n    value: ri!context,\n    /*If no context is passed, then it's assumed to be used when configuring a condition, which rejects Due On & Completed On    */\n    whenTrue: rule!CMGT_UTIL_IsBlank(ri!context),\n    then: {\n      /*Due On*/\"dd6a7d01-9f60-4e65-b322-da301c36bcbb\",\n      /*Completed On*/\"71e2da70-92e0-4ace-93b2-67247ad82b96\"\n    },\n    default: a!flatten(\n      {\n        local!defaultContextFieldsToReject,\n        a!match(\n          value: ri!context,\n          /*If the context is blank then should    */\n          whenTrue: rule!CMGT_UTIL_IsBlank(ri!context),\n          /*fields to hide within the fields dropdown of the case field is updated trigger*/\n          equals: cons!CMGT_TXT_AVAILABLE_FIELDS_FOR_CASE_FIELD_UPDATED_TRIGGER_CONTEXT,\n          then: { null },\n          /*fields to ignore when checking for updated fields within the CMGT_Case_UpdateProperty PM*/\n          equals: tostring(cons!CMGT_PM_UPDATE_CASE_PROPERTY),\n          then: {\n            /*Description*/\"1282844c-ffee-4473-a3b4-3e2c8f94cf0e\",\n            /*Case Assignee/Case Watcher*/\"7576a553-bb91-4848-962a-c7a23a9f3b2d\",\n            /*Group Assignee*/\"980ec52a-b916-409f-9cdf-1752ce399f6d\",\n            /*Title*/\"cc5741b7-43ad-438b-844e-8da8538c9cae\"\n          },\n          /*fields to ignore when checking for updated fields within the CMGT_Case_Update PM*/\n          equals: tostring(cons!CMGT_PM_UPDATE_CASE),\n          then: {\n            /*Case Assignee/Case Watcher*/\"7576a553-bb91-4848-962a-c7a23a9f3b2d\",\n            /*Group Assignee*/\"980ec52a-b916-409f-9cdf-1752ce399f6d\",\n            /*Due On*/\"dd6a7d01-9f60-4e65-b322-da301c36bcbb\",\n            /*Completed On*/\"71e2da70-92e0-4ace-93b2-67247ad82b96\",\n            /*Status*/\"43305b8c-b670-44fe-be8a-90fe7dd78436\",\n            /*Priority*/\"e50c4ea6-59fc-475d-bc19-998a2428555e\"\n          },\n          /*fields to ignore when checking for updated fields within the CMGT_Case_bulkUpdate PM*/\n          equals: tostring(cons!CMGT_PM_BULK_UPDATE_CASE),\n          then: {\n            /*Completed On*/\"71e2da70-92e0-4ace-93b2-67247ad82b96\",\n            /*Title*/\"cc5741b7-43ad-438b-844e-8da8538c9cae\",\n            /*Description*/\"1282844c-ffee-4473-a3b4-3e2c8f94cf0e\",\n            \n          },\n          equals: cons!CMGT_TXT_AVAILABLE_FIELDS_FOR_UPDATE_CASE_ASSIGNEE_FIELD_TRIGGER_CONTEXT,\n          then: {\n            /*Due On*/\"dd6a7d01-9f60-4e65-b322-da301c36bcbb\",\n            /*Completed On*/\"71e2da70-92e0-4ace-93b2-67247ad82b96\",\n            /*Title*/\"cc5741b7-43ad-438b-844e-8da8538c9cae\",\n            /*Status*/\"43305b8c-b670-44fe-be8a-90fe7dd78436\",\n            /*Priority*/\"e50c4ea6-59fc-475d-bc19-998a2428555e\",\n            /*Description*/\"1282844c-ffee-4473-a3b4-3e2c8f94cf0e\",\n            \n          },\n          equals: cons!CMGT_TXT_AVAILABLE_FIELDS_FOR_UPDATE_CASE_WATCHER_FIELD_TRIGGER_CONTEXT,\n          then: {\n            /*Due On*/\"dd6a7d01-9f60-4e65-b322-da301c36bcbb\",\n            /*Group Assignee*/\"980ec52a-b916-409f-9cdf-1752ce399f6d\",\n            /*Completed On*/\"71e2da70-92e0-4ace-93b2-67247ad82b96\",\n            /*Title*/\"cc5741b7-43ad-438b-844e-8da8538c9cae\",\n            /*Status*/\"43305b8c-b670-44fe-be8a-90fe7dd78436\",\n            /*Priority*/\"e50c4ea6-59fc-475d-bc19-998a2428555e\",\n            /*Description*/\"1282844c-ffee-4473-a3b4-3e2c8f94cf0e\",\n            \n          },\n          default: null\n        )\n      }\n    )\n  ),\n  rule!CMGT_UTIL_RejectBlank(\n    local!contextFieldsToReject\n  )\n)"
    },
    "_a-0000ed12-0330-8000-9d27-011c48011c48_3488873": {
      "name": "CMGT_WFL_AssociatedAssignmentRule_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!assignmentRules,\n  expression: a!localVariables(\n    local!originalAssignmentRule: rule!CMGT_WFL_CFG_CaseAssignment_QR_getAssignmentRule(\n      returnType: \"SINGLE_OBJECT\",\n      assignmentRuleId: fv!item[recordType!CMGT_CFG_AssignmentRules.assignmentRuleId],\n      returnAllRelatedRecords: true\n    ),\n    rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.modifedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.assignmentVersion,\n        value: if(\n          a!isNullOrEmpty(\n            fv!item[recordType!CMGT_CFG_AssignmentRules.assignmentRuleId]\n          ),\n          1,\n          a!localVariables(\n            local!originalGroup: index(\n              #\"SYSTEM_SYSRULES_fromJson_v1\"(\n                local!originalAssignmentRule[recordType!CMGT_CFG_AssignmentRules.assignmentJson]\n              ),\n              \"groups\",\n              \"id\",\n              null\n            ),\n            local!currentGroup: index(\n              #\"SYSTEM_SYSRULES_fromJson_v1\"(\n                fv!item[recordType!CMGT_CFG_AssignmentRules.assignmentJson]\n              ),\n              \"groups\",\n              \"id\",\n              null\n            ),\n            if(\n              or(\n                tointeger(local!originalGroup) <> tointeger(local!currentGroup),\n                local!originalAssignmentRule[recordType!CMGT_CFG_AssignmentRules.routingType] <> fv!item[recordType!CMGT_CFG_AssignmentRules.routingType]\n              ),\n              local!originalAssignmentRule[recordType!CMGT_CFG_AssignmentRules.assignmentVersion] + 1,\n              local!originalAssignmentRule[recordType!CMGT_CFG_AssignmentRules.assignmentVersion]\n            )\n          )\n        )\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.isActive,\n        value: true\n      )\n    },\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_CFG_AssignmentRules.usersToExclude,\n        value: rule!CMGT_WFL_ExcludedUsers_SetMetaData(\n          excludedUsers: fv!item[recordType!CMGT_CFG_AssignmentRules.usersToExclude],\n          initiator: ri!initiator,\n          originalExcludedUsers: local!originalAssignmentRule[recordType!CMGT_CFG_AssignmentRules.usersToExclude]\n        )\n      ),\n\n    }\n  )\n  )\n)"
    },
    "_a-0000ed12-0330-8000-9d27-011c48011c48_3488894": {
      "name": "CMGT_WFL_ExcludedUsers_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*returns usernames of existing excluded users and newly selected excluded users*/\n  local!duplicateUsernames: if(\n    or(\n      rule!CMGT_UTIL_IsBlank(ri!originalExcludedUsers),\n      rule!CMGT_UTIL_IsBlank(ri!excludedUsers)\n    ),\n    {},\n    intersection(\n      ri!originalExcludedUsers[recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username],\n      ri!excludedUsers[recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username]\n    )\n  ),\n  /*returns usernames of excluded users that were deselected*/\n  local!deletedExcludedUsernames: a!match(\n    value: ri!excludedUsers,\n    whenTrue: rule!CMGT_UTIL_IsBlank(ri!originalExcludedUsers),\n    then: {},\n    whenTrue: rule!CMGT_UTIL_IsBlank(fv!value),\n    equals: {},\n    then: ri!originalExcludedUsers[recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username],\n    default: difference(\n      ri!originalExcludedUsers[recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username],\n      ri!excludedUsers[recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username]\n    )\n  ),\n  /*returns the records that need to be updated as is_deleted = 1*/\n  local!deletedExcludedUserRecords: index(\n    ri!originalExcludedUsers,\n    wherecontains(\n      local!deletedExcludedUsernames,\n      index(ri!originalExcludedUsers,recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username,{})\n    ),\n    null\n  ),\n  /*returns the records that need to be written to the excluded users table*/\n  local!uniqueExcludedUserRecords: rule!CMGT_UTIL_Filter(\n    records: ri!excludedUsers,\n    field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.username,\n    value: local!duplicateUsernames,\n    filterType: \"REJECT\"\n  ),\n  {\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!uniqueExcludedUserRecords,\n      expression: rule!CMGT_UTIL_SetRecordFields(\n        record: fv!item,\n        /*Always set these fields with each update*/\n        alwaysOverwrite: {\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.modifiedOn,\n            value: now()\n          ),\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.modifiedBy,\n            value: ri!initiator\n          )\n        },\n        /*Only modify these fields if they are currently null*/\n        neverOverwrite: {\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.createdBy,\n            value: ri!initiator\n          ),\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.createdOn,\n            value: now()\n          )\n        },\n        childRelationships: {}\n      )\n    ),\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!deletedExcludedUserRecords,\n      expression: rule!CMGT_UTIL_SetRecordFields(\n        record: fv!item,\n        /*Always set these fields with each update*/\n        alwaysOverwrite: {\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.isDeleted,\n            value: true\n          ),\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.modifiedOn,\n            value: now()\n          ),\n          a!map(\n            field: recordType!CMGT_CFG_AssignmentRule_UsersToExclude.modifiedBy,\n            value: ri!initiator\n          )\n        },\n        /*Only modify these fields if they are currently null*/\n        neverOverwrite: {},\n        childRelationships: {}\n      )\n    )\n  }\n)"
    }
  }
}