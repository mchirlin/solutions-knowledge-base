{
  "_metadata": {
    "bundle_id": "AS_GCM_Identify_Fill_Ins_With_AI"
  },
  "objects": {
    "_a-0000e571-774f-8000-b919-01ef9001ef90_29043": {
      "name": "AS_FRM_doesRuleExist",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!ruleExists: doesruleexist(ri!ruleName),\n  local!ruleExists\n)"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53654": {
      "name": "AS_GCM_CO_UT_loadBundleFromFolder",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!lang: \"en_US\",\n/* below is deprecated for now, uncomment to support multi-language display */\n  /*if(*/\n    /*isnull(ri!langISOCode),*/\n    /*userlocale(loggedInUser()),*/\n    /*ri!langISOCode*/\n  /*),*/\n  local!bundleName: rule!AS_GCM_determineValueBySolutionFlavor(\n    options: cons!AS_GCM_TXT_VALID_SOLUTION_FLAVORS\n  ),\n  /*local!bundleName*/\n  local!output: loadbundlepropertiesfile(\n    cons!AS_GCM_FLD_PROPERTIES_FILES,\n    local!lang,\n    local!bundleName\n  )[local!bundleName],\n  local!output\n)"
    },
    "_a-0000ec0f-9de5-8000-9d75-011c48011c48_12361328": {
      "name": "AS_GCM_removeHiddenSpanTagsFromHtml",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_substituteListFromTextUsingReduce(\n  text: ri!text,\n  find: rule!AS_GCM_extractBalancedTagThatHasGivenText(\n    text: ri!text,\n    uniqueTextInTag: \"span hidden\"\n  ),\n  replaceAllInstances: true\n)"
    },
    "_a-0000e586-af6f-8000-9bd2-011c48011c48_1348231": {
      "name": "AS_CO_UT_castToMapArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Map?list',\n  if(\n    rule!AS_CO_UT_isBlank(ri!value),\n    {},\n    ri!value\n  )\n)"
    },
    "_a-0000e61a-f20f-8000-9ba5-011c48011c48_53662": {
      "name": "AS_GAM_CO_I18N_UT_displayLabel",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Text',\n  a!localVariables(\n    local!result: a!refreshVariable(\n      value: if(\n        rule!AS_CO_UT_isBlank(ri!bundleKey),\n        null,\n        if(\n          rule!AS_CO_UT_isBlank(ri!arguments),\n          rule!AS_CO_UT_replaceNull(\n            nullableValue: ri!bundle[ri!bundleKey],\n            replacementValue: ri!bundleKey\n          ),\n          rule!AS_GAM_CO_I18N_UT_replaceArguments(\n            bundleKey: ri!bundle[ri!bundleKey],\n            arguments: ri!arguments\n          )\n        )\n      ),\n      refreshAlways: true\n    ),\n    local!result\n  )\n)"
    },
    "_a-0000e9e2-fe39-8000-9c72-011c48011c48_5802508": {
      "name": "AS_CO_UT_isRecordTypeData",
      "type": "Expression Rule",
      "sail_code": "/*Returns true if the given data is of type recordType, else returns false*/\nif(\n  find(\n    \"urn:com:appian:recordtype\",\n    toxml(ri!data)\n  ) <> 0,\n  true(),\n  false()\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3773464": {
      "name": "AS_GCM_extractUuidAndFillinTypeFromClassParameter",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(ri!citeOrHighlightTag),\n  a!localVariables(\n    local!isTableFillIn: if(\n      rule!AS_CO_UT_isBlank(ri!tables),\n      false,\n      or(\n        find(\n          rule!AS_GCM_removeHiddenSpanTagsFromHtml(ri!citeOrHighlightTag),\n          tostring(ri!tables)\n        ) > 0,\n        find(\n          ri!citeOrHighlightTag,\n          tostring(ri!tables)\n        ) > 0\n      )\n    ),\n    local!class: regexfirstmatch(\n      \"class=\"\"(.*?)\"\"\",\n      ri!citeOrHighlightTag\n    ),\n    local!uuidAndTypeSplit: split(\n      regexreplaceall(\"class=\"\"cite |\"\"\", local!class, \"\"),\n      \" \"\n    ),\n    /*Checking whether the first item has only alphabets*/\n    local!isFirstItemFillinType: regexmatch(\n      \"^[a-zA-Z]+$\",\n      local!uuidAndTypeSplit[1]\n    ),\n    a!map(\n      uuid: if(\n        local!isFirstItemFillinType,\n        \"\",\n        local!uuidAndTypeSplit[1]\n      ),\n      fillinType: a!defaultValue(\n        value: ri!fillinType,\n        default: a!match(\n          value: local!uuidAndTypeSplit,\n          whenTrue: local!isTableFillIn,\n          then: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n          whenTrue: local!isFirstItemFillinType,\n          then: fv!value[1],\n          default: index(fv!value, 2, \"\")\n        )\n      )\n    )\n  ),\n  \"\"\n)"
    },
    "_a-0000e8e8-3f98-8000-9ba5-011c48011c48_13321": {
      "name": "AS_GCM_UT_regexsearch",
      "type": "Expression Rule",
      "sail_code": "/*\nThis rule is used to handle the weird behaviour seen sometimes in the regexsearch function where the returned data is not indexable or erroring out. \nTo fix this we are explicitly casting to make it proper.\n*/\n#\"SYSTEM_SYSRULES_forEach\"(\n  items: regexsearch(\n    ri!pattern,\n    ri!searchString,\n    ri!regexFlag,\n    ri!returnGroups\n  ),\n  expression: a!map(\n    match: touniformstring(index(fv!item, \"match\", \"\")),\n    startPosition: tointeger(index(fv!item, \"startPosition\", null)),\n    endPosition: tointeger(index(fv!item, \"endPosition\", null)),\n    groups: rule!AS_CO_UT_castToDictionaryList(index(fv!item, \"groups\", null))\n  )\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75636": {
      "name": "AS_CO_UT_not",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  not(rule!AS_CO_UT_booleanDefaultFalse(ri!input))\n)\n\n/*True returns False*/\n/*False returns True*/\n/*Null returns True*/"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17436420": {
      "name": "AS_GCM_APPREF_GCM_AI_STARTPROCESS_identifyFillinsUsingNativeAI",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /* Return the entry-point rule if it exists, or else returns a no-op */\n  /* Make sure you use a refreshAlways: true */\n  local!rule: a!refreshVariable(\n    value: rule!AS_FRM_getRuleReferenceOrNoOp(\n      ruleName: \"AS_GCM_AI_ENTRYPOINT_STARTPROCESS_identifyFillinsUsingNativeAI\"\n    ),\n    refreshAlways: true\n  ),\n  /* Actually execute the rule */\n  local!rule(\n    /* This should always be passed in every app reference rule */\n    /* which returns a default value if the rule does not exist */\n    ifNull_default: {},\n    /* Entrypoint-specific inputs for that rule */\n    clauseText: ri!clauseText\n  )\n)"
    },
    "_a-0000eea8-0b3f-8000-9e48-011c48011c48_17241214": {
      "name": "AS_GCM_FM_identifyFillInsWithAI_Wrapper",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!bundle: rule!AS_GCM_CO_UT_loadBundleFromFolder(langISOCode: null()),\n  local!fillInTypeMap: rule!AS_GCM_CONS_fillInTypeMaps(\n    bundle: local!bundle,\n    returnTableFillinTypes: true\n  ),\n  local!clauseTextAndFillinMaps: rule!AS_GCM_getFillinMapsAndClauseTextUsingHighlightOrCiteTags(\n    clauseText: ri!clauseText,\n    clauseNumber: ri!clause[recordType!AS GCM R Clause.clauseNumber],\n    getFillinRecommendationsFromDB: false(),\n    isIgnoreTables: false\n  ),\n  local!fillinMaps: index(\n    local!clauseTextAndFillinMaps,\n    \"fillinMaps\",\n    {}\n  ),\n  local!citeTagGeneratedClauseText: index(\n    local!clauseTextAndFillinMaps,\n    \"updatedClauseText\",\n    \"\"\n  ),\n  local!tablesFillInMaps: rule!AS_GCM_ConstructTableFillInMaps(\n    clauseText: local!citeTagGeneratedClauseText,\n    clause: ri!clause\n  ),\n  local!nonTableFillInData: rule!AS_GCM_getFillinMapsAndClauseTextUsingHighlightOrCiteTags(\n    isIgnoreTables: true,\n    clauseText: local!citeTagGeneratedClauseText,\n    clauseNumber: ri!clause[recordType!AS GCM R Clause.clauseNumber],\n    fillinMaps: local!fillinMaps\n  ),\n  local!nonTableFillInMaps: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!nonTableFillInData.fillinMaps,\n    expression: #\"urn:appian:function:v1:a:update\"(\n      fv!item,\n      \"startIndex\",\n      find(\n        fv!item.uuid,\n        local!citeTagGeneratedClauseText\n      )\n    )\n  ),\n  local!updatedNonTableFillInMaps: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!nonTableFillInMaps,\n      expression: a!localVariables(\n        local!isCheckboxFillInType: contains(\n          {\n            cons!AS_GCM_TXT_CHECKBOX_CHAR_LIST,\n            cons!AS_GCM_TXT_CHECKBOX_SYMBOL_LIST\n          },\n          fv!item.displayText\n        ),\n        #\"urn:appian:function:v1:a:update\"(\n          fv!item,\n          if(\n            toboolean(local!isCheckboxFillInType) = true,\n            { \"fillinType\", \"displayText\" },\n            \"fillinType\"\n          ),\n          if(\n            toboolean(local!isCheckboxFillInType),\n            {\n              cons!AS_GCM_TXT_FILL_IN_TYPE_CHECKBOX,\n              fv!item.displayText\n            },\n            if(\n              regexmatch(\n                joinarray(\n                  trim(\n                    {\n                      cons!AS_GCM_TXT_MULTI_LINE_FILL_INS_KEYWORD_LIST,\n                      char(10)\n                    }\n                  ),\n                  \"|\"\n                ),\n                fv!item.displayText\n              ),\n              cons!AS_GCM_TXT_FILL_IN_TYPE_MULTI_LINE,\n              cons!AS_GCM_TXT_FILL_IN_TYPE_SINGLE_LINE\n            )\n          )\n        )\n      )\n    )\n  ),\n  local!consolidatedFillInMaps: rule!AS_CO_UT_rejectNullValuesFromArray(\n    {\n      local!tablesFillInMaps,\n      local!updatedNonTableFillInMaps\n    }\n  ),\n  local!sortedFillInMaps: if(\n    rule!AS_CO_UT_isBlank(local!consolidatedFillInMaps),\n    null,\n    todatasubset(\n      arrayToPage: #\"urn:appian:function:v1:a:update\"(\n        data: rule!AS_CO_UT_castToMapArray(\n          a!flatten(\n            {\n              local!tablesFillInMaps,\n              local!updatedNonTableFillInMaps\n            }\n          )\n        ),\n        index: \"isSelected\",\n        value: repeat(\n          count(\n            a!flatten(\n              {\n                local!tablesFillInMaps,\n                local!updatedNonTableFillInMaps\n              }\n            )\n          ),\n          true\n        )\n      ),\n      pagingConfiguration: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        1,\n        - 1,\n        #\"SYSTEM_SYSRULES_sortInfo\"(field: \"startIndex\", ascending: true)\n      )\n    ).data\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_headerTemplateSimple\"(\n      title: \"AI Identified Fill-Ins\",\n      secondaryText: \"Select the AI-identified fill-ins to add to your list.\",\n      titleColor: \"STANDARD\"\n    ),\n    isTitleBarFixed: true,\n    showTitleBarDivider: true,\n    backgroundColor: cons!AS_GCM_HEX_CODE_APPIAN_BACKGROUND,\n    contents: {\n      a!match(\n        value: ri!isSuccess,\n        whenTrue: rule!AS_CO_UT_isBlank(fv!value),\n        then: rule!AS_GCM_COL_identifyFillInsWithAI_inProgress(bundle: local!bundle),\n        whenTrue: fv!value = false,\n        then: rule!AS_GCM_COL_IdentifyFillInsWithAI_ErrorState(\n          bundle: local!bundle,\n          errorMessage: ri!errorMessage,\n          userAction: ri!buttonAction,\n          retryShowWhen: not(ri!hideErrorStateRetry)\n        ),\n        whenTrue: and(\n          fv!value,\n          rule!AS_CO_UT_isBlank(local!sortedFillInMaps)\n        ),\n        then: rule!AS_GCM_COL_IdentifyFillInsWithAI_EmptyState(bundle: local!bundle),\n        default: rule!AS_GCM_CPS_IdentifyFillInsWithAI_Preview(\n          clauseText: local!citeTagGeneratedClauseText,\n          bundle: local!bundle,\n          sortedFillInMaps: local!sortedFillInMaps,\n          fillInTypeMap: local!fillInTypeMap\n        )\n      )\n    },\n    buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n      primaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Add Fill-Ins\",\n          style: \"SOLID\",\n          submit: true,\n          disabled: not(\n            and(\n              or(\n                toboolean(local!sortedFillInMaps.isSelected)\n              ),\n              a!defaultValue(value: ri!isSuccess, default: false)\n            )\n          ),\n          saveInto: {\n            rule!AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Add_FillInsIdentified(),\n            a!save(\n              ri!aiIdentifiedFillInsUuids,\n              a!localVariables(\n                local!fillInMapGroupedResults: rule!AS_GCM_filterRecords(\n                  records: local!sortedFillInMaps,\n                  field: \"isSelected\",\n                  value: true\n                ),\n                local!selectedMapGroupedResults: rule!AS_GCM_filterRecords(\n                  records: local!fillInMapGroupedResults,\n                  field: \"fillInType\",\n                  value: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n                  filterType: \"FULL_RESULT\"\n                ),\n                rule!AS_CO_UT_rejectNullValuesFromArray(\n                  array: a!flatten(\n                    {\n                      rule!AS_CO_UT_indexPath(\n                        cdt: local!selectedMapGroupedResults,\n                        field: \"matches.uuidsInTable\",\n                        indexDefault: null\n                      ),\n                      rule!AS_CO_UT_indexPath(\n                        cdt: local!selectedMapGroupedResults,\n                        field: \"rejects.uuid\",\n                        indexDefault: null\n                      )\n                    }\n                  )\n                )\n              )\n            ),\n            a!save(\n              ri!clauseText,\n              rule!AS_GCM_substituteListFromTextUsingReduce(\n                text: rule!AS_GCM_UpdateClauseTextBasedOnAIIdentifiedFillIns(\n                  clauseText: local!citeTagGeneratedClauseText,\n                  fullFillInMapsList: local!fillinMaps,\n                  sortedFillInMaps: local!sortedFillInMaps\n                ),\n                find: cons!AS_GCM_TXT_CHECKBOX_CHAR_LIST,\n                replaceWith: apply(\n                  fn!char,\n                  cons!AS_GCM_TXT_CHECKBOX_CHAR_LIST\n                ),\n                replaceAllInstances: true\n              )\n            ),\n            a!save(\n              ri!buttonAction,\n              cons!AS_GCM_CO_ENUM_USER_ACTION_ADD_FILL_INS\n            )\n          }\n        )\n      },\n      secondaryButtons: {\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Cancel\",\n          style: \"OUTLINE\",\n          value: cons!AS_CO_ENUM_USER_ACTION_CANCEL,\n          saveInto: {\n            ri!buttonAction,\n            a!match(\n              value: ri!isSuccess,\n              whenTrue: fv!value = false,\n              then: rule!AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_ErrorState(),\n              whenTrue: and(\n                rule!AS_CO_UT_isBlank(local!sortedFillInMaps),\n                ri!isSuccess = true\n              ),\n              then: rule!AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_EmptyState(),\n              default: rule!AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_FillInsIdentified()\n            )\n          },\n          submit: true,\n          showWhen: rule!AS_CO_UT_isNotBlank(ri!isSuccess)\n        ),\n        /* Cancel button for inprogress state */\n        #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: \"Cancel\",\n          style: \"OUTLINE\",\n          value: cons!AS_CO_ENUM_USER_ACTION_CANCEL,\n          saveInto: {\n            ri!buttonAction,\n            rule!AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_Inprogress()\n          },\n          submit: true,\n          confirmHeader: \"Cancel extraction?\",\n          confirmMessage: \"The extraction process will stop and any progress will be lost.\",\n          confirmButtonLabel: \"Yes\",\n          cancelButtonLabel: \"Cancel\",\n          showWhen: rule!AS_CO_UT_isBlank(ri!isSuccess)\n        )\n      }\n    ),\n    contentsWidth: \"FULL\"\n  )\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3777459": {
      "name": "AS_GCM_generateOrRetainClassParameterInHighlightOrCiteTag",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!highlightTag),\n  \"\",\n  a!localVariables(\n    local!uuidAndfillinTypeMap: rule!AS_GCM_extractUuidAndFillinTypeFromClassParameter(citeOrHighlightTag: ri!highlightTag),\n    local!classParameter: rule!AS_GCM_UT_generateCiteTagForFillins(\n      clauseNumber: ri!clauseNumber,\n      uuid: index(local!uuidAndfillinTypeMap, \"uuid\", null),\n      fillinType: index(\n        local!uuidAndfillinTypeMap,\n        \"fillinType\",\n        null\n      ),\n      getOnlyClass: true()\n    ),\n    if(\n      find(\"class=\", ri!highlightTag) <> 0,\n      regexreplaceall(\n        \"class=\"\"(.*?)\"\"\",\n        ri!highlightTag,\n        /* Escaping $ as it represents a group during regex replace  */\n        substitute(local!classParameter, \"$\", \"\\$\")\n      ),\n      a!localVariables(\n        local!openingTag: regexfirstmatch(\"^<(.*?)>\", ri!highlightTag),\n        concat(\n          local!openingTag,\n          \"<span hidden=\"\"\"\">\" & local!classParameter & \"</span>\" & substitute(ri!highlightTag, local!openingTag, \"\")\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000e67d-efac-8000-9bcd-011c48011c48_1557817": {
      "name": "AS_GCM_UT_findColorCodes",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!index: find(\"rgb\", ri!tag),\n  local!colIndex: if(\n    ri!isBackgroundColor = false,\n    find(\"rgb\", ri!tag, local!index + 3),\n    null\n  ),\n  local!hexdec: if(\n    ri!isBackgroundColor = false,\n    index(\n      split(\n        mid(\n          ri!tag,\n          find(\"color:\", ri!tag, local!index + 3),\n          14\n        ),\n        \"#\"\n      ),\n      2,\n      {}\n    ),\n    index(\n      split(\n        mid(ri!tag, find(\"color:\", ri!tag), 14),\n        \"#\"\n      ),\n      2,\n      {}\n    )\n  ),\n  local!color: mid(\n    ri!tag,\n    if(\n      ri!isBackgroundColor = false,\n      local!colIndex,\n      local!index\n    ),\n    18\n  ),\n  local!rgbCodes: tointeger(split(local!color, \", \")),\n  if(\n    rule!AS_CO_UT_isBlank(local!rgbCodes),\n    local!hexdec,\n    concat(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!rgbCodes,\n        expression: dec2hex(fv!item, 2)\n      )\n    )\n  )\n)"
    },
    "_a-0000e9e2-fe39-8000-9c72-011c48011c48_5802259": {
      "name": "AS_GAM_filterCdtOrRecordDataByField",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!cdtOrRecord),\n  index(\n    a!flatten(ri!cdtOrRecord),\n    rule!AS_GAM_returnCdtOrRecordIndicesByField(\n      cdtOrRecord: ri!cdtOrRecord,\n      field: ri!field,\n      value: ri!value\n    ),\n    {}\n  )\n)"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17445437": {
      "name": "AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Add_FillInsIdentified",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3773372": {
      "name": "AS_GCM_getFillinMapsAndClauseTextUsingHighlightOrCiteTags",
      "type": "Expression Rule",
      "sail_code": "/*Returns the fillins map for the clauseText*/\nif(\n  rule!AS_CO_UT_isNotBlank(input: ri!clauseText),\n  a!localVariables(\n    local!anchorTags: regexallmatches(\n      \"<a class(.*?)>(.*?)</a>\",\n      ri!clauseText\n    ),\n    local!replaceText: #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!anchorTags,\n      expression: if(\n        find(\"http\", fv!item) > 0,\n        fv!item,\n        striphtml(fv!item)\n      )\n    ),\n    /*Removing self referencing hyperlinks*/\n    local!clauseText: rule!AS_GCM_substituteListFromTextUsingReduce(\n      text: ri!clauseText,\n      find: local!anchorTags,\n      replaceWith: local!replaceText\n    ),\n    local!clauseTextIgnoringTables: if(\n      ri!isIgnoreTables = false(),\n      local!clauseText,\n      rule!AS_GCM_UT_removeCiteAndHighlightTagWithinTables(clauseText: local!clauseText)\n    ),\n    local!citeTags: if(\n      ri!isConvertCiteToHighlight = true(),\n      regexallmatches(\n        \"<cite(.*?)</cite>\",\n        local!clauseTextIgnoringTables\n      ),\n      {}\n    ),\n    local!highLightTags: if(\n      ri!isConvertCiteToHighlight = true(),\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!citeTags,\n        expression: a!localVariables(\n          local!class: regexfirstmatch(\"class=\"\"(.*?)\"\"\", fv!item),\n          local!value: regexreplaceall(\"<cite(.*?)>|</cite>\", fv!item, \"\"),\n          concat(\n            \"<span style=\"\"background-color: \" & a!defaultValue(\n              value: ri!highlightColorCode,\n              default: cons!AS_GCM_HEX_CODE_DEFAULT_FILL_IN_HIGHLIGHT_IN_ADD_OR_EDIT_CLAUSE\n            ) & \";\"\">\",\n            \"<span hidden=\"\"\"\">\",\n            local!class,\n            \"</span>\",\n            local!value,\n            \"</span>\"\n          )\n        )\n      ),\n      rule!AS_CO_UT_rejectNullValuesFromArray(\n        array: #\"SYSTEM_SYSRULES_forEach\"(\n          items: rule!AS_GCM_extractBalancedTagThatHasGivenText(\n            text: local!clauseTextIgnoringTables,\n            uniqueTextInTag: \"background-color:\"\n          ),\n          expression: if(\n            /*Ignoring the transparent background-color tags*/\n            or(\n              cons!AS_GCM_HEX_CODE_HIGHLIGHT_TO_EXCLUDE_FROM_FILLINS = \"#\" & stripwith(\n                rule!AS_GCM_UT_findColorCodes(tag: fv!item, isBackgroundColor: true()),\n                \";\"\n              ),\n              find(\n                \"background-color: transparent;\",\n                fv!item\n              ) <> 0,\n              if(\n                ri!skipFillinForNewHighlights = true(),\n                find(\"class=\"\"cite\", fv!item) = 0,\n                {}\n              )\n            ),\n            \"\",\n            fv!item\n          )\n        )\n      )\n    ),\n    local!fillinMaps: #\"SYSTEM_SYSRULES_forEach\"(\n      items: merge(\n        a!defaultValue(\n          value: local!citeTags,\n          default: repeat(length(local!highLightTags), \"\")\n        ),\n        local!highlightTags\n      ),\n      expression: a!localVariables(\n        local!tables: regexallmatches(\"<table.*?</table>\", local!clauseText),\n        local!value: rule!AS_GCM_UT_removeHightlightTags(fv!item[2]),\n        local!highlightTag: rule!AS_GCM_generateOrRetainClassParameterInHighlightOrCiteTag(\n          highlightTag: fv!item[2],\n          clauseNumber: ri!clauseNumber\n        ),\n        local!uuidAndfillinTypeMap: rule!AS_GCM_extractUuidAndFillinTypeFromClassParameter(\n          citeOrHighlightTag: local!highlightTag,\n          tables: if(ri!isIgnoreTables, null, local!tables)\n        ),\n        rule!AS_GCM_mergeMultipleMapsIntoSingleMap(\n          mapsToMerge: {\n            local!uuidAndfillinTypeMap,\n            a!map(\n              citeTag: a!defaultValue(\n                value: fv!item[1],\n                default: rule!AS_GCM_UT_generateCiteTagForFillins(\n                  clauseNumber: ri!clauseNumber,\n                  uuid: local!uuidAndfillinTypeMap.uuid,\n                  fillinType: local!uuidAndfillinTypeMap.fillinType,\n                  value: local!value\n                )\n              ),\n              highlightTag: local!highlightTag,\n              displayText: striphtml(local!value),\n              fillinRecommendations: rule!AS_CO_UT_cast(\n                type: #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n                  recordType!AS GCM Fill In Recommendation\n                ),\n                value: {}\n              )\n            )\n          }\n        )\n      )\n    ),\n    local!fillinRecommendations: rule!AS_GCM_QR_getFillInRecDetails(\n      returnType: cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 5000),\n      fillInRecFillInUuid: index(local!fillinMaps, \"uuid\", null),\n      executeWhen: ri!getFillinRecommendationsFromDB = true()\n    ).data,\n    /* Updating the fillin Recommendations in the fillinMaps   */\n    local!updatedFillinMaps: #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!fillinMaps,\n      expression: #\"urn:appian:function:v1:a:update\"(\n        fv!item,\n        \"fillinRecommendations\",\n        a!flatten(\n          a!defaultValue(\n            value: rule!AS_GAM_filterCdtOrRecordDataByField(\n              cdtOrRecord: ri!fillinMaps,\n              field: \"uuid\",\n              value: fv!item.uuid\n            ).fillinRecommendations,\n            default: rule!AS_GAM_filterCdtOrRecordDataByField(\n              cdtOrRecord: local!fillinRecommendations,\n              field: recordType!AS GCM Fill In Recommendation.fillInRecFillInUuid,\n              value: fv!item.uuid\n            ),\n            default: rule!AS_CO_UT_cast(\n              type: #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n                recordType!AS GCM Fill In Recommendation\n              ),\n              value: {}\n            )\n          )\n        )\n      )\n    ),\n    a!map(\n      fillinMaps: local!updatedFillinMaps,\n      updatedClauseText: if(\n        ri!isConvertCiteToHighlight = true(),\n        rule!AS_GCM_substituteListFromTextUsingReduce(\n          text: local!clauseText,\n          find: index(local!fillinMaps, \"citeTag\", null),\n          replaceWith: index(local!fillinMaps, \"highlightTag\", null)\n        ),\n        rule!AS_GCM_substituteListFromTextUsingReduce(\n          text: local!clauseText,\n          find: local!highLightTags,\n          replaceWith: index(local!fillinMaps, \"highlightTag\", null)\n        )\n      )\n    )\n  ),\n  a!map(fillinMaps: {}, updatedClauseText: \"\")\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76367": {
      "name": "AS_CO_UT_rejectNullValuesFromArray",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!array),\n  reject(\n    rule!AS_CO_UT_isBlank(_),\n    a!flatten(ri!array)\n  )\n)"
    },
    "_a-0000eb32-2fbb-8000-9d0d-011c48011c48_9761091": {
      "name": "AS_GCM_filterRecords",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!field),\n      expression: a!map(\n        field: fv!item,\n        value: if(\n          fv!itemCount = 1,\n          ri!value,\n          index(a!flatten(ri!value), fv!index, null)\n        )\n      )\n    )\n  ),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!AS_GCM_filterRecords_Reducer(\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _\n      ),\n      enumerate(count(a!flatten(ri!records))) + 1,\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000eeba-81af-8000-9e4e-011c48011c48_17410955": {
      "name": "AS_GCM_CPS_IdentifyFillInsWithAI_Preview",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!showDisclaimer: true,\n  {\n    rule!AS_GCM_CRD_InfoBannerMessage(\n      bundle: ri!bundle,\n      showWhen: local!showDisclaimer,\n      text: \"AI results may not be accurate. Ensure to verify all data before proceeding.\"\n    ),\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      marginAbove: \"LESS\",\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            /* Clause text */\n            rule!AS_GCM_CPS_identifyFillInsWithAI_clauseText(\n              clauseText: ri!clauseText,\n              bundle: ri!bundle\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            /* Fill-Ins */\n            rule!AS_GCM_CPS_identifyFillInsWithAI_fillIns(\n              bundle: ri!bundle,\n              sortedFillInMaps: ri!sortedFillInMaps,\n              fillInTypeMap: ri!fillInTypeMap\n            )\n          }\n        )\n      },\n      showDividers: true\n    )\n  }\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536": {
      "name": "AS_CO_UT_isBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  length(a!flatten(ri!value)) = 0\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3734026": {
      "name": "AS_GCM_extractBalancedTagThatHasGivenText",
      "type": "Expression Rule",
      "sail_code": "/*\nThis rule works by balancing the < and </ since all html opening and closing tags have them.\n\nNOTE: Pass unique text in ri!uniqueTextInTag if the given tag is expected to have same tag nested in it.\n***This rule might not work as expected if we pass the common text like \"span\" or anything which doesn't identify the tag uniquely.***\nSince passing a unique value to this rule input is recommended.\n\nExample Input/Output:\n\nInput:\n\nri!text -> \"<span style=\"\"background-color: rgb(255, 255, 0);\"\"><span hidden=\"\"\"\">class=\"\"cite 52.215-20_d5e120 SingleLine\"\"</span>jguygas1</span>iii<span style=\"\"background-color: rgb(255, 255, 0);\"\"><span hidden=\"\"\"\">class=\"\"cite 52.215-20_d5e121 SingleLine\"\"</span>jguygas2 [<em class=\"\"ph i\"\">Insert description of the data and format that are required, and include access to records necessary to permit an adequate evaluation of the proposed price in accordance with <a class=\"\"xref fm:ParaNumOnly\"\" href=\"\"15.408.html#FAR_15_408\"\">15.408</a>, <a class=\"\"xref fm:Table\"\" href=\"\"15.408.html#FAR_15_408__i1106753\"\">Table&nbsp; 15-2</a>, Note 2. The description may be inserted at the time of issuing the solicitation, or the Contracting Officer may specify that the offeror's format will be acceptable, or the description may be inserted as the result of negotiations.</em></span>]</p>\"\nri!uniqueTextInTag -> \"background-color:\"\n\nOutput:\n\n{\n  \"<span style=\"\"background-color: rgb(255, 255, 0);\"\"><span hidden=\"\"\"\">class=\"\"cite 52.215-20_d5e120 SingleLine\"\"</span>jguygas1</span>\",\n  \"<span style=\"\"background-color: rgb(255, 255, 0);\"\"><span hidden=\"\"\"\">class=\"\"cite 52.215-20_d5e121 SingleLine\"\"</span>jguygas2 [<em class=\"\"ph i\"\">Insert description of the data and format that are required, and include access to records necessary to permit an adequate evaluation of the proposed price in accordance with <a class=\"\"xref fm:ParaNumOnly\"\" href=\"\"15.408.html#FAR_15_408\"\">15.408</a>, <a class=\"\"xref fm:Table\"\" href=\"\"15.408.html#FAR_15_408__i1106753\"\">Table&nbsp; 15-2</a>, Note 2. The description may be inserted at the time of issuing the solicitation, or the Contracting Officer may specify that the offeror's format will be acceptable, or the description may be inserted as the result of negotiations.</em></span>\"\n}\n\n*/\nif(\n  any(\n    a!isNullOrEmpty,\n    { ri!text, ri!uniqueTextInTag }\n  ),\n  \"\",\n  a!localVariables(\n    /* Splitting the ri!text with ri!uniqueTextInTag to iterate through each item */\n    local!splitText: split(ri!text, ri!uniqueTextInTag),\n    rule!AS_CO_UT_rejectNullValuesFromArray(\n      array: #\"SYSTEM_SYSRULES_forEach\"(\n        /* Ignoring the first item from local!splitText since ri!uniqueTextInTag will not be present in it */\n        items: ldrop(local!splitText, 1),\n        expression: a!localVariables(\n          /* Fetching the text before ri!uniqueTextInTag from < and concatenating it with ri!uniqueTextInTag and\n        the rest of the test until the next < which has ri!uniqueTextInTag*/\n          local!properText: concat(\n            index(\n              regexsearch(\n                \"<[^<]*$\",\n                local!splitText[fv!index],\n                \"s\"\n              ),\n              \"match\",\n              null\n            ),\n            ri!uniqueTextInTag,\n            regexreplaceall(\"<[^>]*$\", fv!item, \"\")\n          ),\n          /* Extracting the html tag to balance it. Eg: span will be extracted from <span style=\"\"></span>         */\n          local!htmlTag: /* Extracting the html tag till the space \" \"           */\n          rule!AS_GCM_UT_regexsearch(\n            pattern: \"[^ ]+\",\n            /*  Replacing all characters till the last < character to get the opening tag  */\n            searchString: \n            stripwith(\n              regexfirstmatch(\n                \"<[^<]+$\",\n                local!splitText[fv!index] & ri!uniqueTextInTag,\n                \"s\"\n              ),\n              \"<\"\n            ),\n            regexFlag: \"s\"\n          ).match,\n          /* Extracting all the matching opening and closing html tags to find the balanced one         */\n          local!allTags: rule!AS_GCM_UT_regexsearch(\n            pattern: \"</?\" & local!htmlTag,\n            searchString: local!properText,\n            regexFlag: \"gs\"\n          ),\n          /* Keeping only < and / from local!allTags.match to do a balancing. */\n          local!cleanedText: cleanwith(concat(local!allTags.match), \"</\"),\n          /* Splitting with </ to get the opening tags alone to balance it.\n        Ignoring the last entry since we won't have a open tag in it */\n          local!onlyOpeningTags: rdrop(split(local!cleanedText, \"</\"), 1),\n          local!unbalancedOpeningTags: #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!onlyOpeningTags,\n            expression: /* Since we have splitted with </ we are subtracting 1 to pair a < i.e open tag with </ \n          For Eg. in \"<<</</\" if we split using </ and ignore the last string in output as per local!onlyOpeningTags\n          we will get {\"<<\", \"\"} in this the first string (i.e. \"<<\") has a opening tag pair for </ using which we splitted. \n          So to ignore this pair of opening tag we are subtracting 1\n          After subtracting 1 from the length we will get {1, -1}\n          */\n            len(fv!item) - 1\n          ),\n          local!balancedClosingTagIndex: rule!AS_CO_UT_rejectNullValuesFromArray(\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: local!unbalancedOpeningTags,\n              expression: if(\n                sum(\n                  index(\n                    local!unbalancedOpeningTags,\n                    enumerate(fv!index) + 1\n                  )\n                ) = 0,\n                fv!index,\n                \"\"\n              )\n            )\n          ),\n          regexfirstmatch(\n            \"<[^<>]*\" & ri!uniqueTextInTag & \"((.*?)</\" & local!htmlTag & \">){\" & index(local!balancedClosingTagIndex, 1, 1) & \"}\",\n            local!properText\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000eeba-81af-8000-9e4e-011c48011c48_17394481": {
      "name": "AS_GCM_GRD_TableFillInPreview",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_gridLayout\"(\n  label: \"Table Preview\",\n  labelPosition: \"COLLAPSED\",\n  headerCells: {\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!tableFillInMap.tableHeaderRowCells,\n      expression: #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(label: fv!item)\n    )\n  },\n  columnConfigs: {\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!tableFillInMap.tableHeaderRowCells,\n      expression: #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(\n        width: a!match(\n          value: len(fv!item),\n          whenTrue: fv!value <= 10,\n          then: \"NARROW\",\n          whenTrue: fv!value <= 20,\n          then: \"NARROW_PLUS\",\n          whenTrue: fv!value <= 30,\n          then: \"MEDIUM\",\n          whenTrue: fv!value <= 55,\n          then: \"MEDIUM_PLUS\",\n          default: \"WIDE\"\n        )\n      )\n    )\n  },\n  showWhen: rule!AS_CO_UT_isNotBlank(ri!tableFillInMap)\n)"
    },
    "_a-0000ec50-376f-8000-9d94-011c48011c48_12909959": {
      "name": "AS_GCM_getColorBasedOnColorName",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: ri!colorName,\n  /* White Colors */\n  equals: \"WHITE\",\n  then: cons!AS_GCM_HEX_CODE_WHITE,\n  equals: \"WHITE_2\",\n  then: cons!AS_GCM_HEX_CODE_WHITE_2,\n  /* Gray Colors */\n  equals: \"GRAY_0\",\n  then: cons!AS_GCM_HEX_CODE_GRAY_0,\n  equals: \"GRAY_1\",\n  then: \"#EDEDF2\",\n  equals: \"GRAY_2\",\n  then: \"#DCDCE5\",\n  equals: \"GRAY_3\",\n  then: cons!AS_GCM_HEX_CODE_GRAY_3,\n  equals: \"GRAY_4\",\n  then: \"#2E2E35\",\n  /* Orange Colors */\n  equals: \"ORANGE_1\",\n  then: \"#FFEED3\",\n  equals: \"ORANGE_2\",\n  then: \"#FFDCA3\",\n  equals: \"ORANGE_3\",\n  then: \"#FAA92F\",\n  equals: \"ORANGE_4\",\n  then: \"#995C00\",\n  /* Blue Colors */\n  equals: \"BLUE_0\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_0,\n  equals: \"BLUE_1\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_1,\n  equals: \"BLUE_2\",\n  then: \"#AFBFF8\",\n  equals: \"BLUE_3\",\n  then: \"#2322F0\",\n  equals: \"BLUE_4\",\n  then: cons!AS_GCM_HEX_CODE_BLUE_4,\n  equals: \"BLUE_5\",\n  then: \"#E9EDFC\",\n  equals: \"BLUE_6\",\n  then: \"#08088D\",\n  equals: \"BLUE_7\",\n  then: \"#DCDEF5\",\n  /* Green Colors  */\n  equals: \"GREEN_1\",\n  then: \"#E3FBDF\",\n  equals: \"GREEN_4\",\n  then: \"#117C00\",\n  /* Teal Colors */\n  equals: \"TEAL_1\",\n  then: \"#E2FAF9\",\n  equals: \"TEAL_3\",\n  then: \"#56ADC0\",\n  equals: \"TEAL_4\",\n  then: \"#2C6770\",\n  /* Purple Colors */\n  equals: \"PURPLE_1\",\n  then: \"#F2E9FF\",\n  equals: \"PURPLE_3\",\n  then: \"#B561FF\",\n  equals: \"PURPLE_4\",\n  then: \"#790DA1\",\n  /* Red Colors */\n  equals: \"RED_4\",\n  then: \"#9F0019\",\n  /* Yellow Colors */\n  equals: \"YELLOW_0\",\n  then: \"#FFFCEB\",\n  equals: \"YELLOW_1\",\n  then: \"#FFF6C9\",\n  equals: \"YELLOW_4\",\n  then: \"#856C00\",\n  /* Appian Colors */\n  equals: \"APPIAN_BACKGROUND\",\n  then: cons!AS_GCM_HEX_CODE_APPIAN_BACKGROUND,\n  equals: \"ACCENT\",\n  then: \"#2322f0\",\n  default: ri!colorName\n)"
    },
    "_a-0000e90e-0586-8000-9c1e-011c48011c48_3698524": {
      "name": "AS_GCM_BL_generateUuidForFillIns",
      "type": "Expression Rule",
      "sail_code": "fn!lower(\n  joinarray(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "_a-0000ea95-3eb3-8000-9cc0-011c48011c48_8052294": {
      "name": "AS_GCM_blankSave",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(local!temp, a!save(local!temp, {}))"
    },
    "_a-0000e40a-de32-8000-9ba8-011c48011c48_272151": {
      "name": "AS_CO_UT_whereContains",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Integer?list',\n  with(\n    local!array: a!flatten(ri!array),\n  \n    if(\n    \n      /*Have to handle separately for document types due to how it casts to string*/\n      rule!AS_CO_UT_typeCompare(\n        value1: local!array,\n        value2: {todocument(null)}\n      ),\n      wherecontains(\n        todocument(ri!values),\n        local!array\n      ),\n    \n      /*Have to handle separately for group types due to how it casts to string*/\n      rule!AS_CO_UT_typeCompare(\n        value1: local!array,\n        value2: {togroup(null)}\n      ),\n      wherecontains(\n        togroup(ri!values),\n        local!array\n      ),\n    \n      /*Casting to string accounts for any primitive type (integer, boolean, ect.)*/\n      wherecontains(\n        if(\n          rule!AS_CO_UT_isBlank(ri!values),\n          touniformstring(ri!values),\n          touniformstring(a!flatten(ri!values))\n        ),\n        touniformstring(local!array)\n      )\n    )\n  )\n)"
    },
    "_a-0000ee54-fb4d-8000-9e2f-011c48011c48_16651387": {
      "name": "AS_GCM_CRD_InfoBannerMessage",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n      items: {\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n              icon: \"info-circle\",\n              color: rule!AS_GCM_getColorBasedOnColorName(colorName: \"BLUE_3\")\n            )\n          ),\n          width: \"MINIMIZE\"\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: ri!text\n            )\n          )\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            labelPosition: \"COLLAPSED\",\n            value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n              icon: \"close\",\n              caption: \"Dismiss\",\n              link: #\"SYSTEM_SYSRULES_dynamicLink\"(saveInto: { a!save(ri!showWhen, false()) }),\n              linkStyle: \"STANDALONE\",\n              color: \"SECONDARY\"\n            )\n          ),\n          width: \"MINIMIZE\"\n        )\n      }\n    )\n  },\n  style: rule!AS_GCM_getColorBasedOnColorName(colorName: \"BLUE_1\"),\n  showWhen: ri!showWhen,\n  shape: \"SEMI_ROUNDED\",\n  padding: \"STANDARD\",\n  marginBelow: \"STANDARD\",\n  showBorder: false\n)"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17445364": {
      "name": "AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_ErrorState",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782": {
      "name": "AS_CO_UT_isNotBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  not(rule!AS_CO_UT_isBlank(ri!input))\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3772662": {
      "name": "AS_GCM_UT_removeHightlightTags",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(ri!clauseText),\n  \"\",\n  a!localVariables(\n    /*To get the balanced highlight tag from the clause text */\n    local!highlightText: rule!AS_GCM_extractBalancedTagThatHasGivenText(\n      text: ri!clauseText,\n      uniqueTextInTag: \"background-color:\"\n    ),\n    /* To fetch the background-color form the highlight tag */\n    local!highlightPropertyArray: regexallmatches(\n      \"background-color:(.*?);(\" & char(32) & \")?\",\n      joinarray(local!highlightText, \"\"),\n      \"gms\"\n    ),\n    /* Removing the hightlights from the tag like <span hidden> with cite tag, <span> and with other style formatting*/\n    local!removeHighlights: #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!highlightText,\n      expression: concat(\n        a!localVariables(\n          local!split: split(\n            substitute(\n              fv!item,\n              local!highlightPropertyArray[fv!index],\n              \"\"\n            ),\n            \"</\"\n          ),\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!split,\n            expression: if(\n              fv!isFirst,\n              regexreplaceall(\n                \"(<span style=\"\"\"\">| style=\"\"\"\")\",\n                fv!item,\n                \"\"\n              ),\n              and(\n                fv!isLast,\n                find(\"<span style=\"\"\"\">\", local!split[1])\n              ),\n              substitute(fv!item, \"span>\", \"\"),\n              \"</\" & fv!item\n            )\n          )\n        )\n      )\n    ),\n    /* Substitue the removed highlight tag text with the cluase text using reduce */\n    regexreplaceall(\n      cons!AS_GCM_TXT_REGEX_FOR_HIDDEN_SPAN_TAG_HAVING_CLASS_PARAMETER,\n      rule!AS_GCM_substituteListFromTextUsingReduce(\n        text: ri!clauseText,\n        find: local!highlightText,\n        replaceWith: local!removeHighlights\n      ),\n      \"\"\n    )\n  )\n)"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17445399": {
      "name": "AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_FillInsIdentified",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17445357": {
      "name": "AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_EmptyState",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73980": {
      "name": "AS_CO_UT_replaceNull",
      "type": "Expression Rule",
      "sail_code": "if(\n  rule!AS_CO_UT_isBlank(ri!nullableValue),\n  ri!replacementValue,\n  ri!nullableValue\n)"
    },
    "_a-0000e571-774f-8000-b919-01ef9001ef90_28790": {
      "name": "AS_FRM_getRuleReferenceOrNoOp",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    cons!AS_FRM_BOOL_APPREF_ENTRYPOINT_FRAMEWORK_ENABLED,\n    rule!AS_FRM_doesRuleExist(ri!ruleName)\n  ),\n  rulereferencebyname(ruleName: ri!ruleName),\n  rule!AS_FRM_noOp\n)"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17441690": {
      "name": "AS_GCM_COL_IdentifyFillInsWithAI_EmptyState",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  marginAbove: \"EVEN_MORE\",\n  marginBelow: \"EVEN_MORE\",\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"EVEN_MORE\"\n        ),\n        #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              label: \"\",\n              labelPosition: \"COLLAPSED\",\n              images: {\n                #\"SYSTEM_SYSRULES_documentImage\"(\n                  document: cons!AS_GCM_DOC_IDENTIFY_FILL_IN_WITH_AI_EMPTY_STATE\n                )\n              },\n              size: \"EXTRA_SMALL\",\n              isThumbnail: false,\n              style: \"STANDARD\",\n              align: \"CENTER\"\n            ),\n            #\"SYSTEM_SYSRULES_headingField\"(\n              text: \"No fill-ins found\",\n              size: \"EXTRA_SMALL\",\n              headingTag: \"H3\",\n              fontWeight: \"SEMI_BOLD\",\n              align: \"CENTER\",\n              color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_4\"),\n              marginBelow: \"LESS\"\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: \"The AI didn't identify any fill-ins. To add fill-ins, tag them manually.\",\n                color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_3\")\n              ),\n              align: \"CENTER\",\n              marginAbove: \"NONE\",\n              marginBelow: \"STANDARD\"\n            )\n          },\n          height: \"AUTO\",\n          style: rule!AS_GCM_getColorBasedOnColorName(\"WHITE\"),\n          shape: \"SEMI_ROUNDED\",\n          padding: \"STANDARD\",\n          marginBelow: \"STANDARD\",\n          marginAbove: \"STANDARD\",\n          showBorder: false\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"EVEN_MORE\"\n        ),\n\n      },\n      width: \"MEDIUM_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n  },\n  alignVertical: \"MIDDLE\"\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3773151": {
      "name": "AS_GCM_UT_removeCiteAndHighlightTagWithinTables",
      "type": "Expression Rule",
      "sail_code": "if(\n  search(\"<table\", ri!clauseText) = 0,\n  ri!clauseText,\n  a!localVariables(\n    /* split the text with table tag */\n    local!tableSplit: split(ri!clauseText, { \"<table\", \"</table>\" }),\n    joinarray(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!tableSplit,\n        expression: a!localVariables(\n          local!item: if(\n            or(fv!isFirst, fv!isLast),\n            fv!item,\n            \"<table\" & fv!item & \"</table>\"\n          ),\n          if(\n            search(\"<tbody\", local!item) <> 0,\n            if(\n              /* searching for <cite or <ignore-cite tags and replacing the tags accordingly on save/load */\n              or(\n                find(\"<cite\", local!item) <> 0,\n                find(\"<Ignore-cite\", local!item) <> 0\n              ),\n              if(\n                /* reverting the ignored-cite tags to cite tags on save*/\n                ri!revertIgnoredCitetags = true,\n                regexreplaceall(\"<Ignore-cite\", local!item, \"<cite\"),\n                /* Ignoring the cite tags within the tables */\n                regexreplaceall(\"<cite\", local!item, \"<Ignore-cite\")\n              ),\n              if(\n                /* Logic to remove the highlight tag */\n                find(\"background-color:\", local!item) <> 0,\n                rule!AS_GCM_UT_removeHightlightTags(clauseText: local!item),\n                local!item\n              )\n            ),\n            local!item\n          )\n        )\n      ),\n      \"\"\n    )\n  )\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3772981": {
      "name": "AS_GCM_UT_generateCiteTagForFillins",
      "type": "Expression Rule",
      "sail_code": "if(\n  any(\n    a!isNotNullOrEmpty,\n    { ri!clauseNumber, ri!uuid }\n  ),\n  a!localVariables(\n    local!class: concat(\n      \"class=\"\"cite \",\n      joinarray(\n        {\n          if(\n            /* Check whether the UUID is present else generate the UUID */\n            a!isNullOrEmpty(ri!uuid),\n            concat(\n              stripwith(ri!clauseNumber,\" \"),\n              \"_\",\n              rule!AS_GCM_BL_generateUuidForFillIns()\n            ),\n            ri!uuid\n          ),\n          ri!fillinType\n        },\n        \" \"\n      ),\n      \"\"\"\"\n    ),\n    if(\n      ri!getOnlyClass,\n      local!class,\n      concat(\n        \"<cite \",\n        local!class,\n        \">\",\n        ri!value,\n        \"</cite>\"\n      )\n    )\n  ),\n  \"\"\n)"
    },
    "_a-0000eb44-a528-8000-9d15-011c48011c48_9978504": {
      "name": "AS_CO_UT_displayRequiredMessage",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNotNullOrEmpty(\n    ri!label\n  ),\n  a!defaultValue(\n    value: ri!requiredMessage,\n    default: rule!AS_CO_UT_displayCommonObjectBundleLabel(\n      bundleKey: \"AS.CO.CommonObjects.vld_RequiredMessage\",\n      arguments: stripwith(ri!label, \"*\")\n    )\n  ),\n  ri!requiredMessage\n)"
    },
    "_a-0000eec3-bb0f-8000-9e50-011c48011c48_17445392": {
      "name": "AS_GCM_MTR_SAVE_IdentifyFillInsUsingAI_Cancel_Inprogress",
      "type": "Expression Rule",
      "sail_code": "rule!AS_GCM_blankSave()"
    },
    "210e7e0d-4e7d-4883-a4a6-6878800492c7": {
      "name": "AS_GCM_UpdateClauseTextBasedOnAIIdentifiedFillIns",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!fillInMapGroupedResults: rule!AS_GCM_filterRecords(\n    records: ri!sortedFillInMaps,\n    field: \"isSelected\",\n    value: true,\n    filterType: \"FULL_RESULT\"\n  ),\n  local!selectedMapGroupedResults: rule!AS_GCM_filterRecords(\n    records: local!fillInMapGroupedResults.matches,\n    field: \"fillInType\",\n    value: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n    filterType: \"FULL_RESULT\"\n  ),\n  local!unselectedMapGroupedResults: rule!AS_GCM_filterRecords(\n    records: local!fillInMapGroupedResults.rejects,\n    field: \"fillInType\",\n    value: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n    filterType: \"FULL_RESULT\"\n  ),\n  local!selectedTableFillinMaps: local!selectedMapGroupedResults.matches,\n  local!selectedFillinMaps: local!selectedMapGroupedResults.rejects,\n  local!unselectedTableFillinMaps: local!unselectedMapGroupedResults.matches,\n  local!unselectedFillinMaps: local!unselectedMapGroupedResults.rejects,\n  local!updatedClauseText: rule!AS_GCM_substituteListFromTextUsingReduce(\n    text: ri!clauseText,\n    find: rule!AS_CO_UT_rejectNullValuesFromArray(\n      {\n        index(\n          local!unselectedTableFillinMaps,\n          \"tableText\",\n          null\n        ),\n        index(\n          local!unselectedFillinMaps,\n          \"highlightTag\",\n          null\n        )\n      }\n    ),\n    replaceWith: rule!AS_CO_UT_rejectNullValuesFromArray(\n      {\n        index(\n          local!unselectedTableFillinMaps,\n          \"tableTextWithoutFillIns\",\n          {}\n        ),\n        index(\n          local!unselectedFillinMaps,\n          \"displayText\",\n          {}\n        )\n      }\n    ),\n    \n  ),\n  rule!AS_GCM_substituteListFromTextUsingReduce(\n    text: local!updatedClauseText,\n    find: rule!AS_CO_UT_rejectNullValuesFromArray(\n      {\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: a!flatten(\n            index(\n              local!selectedTableFillinMaps,\n              \"uuidsInTable\",\n              null\n            )\n          ),\n          expression: displayvalue(\n            fv!item,\n            ri!fullFillInMapsList.uuid,\n            ri!fullFillInMapsList.highlightTag,\n            \"\"\n          )\n        ),\n        index(\n          local!selectedFillinMaps,\n          \"highlightTag\",\n          null\n        )\n      }\n    ),\n    replaceWith: rule!AS_CO_UT_rejectNullValuesFromArray(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: {\n          local!selectedTableFillinMaps,\n          local!selectedFillinMaps\n        },\n        expression: if(\n          fv!item.fillInType = cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: index(fv!item, \"uuidsInTable\", null),\n            expression: displayvalue(\n              fv!item,\n              ri!fullFillInMapsList.uuid,\n              ri!fullFillInMapsList.citeTag,\n              \"\"\n            )\n          ),\n          substitute(\n            fv!item.citeTag,\n            fv!item.uuid,\n            fv!item.uuid & \" \" & fv!item.fillInType\n          )\n        )\n      )\n    ),\n    \n  )\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3773963": {
      "name": "AS_GCM_mergeMultipleMapsIntoSingleMap",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_cast(\n  type: 'type!{http://www.appian.com/ae/types/2009}Map',\n  value: a!localVariables(\n    local!keys: #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!mapsToMerge,\n      expression: a!keys(fv!item)\n    ),\n    local!values: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!keys,\n        expression: apply(\n          index(ri!mapsToMerge[fv!index], _, {}),\n          fv!item\n        )\n      )\n    ),\n    reduce(\n      fn!insert,\n      cast(\n        'type!{http://www.appian.com/ae/types/2009}Dictionary',\n        {}\n      ),\n      merge(local!values, a!flatten(local!keys))\n    )\n  )\n),"
    },
    "_a-0000eeb1-460e-8000-9e4a-011c48011c48_17308112": {
      "name": "AS_GCM_CPS_identifyFillInsWithAI_fillIns",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!showDeselectAll: and(\n    index(ri!sortedFillInMaps, \"isSelected\", null)\n  ),\n  {\n    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n      items: {\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_headingField\"(\n            text: \"\",\n            size: \"SMALL\",\n            headingTag: \"H2\",\n            fontWeight: \"SEMI_BOLD\"\n          )\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            align: \"RIGHT\",\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: if(\n                local!showDeselectAll,\n                rule!AS_GAM_CO_I18N_UT_displayLabel(\n                  bundle: ri!bundle,\n                  bundleKey: \"lbl_DeselectAll\",\n                  arguments: count(ri!sortedFillInMaps)\n                ),\n                rule!AS_GAM_CO_I18N_UT_displayLabel(\n                  bundle: ri!bundle,\n                  bundleKey: \"lbl_SelectAll\",\n                  arguments: count(ri!sortedFillInMaps)\n                )\n              ),\n              style: \"STRONG\",\n              linkStyle: \"STANDALONE\",\n              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                saveInto: a!save(\n                  ri!sortedFillInMaps.isSelected,\n                  repeat(\n                    count(ri!sortedFillInMaps),\n                    not(local!showDeselectAll)\n                  )\n                )\n              )\n            )\n          )\n        )\n      },\n      marginBelow: \"EVEN_LESS\"\n    ),\n    #\"SYSTEM_SYSRULES_paneLayout\"(\n      panes: #\"SYSTEM_SYSRULES_pane\"(\n        contents: #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!sortedFillInMaps,\n          expression: a!localVariables(\n            local!isTableFillIn: or(\n              fv!item.fillinType = cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_RICH_TEXT_TABLE,\n              fv!item.fillinType = cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE\n            ),\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              contents: {\n                #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                  items: {\n                    #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                      item: if(\n                        local!isTableFillIn,\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: \"Table Preview\",\n                              style: \"STRONG\"\n                            )\n                          },\n                          marginAbove: \"EVEN_LESS\"\n                        ),\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          labelPosition: \"COLLAPSED\",\n                          value: if(\n                            contains(\n                              cons!AS_GCM_TXT_CHECKBOX_CHAR_LIST,\n                              fv!item.displayText\n                            ),\n                            char(fv!item.displayText),\n                            fv!item.displayText\n                          )\n                        )\n                      ),\n                      width: \"AUTO\"\n                    ),\n                    #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                      item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        labelPosition: \"COLLAPSED\",\n                        value: {\n                          #\"SYSTEM_SYSRULES_richTextIcon\"(\n                            icon: if(\n                              fv!item.isSelected,\n                              \"check-square\",\n                              \"square-o\"\n                            ),\n                            color: if(\n                              fv!item.isSelected,\n                              \"ACCENT\",\n                              rule!AS_GCM_getColorBasedOnColorName(colorName: \"GRAY_3\")\n                            ),\n                            linkStyle: \"STANDALONE\",\n                            link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                              saveInto: {\n                                a!save(\n                                  fv!item.isSelected,\n                                  not(fv!item.isSelected)\n                                ),\n\n                              }\n                            ),\n                            altText: rule!AS_GAM_CO_I18N_UT_displayLabel(\n                              bundle: ri!bundle,\n                              bundleKey: if(\n                                fv!item.isSelected,\n                                \"acs_Selected\",\n                                \"acs_NotSelected\"\n                              )\n                            ),\n\n                          )\n                        }\n                      ),\n                      width: \"MINIMIZE\"\n                    )\n                  },\n                  alignVertical: \"TOP\",\n                  marginBelow: \"STANDARD\"\n                ),\n                #\"SYSTEM_SYSRULES_cardLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n                      contents: {\n                        rule!AS_GCM_GRD_TableFillInPreview(\n                          bundle: ri!bundle,\n                          tableFillInMap: fv!item\n                        )\n                      },\n                      marginBelow: \"EVEN_LESS\"\n                    )\n                  },\n                  marginBelow: \"STANDARD\",\n                  showBorder: false,\n                  showWhen: and(\n                    local!isTableFillIn,\n                    rule!AS_CO_UT_isNotBlank(fv!item.tableHeaderRowCells)\n                  )\n                ),\n                #\"SYSTEM_SYSRULES_textField\"(\n                  label: \"Fill-In Type\",\n                  labelPosition: \"ABOVE\",\n                  readOnly: true,\n                  value: if(\n                    local!isTableFillIn,\n                    fv!item.fillinType,\n                    displayvalue(\n                      fv!item.fillinType,\n                      ri!fillInTypeMap.fillinType,\n                      ri!fillInTypeMap.displayText,\n                      \"\"\n                    )\n                  )\n                )\n              },\n              style: \"NONE\",\n              shape: \"SEMI_ROUNDED\",\n              padding: \"STANDARD\",\n              marginBelow: \"STANDARD\",\n              showBorder: false\n            )\n          )\n        ),\n        backgroundColor: \"TRANSPARENT\",\n        padding: \"NONE\",\n        accessibilityText: \"\"\n      )\n    )\n  }\n)"
    },
    "_a-0000e90e-0586-8000-9c1e-011c48011c48_3704306": {
      "name": "AS_GCM_CONS_fillInTypeMaps",
      "type": "Expression Rule",
      "sail_code": "{\n  a!map(\n    /*  String to be inputted into the cite tag for fill-ins  */\n    fillinType: cons!AS_GCM_TXT_FILL_IN_TYPE_SINGLE_LINE,\n    /*  Bundle key for selection of fill-in type  */\n    displayText: \"Single Line\"\n  ),\n  a!map(\n    fillinType: cons!AS_GCM_TXT_FILL_IN_TYPE_MULTI_LINE,\n    displayText: \"Multi Line\"\n  ),\n  a!map(\n    fillinType: cons!AS_GCM_TXT_FILL_IN_TYPE_CHECKBOX,\n    displayText: \"Checkbox\"\n  ),\n  if(\n    ri!returnTableFillinTypes,\n    {\n      a!map(\n        fillinType: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n        displayText: \"Table\"\n      ),\n      a!map(\n        fillinType: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_RICH_TEXT_TABLE,\n        displayText: \"Rich Text Table\"\n      )\n    },\n    {}\n  )\n}"
    },
    "_a-0000e3e6-fb42-8000-9ba5-011c48011c48_157603": {
      "name": "AS_CO_UT_cast",
      "type": "Expression Rule",
      "sail_code": "with(  \n  local!typeNumber: rule!AS_CO_UT_returnTypeNumber(\n    type: ri!type,\n    typeOf: ri!typeOf\n  ),\n\n  /* If the object is empty, use null or {} depending on if it is array type or not */\n  local!objectToCast: if(\n    rule!AS_CO_UT_isNotBlank(ri!value),\n    ri!value,\n    rule!AS_CO_UT_checkIfSingleType(\n      type: ri!type,\n      typeOf: ri!typeOf\n    ),\n    null,\n    {}\n  ),\n\n  cast(\n    local!typeNumber,\n    local!objectToCast\n  )\n  \n)"
    },
    "_a-0000eeba-81af-8000-9e4e-011c48011c48_17395592": {
      "name": "AS_GCM_COL_identifyFillInsWithAI_inProgress",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"EVEN_MORE\"\n        ),\n        #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              label: \"\",\n              labelPosition: \"COLLAPSED\",\n              images: {\n                #\"SYSTEM_SYSRULES_documentImage\"(\n                  document: cons!AS_GCM_DOC_IDENTIFY_FILL_IN_WITH_AI_INPROGRESS\n                )\n              },\n              size: \"EXTRA_SMALL\",\n              isThumbnail: false,\n              style: \"STANDARD\",\n              align: \"CENTER\"\n            ),\n            #\"SYSTEM_SYSRULES_headingField\"(\n              text: \"Fill-ins extraction is in progress\",\n              size: \"EXTRA_SMALL\",\n              headingTag: \"H3\",\n              fontWeight: \"SEMI_BOLD\",\n              align: \"CENTER\",\n              color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_4\"),\n              marginBelow: \"LESS\"\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: \"Processing your clause text. This may take a few moments.\",\n                color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_3\")\n              ),\n              align: \"CENTER\",\n              marginAbove: \"NONE\",\n              marginBelow: \"STANDARD\"\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              buttons: {\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: \"Refresh\",\n                  icon: \"refresh\",\n                  size: \"SMALL\",\n                  style: \"OUTLINE\",\n                  submit: true\n                )\n              },\n              align: \"CENTER\",\n              marginAbove: \"NONE\",\n              marginBelow: \"NONE\"\n            )\n          },\n          height: \"AUTO\",\n          style: rule!AS_GCM_getColorBasedOnColorName(\"WHITE\"),\n          shape: \"SEMI_ROUNDED\",\n          padding: \"STANDARD\",\n          marginBelow: \"STANDARD\",\n          marginAbove: \"STANDARD\",\n          showBorder: false\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"EVEN_MORE\"\n        ),\n      },\n      width: \"MEDIUM_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n  },\n  marginAbove: \"EVEN_MORE\",\n  marginBelow: \"EVEN_MORE\",\n  alignVertical: \"MIDDLE\"\n)"
    },
    "_a-0000eea8-0b3f-8000-9e48-011c48011c48_17241192": {
      "name": "AS_GCM_CPS_identifyFillInsWithAI_clauseText",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_headingField\"(\n    text: \"\",\n    size: \"SMALL\",\n    headingTag: \"H2\",\n    fontWeight: \"SEMI_BOLD\"\n  ),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      rule!AS_GCM_DPL_GAM_COMP_richTextFieldWithTablePlugin(\n        text: ri!clauseText,\n        label: \"\",\n        labelPosition: \"COLLAPSED\",\n        height: \"MEDIUM\",\n        readOnly: true\n      )\n    },\n    height: \"AUTO\",\n    style: rule!AS_GCM_getColorBasedOnColorName(\"WHITE\"),\n    shape: \"SEMI_ROUNDED\",\n    padding: \"STANDARD\",\n    marginBelow: \"STANDARD\",\n    showBorder: false\n  )\n}"
    },
    "f3beafc8-87b7-4029-92d8-0a0f1316617e": {
      "name": "AS_GCM_ConstructTableFillInMaps",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!tables: regexallmatches(\"<table.*?</table>\", ri!clauseText),\n  local!tablesWithFillIns: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!tables,\n    expression: if(\n      regexmatch(\n        \"<table.*?<span style=\"\"background-color:.*?class=\"\"cite.*?</table>\",\n        fv!item\n      ),\n      fv!item,\n      {}\n    )\n  ),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: rule!AS_CO_UT_rejectNullValuesFromArray(local!tablesWithFillIns),\n    expression: a!localVariables(\n      local!tableHeaderRowCells: #\"SYSTEM_SYSRULES_forEach\"(\n        items: regexallmatches(\n          \"<th.*?</th>|<td.*?</td>\",\n          regexfirstmatch(\"<tr.*?</tr>\", fv!item)\n        ),\n        expression: a!defaultValue(\n          stripwith(\n            striphtml(\n              rule!AS_GCM_removeHiddenSpanTagsFromHtml(fv!item)\n            ),\n            concat(\n              char(160),\n              char(10),\n              cons!AS_GCM_TEXT_HYPHEN\n            )\n          ),\n          cons!AS_GCM_TEXT_HYPHEN\n        )\n      ),\n      a!map(\n        uuid: concat(\n          ri!clause[recordType!AS GCM R Clause.clauseNumber],\n          \"_\",\n          rule!AS_GCM_BL_generateUuidForFillIns()\n        ),\n        fillInType: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n        displayText: cons!AS_GCM_TXT_CUSTOM_FILL_IN_TYPE_TABLE,\n        startIndex: find(fv!item, ri!clauseText),\n        tableHeaderRow: regexfirstmatch(\"<tr>.*?</tr>\", fv!item),\n        tableHeaderRowCells: local!tableHeaderRowCells,\n        tableTextWithoutFillIns: rule!AS_GCM_UT_removeCiteAndHighlightTagWithinTables(clauseText: fv!item),\n        tableText: fv!item,\n        uuidsInTable: a!flatten(\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: regexallmatches(\"<span hidden.*?</span>\", fv!item),\n            expression: split(extract(\n              fv!item,\n              \"<span hidden=\"\"\"\">class=\"\"cite \",\n              \"\"\"</span>\"\n            ),\" \")[1]\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000eeba-81af-8000-9e4e-011c48011c48_17419152": {
      "name": "AS_GCM_COL_IdentifyFillInsWithAI_ErrorState",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_columnsLayout\"(\n  marginAbove: \"EVEN_MORE\",\n  marginBelow: \"EVEN_MORE\",\n  columns: {\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n    #\"SYSTEM_SYSRULES_columnLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"EVEN_MORE\"\n        ),\n        #\"SYSTEM_SYSRULES_cardLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_imageField_v1\"(\n              label: \"\",\n              labelPosition: \"COLLAPSED\",\n              images: {\n                #\"SYSTEM_SYSRULES_documentImage\"(\n                  document: cons!AS_GCM_DOC_IDENTIFY_FILL_IN_WITH_AI_ERROR_STATE\n                )\n              },\n              size: \"EXTRA_SMALL\",\n              isThumbnail: false,\n              style: \"STANDARD\",\n              align: \"CENTER\"\n            ),\n            #\"SYSTEM_SYSRULES_headingField\"(\n              text: \"Unable to extract fill-ins\",\n              size: \"EXTRA_SMALL\",\n              headingTag: \"H3\",\n              fontWeight: \"SEMI_BOLD\",\n              align: \"CENTER\",\n              color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_4\"),\n              marginBelow: \"LESS\"\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                text: ri!errorMessage,\n                color: rule!AS_GCM_getColorBasedOnColorName(\"GRAY_3\")\n              ),\n              align: \"CENTER\",\n              marginAbove: \"NONE\",\n              marginBelow: \"STANDARD\"\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              showWhen: a!defaultValue(value: ri!retryShowWhen,default: true),\n              buttons: {\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: \"Retry\",\n                  icon: \"Repeat\",\n                  value: cons!AS_GCM_ENUM_USER_ACTION_RETRY,\n                  saveInto: ri!userAction,\n                  size: \"SMALL\",\n                  style: \"OUTLINE\",\n                  submit: true\n                )\n              },\n              align: \"CENTER\",\n              marginAbove: \"NONE\",\n              marginBelow: \"NONE\"\n            )\n          },\n          height: \"AUTO\",\n          style: rule!AS_GCM_getColorBasedOnColorName(\"WHITE\"),\n          shape: \"SEMI_ROUNDED\",\n          padding: \"STANDARD\",\n          marginBelow: \"STANDARD\",\n          marginAbove: \"STANDARD\",\n          showBorder: false\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          marginAbove: \"EVEN_MORE\",\n          marginBelow: \"EVEN_MORE\"\n        ),\n      },\n      width: \"MEDIUM_PLUS\"\n    ),\n    #\"SYSTEM_SYSRULES_columnLayout\"(contents: {})\n  },\n  alignVertical: \"MIDDLE\"\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3870857": {
      "name": "AS_GCM_DPL_GAM_COMP_richTextFieldWithTablePlugin",
      "type": "Interface",
      "sail_code": "/*\nContext: on page load, any editable RichTextField will load, rendering Quill's\nlogic to format the input into a \"Quill-style\" HTML. RichTextField will also render\nwhen there is any interaction with the form via other components, because it's\ndefault set to refreshAlways=true.\n\nWe want to address the scenario where if the user makes an interaction with the form\nbut does not modify the value of the RichTextField, the naive implementation of\nRichTextField will update the original input text value to be \"Quill-styled\". This causes\nissues in GCM when trying to compare the stored HTML (that wasn't actually updated\nin the RichTextField but because of another form interaction causing the \"Quill-style\"\nto be applied) to the HTML from acquisition.gov.\n\nThe fix works as follow:\n1) Upon loading the form, we will store the original input text value\n2) Upon loading the form, we will also store the Quill-style HTML based on the\noriginal input text value\n3) During each trigger of RichTextField's saveInto (either because of another component's\ninteraction or the RichTextField's interaction), we will check to see if the current Quill-style\nHTML is the same as the original Quill-style HTML.\n3a) If they are the same, this means that either there was an interaction with a non-RTE component\nor that the user reverted their changes to the original input text value. We will then output\nthe original HTML value, instead of the Quill-style HTML\n3b) If they are different, this means that the user changed the input value in the RTE, and therefore\nwe need to store the Quill-style HTML\n\nRefer to the comments for local!originalText, local!quillFormattedOriginalText,\nand for the saveIntos for the RTE\n\nImplications/TO-DOs:\n1) If the RTE is first rendered as read-only on form load, then Quill will not\nexecute to render the Quill-style HTML. Even if there was a checkbox to turn the RTE\neditable, Quill had already loaded and so making it editable does not cause it to execute.\nThis means that we cannot get the Quill-style HTML based on the original input\ntext value at load.\n2) If there is another component on the page that causes the input text to be updated (e.g.,\nthere is a dropdown that depending on the value of the dropdown causes the initial text\nto change), then we will always be storing Quill-style HTML of those input texts. However,\nperhaps this is what is expected.\n*/\n/*\nRichTextField doesn't support validations on the \"required\" field.\nRefer to https://community.appian.com/w/the-appian-playbook/1378/end-user-rich-text-editor-component.\nThis implementation of RTE uses section-level validations if required=true in the RTE\n*/\na!localVariables(\n  local!required: if(\n    ri!readOnly = true,\n    false,\n    rule!AS_CO_UT_booleanDefaultFalse(ri!required)\n  ),\n  /*This stores the original text value on page load*/\n  local!originalText: a!refreshVariable(\n    value: ri!text,\n    refreshOnReferencedVarChange: false\n  ),\n  /*This stores the original text value on page load -- but in quill format*/\n  /*And the way this is actually set is through RTE's immediate save-out on page load of an editable RTE*/\n  /*To actually pass back out the \"quill-style\" HTML*/\n  local!quillFormattedOriginalText: null,\n  if(\n    cons!AS_GCM_TOGGLE_AUTOMATION_TESTING_ENABLED,\n    #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: ri!label,\n      labelPosition: ri!labelPosition,\n      readOnly: ri!readOnly,\n      required: ri!required,\n      requiredMessage: rule!AS_CO_UT_displayRequiredMessage(\n        label: ri!label,\n        requiredMessage: ri!requiredMessage\n      ),\n      validations: ri!validations,\n      instructions: ri!instructions,\n      characterLimit: a!defaultValue(\n        ri!maxSize,\n        cons!AS_GAM_INT_RTE_MAX_CHARACTERS\n      ),\n      value: substitute(\n        joinarray(split(ri!text, \"<p>\"), char(10)),\n        \"</p>\",\n        \"\"\n      ),\n      saveInto: a!save(\n        ri!text,\n        \"<p>\" & joinarray(split(save!value, char(10)), \"</p><p>\") & \"</p>\"\n      )\n    ),\n    {\n      richTextFieldWithTables(\n        label: ri!label,\n        labelPosition: ri!labelPosition,\n        richTextValue: ri!text,\n        richTextSaveInto: if(\n          /*Added condition to handle saves on readonly */ri!readOnly = true(),\n          {},\n          {\n            if(\n              /*This checks that the save-out is the initial RTE save out that happens on page load*/\n              and(\n                rule!AS_CO_UT_isBlank(local!quillFormattedOriginalText),\n                rule!AS_CO_UT_isNotBlank(local!originalText)\n              ),\n              /*On the very first load of the page, only save into quillFormattedOriginalText*/\n              /*This save out happens any time an editable rich text field is rendered*/\n              /*We can determine if its the first load by checking that quillFormattedOriginalText is null*/\n              a!save(\n                local!quillFormattedOriginalText,\n                save!value\n              ),\n              /*On subsequent interactions, first check if the quillFormattedOriginalText value is different than the original*/\n              /*And if so, only then perform the true saves we want*/\n              if(\n                /*preventing ri!text save by updating ri!triggerSave as false*/\n                /*saving ri!triggerSave as true if ri!triggerSave=false as we need to update it to true anyways to trigger ri!text save*/\n                /*scenario: Enabling the button save when there is no change in clause RTE but a change in fill-in type dropdown*/\n                ri!triggerSave = false,\n                a!save(ri!triggerSave, true),\n                {\n                  a!save(\n                    ri!text,\n                    a!match(\n                      value: save!value,\n                      whenTrue: not(\n                        rule!AS_GCM_doesHtmlContainVisibleCharacters(text: fv!value)\n                      ),\n                      then: \"\",\n                      whenTrue: exact(\n                        tostring(fv!value),\n                        tostring(local!quillFormattedOriginalText)\n                      ),\n                      then: /*Run a \"save\" that sets ri!text back to its original value*/\n                      local!originalText,\n                      default: /*Update ri!text*/\n                      regexreplaceall(\n                        /* Removing the transparent background colors to make sure to pasted text is proper */\n                        \"background\\-color:(\" & char(32) & \")?(transparent|#ffffff|#FFFFFF);?\",\n                        fv!value,\n                        \"\"\n                      )\n                    )\n                  )\n                }\n              )\n            ),\n            ri!saveInto\n          }\n        ),\n        readOnly: ri!readOnly,\n        required: ri!required,\n        height: ri!height,\n        validations: ri!validations,\n        instructions: ri!instructions,\n        maxSize: rule!AS_CO_UT_replaceNull(\n          nullableValue: ri!maxSize,\n          replacementValue: cons!AS_GAM_INT_RTE_MAX_CHARACTERS\n        )\n      ),\n      #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n        showWhen: local!required,\n        marginBelow: \"NONE\",\n        validations: #\"SYSTEM_SYSRULES_validationMessage\"(\n          message: rule!AS_CO_UT_displayRequiredMessage(\n            label: ri!label,\n            requiredMessage: ri!requiredMessage\n          ),\n          validateAfter: \"SUBMIT\",\n          showWhen: rule!AS_CO_UT_isBlank(ri!text)\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_4025082": {
      "name": "AS_GCM_QR_getFillInRecDetails",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_queryRecord(\n  sort: ri!sort,\n  returnType: ri!returnType,\n  recordType: recordType!AS GCM Fill In Recommendation,\n  executeWhen: and(\n    ri!executeWhen,\n    or(\n      any(\n        rule!AS_CO_UT_isNotBlank(_),\n        {\n          ri!additionalFilters,\n          ri!logicalExpression,\n          ri!aggregation\n        }\n      ),\n      rule!AS_CO_UT_isNotBlank(ri!fillInRecFillInUuid)\n    )\n  ),\n  /* To ensure proper null checks, we'll force all queryFilter values to not be null */\n  logicalExpression: ri!logicalExpression,\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  filters: {\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM Fill In Recommendation.fillInRecFillInUuid,\n      operator: \"in\",\n      value: ri!fillInRecFillInUuid\n    ),\n    a!match(\n      value: ri!isAutoPopulated,\n      /* When nothing is passed all data should be returned     */\n      whenTrue: a!isNullOrEmpty(fv!value),\n      then: {},\n      equals: true(),\n      then: #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AS GCM Fill In Recommendation.isAutoPopulated,\n        operator: \"=\",\n        value: true\n      ),\n      /*  When false is passed returning all data except isAutoPopulated=true    */\n      default: #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!AS GCM Fill In Recommendation.isAutoPopulated,\n        operator: \"<>\",\n        value: true\n      ),\n      \n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!AS GCM Fill In Recommendation.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: rule!AS_CO_UT_not(input: ri!includeInactive)\n    ),\n    ri!additionalFilters\n  },\n  fields: ri!fields\n)"
    },
    "_a-0000ebf3-ee42-8000-9d69-011c48011c48_12124906": {
      "name": "AS_GCM_doesHtmlContainVisibleCharacters",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /* removing the hidden tag */\n  local!removeHiddenTag: if(\n    ri!ignoreHiddenTag,\n    ri!text,\n    rule!AS_GCM_substituteListFromTextUsingReduce(\n      text: ri!text,\n      /*get hidden tag */\n      find: rule!AS_GCM_extractBalancedTagThatHasGivenText(\n        text: ri!text,\n        uniqueTextInTag: \"span hidden\"\n      ),\n      replaceWith: \"\",\n      replaceAllInstances: true()\n    )\n  ),\n  rule!AS_CO_UT_isNotBlank(\n    /* ignore the extra space */\n    trim(\n      rule!AS_GCM_substituteListFromTextUsingReduce(\n        text: striphtml(local!removeHiddenTag),\n        /* removing the inivisible characters \n        10 - newline\n        32 - space\n        160 - non breakable space (&nbsp)\n        */\n        find: { char(10), char(32), char(160) },\n        replaceWith: \"\",\n        replaceAllInstances: true()\n      )\n    )\n  )\n)"
    },
    "_a-0000e415-3035-8000-9bb2-011c48011c48_292117": {
      "name": "AS_CO_UT_castToDictionaryList",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Dictionary?list',\n  if(\n    rule!AS_CO_UT_isBlank(ri!value),\n    {},\n    ri!value\n  )\n)"
    },
    "_a-0000e3e6-fb42-8000-9ba5-011c48011c48_162769": {
      "name": "AS_CO_UT_typeCompare",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  typeof(ri!value1) = typeof(ri!value2)\n)"
    },
    "_a-0000e2ad-62e7-8000-9ba2-011c48011c48_76433": {
      "name": "AS_CO_UT_indexPath",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldsAndIndices: rule!AS_CO_UT_zINTERNAL_indexPath_nestedFieldArrayHandler(field: ri!field),\n\n  reduce(\n    index(_, _, ri!indexDefault),\n    ri!cdt,\n    local!fieldsAndIndices\n  )\n)"
    },
    "_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39070": {
      "name": "AS_CO_UT_booleanDefaultFalse",
      "type": "Expression Rule",
      "sail_code": "cast(\n  'type!{http://www.appian.com/ae/types/2009}Boolean',\n  if(\n    isnull(ri!boolean),\n    false,\n    ri!boolean\n  )\n)"
    },
    "_a-0000e6c8-d132-8000-9bbe-011c48011c48_469266": {
      "name": "AS_CO_UT_queryRecord",
      "type": "Expression Rule",
      "sail_code": "/*\n\nPLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE\n\nPlease DO NOT auto-format this rule\n\n*/\n\n\n/*Error handling*/\nif(\n  rule!AS_CO_UT_isBlank(ri!returnType),\n  fn!error(concat(\"Null `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  not(contains(rule!AS_CO_CONS_QE_RETURN_TYPES(), ri!returnType)),\n  fn!error(concat(\"Unknown `returnType` passed to AS_CO_UT_queryRecord for recordType `\", ri!recordType, \"`.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  rule!AS_CO_UT_isBlank(ri!recordType),\n  fn!error(concat(\"Null `recordType` passed to AS_CO_UT_queryRecord.  See documentation in AS_CO_UT_queryRecord for further information on how to use this parameter.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` is required (cannot be null) for `returnType` DATA_SUBSET\")),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n    rule!AS_CO_UT_isNotBlank(ri!pagingInfo)\n  ),\n  fn!error(concat(\"`pagingInfo` must be null when the `returnType` is not DATA_SUBSET, instead use `sort` to pass custom-sorting and `startIndex` & `batchSize` will be automatically calculated for you\")),\n  and(\n    not(isnull(ri!pagingInfo)),\n    rule!AS_CO_UT_isNotBlank(ri!sort)\n  ),\n  fn!error(concat(\"`sort` parameter must be null when `pagingInfo` is provided.  Use the sort field of the provided `pagingInfo` instead.\")),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You must provide an input for `aggregationFields` when `returnType` is AGGREGATION\"),\n  and(\n    ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!fields)\n  ),\n  fn!error(\"You cannot provide an input for `fields` when `returnType` is AGGREGATION.  Use `aggregationFields` instead.\"),\n  and(\n    ri!returnType <> cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n    rule!AS_CO_UT_isNotBlank(ri!aggregationFields)\n  ),\n  fn!error(\"You cannot provide an input for `aggregationFields` when `returnType` is not AGGREGATION.  Use `fields` instead.\"),\n  and(\n    rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n    not(contains(\n      {cons!AS_CO_ENUM_QE_RETURN_TYPE_OBJECT_ARRAY, cons!AS_CO_ENUM_QE_RETURN_TYPE_SINGLE_OBJECT, cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET},\n      ri!returnType\n    )),\n  ),\n  fn!error(\"'castToCdtType' is only supported for SINGLE_OBJECT, OBJECT_ARRAY, and DATA_SUBSET return types\"),\n\n  a!localVariables(\n\n    /*Determine the castResultToType*/\n    local!castResultToType: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   'type!{http://www.appian.com/ae/types/2009}Map',\n        /*SINGLE_OBJECT*/ a!defaultValue(ri!castToCdtType, ri!recordType),\n        /*OBJECT_ARRAY*/  rule!AS_CO_UT_returnArrayTypeNumber(type: a!defaultValue(ri!castToCdtType, ri!recordType)),\n        /*AGGREGATION*/   'type!{http://www.appian.com/ae/types/2009}Map?list',\n        /*TOTAL_COUNT*/   'type!{http://www.appian.com/ae/types/2009}Integer',\n      }\n    ),\n\n    /*Determine the batchSize*/\n    local!batchSize: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   ri!pagingInfo.batchSize,\n        /*SINGLE_OBJECT*/ 1,\n        /*OBJECT_ARRAY*/  a!defaultValue(ri!pagingInfo.batchSize, cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE),\n        /*AGGREGATION*/   cons!AS_CO_INT_QUERY_MAX_BATCH_SIZE,\n        /*TOTAL_COUNT*/   1,\n      }\n    ),\n\n    /*Determine the pagingInfo*/\n    local!pagingInfo: if(\n      ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_DATA_SUBSET,\n      /*Use specific pagingInfo for DATA_SUBSET*/\n      ri!pagingInfo,\n      /*Otherwise calculate pagingInfo for all other returnTypes*/\n      #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: local!batchSize,\n        sort: ri!sort\n      )\n    ),\n\n    /*Determine the fetchTotalCount*/\n    local!fetchTotalCount: rule!AS_CO_UT_displayValue(\n      value: ri!returnType,\n      inArray: rule!AS_CO_CONS_QE_RETURN_TYPES(),\n      replacement: {\n        /*DATA_SUBSET*/   true,\n        /*SINGLE_OBJECT*/ false,\n        /*OBJECT_ARRAY*/  false,\n        /*AGGREGATION*/   false,\n        /*TOTAL_COUNT*/   true,\n      }\n    ),\n\n    /*Execute the query*/\n    local!queryResult: a!refreshVariable(\n      value: if(\n        ri!executeWhen = false,\n        null(\n          if(\n            ri!returnType = cons!AS_CO_ENUM_QE_RETURN_TYPE_AGGREGATION,\n            rule!AS_CO_TYPE_Dictionary(),\n            ri!recordType\n          )\n        ),\n        #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n          recordType: ri!recordType,\n          fields: a!defaultValue(\n            ri!fields,\n            ri!aggregationFields\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            logicalExpressions: {\n              #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                operator: \"AND\",\n                ignoreFiltersWithEmptyValues: true,\n                filters: a!defaultValue(ri!filters, {})\n              ),\n              a!defaultValue(ri!logicalExpression, {})\n            }\n          ),\n          pagingInfo: local!pagingInfo,\n          fetchTotalCount: local!fetchTotalCount,\n          relatedRecordData: ri!relatedRecordData\n        )\n      ),\n      refreshOnVarChange: ri!triggerRefresh,\n      refreshAfter: {\"RECORD_ACTION\"}\n    ),\n\n    /*Parse the queryResult*/\n    local!queryResultParse: choose(\n      rule!AS_CO_UT_chooseWherecontainsHelper(\n        value: ri!returnType,\n        inArray: rule!AS_CO_CONS_QE_RETURN_TYPES()\n      ),\n      /*Default, required value based on how AS_CO_UT_chooseWherecontainsHelper operates*/ \"\",\n      /*DATA_SUBSET*/   if(\n        rule!AS_CO_UT_isNotBlank(ri!castToCdtType),\n        /*Note that for a data subset, the parent is a map, but we allow casting the child 'data' field as well*/\n        rule!AS_CO_UT_updateCdtFieldsByFieldValuePairs(\n          cdt: local!queryResult,\n          fieldValuePairs: {\n            field: \"data\",\n            value: cast(\n              rule!AS_CO_UT_returnArrayTypeNumber(type: ri!castToCdtType),\n              local!queryResult.data\n            )\n          }\n        ),\n        local!queryResult\n      ),\n      /*SINGLE_OBJECT*/ local!queryResult.data,\n      /*OBJECT_ARRAY*/  local!queryResult.data,\n      /*AGGREGATION*/   local!queryResult.data,\n      /*TOTAL_COUNT*/   local!queryResult.totalCount,\n    ),\n\n    rule!AS_CO_UT_cast(\n      type: local!castResultToType,\n      value: local!queryResultParse\n    )\n  )\n)\n\n/*\n\nDOCUMENTATION\n\nThis rule is designed to minimize the overhead with querying data and then casting the result\n\n\nRequired Inputs:\n\n1. recordType\n- This is a recordtype! input of the data type to be queried against\n\n2. returnType\n- This depends on the purpose for the query, and should be one of the returnTypes in rule!AS_CO_CONS_QE_RETURN_TYPES\n-- DATA_SUBSET - This will return a DataSubset; pagingInfo is required\n-- SINGLE_OBJECT - This will return a single record whose type is the recordType; pagingInfo must be null\n-- ARRAY_OBJECT - This will return an array of records whose type is an array of the recordType; pagingInfo must be null\n-- AGGREGATION - This will return an array of Dictionaries; pagingInfo must be null\n---- NOTE: If you need Aggregation with paging controls, such as for a grid, use returnType DATA_SUBSET\n-- TOTAL_COUNT - This will return an Integer of the total count; pagingInfo must be null\n\n\nOptional Inputs:\n\n3. executeWhen\n- The query will not execute if this is false, the query will execute if this is true or null\n-- This is meant to operate in a similar manner to the showWhen parameter of components\n- Use this to skip execution of a query without needing to wrap if() statements around the rule\n-- Examples of this would be to skip querying if your filter value is a null ID\n- If the query does not execute, this will return a null value whose type is based on the returnType input\n\n4. triggerRefresh\n- By default, the query will always re-execute whenever any inputs change\n- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change (e.g. after a record action)\n\n5. filters\n- Array of filters to apply to the query, built with a!queryFilter()\n- These filters will be applied with an AND operator\n- These filters will apply in addition to the logicalExpression input, combining both with an AND operator\n\n6. logicalExpression\n- A logical expression to apply to the query, built with a!queryLogicalExpression()\n- This logical expression will apply in addition to the filters input, combining both with an AND operator\n\n7. aggregationFields\n- Aggregation to apply to the query, built with a!aggregationField()\n\n8. fields\n- List of recordFields and relatedRecordFields to return.  When querying a record, any relatedRecordFields are not returned\nby default, and must be specifically requested.\n\n9. pagingInfo\n- Paging info to apply to the query, built with a!pagingInfo() or derived from fv!pagingInfo in grids\n- This is required if passing returnType DATA_SUBSET, otherwise it must be null\n- For returnTypes that are not DATA_SUBSET, the batch size will be automatically calculated depending on the returnType\n-- For example, passing SINGLE_OBJECT will automatically apply a batch size of 1, whereas ARRAY_OBJECT and AGGREGATION will automatically apply a batch size of the defined query batch size maximum\n\n10. sort\n- Array of sort to apply to the query, built with a!sortInfo()\n- This is meant to be used with returnType ARRAY_OBJECT and AGGREGATION, since pagingInfo is not required for these, but a specified sort may be used\n- Cannot be used in conjunction with pagingInfo.sort\n\n11. castToCdtType\n- Any cdt type to the cast the result set. \n- This is meant to be used with only returnType OBJECT_ARRAY and SINGLE_OBJECT.\n\n*/"
    },
    "0002eead-e35c-8000-e17e-7f0000014e7a": {
      "name": "AS GCM Identify Fill Ins With AI",
      "type": "Process Model",
      "sail_code": "// Output: ?\ntrue\n\n// Output: ?\na!defaultValue(\n  value: pv!errorStateRetryCount,\n  default: 0\n) + 1\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Output: ?\nnull\n\n// Input: ?\n=pv!response\n\n// Input: ?\n=pv!refClause\n\n// Input: ?\nrule!AS_GCM_APPREF_GCM_AI_STARTPROCESS_identifyFillinsUsingNativeAI(clauseText: pv!originalClauseText).processModel\n\n// Input: ?\nrule!AS_GCM_APPREF_GCM_AI_STARTPROCESS_identifyFillinsUsingNativeAI(clauseText: pv!originalClauseText).processParameters\n\n// Output: ?\nac!ProcessInfo.pv.isSuccess\n\n// Output: ?\nac!ProcessInfo.pv.aiErrorMessage\n\n// Output: ?\nac!ProcessInfo.pv.response"
    },
    "_a-0000e915-02bc-8000-9c1f-011c48011c48_3773120": {
      "name": "AS_GCM_substituteListFromTextUsingReduce",
      "type": "Expression Rule",
      "sail_code": "/*This rule with replace all texts in ri!find with \"\" if null is passed to ri!replaceWith\n  If null is passed to ri!instanceNum then only the first instance of ri!find will be replaced \n*/\nif(\n  rule!AS_CO_UT_isBlank(ri!find),\n  ri!text,\n  reduce(\n    fn!substitute,\n    ri!text,\n    if(\n      ri!replaceAllInstances = true(),\n      merge(\n        ri!find,\n        a!defaultValue(\n          value: ri!replaceWith,\n          default: repeat(length(ri!find), \"\")\n        )\n      ),\n      merge(\n        ri!find,\n        a!defaultValue(\n          value: ri!replaceWith,\n          default: repeat(length(ri!find), \"\")\n        ),\n        a!defaultValue(\n          value: ri!instanceNum,\n          default: repeat(length(ri!find), 1)\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000eae2-5167-8000-9ce4-011c48011c48_8879314": {
      "name": "AS_GAM_returnCdtOrRecordIndicesByField",
      "type": "Expression Rule",
      "sail_code": "rule!AS_CO_UT_whereContains(\n  values: ri!value,\n  array: if(\n    /*Checking if the data is of type record*/\n    rule!AS_CO_UT_isRecordTypeData(data: ri!cdtOrRecord),\n    index(\n      a!flatten(ri!cdtOrRecord),\n      ri!field,\n      null\n    ),\n    /*Using indexPath to index the data since its not record type data   */\n    rule!AS_CO_UT_indexPath(\n      cdt: a!flatten(ri!cdtOrRecord),\n      field: ri!field,\n      indexDefault: null\n    )\n  )\n)"
    }
  }
}