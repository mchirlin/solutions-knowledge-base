{
  "_metadata": {
    "bundle_id": "CMGT_WFL_CFG_EmailTemplate_-_urnappiantranslation-stringv15f22d685-37f9-42d5-b1b"
  },
  "objects": {
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604797": {
      "name": "CMGT_WFL_QR_GetSendEmailCaseTypeWorkflowTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTaskId,\n      operator: \"in\",\n      value: ri!sendEmailCaseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTaskId,\n      operator: \"in\",\n      value: ri!caseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3603367": {
      "name": "CMGT_WFL_EmailTemplate_RecordAction_CreateUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!CMGT_CB_UTIL_LoadBrandingMap(),\n  local!isCreate: rule!CMGT_UTIL_IsBlank(\n    value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n  ),\n  local!referencedTaskNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailReferenceTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTask.nameLabel,\n    null()\n  ),\n  local!referencedTaskBlockNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailTaskBlockTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask.taskBlock.label,\n    null()\n  ),\n  local!referencedCaseTypeTaskNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailCaseTypeWorkflowTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask.caseType.name,\n    null()\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n          items: {\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_stampField\"(\n                icon: \"envelope-open-text\",\n                contentColor: local!brandingMap.StandardStampContentColor,\n                backgroundColor: local!brandingMap.StandardStampBackgroundColor,\n                size: \"TINY\",\n                shape: local!brandingMap.StandardStampShape\n              ),\n              width: \"MINIMIZE\"\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_headingField\"(\n                text: if(\n                  local!isCreate,\n                  #\"urn:appian:translation-string:v1:46b8e7eb-9250-4bc1-87ba-785b0eb505a2\",\n                  #\"urn:appian:translation-string:v1:5f22d685-37f9-42d5-b1b1-bda7f782cf18\"\n                ),\n                headingTag: \"H1\",\n                fontWeight: \"SEMI_BOLD\",\n                size: local!brandingMap.H1Size,\n                marginAbove: \"STANDARD\"\n              )\n            )\n          },\n          alignVertical: \"MIDDLE\",\n          spacing: \"STANDARD\",\n          marginBelow: \"NONE\",\n          marginAbove: \"NONE\"\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n            color: local!brandingMap.secondaryTextColor,\n            size: \"SMALL\"\n          )\n        )\n      },\n      padding: \"STANDARD\",\n      showBorder: false()\n    ),\n\n    showTitleBarDivider: true(),\n    contentsWidth: \"FULL\",\n    contents: {\n      rule!CMGT_WFL_DisplayInfoBanner_EmailTemplate(\n        brandingMap: local!brandingMap,\n        primaryMessage: #\"urn:appian:translation-string:v1:352e8f93-81ec-4882-a059-01abdbe209b1\",\n        showWhen: not(local!isCreate),\n        caseTypeWorkFlowNames: local!referencedCaseTypeTaskNames,\n        referenceTaskNames: local!referencedTaskNames,\n        taskBlockNames: local!referencedTaskBlockNames\n      ),\n      rule!CMGT_WFL_EmailTemplate_Details(emailTemplate: ri!emailTemplate)\n    },\n    buttons: {\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: if(\n            local!isCreate,\n            #\"urn:appian:translation-string:v1:b8033487-0a9e-4a1b-8970-b49eb8ad8cc7\",\n            #\"urn:appian:translation-string:v1:06dbafc7-e085-40de-a68a-c83054c1d7ec\"\n          ),\n          submit: true,\n          style: \"SOLID\",\n          validate: true\n        ),\n        secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:edd4df67-d878-46d6-ab67-732a3700a588\",\n          saveInto: {\n            a!save(\n              ri!documentsToDelete,\n              rule!CMGT_UTIL_Filter(\n                records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n                field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateAttachmentId,\n                value: null\n              )[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n            ),\n            a!save(ri!emailTemplate, null)\n          },\n          submit: true,\n          style: \"OUTLINE\",\n          validate: false\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000edf8-ac88-8000-9d80-011c48011c48_4290472": {
      "name": "CMGT_Document_IconLogic",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: lower(\n   ri!documentExtension\n  ),\n  equals: \"doc\",\n  equals: \"docx\",\n  then: \"file-word-o\",\n  equals: \"txt\",\n  then: \"file-text-o\",\n  equals: \"png\",\n  equals: \"jpg\",\n  then: \"file-image-o\",\n  equals: \"mov\",\n  equals: \"mp4\",\n  then: \"file-movie-o\",\n  equals: \"xls\",\n  equals: \"xlsx\",\n  equals: \"xlsm\",\n  then: \"file-excel-o\",\n  equals: \"pptx\",\n  then: \"file-powerpoint-o\",\n  equals: \"pdf\",\n  then: \"file-pdf-o\",\n  equals: \"zip\",\n  then: \"file-archive-o\",\n  default: \"file-o\"\n),"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180568": {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "sail_code": "not(rule!CMGT_UTIL_IsBlank(ri!input))"
    },
    "_a-0000eaf1-7a52-8000-9c42-011c48011c48_1227353": {
      "name": "CMGT_UTIL_StripHtmlTags",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!replacedText: substitute(\n    substitute(ri!value, \"<p>\", \"\"),\n    \"</p>\",\n    \"\"\n  ),\n  if(\n    ri!isFormatted,\n    /*The striphtml() will automatically substitue char(10) for <br>*/striphtml(local!replacedText),\n    striphtml(\n      substitute(local!replacedText, \"<br>\", \" \")\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3602456": {
      "name": "CMGT_WFL_QR_GetEmailTemplates",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_EmailTemplate,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId,\n      operator: \"in\",\n      value: ri!emailTemplateId\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailCaseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailReferenceTasks,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailTaskBlockTasks\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612864": {
      "name": "CMGT_WFL_EmailTemplate_Details",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: #\"SYSTEM_SYSRULES_textField\"(\n            label: #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\",\n            labelPosition: \"ABOVE\",\n            value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n            saveInto: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n            characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n            required: true,\n            requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n              #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\"\n            )\n          ),\n\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\"),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n\n      }\n    ),\n    #\"SYSTEM_SYSRULES_textField\"(\n      label: #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\",\n      labelPosition: \"ABOVE\",\n      value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      saveInto: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n      required: true,\n      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\"\n      )\n    ),\n    rule!CMGT_UTIL_RichTextField(\n      label: #\"urn:appian:translation-string:v1:8af4d705-f521-4a97-a2b3-0eb63aff4217\",\n      labelPosition: \"ABOVE\",\n      value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.body],\n      maxSize: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE,\n      required: true,\n      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:8af4d705-f521-4a97-a2b3-0eb63aff4217\"\n      )\n    ),\n    #\"SYSTEM_SYSRULES_fileUploadField_v1\"(\n      label: #\"urn:appian:translation-string:v1:83b3fbbe-7b13-4700-97e6-d9c1c99d26a9\",\n      labelPosition: \"ABOVE\",\n      target: cons!CMGT_WFL_FLD_EMAIL_TEMPLATE_ATTACHMENTS,\n      value: index(\n        rule!CMGT_UTIL_Filter(\n          records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n          value: true\n        ),\n        recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n        null()\n      ),\n      saveInto: {\n        a!save(\n          ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          a!localVariables(\n            local!allExistingEmailAttachments: rule!CMGT_UTIL_Filter(\n              records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n              field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateAttachmentId,\n              value: null,\n              filterType: \"REJECT\"\n            ),\n            local!newEmailAttachments: #\"SYSTEM_SYSRULES_forEach\"(\n              items: difference(\n                tointeger(save!value),\n                tointeger(\n                  local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n                )\n              ),\n              expression: a!localVariables(\n                local!documentContent: property(\n                  property(\n                    #\"SYSTEM_SYSRULES_fileUploadField_v1\"(value:fv!item),\n                    \"contents\",\n                    null\n                  ),\n                  \"value\",\n                  null\n                ),\n                local!documentSize: property(\n                  local!documentContent,\n                  \"fileSizeDisplay\",\n                  null\n                ),\n                local!documentExtension: property(local!documentContent, \"extension\", null),\n                local!documentName: property(local!documentContent, \"name\", null),\n                recordType!CMGT_WFL_CFG_EmailTemplateAttachments(\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateId: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId],\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId: fv!item,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.fullName: local!documentName,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.sizeDisplay: local!documentSize,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension: local!documentExtension,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extensionIcon: rule!CMGT_Document_IconLogic(local!documentExtension[1]),\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive: true\n                )\n              )\n            ),\n            local!deletedAttachmentsDocIds: difference(\n              tointeger(\n                local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              ),\n              tointeger(save!value)\n            ),\n            local!deletedEmailAttachments: if(\n              rule!CMGT_UTIL_IsNotBlank(local!deletedAttachmentsDocIds),\n              #\"urn:appian:function:v1:a:update\"(\n                rule!CMGT_UTIL_Filter(\n                  records: local!allExistingEmailAttachments,\n                  field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n                  value: local!deletedAttachmentsDocIds\n                ),\n                recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n                false()\n              ),\n              null()\n            ),\n            local!unmodifiedAttachmentDocsIds: difference(\n              tointeger(\n                local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              ),\n              tointeger(\n                local!deletedEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              )\n            ),\n            local!unmodifiedEmailAttachments: rule!CMGT_UTIL_Filter(\n              records: local!allExistingEmailAttachments,\n              field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n              value: local!unmodifiedAttachmentDocsIds\n            ),\n            /*Flatten back the maps we modified*/\n            rule!CMGT_UTIL_RejectBlank(\n              a!flatten(\n                {\n                  local!deletedEmailAttachments,\n                  local!unmodifiedEmailAttachments,\n                  local!newEmailAttachments\n                }\n              )\n            )\n          )\n        )\n      },\n      validations: {\n        if(\n          sum(fv!files.size) > 10000000,\n          #\"urn:appian:translation-string:v1:a1087a9c-a240-49a1-9c4b-0bad6508d7e7\",\n          \"\"\n        ),\n        if(\n          contains(upper(fv!files.extension), \"EXE\"),\n          #\"urn:appian:translation-string:v1:5c813578-8c25-4776-ab40-324949c19c6b\"(\n            #\"urn:appian:translation-variable:v1:35c1a6e6-523c-4c14-8060-a99ae8ad0c95\": joinarray(\n              index(\n                fv!files,\n                \"name\",\n                wherecontains(\"EXE\", upper(fv!files.extension))\n              ),\n              \", \"\n            )\n          ),\n          \"\"\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000eb88-676f-8000-9c81-011c48011c48_1925601": {
      "name": "CMGT_CB_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_MergeMaps(\n  map1: rule!CMGT_UTIL_LoadBrandingMap(),\n  map2: a!localVariables(\n    local!branding: getbrandingconfig(\n      cons!CMGT_WFL_DOC_DEFAULT_BRANDING_CONFIG,\n      true\n    ),\n    local!output: reduce(\n      #\"urn:appian:function:v1:a:update\"(_, _, _),\n      a!map(),\n      merge(\n        {\n          local!branding.defaultBranding.key,\n          local!branding.customBranding.key\n        },\n        {\n          local!branding.defaultBranding.value,\n          local!branding.customBranding.value\n        }\n      )\n    ),\n    local!output\n  )\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180481": {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(a!flatten(ri!array)),\n  reject(a!isNullOrEmpty(_), a!flatten(ri!array))\n)"
    },
    "_a-0000ea1d-36f5-8000-9bef-011c48011c48_538451": {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "sail_code": "/*Reference:\nhttps://community.appian.com/w/the-appian-playbook/846/generating-uuids-guids*/\nfn!lower(\n  concat(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "af326a29-a1c8-4399-a28d-996f85819d9e": {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    apply(\n      rule!CMGT_UTIL_Filter_CreateFieldValuePair(\n        field: _,\n        value: ri!value,\n        allFields: a!flatten(ri!field)\n      ),\n      a!flatten(ri!field)\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!CMGT_UTIL_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "bd8f3e49-406c-4eab-a3a4-ce119dfbb5ce": {
      "name": "CMGT_UTIL_RichTextField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*\n  This should never be above 4000 characters as it will go over the amount allowed in synced records\n  If using the RTE in other places for customization, the field length should be 4000 characters to allow for additional HTML to be added.\n  The RTE calculates the max length allowed on the front end for the end-user, but will not go over that amount on the back-end\n  */\n  local!maxSize: a!defaultValue(\n    value: ri!maxSize,\n    default: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE\n  ),\n  if(\n    cons!CMGT_BOL_AUTOMATION_TESTING_LABEL_SWITCH,\n    #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: ri!label,\n      labelPosition: if(rule!CMGT_UTIL_IsBlank(ri!label),\"COLLAPSED\",ri!labelPosition),\n      instructions: ri!instructions,\n      helpTooltip: ri!helpToolTip,\n      placeholder: ri!placeholder,\n      value: rule!CMGT_UTIL_StripHtmlTags(value: ri!value, isFormatted: true),\n      saveInto: a!save(\n        ri!value,\n        \"<p>\" & substitute(save!value, char(10), \"<br>\") & \"</p>\"\n      ),\n      refreshAfter: ri!refreshAfter,\n      characterLimit: local!maxSize,\n      height: ri!height,\n      showWhen: ri!showWhen,\n      required: ri!required,\n      requiredMessage: ri!requiredMessage,\n      readOnly: ri!readOnly,\n      disabled: ri!disabled\n    ),\n    #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n      label: ri!label,\n      labelPosition: if(rule!CMGT_UTIL_IsBlank(ri!label),\"COLLAPSED\",ri!labelPosition),\n      instructions: ri!instructions,\n      helpTooltip: ri!helpToolTip,\n      placeholder: ri!placeholder,\n      value: ri!value,\n      saveInto: {\n        ri!value,\n        ri!additionalSaves\n      },\n      sizeLimit: local!maxSize,\n      height: a!defaultValue(ri!height, \"SHORT_PLUS\"),\n      showWhen: ri!showWhen,\n      required: ri!required,\n      requiredMessage: ri!requiredMessage,\n      readOnly: ri!readOnly,\n      disabled: ri!disabled,\n      validations: ri!validations\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604784": {
      "name": "CMGT_WFL_QR_GetSendEmailTaskBlockTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.sendEmailTaskBlockTaskId,\n      operator: \"in\",\n      value: ri!sendEmailTaskBlockTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTaskId,\n      operator: \"in\",\n      value: ri!taskBlockTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604539": {
      "name": "CMGT_WFL_DisplayInfoBanner_EmailTemplate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!isCollapsed: true(),\n  local!showWhenForTasks: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!referenceTaskNames),\n    local!isCollapsed = false()\n  ),\n  local!showWhenForTaskBlocks: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!taskBlockNames),\n    local!isCollapsed = false()\n  ),\n  local!showWhenForCaseTypeWorkflows: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!caseTypeWorkFlowNames),\n    local!isCollapsed = false()\n  ),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"info-circle\",\n                  color: ri!brandingMap.InfoAccentColor\n                ),\n                \" \",\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: ri!primaryMessage)\n              }\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: if(\n                  local!isCollapsed,\n                  \"angle-down-bold\",\n                  \"angle-up-bold\"\n                ),\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: a!save(\n                    local!isCollapsed,\n                    not(local!isCollapsed)\n                  )\n                ),\n                linkStyle: \"STANDALONE\",\n                color: ri!brandingMap.StandardTextColor,\n                size: \"MEDIUM\"\n              ),\n              align: \"RIGHT\"\n            )\n          )\n        },\n        marginBelow: \"NONE\"\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!referenceTaskNames) = 1,\n              #\"urn:appian:translation-string:v1:0fd1b5e8-27d7-435b-af55-17db70deff8c\",\n              #\"urn:appian:translation-string:v1:b3937399-62c6-489c-9594-fc51cb8074f0\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!referenceTaskNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForTasks,\n        marginBelow: if(\n          or(\n            local!showWhenForCaseTypeWorkflows,\n            local!showWhenForTaskBlocks\n          ),\n          \"NONE\",\n          \"EVEN_LESS\"\n        ),\n        marginAbove: \"NONE\"\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!taskBlockNames) = 1,\n              #\"urn:appian:translation-string:v1:179fc44d-752c-4185-8e1f-775a538abd8d\",\n              #\"urn:appian:translation-string:v1:34b0c22a-1b36-4741-98ff-fffca01ee0e3\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!taskBlockNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForTaskBlocks,\n        marginBelow: if(\n          local!showWhenForCaseTypeWorkflows,\n          \"NONE\",\n          \"EVEN_LESS\"\n        )\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!caseTypeWorkFlowNames) = 1,\n              #\"urn:appian:translation-string:v1:b8af0998-cbb6-4bc1-bfde-d4c65953ab10\",\n              #\"urn:appian:translation-string:v1:c9e8165d-aed0-40d7-a023-d0903986c59c\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!caseTypeWorkFlowNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForCaseTypeWorkflows,\n        marginBelow: \"EVEN_LESS\"\n      )\n    },\n    showWhen: and(\n      ri!showWhen,\n      any(\n        rule!CMGT_UTIL_IsNotBlank,\n        {\n          ri!caseTypeWorkFlowNames,\n          ri!referenceTaskNames,\n          ri!taskBlockNames\n        }\n      )\n    ),\n    style: ri!brandingMap.InfoBackgroundColor,\n    marginBelow: \"STANDARD\",\n    marginAbove: \"NONE\",\n    showBorder: false(),\n    decorativeBarPosition: \"START\"\n  )\n)"
    },
    "0002ed4a-bade-8000-1ea3-7f0000014e7a": {
      "name": "CMGT_WFL_EmailTemplate_CreateUpdate",
      "type": "Process Model",
      "sail_code": "// Input: ?\n= pv!documentsToDelete[tp!instanceindex]\n\n// Input: ?\n=pv!emailTemplates\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_EmailTemplate\n\n// Output: ?\nAC!RecordsUpdated\n\n// Output: ?\nrule!CMGT_WFL_EmailTemplate_SetMetaData(\n  initiator: pp!initiator,\n  emailTemplates: pv!emailTemplates\n)\n\n// Output: ?\na!match(\n  value: pv!documentsToDelete,\n  whenTrue: rule!CMGT_UTIL_IsNotBlank(input: fv!value),\n  then: pv!documentsToDelete,\n  whenTrue: rule!CMGT_UTIL_IsNotBlank(\n    input: a!flatten(\n      pv!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n    )\n  ),\n  then: rule!CMGT_UTIL_Filter(\n    records: a!flatten(\n      pv!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n    ),\n    field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n    value: false\n  )[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n  default: null()\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604771": {
      "name": "CMGT_WFL_QR_GetSendEmailReferenceTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailReferenceTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.sendEmailReferenceTaskId,\n      operator: \"in\",\n      value: ri!sendEmailReferenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTaskId,\n      operator: \"in\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTask,\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604833": {
      "name": "CMGT_WFL_EmailTemplateAttachment_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!emailTemplateAttachments,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.documentName,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"name\"\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"extension\"\n        )\n      ),\n      a!map(\n        field:  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.size,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"size\"\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604826": {
      "name": "CMGT_WFL_EmailTemplate_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!emailTemplates,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments,\n        value: rule!CMGT_WFL_EmailTemplateAttachment_SetMetaData(\n          emailTemplateAttachments: fv!item[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    }
  }
}