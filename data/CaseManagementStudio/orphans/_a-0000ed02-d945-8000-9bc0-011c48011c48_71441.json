{
  "uuid": "_a-0000ed02-d945-8000-9bc0-011c48011c48_71441",
  "name": "CMGT_WFL_AutomationRule_Configure_Action",
  "type": "Interface",
  "description": "Interface used to configure an action",
  "sail_code": "a!localVariables(\n  local!actions: rule!CMGT_UTIL_Filter(\n    records:rule!CMGT_CFG_ENUM_ACTIONS(),\n    field: \"context\",\n    value: cons!CMGT_CFG_TXT_ACT_CONTEXT_CASE\n  ),\n  local!selectedAction: rule!CMGT_UTIL_Filter(\n    records: local!actions,\n    field: \"actionCode\",\n    value: a!flatten(\n      ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.actionCode]\n    )\n  ),\n  {\n    #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n      items: {\n        #\"SYSTEM_SYSRULES_sideBySideItem\"(\n          item: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n            label: #\"urn:appian:translation-string:v1:ab4f437b-4aa7-4e2c-a59f-d726a9fac1e5\",\n            choiceLabels: local!actions.name,\n            choiceValues: local!actions.actionCode,\n            value: a!defaultValue(\n              rule!CMGT_UTIL_RejectBlank(\n                a!flatten(\n                  ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.actionCode]\n                )\n              ),\n              null\n            ),\n            saveInto: {\n              a!save(\n                ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction],\n                {\n                  if(\n                    rule!CMGT_UTIL_IsBlank(\n                      ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction]\n                    ),\n                    recordType!CMGT_WFL_CFG_TaskActions(\n                      recordType!CMGT_WFL_CFG_TaskActions.caseTypeWorkflowTaskUuid: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.caseTypeWorkflowTaskUuid],\n                      recordType!CMGT_WFL_CFG_TaskActions.taskActionUuid: rule!CMGT_UTIL_GenerateUuid_NonPlugin(),\n                      recordType!CMGT_WFL_CFG_TaskActions.actionCode: save!value,\n                      recordType!CMGT_WFL_CFG_TaskActions.isActive: true,\n\n                    ),\n                    #\"urn:appian:function:v1:a:update\"(\n                      ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction],\n                      {\n                        recordType!CMGT_WFL_CFG_TaskActions.actionCode,\n                        recordType!CMGT_WFL_CFG_TaskActions.modifedBy,\n                        recordType!CMGT_WFL_CFG_TaskActions.modifiedOn\n                      },\n                      { save!value, loggedInUser(), now() }\n                    )\n                  )\n                }\n              ),\n              a!save(\n                local!selectedAction,\n                rule!CMGT_UTIL_Filter(\n                  records: local!actions,\n                  field: \"actionCode\",\n                  value: save!value\n                )\n              ),\n              if(\n                or(\n                  local!selectedAction.actionCode = \"ASSIGN_CASE\",\n                  local!selectedAction.actionCode = \"REASSIGN_CASE\"\n                ),\n                a!save(\n                  ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction],\n                  if(\n                    rule!CMGT_UTIL_IsBlank(\n                      ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction]\n                    ),\n                    recordType!CMGT_CFG_AssignmentRules(\n                      recordType!CMGT_CFG_AssignmentRules.taskActionUuid: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.taskActionUuid]\n                    ),\n                    recordType!CMGT_CFG_AssignmentRules(\n                      recordType!CMGT_CFG_AssignmentRules.assignmentRuleId: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.associatedAssignmentRule.assignmentRuleId],\n                      recordType!CMGT_CFG_AssignmentRules.taskActionUuid: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.taskActionUuid],\n                      recordType!CMGT_CFG_AssignmentRules.taskActionId: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction.taskActionId]\n                    ),\n\n                  )\n                ),\n                {}\n              )\n            },\n            placeholder: #\"urn:appian:translation-string:v1:94dee9b4-fc55-4b1b-af21-a3f5656802be\"\n          )\n        ),\n        #\"SYSTEM_SYSRULES_sideBySideItem\"()\n      }\n    ),\n    if(\n      rule!CMGT_UTIL_IsNotBlank(local!selectedAction),\n      local!selectedAction[1].configurationRule(\n        automationRuleTaskAction: ri!caseTypeWorkflowTask[recordType!CMGT_WFL_CFG_CaseTypeWorkflowTask.automationTaskAction],\n        brandingMap: ri!brandingMap,\n        actionRefreshVariable: ri!actionRefreshVariable\n\n      ),\n      null\n    )\n  }\n)",
  "calls": [
    {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_CFG_ENUM_ACTIONS",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "CMGT_CFG_TXT_ACT_CONTEXT_CASE",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "CMGT_WFL_CFG_CaseTypeWorkflowTask",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    },
    {
      "name": "CMGT_WFL_CFG_TaskActions",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    },
    {
      "name": "CMGT_CFG_AssignmentRules",
      "type": "Record Type",
      "dep_type": "USES_RECORD_TYPE"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    },
    {
      "name": "Unknown",
      "type": "Translation String",
      "dep_type": "CALLS"
    }
  ],
  "called_by": []
}