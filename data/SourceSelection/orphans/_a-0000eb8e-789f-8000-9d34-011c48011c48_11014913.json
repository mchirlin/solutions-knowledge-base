{
  "uuid": "_a-0000eb8e-789f-8000-9d34-011c48011c48_11014913",
  "name": "AS_GSS_UT_duplicateEvaluationFactors",
  "type": "Expression Rule",
  "description": null,
  "sail_code": "a!localVariables(\n  local!parentFactors: ri!factors[where(apply(isnull(_), ri!factors.parentCriteriaId))],\n  local!subFactors: ri!factors[where(apply(a!isNotNullOrEmpty(_), ri!factors.parentCriteriaId))],\n  local!duplicateParentFactors: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!parentFactors,\n    expression: 'type!{urn:com:appian:types:AS:GSS}AS_GSS_Criteria'(\n      criteriaId: null,\n      evaluation: ri!newEvaluation,\n      parentCriteriaId: null,\n      factorNumber: fv!item.factorNumber,\n      criteriaName: fv!item.criteriaName,\n      criteriaDesc: fv!item.criteriaDesc,\n      instruction: fv!item.instruction,\n      criteriaStatus: rule!AS_GSS_QE_getRefDataByTypes(\n        refDataIds: cons!AS_GSS_REF_ID_EVALUATION_STATUS_TEMP\n      ),\n      criteriaChair: null,\n      evaluatorTeam: null,\n      assignments: {},\n      dueDate: null,\n      completedOn: null,\n      completedBy: null,\n      factorWeight: fv!item.factorWeight,\n      refRatingType: fv!item.refRatingType,\n      ratingType: null /*handled in process*/,\n      isActive: true\n    )\n  ),\n  local!duplicateSubfactors: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!subFactors,\n    expression: 'type!{urn:com:appian:types:AS:GSS}AS_GSS_Criteria'(\n      criteriaId: null,\n      evaluation: ri!newEvaluation,\n      /* Track the parent factor index so it can be mapped after write */\n      parentCriteriaId: wherecontains(\n        fv!item.parentCriteriaId,\n        local!parentFactors.criteriaId\n      ),\n      factorNumber: fv!item.factorNumber,\n      criteriaName: fv!item.criteriaName,\n      criteriaDesc: fv!item.criteriaDesc,\n      instruction: fv!item.instruction,\n      criteriaStatus: rule!AS_GSS_QE_getRefDataByTypes(\n        refDataIds: cons!AS_GSS_REF_ID_EVALUATION_STATUS_TEMP\n      ),\n      criteriaChair: null,\n      evaluatorTeam: null,\n      assignments: {},\n      dueDate: null,\n      completedOn: null,\n      completedBy: null,\n      factorWeight: fv!item.factorWeight,\n      refRatingType: fv!item.refRatingType,\n      ratingType: null /*handled in process*/,\n      isActive: true\n    )\n  ),\n  a!map(\n    parentFactors: local!duplicateParentFactors,\n    subFactors: local!duplicateSubfactors\n  )\n)",
  "calls": [
    {
      "name": "AS_GSS_QE_getRefDataByTypes",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    },
    {
      "name": "AS_GSS_REF_ID_EVALUATION_STATUS_TEMP",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "AS_GSS_zTST_duplicateEvaluationFactors",
      "type": "Expression Rule",
      "dep_type": "CALLS"
    }
  ],
  "called_by": []
}