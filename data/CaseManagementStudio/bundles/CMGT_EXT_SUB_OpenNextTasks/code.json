{
  "_metadata": {
    "bundle_id": "CMGT_EXT_SUB_OpenNextTasks"
  },
  "objects": {
    "_a-0000e990-c462-8000-9ba7-011c48011c48_29411": {
      "name": "CMGT_QR_GetTask",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_Task,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  groupByFields: ri!groupByFields,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.taskId,\n      operator: \"in\",\n      value: ri!taskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.caseId,\n      operator: \"in\",\n      value: ri!caseId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.statusId,\n      operator: \"in\",\n      value: ri!statusId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.dueOn,\n      operator: \">\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate - 1,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn, true)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.dueOn,\n      operator: \"<=\",\n      value: rule!CMGT_UTIL_ConvertDatetoDatetime(\n        date: ri!dueOnDate,\n        useSystemTimeZone: a!defaultValue(ri!useSystemTimeZoneForDueOn, true)\n      )\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.isCurrent,\n      operator: \"=\",\n      value: a!defaultValue(ri!isCurrentTask, true),\n      applyWhen: a!defaultValue(ri!isCurrentTaskApplyWhen, true),\n      \n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_Task.taskIntentionCode,\n      operator: \"in\",\n      value: a!defaultValue(\n        ri!taskIntentionCodes,\n        {\n          cons!CMGT_WFL_CASE_TYPE_TASK_INTENTION_CODE_WORKFLOW\n        }\n      )\n    ),\n    \n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!includeRoles,\n      {\n        recordType!CMGT_Task.roles\n      },\n      {}\n    ),\n    if(\n      ri!includeMilestone,\n      {\n        recordType!CMGT_Task.milestone\n      },\n      {}\n    ),\n    if(\n      ri!includeCase,\n      {\n        recordType!CMGT_Task.case\n      },\n      {}\n    ),\n    if(\n      ri!includeBranches,\n      {\n        recordType!CMGT_Task.beforeTaskInstanceBranches,\n        recordType!CMGT_Task.beforeTaskInstanceBranches,\n        recordType!CMGT_Task.beforeTaskInstanceBranches,\n        #\"urn:appian:record-relationship:v1:ee5aa46d-0228-430f-a794-1134a11fbcc0/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/3280de96-3518-4a9e-b8ae-854a84562f07\"\n      },\n      {}\n    ),\n    recordType!CMGT_Task.taskBehaviorType,\n    recordType!CMGT_Task.status,\n    recordType!CMGT_Task.taskResponseOptions,\n    recordType!CMGT_Task.selectedTaskResponseOption,\n    recordType!CMGT_Task.conditionSet,\n    recordType!CMGT_Task.conditionSet,\n    #\"urn:appian:record-relationship:v1:ee5aa46d-0228-430f-a794-1134a11fbcc0/5189c3ac-98e2-4a82-8598-2e9561baec9d/64b891e4-359b-48b4-9f47-2a3af4695c34/52813580-ecf3-49c7-be71-568ab452d54a\",\n    recordType!CMGT_Task.createCaseTask,\n    recordType!CMGT_Task.sendEmailTask,\n    recordType!CMGT_Task.sendEmailTask,\n    recordType!CMGT_Task.automationTaskAction\n  },\n  logicalExpressions: {\n    ri!additionalLogicalExpression,\n    rule!CMGT_Task_AutomationRuleGlobalLogicalExpression(\n      taskIntentionCodes: ri!taskIntentionCodes\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  relatedRecordData: ri!relatedRecordData,\n  sort: ri!sort,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e9fd-9441-8000-9bdc-011c48011c48_345334": {
      "name": "CMGT_QR_GetTaskBranch",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_TaskBranch,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  logicalExpressions: ri!additionalLogicalExpression,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_TaskBranch.beforeTaskInstance.taskId,\n      operator: \"in\",\n      value: ri!beforeTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_TaskBranch.taskBranchId,\n      operator: \"in\",\n      value: ri!taskBranchId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_TaskBranch.isCurrent,\n      operator: \"in\",\n      value: a!defaultValue(\n        ri!isCurrent,\n        {true}\n      )\n    )\n  },\n  fields: {\n    a!defaultValue(ri!fields, {}),\n    recordType!CMGT_TaskBranch.beforeTaskInstance,\n    recordType!CMGT_TaskBranch.afterTaskInstance,\n    \n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000ecf6-527e-8000-9bbc-011c48011c48_56681": {
      "name": "CMGT_CFG_ENUM_ACTIONS",
      "type": "Expression Rule",
      "sail_code": "/*Contains the list of all actions for use in the Automation \nand their attributes. */\n{\nrule!CMGT_CFG_ENUM_ACT_ASSIGN_CASE(),\nrule!CMGT_CFG_ENUM_ACT_REASSIGN_CASE(),\nrule!CMGT_CFG_ENUM_ACT_ASSIGN_TASK(),\nrule!CMGT_CFG_ENUM_ACT_REASSIGN_TASK(),\nrule!CMGT_CFG_ENUM_ACT_WORKFLOW_ROUTING(),\nrule!CMGT_CFG_ENUM_ACT_SEND_EMAIL()\n  /* to add a new action, copy the above expression rule and replace the \n  values with the process model constant and attributes \n  of the newly configured action */\n  \n}"
    },
    "_a-0000ece2-0128-8000-9bb8-011c48011c48_37290": {
      "name": "CMGT_UTIL_CalculateDueDateBasedOnSLA",
      "type": "Expression Rule",
      "sail_code": "if(\n  any(a!isNullOrEmpty, { ri!dateTime, ri!SLA }),\n  null(),\n  a!localVariables(\n    local!details: cast(\n      'type!{http://www.appian.com/ae/types/2009}Map',\n      if(\n        a!isNotNullOrEmpty(ri!SLA),\n        #\"SYSTEM_SYSRULES_fromJson_v1\"(ri!SLA),\n        null\n      )\n    ),\n    local!days: a!defaultValue(\n      value: index(local!details, \"days\", null()),\n      default: 0\n    ),\n    local!hours: a!defaultValue(\n      value: index(local!details, \"hours\", null()),\n      default: 0\n    ),\n    local!minutes: a!defaultValue(\n      value: index(local!details, \"minutes\", null()),\n      default: 0\n    ),\n    local!isBusinessDays: a!defaultValue(\n      value: index(local!details, \"isBusinessDays\", false()),\n      default: false()\n    ),\n    a!addDateTime(\n      startDateTime: ri!dateTime,\n      days: local!days,\n      hours: local!hours,\n      minutes: local!minutes,\n      useProcessCalendar: local!isBusinessDays\n    )\n  )\n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_145917": {
      "name": "CMGT_UTIL_Distinct",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(ri!value),\n  union(\n    a!flatten(ri!value),\n    a!flatten(ri!value)\n  )\n)"
    },
    "_a-0000e9c0-fc38-8000-9bb5-011c48011c48_118173": {
      "name": "CMGT_TaskBranch_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskBranches,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {},\n    /*Only modify these fields if they are currently null (default value)*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_TaskBranch.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_TaskBranch.isCurrent,\n        value: true()\n      ),\n      a!map(\n        field: recordType!CMGT_TaskBranch.isRequired,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16255": {
      "name": "CMGT_EXT_Role_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!roles,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    alwaysOverwrite: {},\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_Role.modifiedOn,\n        value: a!defaultValue(ri!timestamp,now())\n      ),\n      a!map(\n        field: recordType!CMGT_Role.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_Role.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_Role.createdOn,\n        value: a!defaultValue(ri!timestamp,now())\n      ),\n      a!map(\n        field: recordType!CMGT_Role.createdBy,\n        value: ri!initiator\n      )\n    }\n  )\n)"
    },
    "_a-0000ed7d-5e46-8000-9d4b-011c48011c48_3821612": {
      "name": "CMGT_CFG_ENUM_ACT_REASSIGN_TASK",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_REASSIGN_TASK,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:22b56237-493d-43a4-99d4-4849ebaa4861\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_TaskAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_TASK,\n  createdBy: \"system\"\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180568": {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "sail_code": "not(rule!CMGT_UTIL_IsBlank(ri!input))"
    },
    "_a-0000e9fd-9441-8000-9bdc-011c48011c48_345072": {
      "name": "CMGT_SUB_OpenNextTasks_Logic_FromCreatedTasks",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Get the other related tasks for the case*/\n  local!otherTasksToCheckAgainst: rule!CMGT_QR_GetTask(\n    caseId: ri!createdTasks[recordType!CMGT_Task.caseId]\n  ),\n  /*Determine which tasks to open*/\n  /*If there are already tasks open, then there's no need to start new tasks  */\n  local!tasksToOpen: if(\n    rule!CMGT_UTIL_IsNotBlank(\n      rule!CMGT_UTIL_Filter(\n        records: ri!createdTasks,\n        field: recordType!CMGT_Task.statusId,\n        value: {\n          cons!CMGT_REFID_STATUS_TASK_READY,\n          cons!CMGT_REFID_STATUS_TASK_IN_PROGRESS\n        }\n      )\n    ),\n    null,\n    a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        /*Loop over each task that could be opened (only ones in Queued state)*/\n        items: rule!CMGT_UTIL_Filter(\n          records: ri!createdTasks,\n          field: recordType!CMGT_Task.statusId,\n          value: cons!CMGT_REFID_STATUS_TASK_QUEUED\n        ),\n        expression: if(\n          /*Early exit if the task should start by default*/\n          fv!item[recordType!CMGT_Task.startsByDefault],\n          fv!item,\n          a!localVariables(\n            local!thisTask: fv!item,\n            /*Get the branches leaading into this task*/\n            local!beforeBranches: rule!CMGT_UTIL_Filter(\n              records: local!thisTask[recordType!CMGT_Task.beforeTaskInstanceBranches],\n              field: recordType!CMGT_TaskBranch.afterTaskInstanceUuid,\n              value: local!thisTask[recordType!CMGT_Task.taskInstanceUuid]\n            ),\n            /*Determine which branches have yet to be satisfied*/\n            local!unsatisfiedBeforeBranches: a!flatten(\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: local!beforeBranches,\n                expression: a!localVariables(\n                  local!thisBranch: fv!item,\n                  /*Get the specific task that leads into this branch (the previous task)*/\n                  local!beforeTaskForBranch: displayvalue(\n                    local!thisBranch[recordType!CMGT_TaskBranch.beforeTaskInstanceUuid],\n                    local!otherTasksToCheckAgainst[recordType!CMGT_Task.taskInstanceUuid],\n                    local!otherTasksToCheckAgainst,\n                    null\n                  ),\n                  if(\n                    tointeger(\n                      local!beforeTaskForBranch[recordType!CMGT_Task.taskBehaviorTypeId]\n                    ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                    fv!item,\n                    if(\n                      /*If there is no before task for this branch, consider it satisfied*/\n                      a!isNullOrEmpty(local!beforeTaskForBranch),\n                      {},\n                      if(\n                        /*If the task is not complete, or it's complete but the response option is incorrect, consider it unsatsified*/\n                        or(\n                          not(\n                            local!beforeTaskForBranch[recordType!CMGT_Task.isCompleted]\n                          ),\n                          local!thisBranch[recordType!CMGT_TaskBranch.taskResponseOptionUuid] <> local!beforeTaskForBranch[recordType!CMGT_Task.selectedTaskResponseOption.taskResponseOptionUuid]\n                        ),\n                        fv!item,\n                        {}\n                      )\n                    )\n                  )\n                )\n              )\n            ),\n            /*If there are no unsatisfied branches, it means this task can be opened*/\n            if(\n              a!isNullOrEmpty(local!unsatisfiedBeforeBranches),\n              fv!item,\n              {}\n            )\n          )\n        )\n      )\n    )\n  ),\n  if(\n    a!isNullOrEmpty(local!tasksToOpen),\n    {},\n    /*All initial tasks are opened irrespective of milestone    */\n    #\"urn:appian:function:v1:a:update\"(\n      local!tasksToOpen,\n      recordType!CMGT_Task.statusId,\n      cons!CMGT_REFID_STATUS_TASK_READY\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3626108": {
      "name": "CMGT_CFG_ENUM_ACT_REASSIGN_CASE",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_REASSIGN_CASE,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:255ef9a9-837a-4a2c-aef4-2c578cfb4807\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_CaseAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_CASE,\n  createdBy: \"system\"\n)"
    },
    "_a-0000e9fd-9441-8000-9bdc-011c48011c48_345321": {
      "name": "CMGT_SUB_OpenNextTasks_Logic_FromCompletedTasks",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Get the tasks following this task*/\n  local!afterTasks: rule!CMGT_QR_GetTaskBranch(\n    beforeTaskId: ri!completedTasks[recordType!CMGT_Task.taskId],\n    additionalLogicalExpression: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n      operator: \"OR\",\n      logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n        items: ri!completedTasks,\n        expression: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n          operator: \"AND_ALL\",\n          ignoreFiltersWithEmptyValues: true,\n          filters: {\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: recordType!CMGT_TaskBranch.beforeTaskInstanceUuid,\n              operator: \"=\",\n              value: fv!item[recordType!CMGT_Task.taskInstanceUuid]\n            ),\n            /*Ensure that each afterTaskBranch matches the taskReponseUuid of the completedTask if populated*/\n            #\"SYSTEM_SYSRULES_queryFilter\"(\n              field: recordType!CMGT_TaskBranch.taskResponseOptionUuid,\n              operator: \"=\",\n              value: fv!item[recordType!CMGT_Task.selectedTaskResponseOption.taskResponseOptionUuid]\n            )\n          }\n        )\n      )\n    ),\n    /*Only return next-up tasks that are not Ready and not Inprogress, this is what can be reopened (remember Completed tasks can be reopened)*/\n    additionalFilters: {\n      #\"SYSTEM_SYSRULES_queryFilter\"(\n        field: recordType!CMGT_TaskBranch.afterTaskInstance.statusId,\n        operator: \"not in\",\n        value: rule!CMGT_UTIL_RejectBlank(\n          {\n            if(\n              and(\n                ri!completedTasks[recordType!CMGT_Task.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                ri!completedTasks[recordType!CMGT_Task.automationTaskAction.actionCode] = cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING,\n                ri!context = \"REOPEN\"\n              ),\n              null,\n              cons!CMGT_REFID_STATUS_TASK_READY\n            ),\n            cons!CMGT_REFID_STATUS_TASK_IN_PROGRESS\n          }\n        )\n      )\n    },\n    fields: {\n      recordType!CMGT_TaskBranch.afterTaskInstance,\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/45ed19eb-2545-4c96-9e19-72127f9d27a3\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/3280de96-3518-4a9e-b8ae-854a84562f07\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/5189c3ac-98e2-4a82-8598-2e9561baec9d\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/5189c3ac-98e2-4a82-8598-2e9561baec9d/64b891e4-359b-48b4-9f47-2a3af4695c34\",\n      #\"urn:appian:record-relationship:v1:f00f5631-1637-49bc-8c94-9ea3217339d1/1ef135f7-00f2-4802-aa45-0a8b4299c405/73a323c9-ce12-4212-97aa-f89df7d14c09/9644c5ba-af85-48a3-9cda-fcfb028d6113/5189c3ac-98e2-4a82-8598-2e9561baec9d/64b891e4-359b-48b4-9f47-2a3af4695c34/52813580-ecf3-49c7-be71-568ab452d54a\",\n      recordType!CMGT_TaskBranch.afterTaskInstance,\n      recordType!CMGT_TaskBranch.afterTaskInstance,\n      recordType!CMGT_TaskBranch.afterTaskInstance\n    }\n  )[recordType!CMGT_TaskBranch.afterTaskInstance],\n  /*need to get rid of duplicate leads into tasks configured in automations*/\n  local!uniqueAfterTasks: union(local!afterTasks, local!afterTasks),\n  local!completedAutomationTasks: rule!CMGT_UTIL_Filter(\n    records: ri!completedTasks,\n    field: recordType!CMGT_Task.automationTaskAction.actionCode,\n    value: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING\n  ),\n  /*Determine which tasks to open*/\n  local!automationTasksToOpen: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!completedAutomationTasks,\n      expression: a!localVariables(\n        local!evaluatedConditionSets: a!flatten(\n          index(\n            index(\n              fv!item,\n              recordType!CMGT_Task.conditionSet,\n              null()\n            ),\n            recordType!CMGT_ConditionSet.childConditionSet,\n            null()\n          )\n        ),\n        local!satisfiedConditionSets: if(\n          rule!CMGT_UTIL_IsBlank(local!evaluatedConditionSets),\n          null(),\n          rule!CMGT_UTIL_RejectBlank(\n            a!flatten(\n              #\"SYSTEM_SYSRULES_forEach\"(\n                items: local!evaluatedConditionSets,\n                expression: a!localVariables(\n                  local!conditionsMet: {\n                    index(\n                      a!flatten(\n                        index(\n                          fv!item,\n                          recordType!CMGT_ConditionSet.condition,\n                          null()\n                        )\n                      ),\n                      recordType!CMGT_Condition.isMet,\n                      null()\n                    )\n                  },\n                  if(\n                    a!match(\n                      value: fv!item[recordType!CMGT_ConditionSet.operatorCode],\n                      equals: cons!CMGT_TXT_SET_OPERATOR_OR,\n                      then: or(local!conditionsMet),\n                      equals: cons!CMGT_TXT_SET_OPERATOR_AND,\n                      then: and(local!conditionsMet),\n                      default: false()\n                    ),\n                    fv!item,\n                  null()\n                ))\n              )\n            )\n          )\n        ),\n        local!afterTaskBranches: rule!CMGT_UTIL_Filter(\n          records: rule!CMGT_UTIL_Filter(\n            records: a!flatten(\n              index(\n                local!uniqueAfterTasks,\n                recordType!CMGT_Task.beforeTaskInstanceBranches,\n                null()\n              )\n            ),\n            field: recordType!CMGT_TaskBranch.isCurrent,\n            value: true()\n          ),\n          field: recordType!CMGT_TaskBranch.beforeTaskInstance.taskInstanceUuid,\n          value: fv!item[recordType!CMGT_Task.taskInstanceUuid]\n        ),\n        local!afterTaskInstanceUUIDs: if(\n          rule!CMGT_UTIL_IsBlank(value: local!satisfiedConditionSets),\n          /*  Logic to return default automation after tasks to open             */\n          index(\n            rule!CMGT_UTIL_Filter(\n              records: local!afterTaskBranches,\n              field: recordType!CMGT_TaskBranch.conditionSetUuid,\n              value: null()\n            ),\n            recordType!CMGT_TaskBranch.afterTaskInstanceUuid,\n            null()\n          ),\n          /*    Logic to return the automation after tasks to open            */\n          index(\n            rule!CMGT_UTIL_Filter(\n              records: local!afterTaskBranches,\n              field: recordType!CMGT_TaskBranch.conditionSetUuid,\n              value: rule!CMGT_UTIL_Distinct(\n                value: local!satisfiedConditionSets[recordType!CMGT_ConditionSet.conditionSetUuid]\n              )\n            ),\n            recordType!CMGT_TaskBranch.afterTaskInstanceUuid,\n            null()\n          )\n        ),\n        local!finalAutomationTasksToOpen: rule!CMGT_UTIL_RejectBlank(\n          array: #\"SYSTEM_SYSRULES_forEach\"(\n            items: rule!CMGT_UTIL_Filter(\n              records: local!uniqueAfterTasks,\n              field: recordType!CMGT_Task.taskInstanceUuid,\n              value: local!afterTaskInstanceUUIDs\n            ),\n            /*If all the  required branches satisfied, it means this task can be opened*/\n            expression: a!localVariables(\n              local!currentTask: fv!item,\n              local!requiredBeforeBranches: rule!CMGT_UTIL_Filter(\n                records: rule!CMGT_UTIL_Filter(\n                  records: a!flatten(\n                    index(\n                      local!currentTask,\n                      recordType!CMGT_Task.beforeTaskInstanceBranches,\n                      null()\n                    )\n                  ),\n                  field: recordType!CMGT_TaskBranch.isCurrent,\n                  value: true\n                ),\n                field: recordType!CMGT_TaskBranch.isRequired,\n                value: true\n              ),\n              if(\n                and(\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    items: local!requiredBeforeBranches,\n                    expression: and(\n                      fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.isCompleted] = true(),\n                      if(\n                        fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                        fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.selectedTaskResponseOption.taskResponseOptionUuid] = fv!item[recordType!CMGT_TaskBranch.taskResponseOptionUuid],\n                        true\n                      )\n                    )\n                  )\n                ),\n                local!currentTask,\n                {}\n              )\n            )\n          )\n        ),\n        { local!finalAutomationTasksToOpen }\n      )\n    )\n  ),\n  local!otherTasksToOpen: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!uniqueAfterTasks,\n      expression: a!localVariables(\n        local!thisTask: fv!item,\n        local!taskBranches: rule!CMGT_UTIL_Filter(\n          records: local!thisTask[recordType!CMGT_Task.beforeTaskInstanceBranches],\n          field: recordType!CMGT_TaskBranch.isCurrent,\n          value: true()\n        ),\n        local!workflowRoutingAutomationTaskBranches: rule!CMGT_UTIL_Filter(\n          records: rule!CMGT_UTIL_Filter(\n            records: local!taskBranches,\n            field: recordType!CMGT_TaskBranch.beforeTaskInstance.taskBehaviorTypeId,\n            value: cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION\n          ),\n          field: recordType!CMGT_TaskBranch.beforeTaskInstance.automationTaskAction.actionCode,\n          value: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING\n        ),\n        /*Get the required branches leading into this task -- that's all we have to check at this stage*/\n        local!requiredBeforeBranches: difference(\n          rule!CMGT_UTIL_Filter(\n            records: rule!CMGT_UTIL_Filter(\n              records: local!thisTask[recordType!CMGT_Task.beforeTaskInstanceBranches],\n              field: recordType!CMGT_TaskBranch.isCurrent,\n              value: true\n            ),\n            field: recordType!CMGT_TaskBranch.isRequired,\n            value: true\n          ),\n          local!workflowRoutingAutomationTaskBranches\n        ),\n        /*Determine which branches have yet to be satisfied*/\n        /*At this stage we only have to confirm that there aren't required branches that arne't satisfied*/\n        local!unsatisfiedRequiredBeforeBranches: a!flatten(\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: local!requiredBeforeBranches,\n            expression: if(\n              /*If the task is not complete, or it's complete but the response option is incorrect, consider it unsatsified*/\n              or(\n                not(\n                  fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.isCompleted]\n                ),\n                fv!item[recordType!CMGT_TaskBranch.beforeTaskInstance.selectedTaskResponseOption.taskResponseOptionUuid] <> fv!item[recordType!CMGT_TaskBranch.taskResponseOptionUuid]\n              ),\n              fv!item,\n              {}\n            )\n          )\n        ),\n        /*If there are no unsatisfied required branches, it means this task can be opened*/\n        if(\n          and(\n            a!isNullOrEmpty(\n              local!unsatisfiedRequiredBeforeBranches\n            ),\n            or(\n              a!isNullOrEmpty(\n                value: local!workflowRoutingAutomationTaskBranches\n              ),\n              and(\n                ri!completedTasks[recordType!CMGT_Task.taskBehaviorTypeId] <> cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                ri!completedTasks[recordType!CMGT_Task.automationTaskAction.actionCode] <> cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING\n              )\n            )\n          ),\n          fv!item,\n          {}\n        )\n      )\n    )\n  ),\n  local!tasksToOpen: a!flatten(\n    {\n      local!automationTasksToOpen,\n      local!otherTasksToOpen\n    }\n  ),\n  if(\n    a!isNotNullOrEmpty(local!tasksToOpen),\n    /*All next tasks are opened irrespective of milestone    */\n    {\n      tasks: #\"urn:appian:function:v1:a:update\"(\n        local!tasksToOpen,\n        recordType!CMGT_Task.statusId,\n        cons!CMGT_REFID_STATUS_TASK_READY\n      ),\n      originalTasks: local!tasksToOpen\n    },\n    { tasks: {}, originalTasks: {} }\n  )\n)"
    },
    "000cec12-8268-8000-fa37-7f0000014e7a": {
      "name": "CMGT_EXT_SUB_OpenNextTasks",
      "type": "Process Model",
      "sail_code": "// Output: ?\nrule!CMGT_SUB_OpenNextTasks_Logic_FromCreatedTasks(\n  createdTasks: pv!createdTasks\n)\n\n// Output: ?\nrule!CMGT_SUB_OpenNextTasks_Logic_FromCompletedTasks(\n  completedTasks: pv!completedTasks\n)\n\n// Input: ?\n=tasksToOpen\n\n// Output: ?\nrule!CMGT_EXT_Task_SetMetaData(\n  tasks: pv!tasksToOpen,\n  initiator: pp!initiator\n)\n\n// Input: ?\n=pv!tasksToOpen\n\n// Output: ?\nAC!RecordsUpdated"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180481": {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(a!flatten(ri!array)),\n  reject(a!isNullOrEmpty(_), a!flatten(ri!array))\n)"
    },
    "_a-0000ec0f-47ad-8000-9ba8-011c48011c48_16248": {
      "name": "CMGT_EXT_Task_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!tasks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      /*\n      New task - Calculate dueOn based on SLA\n      */\n      a!map(\n        field: recordType!CMGT_Task.dueOn,\n        value: if(\n          or(\n            tointeger(\n              fv!item[recordType!CMGT_Task.statusId]\n            ) = cons!CMGT_REFID_STATUS_TASK_READY,\n            tointeger(\n              fv!item[recordType!CMGT_Task.statusId]\n            ) = cons!CMGT_REFID_STATUS_TASK_IN_PROGRESS,\n            \n          ),\n          if(\n            /*New task*/\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_Task.dueOn]\n            ),\n            rule!CMGT_UTIL_CalculateDueDateBasedOnSLA(\n              SLA: fv!item[recordType!CMGT_Task.sla],\n              dateTime: fv!item[recordType!CMGT_Task.createdOn]\n            ),\n            fv!item[recordType!CMGT_Task.dueOn]\n          ),\n          fv!item[recordType!CMGT_Task.dueOn]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_Task.isCurrent,\n        value: a!defaultValue(\n          fv!item[recordType!CMGT_Task.isCurrent],\n          true\n        ),\n\n      ),\n      a!map(\n        field: recordType!CMGT_Task.instanceCount,\n        value: a!defaultValue(\n          fv!item[recordType!CMGT_Task.instanceCount],\n          1\n        ),\n\n      ),\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_Task.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_Task.modifiedOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_Task.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_Task.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_Task.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_Task.taskUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      ),\n      a!map(\n        field: recordType!CMGT_Task.taskInstanceUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      ),\n      /*Always ensure \"context\" is valid JSON*/\n      a!map(\n        field: recordType!CMGT_Task.context,\n        value: \"{}\"\n      ),\n      /*Default status to \"Queued\"*/\n      a!map(\n        field: recordType!CMGT_Task.statusId,\n        value: cons!CMGT_REFID_STATUS_TASK_QUEUED\n      ),\n      /*Automatically calculate availableOn whenever the statusId is Ready*/\n      a!map(\n        field: recordType!CMGT_Task.availableOn,\n        value: now(),\n        applyWhen: tointeger(\n          fv!item[recordType!CMGT_Task.statusId]\n        ) = cons!CMGT_REFID_STATUS_TASK_READY\n      ),\n      /*Set completedBy/On whenever the statusId matches a Completion status*/\n      a!map(\n        field: recordType!CMGT_Task.completedBy,\n        value: ri!initiator,\n        applyWhen: contains(\n          {\n            cons!CMGT_REFID_STATUS_TASK_COMPLETED,\n            cons!CMGT_REFID_STATUS_TASK_NOT_NEEDED\n          },\n          tointeger(\n            fv!item[recordType!CMGT_Task.statusId]\n          )\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_Task.completedOn,\n        value: now(),\n        applyWhen: contains(\n          {\n            cons!CMGT_REFID_STATUS_TASK_COMPLETED,\n            cons!CMGT_REFID_STATUS_TASK_NOT_NEEDED\n          },\n          tointeger(\n            fv!item[recordType!CMGT_Task.statusId]\n          )\n        )\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_Task.roles,\n        value: rule!CMGT_EXT_Role_SetMetaData(\n          roles: fv!item[recordType!CMGT_Task.roles],\n          initiator: ri!initiator,\n          /*We need to pass the task created on so that group assignee will be same as task created on*/\n          timestamp: fv!item[recordType!CMGT_Task.createdOn]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_Task.beforeTaskInstanceBranches,\n        value: rule!CMGT_TaskBranch_SetMetaData(\n          taskBranches: fv!item[recordType!CMGT_Task.beforeTaskInstanceBranches]\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ed9c-71ef-8000-9d58-011c48011c48_3988353": {
      "name": "CMGT_CFG_ENUM_ACT_WORKFLOW_ROUTING",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:d21a949c-ac2f-4bf6-96ae-cdbbb7c64355\",\n  actionCode: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING,\n  image: cons!CMGT_DOC_IMAGE_AUTOMATION_TYPE_WORKFLOW_ROUTING,\n  description: #\"urn:appian:translation-string:v1:b6767c60-abdc-4042-8808-4caa75358eec\",\n  isCustom: false(),\n  PmConstant: cons!CMGT_PM_TASK_COMPLETE_AUTOMATED_TASK_WORKFLOW_ROUTING,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_WorkflowRouting_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_AUTOMATION,\n  createdBy: \"system\"\n)"
    },
    "_a-0000ed9c-71ef-8000-9d58-011c48011c48_3988340": {
      "name": "CMGT_CFG_ENUM_ACT_SEND_EMAIL",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_SEND_EMAIL,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:30808437-7386-42dc-8605-9d75e19508d3\",\n  image: cons!CMGT_DOC_IMAGE_AUTOMATION_TYPE_SEND_EMAIL,\n  description: #\"urn:appian:translation-string:v1:5efb7150-37e9-41f6-b9cc-ddbc1850e07d\",\n  isCustom: false(),\n  /*process to be run to send en email*/\n  PmConstant: cons!CMGT_PM_TASK_COMPLETE_AUTOMATED_TASK_SEND_EMAIL,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_SendEmail_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_AUTOMATION,\n  createdBy: \"system\"\n)"
    },
    "_a-0000ea1d-36f5-8000-9bef-011c48011c48_538451": {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "sail_code": "/*Reference:\nhttps://community.appian.com/w/the-appian-playbook/846/generating-uuids-guids*/\nfn!lower(\n  concat(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "_a-0000ecf6-527e-8000-9bbc-011c48011c48_59891": {
      "name": "CMGT_CFG_ENUM_ACT_ASSIGN_CASE",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_ASSIGN_CASE,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:340cf3dc-0483-4dd7-b199-d47e56259f94\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_CaseAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_CASE,\n  createdBy: \"system\"\n)"
    },
    "af326a29-a1c8-4399-a28d-996f85819d9e": {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    apply(\n      rule!CMGT_UTIL_Filter_CreateFieldValuePair(\n        field: _,\n        value: ri!value,\n        allFields: a!flatten(ri!field)\n      ),\n      a!flatten(ri!field)\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!CMGT_UTIL_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000ecf6-527e-8000-9bbc-011c48011c48_59897": {
      "name": "CMGT_CFG_ENUM_ACT_ASSIGN_TASK",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  /*code that is used to help evaluation of what actions needs to be ran*/\n  actionCode: cons!CMGT_CFG_TXT_ACT_ASSIGN_TASK,\n  /*Display text of action type in configuration*/\n  name: #\"urn:appian:translation-string:v1:5f11c5ad-d08d-4d59-86d6-c7464038329c\",\n  /*interface used to configure assignment logic*/\n  configurationRule:rule!CMGT_WFL_AutomationRule_Configure_AssignmentLogic,\n  runtimeConfigurationRule: rule!CMGT_AutomationRule_Configure_AssignmentLogic,\n  configurationDisplayRule: rule!CMGT_WFL_CaseType_Rules_FormatAssignAction,\n  runtimeDisplayRule: rule!CMGT_Case_Rules_FormatAssignAction,\n  /*process to be run to assigne a case*/\n  PmConstant: cons!CMGT_PM_ROLE_MANAGE,\n  /*evaluation rule that runs and outputs the necessary process parameters*/\n  pmParameterEvalRule: rule!CMGT_AUTO_EVAL_TaskAssignment_DetermineProcessParameters,\n  context: cons!CMGT_CFG_TXT_ACT_CONTEXT_TASK,\n  createdBy: \"system\"\n)"
    },
    "000beaeb-2dd9-8000-0981-7f0000014e7a": {
      "name": "CMGT_Task_Complete_AutomatedTask_Wrapper",
      "type": "Process Model",
      "sail_code": "// Output: ?\npv!index + 1\n\n// Input: ?\n=rule!CMGT_UTIL_Filter( records: a!flatten(pv!tasks), fieldValuePairs: { a!map( field: recordType!CMGT_Task.isCurrent, value: true ), a!map( field: recordType!CMGT_Task.taskBehaviorTypeId, value: cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION ) })\n\n// Output: ?\ncount({ ac!automatedTasks })\n\n// Input: ?\nrule!CMGT_UTIL_Filter(\n  records: rule!CMGT_CFG_ENUM_ACTIONS(),\n  field: \"actionCode\",\n  value: a!flatten(\n    pv!automatedTasks[recordType!CMGT_Task.automationTaskAction.actionCode]\n  )[pv!index],\n  /*To avoid list return type */\n  filterType: \"FIRST_MATCH\"\n).PmConstant\n\n// Input: ?\na!localVariables(\n  local!pmParamsEval: rule!CMGT_UTIL_Filter(\n    records: rule!CMGT_CFG_ENUM_ACTIONS(),\n    field: \"actionCode\",\n    value: a!flatten(\n      pv!automatedTasks[recordType!CMGT_Task.automationTaskAction.actionCode]\n    )[pv!index],\n    /*To avoid list return type */\n    filterType: \"FIRST_MATCH\"\n  ),\n  local!pmParamsEval.pmParameterEvalRule(\n    task: pv!automatedTasks[pv!index]\n  )\n)\n\n// Input: ?\n= {\n  tasks: #\"urn:appian:function:v1:a:update\"(\n    rule!CMGT_QR_GetTask(\n      taskId: pv!automatedTasks[recordType!CMGT_Task.taskId],\n      includeRoles: true(),\n      includeBranches: true(),\n      includeMilestone: true()\n    ),\n    recordType!CMGT_Task.statusId,\n    cons!CMGT_REFID_STATUS_TASK_COMPLETED\n  ),\n  initiator: cons!CMGT_TXT_AUTOMATED_SYSTEM,\n  automationEvaluationLoopExecutions: pv!automationEvaluationLoopExecutions,\n  context: pv!context\n}"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    }
  }
}