{
  "uuid": "_a-0000e90b-7c54-8000-404c-01ef9001ef90_7819",
  "name": "SHRD_GetLastSiteTab",
  "type": "Expression Rule",
  "description": "Get last site tab for an application",
  "sail_code": "if(\n  cons!SHRD_USE_CACHE,\n  a!localVariables(\n    local!key: ri!user & \"_\" & ri!application & cons!SHRD_CACHE_KEYS[1],\n    local!cache: textcacheget(\n      key: local!key\n    ),\n    local!site: if(\n      isnull(local!cache),\n      textcacheset(\n        key: local!key,\n        data: 1,\n        expireAfter: cons!SHRD_CACHE_QUANTITIES[1],\n        timeUnit: cons!SHRD_CACHE_UNITS[1]\n      ),\n      local!cache\n    ),\n    local!site\n  ),\n  1\n)",
  "calls": [
    {
      "name": "SHRD_USE_CACHE",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "SHRD_CACHE_KEYS",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "SHRD_CACHE_QUANTITIES",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    },
    {
      "name": "SHRD_CACHE_UNITS",
      "type": "Constant",
      "dep_type": "USES_CONSTANT"
    }
  ],
  "called_by": []
}