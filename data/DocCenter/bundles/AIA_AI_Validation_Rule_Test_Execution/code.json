{
  "_metadata": {
    "bundle_id": "AIA_AI_Validation_Rule_Test_Execution"
  },
  "objects": {
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_40909": {
      "name": "AIA_ExtractJson",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!firstTry: rule!AIA_ExtractJsonInner(\n    json: ri!json\n  ),\n  local!result: if(\n    a!isNotNullOrEmpty(local!firstTry),\n    local!firstTry,\n    a!localVariables(\n      local!secondTry: rule!AIA_ExtractJsonInner(\n        json: index(split(ri!json, \"Appian's private AI\"), 1, null),\n      ),\n      if(\n        a!isNotNullOrEmpty(local!secondTry),\n        local!secondTry,\n        a!localVariables(\n          local!thirdTry: rule!AIA_ExtractJsonInner(\n            json: index(split(ri!json, \"Appian's private AI\"), 2, null),\n          ),\n          if(\n            a!isNotNullOrEmpty(local!thirdTry),\n            local!thirdTry,\n            a!localVariables(\n              local!forthTry: rule!AIA_ExtractJsonInner(\n                json: index(split(ri!json, \"<output>\"), 1, null),\n              ),\n              if(\n                a!isNotNullOrEmpty(local!forthTry),\n                local!forthTry,\n                a!localVariables(\n                  local!fifthTry: rule!AIA_ExtractJsonInner(\n                    json: index(split(ri!json, \"</entities>\"), 1, null),\n                  ),\n                  local!fifthTry\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  ),\n  local!finalResult: if(\n    a!isNullOrEmpty(local!result),\n    null,\n    if(\n      a!defaultValue(ri!returnList, true),\n      local!result,\n      if(\n        rule!SHRD_IsList(local!result),\n        null,\n        local!result\n      )\n    )\n  ),\n  /* Handle scenario where the result comes back as properties of a $schema */\n  if(\n    or(\n      a!defaultValue(ri!returnList, true),\n      a!isNullOrEmpty(local!finalResult),\n      not(contains(\n        a!keys(local!finalResult),\n        \"$schema\"\n      ))\n    ),\n    local!finalResult,\n    local!finalResult.properties\n  )\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_199422": {
      "name": "AIA_Test_GetLatestExtractionInstanceWithFields",
      "type": "Expression Rule",
      "sail_code": "rule!AIA_Extraction_GetInstanceById(\n  identifier: #\"SYSTEM_SYSRULES_queryRecordType_v1\"(\n    recordType: recordType!AIA Extraction Instance,\n    pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n      startIndex: 1,\n      batchSize: 1,\n      sort: {\n        #\"SYSTEM_SYSRULES_sortInfo\"(\n          field: recordType!AIA Extraction Instance.id\n        )\n      }\n    )\n  ).data[recordType!AIA Extraction Instance.id],\n  additionalFields: {\n    recordType!AIA Extraction Instance.inputDocumentId,\n    recordType!AIA Extraction Instance.documentFolderId,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion.confidenceThreshold,\n    recordType!AIA Extraction Instance.modelVersion,\n    recordType!AIA Extraction Instance.modelVersion,\n  }\n)"
    },
    "_a-0000ed16-a792-8000-9c64-011c48011c48_274759": {
      "name": "AIA_ToJson",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!data),\n  \"null\",\n  #\"SYSTEM_SYSRULES_toJson_v1\"(ri!data)\n)"
    },
    "_a-0000ec36-59aa-8000-9be0-011c48011c48_53600": {
      "name": "AIA_Test_GetLatestExtractionModelVersion",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!modelVersion: a!refreshVariable(\n    value: rule!AIA_Extraction_GetModelVersionById(\n      identifier: index(\n        #\"SYSTEM_SYSRULES_queryRecordType_v4\"(\n          recordType: recordType!AIA Extraction Model Version,\n          fields: {\n            recordType!AIA Extraction Model Version.modelVersionId\n          },\n          pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n            startIndex: 1,\n            batchSize: 1,\n            sort: {\n              #\"SYSTEM_SYSRULES_sortInfo\"(\n                field: recordType!AIA Extraction Model Version.modelVersionId\n              )\n            }\n          )\n        ).data[recordType!AIA Extraction Model Version.modelVersionId],\n        1,\n        null\n      )\n    ),\n    refreshAlways: true\n  ),\n  local!modelVersion\n)"
    },
    "_a-0000eec1-04b1-8000-9c49-011c48011c48_172827": {
      "name": "AIA_AiValidationRuleLlmInputForTestExecution",
      "type": "Expression Rule",
      "sail_code": "concat(\n  \"BUSINESS_DATA JSON:\",\n  char(10),\n  \"```\",\n  ri!testDataMap,\n  char(10),\n  \"```\",\n  char(10),\n  char(10),\n  \"VALIDATION_RULE JSON:\",\n  char(10),\n  \"```\",\n  prettyprintjson(\n    #\"SYSTEM_SYSRULES_toJson_v1\"(\n      if(\n        cons!AIA_FLAG_AI_VALIDATION_RULE_SHOW_FLAG_WHEN,\n        a!map(\n          name: \"Test Rule\",\n          flagWhen: a!defaultValue(\n            value: ri!validationDataMap.flagWhen,\n            default: true\n          ),\n          conditions: ri!validationDataMap.prompt\n        ),\n        a!map(\n          name: \"Test Rule\",\n          conditions: ri!validationDataMap.prompt\n        )\n      )\n    )\n  ),\n  char(10),\n  \"```\"\n)"
    },
    "_a-0000ec2d-5396-8000-9bdc-011c48011c48_43077": {
      "name": "AIA_Extraction_GetInstanceById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Instance,\n  identifier: ri!identifier,\n  fields: a!flatten(\n    {\n      /* Extraction Instance */\n      recordType!AIA Extraction Instance.modelVersionId,\n      recordType!AIA Extraction Instance.documentId,\n      recordType!AIA Extraction Instance.statusId,\n      recordType!AIA Extraction Instance.hasBoundingBoxes,\n      recordType!AIA Extraction Instance.boundingBoxesDocumentId,\n      recordType!AIA Extraction Instance.validationErrors,\n      recordType!AIA Extraction Instance.accuracy,\n      recordType!AIA Extraction Instance.precision,\n      recordType!AIA Extraction Instance.f1,\n      recordType!AIA Extraction Instance.recall,\n      recordType!AIA Extraction Instance.createdOn,\n      /* Extraction Fields */\n      recordType!AIA Extraction Instance.fields.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.extractedValue,\n      recordType!AIA Extraction Instance.fields.overrideValue,\n      recordType!AIA Extraction Instance.fields.overrideNull,\n      recordType!AIA Extraction Instance.fields.boundingBox,\n      recordType!AIA Extraction Instance.fields.confidence,\n      /* Extraction Fields > Rows */\n      recordType!AIA Extraction Instance.fields.rows.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.boundingBox,\n      /* Extraction Fields > Rows > Cells */\n      recordType!AIA Extraction Instance.fields.rows.cells.modelVersionFieldId,\n      recordType!AIA Extraction Instance.fields.rows.cells.extractedValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideValue,\n      recordType!AIA Extraction Instance.fields.rows.cells.overrideNull,\n      recordType!AIA Extraction Instance.fields.rows.cells.confidence,\n      /* Extraction Fields > Model Field */\n      recordType!AIA Extraction Instance.fields.modelVersionField.key,\n      recordType!AIA Extraction Instance.fields.modelVersionField.columns.key,\n      /* Extraction Fields > Rows > Cells > Column */\n      recordType!AIA Extraction Instance.fields.rows.cells.column.key,\n      a!defaultValue(ri!additionalFields, {})\n    },\n    \n  )\n)"
    },
    "_a-0000ec5c-9eda-8000-9bec-011c48011c48_117023": {
      "name": "AIA_Extraction_GetModelVersionById",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_queryRecordByIdentifier\"(\n  recordType: recordType!AIA Extraction Model Version,\n  fields: {\n    rule!AIA_EXTRACTION_MODEL_VERSION_FIELDS()\n  },\n  relatedRecordData: {\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Extraction Model Version.fields,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Extraction Model Version Field.order,\n        ascending: true\n      )\n    ),\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship: recordType!AIA Extraction Model Version.fields,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!AIA Extraction Model Version Field.order,\n        ascending: true\n      )\n    )\n  },\n  identifier: ri!identifier\n)"
    },
    "0002eec1-06b9-8000-ff1f-7f0000014e7a": {
      "name": "AIA AI Validation Rule Test Execution",
      "type": "Process Model",
      "sail_code": "// Input: ?\n= rule!AIA_AiValidationRuleLlmInputForTestExecution( testDataMap: pv!testDataMap, validationDataMap: pv!validationDataMap)\n\n// Input: ?\n= rule!AIA_AiValidationRulePrompt( ModelVersion: null, validationRule: recordType!AIA Extraction Model Version Validation Rule( recordType!AIA Extraction Model Version Validation Rule.validations: #\"SYSTEM_SYSRULES_toJson_v1\"(pv!validationDataMap) ))\n\n// Input: ?\n=a!defaultValue( value: pv!llm, default: rule!AIA_DefaultModel())\n\n// Output: ?\nAC!Response\n\n// Output: ?\nrule!AIA_CalculateAiValidationRuleValidations(\n  json: ac!Response\n)"
    },
    "_a-0000ecf1-11b9-8000-9c4e-011c48011c48_203145": {
      "name": "AIA_EXTRACTION_MODEL_VERSION_FIELDS",
      "type": "Expression Rule",
      "sail_code": "{\n  /* Base */\n  recordType!AIA Extraction Model Version.status,\n  recordType!AIA Extraction Model Version.updates,\n  recordType!AIA Extraction Model Version.role,\n  recordType!AIA Extraction Model Version.instructions,\n  recordType!AIA Extraction Model Version.modelId,\n  recordType!AIA Extraction Model Version.versionId,\n  recordType!AIA Extraction Model Version.llm,\n  recordType!AIA Extraction Model Version.useAiReview,\n  recordType!AIA Extraction Model Version.aiReviewLlm,\n  recordType!AIA Extraction Model Version.aiReviewRole,\n  recordType!AIA Extraction Model Version.aiReviewInstructions,\n  recordType!AIA Extraction Model Version.useConfidence,\n  recordType!AIA Extraction Model Version.confidenceThreshold,\n  recordType!AIA Extraction Model Version.useSampling,\n  recordType!AIA Extraction Model Version.samplingRate,\n  recordType!AIA Extraction Model Version.instanceCount,\n  /* Fields */\n  recordType!AIA Extraction Model Version.fields.sectionId,\n  recordType!AIA Extraction Model Version.fields.section,\n  recordType!AIA Extraction Model Version.fields.order,\n  recordType!AIA Extraction Model Version.fields.key,\n  recordType!AIA Extraction Model Version.fields.label,\n  recordType!AIA Extraction Model Version.fields.type,\n  recordType!AIA Extraction Model Version.fields.isMultiple,\n  recordType!AIA Extraction Model Version.fields.description,\n  recordType!AIA Extraction Model Version.fields.instructions,\n  recordType!AIA Extraction Model Version.fields.extractionType,\n  recordType!AIA Extraction Model Version.fields.optionRule,\n  recordType!AIA Extraction Model Version.fields.validationRule,\n  recordType!AIA Extraction Model Version.fields.extractionRule,\n  recordType!AIA Extraction Model Version.fields.postProcessRule,\n  recordType!AIA Extraction Model Version.fields.required,\n  recordType!AIA Extraction Model Version.fields.useVision,\n  recordType!AIA Extraction Model Version.fields.isHidden,\n  recordType!AIA Extraction Model Version.fields.isNotTracked,\n  recordType!AIA Extraction Model Version.fields.useAiReview,\n  /* Columns */\n  recordType!AIA Extraction Model Version.fields.columns.order,\n  recordType!AIA Extraction Model Version.fields.columns.key,\n  recordType!AIA Extraction Model Version.fields.columns.label,\n  recordType!AIA Extraction Model Version.fields.columns.type,\n  recordType!AIA Extraction Model Version.fields.columns.isMultiple,\n  recordType!AIA Extraction Model Version.fields.columns.isHidden,\n  recordType!AIA Extraction Model Version.fields.columns.isNotTracked,\n  recordType!AIA Extraction Model Version.fields.columns.description,\n  recordType!AIA Extraction Model Version.fields.columns.instructions,\n  recordType!AIA Extraction Model Version.fields.columns.extractionType,\n  recordType!AIA Extraction Model Version.fields.columns.optionRule,\n  recordType!AIA Extraction Model Version.fields.columns.validationRule,\n  recordType!AIA Extraction Model Version.fields.columns.extractionRule,\n  recordType!AIA Extraction Model Version.fields.columns.postProcessRule,\n  recordType!AIA Extraction Model Version.fields.columns.required,\n  /* Examples */\n  recordType!AIA Extraction Model Version.examples,\n  /* Sections */\n  recordType!AIA Extraction Model Version.sections.name,\n  recordType!AIA Extraction Model Version.sections.description,\n  recordType!AIA Extraction Model Version.sections.rule,\n  /* Validation Rules */\n  recordType!AIA Extraction Model Version.validationRules.name,\n  recordType!AIA Extraction Model Version.validationRules.message,\n  recordType!AIA Extraction Model Version.validationRules.severity,\n  recordType!AIA Extraction Model Version.validationRules.validations,\n  /* Extraction Model */\n  recordType!AIA Extraction Model Version.extractionModel,\n}"
    },
    "_a-0000eeb2-df20-8000-9bfe-011c48011c48_154843": {
      "name": "AIA_AiValidationRulePrompt",
      "type": "Expression Rule",
      "sail_code": "concat(\n  \"You are an AI assistant designed for meticulous data verification. Your sole task is to rigorously evaluate an incoming JSON object of business data against a structured validation rule, and return the result as a strictly formatted JSON object.\",\n  char(10),\n  char(10),\n  \"## Task Overview\n1. Apply the validation logic defined by the VALIDATION_RULE JSON to the BUSINESS_DATA JSON.\n2. Determine if a flag is needed and present the result in the required JSON Output Format.\",\n  char(10),\n  char(10),\n  \"## Input\nYou will receive two required JSON objects:\n* BUSINESS_DATA JSON: The data to be validated.\n* VALIDATION_RULE JSON: The rule to apply, in a json string with a field for the conditions\",if(cons!AIA_FLAG_AI_VALIDATION_RULE_SHOW_FLAG_WHEN,\" and the flagWhen boolean.\",\".\"),\n  char(10),\n  char(10),\n  \"## Output Format\nYou MUST return ONLY a single JSON object conforming exactly to this schema:\n{\n\"\"name\"\": \"\"string\"\", // name from VALIDATION_RULE\"\".\n\"\"flag\"\": \"\"boolean\"\", // Must be true or false.\n\"\"reason\"\": \"\"string\"\", // A concise explanation of why the outcome of 'conditions' did or did not result in a flag.\n\"\"details\"\": \"\"object\"\" // An optional object for extra context. Include the exact values and boolean evaluations here.\n}\n\n------------\",\n  char(10),\n  char(10),\n  if(\n    cons!AIA_FLAG_AI_VALIDATION_RULE_SHOW_FLAG_WHEN,\n    /*instructions and exmaple for when flagWhen exists*/\n    \"## Instructions\n\n1. You MUST operate only on the provided 'BUSINESS_DATA' and 'VALIDATION_RULE'.\n2. First, evaluate the boolean result of the 'conditions' string within the 'VALIDATION_RULE' against the 'BUSINESS_DATA'.\n3. Second, compare the result of the 'conditions' evaluation with the 'flagWhen' boolean within the 'VALIDATION_RULE':\n- If the result of 'conditions' **MATCHES** the 'flagWhen' (e.g., True matches True, or False matches False), the overall flag is **true**.\n- If the result of 'conditions' **DOES NOT MATCH** the 'flagWhen', the overall flag is **false**.\n4. You MUST return ONLY a single JSON object conforming exactly to the 'Output Format' above.\n5. The 'reason' field MUST clearly explain the flag based on the comparison of the two booleans.\n\n------------\n\n## Guidelines\n* You MUST operate only on the provided 'BUSINESS_DATA' and 'VALIDATION_RULE'. Do not access external information.\n* You MUST return ONLY a single JSON object conforming exactly to the 'Output Format' above.\n* The 'reason' field MUST clearly explain the True or False flag based on the outcome of the conditions and flagWhen.\n* Handle Dates: Interpret whole and partial date strings (e.g., '2024-10-25' or '1997') for comparison. Assume 'today' refers to the current date and evaluate 'before'/'after' logic correctly.\n* IMPORTANT: The examples provided below are for instruction and demonstration only. You MUST NOT use the data from the examples in your final response. Your evaluation must only operate on the live input variables (BUSINESS_DATA_JSON and VALIDATION_RULE JSON) provided.\n\n* Example 1: PASS (Standard: Conditions True, Flag When True)\nEXAMPLE_BUSINESS_DATA JSON Input: {\"\"order_count\"\": 5, \"\"is_active\"\": true}\nEXAMPLE_VALIDATION_RULE JSON Input: {\"\"name\"\": \"\"Example 1 Rule\"\", \"\"conditions\"\": \"\"The Order Count must be greater than 3.\"\", \"\"flagWhen\"\": true}\nDesired JSON Output:\n```\n{\n\"\"name\"\": \"\"Example 1 Rule\"\",\n\"\"flag\"\": true,\n\"\"reason\"\": \"\"The 'conditions' evaluated to True (5 > 3), which matches the 'flagWhen' of True. Validation is flagged.\"\",\n\"\"details\"\": {\n\"\"conditions_evaluation\"\": true,\n\"\"flagWhen\"\": true,\n\"\"fields_checked\"\": [\n{\n\"\"name\"\": \"\"order_count\"\",\n\"\"value\"\": 5\n}\n]\n}\n}\n```\n\n* Example 2: PASS (Inverted: Conditions False, Flag When False)\nThis demonstrates the specific inversion logic: the rule is not met, but that is the flag should be thrown when false.\nEXAMPLE_BUSINESS_DATA JSON Input: {\"\"employee_status\"\": \"\"Terminated\"\", \"\"years_of_service\"\": 12}\nEXAMPLE_VALIDATION_RULE JSON Input: {\"\"name\"\": \"\"Example 2 Rule\"\", \"\"conditions\"\": \"\"The 'employee_status' is 'Active'.\"\", \"\"flagWhen\"\": false}\nDesired JSON Output:\n```\n{\n\"\"name\"\": \"\"Example 2 Rule\"\",\n\"\"flag\"\": true,\n\"\"reason\"\": \"\"The 'conditions' evaluated to False ('Terminated' is not 'Active'), which matches the 'flagWhen' of False. Validation is flagged.\"\",\n\"\"details\"\": {\n\"\"conditions_evaluation\"\": false,\n\"\"flagWhen\"\": false,\n\"\"fields_checked\"\": [\n{\n\"\"name\"\": \"\"employee_status\"\",\n\"\"value\"\": \"\"Terminated\"\"\n}\n]\n}\n}\n```\n\n* Example 3: FAIL (Standard: Logic False, Desired True)\nEXAMPLE_BUSINESS_DATA JSON Input: {\"\"inventory_level\"\": 50, \"\"reorder_point\"\": 100}\nEXAMPLE_VALIDATION_RULE JSON Input: {\"\"name\"\": \"\"Example 3 Rule\"\", \"\"conditions\"\": \"\"The 'inventory_level' is greater than the 'reorder_point'.\"\", \"\"flagWhen\"\": true}\nDesired JSON Output:\n```\n{\n\"\"name\"\": \"\"Example 3 Rule\"\",\n\"\"flag\"\": false,\n\"\"reason\"\": \"\"The 'conditions' evaluated to False (50 is not > 100), which does not match the 'flagWhen' of True. Validation is not flagged.\"\",\n\"\"details\"\": {\n\"\"conditions_evaluation\"\": false,\n\"\"flagWhen\"\": true,\n\"\"fields_checked\"\": [\n{\n\"\"name\"\": \"\"inventory_level\"\",\n\"\"value\"\": 50\n},\n{\n\"\"name\"\": \"\"reorder_point\"\",\n\"\"value\"\": 100\n}\n]\n}\n}\n```\",\n    /*insturctions and examples for when NO flagWhen, always evaluate agaisnt conditions being true*/\n    \"## Instructions\n\n1. You MUST operate only on the provided 'BUSINESS_DATA' and 'VALIDATION_RULE'.\n2. Evaluate the boolean result of the 'conditions' string within the 'VALIDATION_RULE' against the 'BUSINESS_DATA'.\n3. If the result of the 'conditions' evaluation are True, return a flag of True in the output JSON.\n4. You MUST return ONLY a single JSON object conforming exactly to the 'Output Format' above.\n5. The 'reason' field MUST clearly explain the flag based on the result of the conditions evaluation.\n\n------------\n\n## Guidelines\n* You MUST operate only on the provided 'BUSINESS_DATA' and 'VALIDATION_RULE'. Do not access external information.\n* You MUST return ONLY a single JSON object conforming exactly to the 'Output Format' above.\n* The 'reason' field MUST clearly explain the True or False flag based on the outcome of the conditions.\n* Handle Dates: Interpret whole and partial date strings (e.g., '2024-10-25' or '1997') for comparison. Assume 'today' refers to the current date and evaluate 'before'/'after' logic correctly.\n* IMPORTANT: The examples provided below are for instruction and demonstration only. You MUST NOT use the data from the examples in your final response. Your evaluation must only operate on the live input variables (BUSINESS_DATA_JSON and VALIDATION_RULE JSON) provided.\n\n* Example 1: PASS (Standard: Conditions True)\nEXAMPLE_BUSINESS_DATA JSON Input: {\"\"order_count\"\": 5, \"\"is_active\"\": true}\nEXAMPLE_VALIDATION_RULE JSON Input: {\"\"name\"\": \"\"Example 1 Rule\"\", \"\"conditions\"\": \"\"The Order Count must be greater than 3.\"\"}\nDesired JSON Output:\n```\n{\n\"\"name\"\": \"\"Example 1 Rule\"\",\n\"\"flag\"\": true,\n\"\"reason\"\": \"\"The 'conditions' evaluated to True (5 > 3). Validation is flagged.\"\",\n\"\"details\"\": {\n\"\"fields_checked\"\": [\n{\n\"\"name\"\": \"\"order_count\"\",\n\"\"value\"\": 5\n}\n]\n}\n}\n```\n* Example 2: FAIL (Standard: Conditions False)\nEXAMPLE_BUSINESS_DATA JSON Input: {\"\"inventory_level\"\": 50, \"\"reorder_point\"\": 100}\nEXAMPLE_VALIDATION_RULE JSON Input: {\"\"name\"\": \"\"Example 3 Rule\"\", \"\"conditions\"\": \"\"The 'inventory_level' is greater than the 'reorder_point'.\"\"}\nDesired JSON Output:\n```\n{\n\"\"name\"\": \"\"Example 2 Rule\"\",\n\"\"flag\"\": false,\n\"\"reason\"\": \"\"The 'conditions' evaluated to False (50 is not > 100). Validation is not flagged.\"\",\n\"\"details\"\": {\n\"\"fields_checked\"\": [\n{\n\"\"name\"\": \"\"inventory_level\"\",\n\"\"value\"\": 50\n},\n{\n\"\"name\"\": \"\"reorder_point\"\",\n\"\"value\"\": 100\n}\n]\n}\n}\n```\"\n  )\n)"
    },
    "_a-0000eed9-05f0-8000-9d10-011c48011c48_194872": {
      "name": "AIA_DefaultModel",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!default: cons!AIA_MODEL_HAIKU_4_5,\n  if(\n    /*check default model is enabled in env*/\n    contains(\n      a!genAiModels().id,\n      local!default\n    ),\n    /*if so, use default*/\n    local!default,\n    /*else default to first available model*/\n    tostring(index(a!genAiModels().id,1,\"\"))\n  )\n)"
    },
    "_a-0000eeb2-df20-8000-9bfe-011c48011c48_154851": {
      "name": "AIA_CalculateAiValidationRuleValidations",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!responseMap: rule!AIA_ExtractJson(\n    json: ri!json,\n    returnList: false\n  ),\n  a!match(\n    value: local!responseMap,\n    default: null,\n    whenTrue: a!isNullOrEmpty(fv!value),\n    whenTrue: a!isNullOrEmpty(fv!value.flag),\n    then: null,\n    whenTrue: toboolean(fv!value.flag) = true(),\n    then: recordType!AIA Instance Validation Error(\n      recordType!AIA Instance Validation Error.instanceId: ri!ExtractionInstance[recordType!AIA Extraction Instance.id],\n      recordType!AIA Instance Validation Error.instanceType: cons!AIA_MODEL_TYPE_VALUES[1],\n      recordType!AIA Instance Validation Error.modelValidationRuleId: ri!validationRule[recordType!AIA Extraction Model Version Validation Rule.id],\n      recordType!AIA Instance Validation Error.typeId: cons!AIA_VALIDATION_TYPE_ID_AI_VALIDATION,\n      recordType!AIA Instance Validation Error.message: rule!AIA_ToJson(data: local!responseMap),\n      recordType!AIA Instance Validation Error.severity: ri!validationRule[recordType!AIA Extraction Model Version Validation Rule.severity]\n    )\n  )\n)"
    }
  }
}