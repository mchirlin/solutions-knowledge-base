{
  "_metadata": {
    "bundle_id": "CMGT_WFL_CFG_TaskBlock_-_urnappiantranslation-stringv12ea3afc1-4338-41f2-bb50-88"
  },
  "objects": {
    "9248008e-2c2c-4eea-bb28-4a3c89838403": {
      "name": "CMGT_UTIL_RemoveRecordRelationshipsWithSingleKey_Reducer",
      "type": "Expression Rule",
      "sail_code": "if(\n  runtimetypeof(ri!key) <> 'type!{http://www.appian.com/ae/types/2009}RecordRelationship',\n  ri!record,\n  a!match(\n    value: index(ri!record, ri!key, null),\n    whenTrue: count(fv!value) = 1,\n    then: with(\n      local!indexedValue: index(\n        ri!record,\n        ri!key,\n        1,\n        index(ri!record, ri!key, null)\n      ),\n      local!subKeys: a!keys(local!indexedValue),\n      if(\n        length(local!subKeys) = 1,\n        remove(ri!record, ri!key),\n        #\"urn:appian:function:v1:a:update\"(\n          ri!record,\n          ri!key,\n          reduce(\n            rule!CMGT_UTIL_RemoveRecordRelationshipsWithSingleKey_Reducer(record: _, key: _),\n            local!indexedValue,\n            local!subKeys\n          )\n        )\n      )\n    ),\n    default: ri!record\n  )\n)"
    },
    "_a-0000ea4b-5b86-8000-9bfd-011c48011c48_717159": {
      "name": "CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_InitializeParameters",
      "type": "Expression Rule",
      "sail_code": "{\n  taskBlock: #\"urn:appian:function:v1:a:update\"(\n    rule!CMGT_WFL_QR_GetTaskBlock(\n      returnType: \"SINGLE_OBJECT\",\n      taskBlockId: ri!taskBlockId\n    ),\n    recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n    rule!CMGT_WFL_QR_GetTaskBlockTask(\n      taskBlockId: ri!taskBlockId,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.sortOrder,\n        ascending: true\n      )\n    )\n  )\n}"
    },
    "_a-0000eaa7-a5c0-8000-9c22-011c48011c48_973190": {
      "name": "CMGT_UTIL_MergeWriteRecordIdsToProcessVariable",
      "type": "Expression Rule",
      "sail_code": "/*\nThe main rule to merge the ID-output of a WriteRecords SS node back to the input process variable.\n\nSTANDARD USAGE:\n- Use this in tandem with rule CMGT_UTIL_DropNonWritableRelationshipsFromRecord (see that description)\n- In the output of a WriteRecords SS, do:\n  A - New Custom Output\n  B - rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n        processData: pv![the pv your wrote],\n        recordsUpdated: ac!RecordsUpdated,\n        fksToParent: {list of record fields that are FKs to the primary PK you wrote}\n      )\n  C - Save this back to the pv you wrote\n\nMAPPING FKS:\n- Using this rule in the current state, child-FKs can only be set \nwhere they map back to the primary record type, using input \"fksToParent\".\n  -> For example, if you are writing \"Case\", \n    - you could set \"Case.Comment.caseId\"\n    - you could set \"Case.Comment.Replies.caseId\"\n    - but not \"Case.Comment.Replies.commentId\" (since the FK \"commentId\" is not the PK of \"Case\")\n- To set other foreign keys, you would have to run manual update rules using the result of this.\nNote:\n- \"fksToParent\" is optimized for 1:M relationships.\n  - Setting an fkToParent for a 1:1 will create an instance of that child record if it is null.\n\nIMPORTANT GENERAL NOTES: \n- The result of THIS rule will have data that IS considered changed, \nso a designer should be cautious about re-writing this later in process \nas it could cause race condition and performance side affects.\n\n- Also, the result of this WILL NOT have custom-fields calculated, \nsince they can be changed as a result of the write, but this rule is not re-querying.\nIf you need these, then re-query.\n\n- This should generally only be used for downstream flows that don't write it directly again, \nsuch as document processing, emails, etc.\n*/\nif(\n  or(\n    runtimetypeof(ri!recordsUpdated) = runtimetypeof(a!flatten(ri!recordsUpdated)),\n    runtimetypeof(ri!recordsUpdated) = 'type!{http://www.appian.com/ae/types/2009}Variant?list'\n  ),\n  if(\n    count(a!flatten(ri!recordsUpdated)) = 0,\n    ri!processData,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: enumerate(count(a!flatten(ri!recordsUpdated))),\n      expression: rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n        processData: a!flatten(ri!processData)[fv!index],\n        recordsUpdated: cast(\n          runtimetypeof(a!flatten(ri!processData)),\n          ri!recordsUpdated\n        )[fv!index],\n        fksToParent: ri!fksToParent\n      )\n    )\n  ),\n  a!localVariables(\n    local!keys: #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!keys(ri!recordsUpdated),\n      expression: a!map(\n        key: fv!item,\n        isPrimaryKey: runtimetypeof(fv!item) = 'type!{http://www.appian.com/ae/types/2009}RecordField'\n      )\n    ),\n    local!keysOrganized: rule!CMGT_UTIL_Filter(\n      records: local!keys,\n      field: \"isPrimaryKey\",\n      value: true,\n      filterType: \"FULL_RESULT\"\n    ),\n    local!primaryKeyField: local!keysOrganized.firstMatch.key,\n    local!updates: rule!CMGT_UTIL_SetRecordFields(\n      record: ri!processData,\n      neverOverwrite: {\n        a!map(\n          field: local!primaryKeyField,\n          value: ri!recordsUpdated[local!primaryKeyField]\n        ),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!fksToParent,\n          expression: a!map(\n            field: fv!item,\n            value: ri!recordsUpdated[local!primaryKeyField],\n            /*Children get complicated, and an update should only run if a child is actually attached*/\n            applyWhen: a!match(\n              value: runtimetypeof(ri!processData[fv!item]),\n              equals: runtimetypeof(a!flatten(ri!processData[fv!item])),\n              then: count(ri!processData[fv!item]) > 0,\n              equals: tointeger(\n                'type!{http://www.appian.com/ae/types/2009}Variant?list'\n              ),\n              then: or(\n                #\"SYSTEM_SYSRULES_forEach\"(\n                  items: ri!processData[fv!item],\n                  expression: a!isNotNullOrEmpty(fv!item)\n                )\n              ),\n              default: a!isNotNullOrEmpty(ri!processData[fv!item])\n            )\n          )\n        )\n      },\n      childRelationships: #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!keysOrganized.rejects,\n        expression: a!map(\n          field: fv!item.key,\n          value: if(\n            rule!CMGT_UTIL_IsBlank(ri!processData[fv!item.key]),\n            ri!recordsUpdated[fv!item.key],\n            rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n              processData: ri!processData[fv!item.key],\n              recordsUpdated: ri!recordsUpdated[fv!item.key],\n              fksToParent: {}\n            )\n          )\n        )\n      )\n    ),\n    /*reduce over updates to remove any relationships that were incorrectly created with just an fk*/\n    if(\n      a!isNullOrEmpty(ri!fksToParent),\n      local!updates,\n      reduce(\n        rule!CMGT_UTIL_RemoveRecordRelationshipsWithSingleKey_Reducer(record: _, key: _),\n        local!updates,\n        a!keys(local!updates)\n      )\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3603367": {
      "name": "CMGT_WFL_EmailTemplate_RecordAction_CreateUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!brandingMap: rule!CMGT_CB_UTIL_LoadBrandingMap(),\n  local!isCreate: rule!CMGT_UTIL_IsBlank(\n    value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n  ),\n  local!referencedTaskNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailReferenceTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTask.nameLabel,\n    null()\n  ),\n  local!referencedTaskBlockNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailTaskBlockTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask.taskBlock.label,\n    null()\n  ),\n  local!referencedCaseTypeTaskNames: index(\n    rule!CMGT_WFL_QR_GetSendEmailCaseTypeWorkflowTasks(\n      emailTemplateUuid: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n      executeWhen: rule!CMGT_UTIL_IsNotBlank(\n        ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId]\n      )\n    ),\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask.caseType.name,\n    null()\n  ),\n  #\"SYSTEM_SYSRULES_formLayout_v2\"(\n    titleBar: #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: {\n        #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n          items: {\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_stampField\"(\n                icon: \"envelope-open-text\",\n                contentColor: local!brandingMap.StandardStampContentColor,\n                backgroundColor: local!brandingMap.StandardStampBackgroundColor,\n                size: \"TINY\",\n                shape: local!brandingMap.StandardStampShape\n              ),\n              width: \"MINIMIZE\"\n            ),\n            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n              item: #\"SYSTEM_SYSRULES_headingField\"(\n                text: if(\n                  local!isCreate,\n                  #\"urn:appian:translation-string:v1:46b8e7eb-9250-4bc1-87ba-785b0eb505a2\",\n                  #\"urn:appian:translation-string:v1:5f22d685-37f9-42d5-b1b1-bda7f782cf18\"\n                ),\n                headingTag: \"H1\",\n                fontWeight: \"SEMI_BOLD\",\n                size: local!brandingMap.H1Size,\n                marginAbove: \"STANDARD\"\n              )\n            )\n          },\n          alignVertical: \"MIDDLE\",\n          spacing: \"STANDARD\",\n          marginBelow: \"NONE\",\n          marginAbove: \"NONE\"\n        ),\n        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n          value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n            color: local!brandingMap.secondaryTextColor,\n            size: \"SMALL\"\n          )\n        )\n      },\n      padding: \"STANDARD\",\n      showBorder: false()\n    ),\n\n    showTitleBarDivider: true(),\n    contentsWidth: \"FULL\",\n    contents: {\n      rule!CMGT_WFL_DisplayInfoBanner_EmailTemplate(\n        brandingMap: local!brandingMap,\n        primaryMessage: #\"urn:appian:translation-string:v1:352e8f93-81ec-4882-a059-01abdbe209b1\",\n        showWhen: not(local!isCreate),\n        caseTypeWorkFlowNames: local!referencedCaseTypeTaskNames,\n        referenceTaskNames: local!referencedTaskNames,\n        taskBlockNames: local!referencedTaskBlockNames\n      ),\n      rule!CMGT_WFL_EmailTemplate_Details(emailTemplate: ri!emailTemplate)\n    },\n    buttons: {\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: if(\n            local!isCreate,\n            #\"urn:appian:translation-string:v1:b8033487-0a9e-4a1b-8970-b49eb8ad8cc7\",\n            #\"urn:appian:translation-string:v1:06dbafc7-e085-40de-a68a-c83054c1d7ec\"\n          ),\n          submit: true,\n          style: \"SOLID\",\n          validate: true\n        ),\n        secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:edd4df67-d878-46d6-ab67-732a3700a588\",\n          saveInto: {\n            a!save(\n              ri!documentsToDelete,\n              rule!CMGT_UTIL_Filter(\n                records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n                field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateAttachmentId,\n                value: null\n              )[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n            ),\n            a!save(ri!emailTemplate, null)\n          },\n          submit: true,\n          style: \"OUTLINE\",\n          validate: false\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_575605": {
      "name": "CMGT_WFL_TaskBlock_Visualization",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!activeTasks: rule!CMGT_UTIL_Filter(\n    records: ri!tasks,\n    field: recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n    value: true\n  ),\n  local!activeTaskBranches: rule!CMGT_UTIL_Filter(\n    records: a!flatten(\n      ri!tasks[recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches]\n    ),\n    field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n    value: true\n  ),\n  local!startMilestoneReferenceMilestoneId: a!defaultValue(ri!startTaskUuid, \"m-0\"),\n  /*\n  -------\n  Build all nodes\n  -------\n  */\n  /*Start with parent milestone nodes for each distinct milestone*/\n  /*we should rework this to remove the milstone concept entirely*/\n  local!milestoneNodes: #\"SYSTEM_SYSRULES_forEach\"(\n    items: {\n      a!map(\n        referenceMilestone: a!map(\n          referenceMilestoneId: local!startMilestoneReferenceMilestoneId,\n          label: #\"urn:appian:translation-string:v1:ca8737d3-bee3-452c-9475-419cf1366475\"\n        ),\n        tasks: local!activeTasks\n      ),\n      a!map(\n        referenceMilestone: a!map(\n          referenceMilestoneId: \"m-\" & if(\n            a!isNullOrEmpty(local!activeTasks),\n            1,\n            length(local!activeTasks) + 1\n          ),\n          label: #\"urn:appian:translation-string:v1:c9dcd0d5-2e16-4d10-b544-3e3445922c79\"\n        )\n      )\n    },\n    expression: a!map(\n      id: fv!item.referenceMilestone.referenceMilestoneId,\n      group: \"terminal\",\n      label: concat(\n        \"<b>\",\n        substitute(\n          upper(fv!item.referenceMilestone.label),\n          char(10),\n          \"</b>\" & char(10) & \"<b>\"\n        ),\n        \"</b>\"\n      ),\n      font: a!map(\n        multi: \"html\",\n        align: \"left\",\n        size: 12,\n        vadjust: 2,\n        color: ri!brandingMap.BlackColor,\n        bold: a!map(size: 14, vadjust: 0, mod: \"bold\")\n      ),\n      color: a!map(\n        border: ri!brandingMap.DividerColor,\n        background: ri!brandingMap.WhiteColor\n      ),\n      shadow: a!map(),\n      /*For each milestone, create the children nodes within that milestone*/\n      children: #\"SYSTEM_SYSRULES_forEach\"(\n        items: fv!item.tasks,\n        expression: a!localVariables(\n          if(\n            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.isAutomated],\n            a!map(\n              id: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n              group: \"task\",\n              label: if(\n                tostring(ri!selectedTaskBlockTaskUuid) = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                concat(\n                  \"<b>\" & rule!CMGT_UTIL_TruncateText(\n                    text: a!defaultValue(\n                      fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                      #\"urn:appian:translation-string:v1:f1a2114c-0453-4665-b358-be59650c55bc\"\n                    ),\n                    maxLength: 44\n                  ) & \"</b>\"\n                ),\n                rule!CMGT_UTIL_TruncateText(\n                  text: a!defaultValue(\n                    fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                    #\"urn:appian:translation-string:v1:f1a2114c-0453-4665-b358-be59650c55bc\"\n                  ),\n                  maxLength: 44\n                )\n              ),\n              font: a!map(\n                multi: \"html\",\n                align: \"left\",\n                size: 12,\n                vadjust: 2,\n                color: ri!brandingMap.BlackColor,\n                bold: a!map(size: 14, vadjust: - 4, mod: \"bold\"),\n\n              ),\n              shape: \"image\",\n              image: rule!CMGT_WFL_Automation_returnImageURL(\n                taskBehaviorType: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType],\n                taskAction:null,\n                isSelected: tostring(ri!selectedTaskBlockTaskUuid) = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n\n              ),\n              color: a!map(\n                border: ri!brandingMap.DividerColor,\n                background: null\n              ),\n              shadow: a!map()\n            ),\n            a!map(\n              id: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n              group: \"task\",\n              label: concat(\n                \"<b>\",\n                /*Trim the title to 44 characters at the next space to prevent wrapping text*/\n                substitute(\n                  rule!CMGT_UTIL_TruncateText(\n                    text: a!defaultValue(\n                      fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                      #\"urn:appian:translation-string:v1:f1a2114c-0453-4665-b358-be59650c55bc\"\n                    ),\n                    maxLength: 44\n                  ),\n                  char(10),\n                  \"</b>\" & char(10) & \"<b>\"\n                ),\n                \"</b>\",\n                char(10),\n                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.label]\n              ),\n              font: a!map(\n                multi: \"html\",\n                align: \"left\",\n                size: 12,\n                vadjust: 2,\n                color: ri!brandingMap.BlackColor,\n                bold: a!map(size: 14, vadjust: - 4, mod: \"bold\")\n              ),\n              color: a!map(\n                border: ri!brandingMap.DividerColor,\n                background: ri!brandingMap.WhiteColor\n              ),\n              shadow: a!map(\n                enabled: true,\n                color: ri!brandingMap.WhiteColor,\n                size: 0,\n                x: 0,\n                y: - 5\n              )\n            )\n          )\n        )\n      )\n    )\n  ),\n  /*\n  -------\n  Build all edges\n  -------\n  */\n  /*Build edges for all VALID branches between tasks*/\n  /*Note that branches can become inActive through SAIL manipulation in forms, so we hide them*/\n  local!taskToTaskEdges: if(\n    rule!CMGT_UTIL_IsBlank(local!activeTasks),\n    {},\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: rule!CMGT_UTIL_DistinctRecords(\n        records: local!activeTaskBranches,\n        fields: {\n          recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n          recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n          recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskResponseOption.taskBlockTaskResponseUuid\n        }\n      ),\n      expression: a!localVariables(\n        local!taskBeforeBranch: displayvalue(\n          fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid],\n          local!activeTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n          local!activeTasks,\n          null\n        ),\n        local!taskAfterBranch: displayvalue(\n          fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid],\n          local!activeTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n          local!activeTasks,\n          null\n        ),\n        a!map(\n          from: local!taskBeforeBranch[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n          to: local!taskAfterBranch[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n          label: rule!CMGT_UTIL_TruncateText(\n            text: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskResponseOption.label],\n            maxLength: 15\n          ),\n          title: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskResponseOption.label],\n          color: ri!brandingMap.BlackColor,\n          dashes: if(\n            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired],\n            false,\n            true\n          ),\n          font: a!map(\n            multi: \"html\",\n            align: \"horizontal\",\n            color: ri!brandingMap.BlackColor,\n            bold: a!map(mod: \"bold\", size: 15)\n          )\n        )\n      )\n    )\n  ),\n  /*Build edges for all tasks that connect to their milestone start node*/\n  local!milestoneToTaskEdges: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!activeTasks,\n    expression: a!map(\n      from: local!startMilestoneReferenceMilestoneId,\n      to: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n      color: ri!brandingMap.BlackColor,\n      /*- Connect to start if starts by default is true*/\n      showWhen: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault],\n      dashes: false,\n      font: a!map()\n    )\n  ),\n  /*Build edges for all tasks that connect to the next milestone or the \"End\" node if in last milestone*/\n  local!taskToMilestoneEdges: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!activeTasks,\n      expression: a!localVariables(\n        local!taskDependentBranches: rule!CMGT_UTIL_Filter(\n          records: local!activeTaskBranches,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n          value: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n        ),\n        local!taskPrecedentBranches: rule!CMGT_UTIL_Filter(\n          records: local!activeTaskBranches,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n          value: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n        ),\n        local!responseOptionToEnd: rule!CMGT_UTIL_Filter(\n          records: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions],\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid,\n          value: local!taskDependentBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskResponseOptionUuid],\n          filterType: \"REJECT\"\n        ),\n        local!item: fv!item,\n        if(\n          and(\n            toboolean(\n              local!item[recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault]\n            ) = false,\n            rule!CMGT_UTIL_IsBlank(local!taskPrecedentBranches)\n          ),\n          null,\n          {\n            /* Constructing edge for each response option */\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: local!responseOptionToEnd,\n              expression: a!map(\n                from: local!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                to: \"m-\" & length(local!activeTasks) + 1,\n                color: ri!brandingMap.BlackColor,\n                label: rule!CMGT_UTIL_TruncateText(\n                  text: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.label],\n                  maxLength: 15\n                ),\n                title: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.label],\n                dashes: false,\n                font: a!map(\n                  multi: \"html\",\n                  align: \"horizontal\",\n                  color: ri!brandingMap.BlackColor,\n                  bold: a!map(mod: \"bold\", size: 15)\n                )\n              )\n            ),\n            a!map(\n              from: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n              to: \"m-\" & length(local!activeTasks) + 1,\n              color: ri!brandingMap.BlackColor,\n              label: \"\",\n              title: \"\",\n              /*- Connect to end if has nothing after it*/\n              showWhen: and(\n                rule!CMGT_UTIL_IsBlank(local!taskDependentBranches),\n                rule!CMGT_UTIL_IsBlank(local!responseOptionToEnd)\n              ),\n              dashes: false,\n              font: a!map()\n            )\n          }\n        )\n      )\n    )\n  ),\n  /*Combine all edges before passing to component*/\n  /*Set the arrows parameter on the individual edges since we may need to swap these around to optimize rendering*/\n  local!allEdges: rule!CMGT_UTIL_Filter(\n    records: #\"SYSTEM_SYSRULES_forEach\"(\n      items: rule!CMGT_UTIL_RejectBlank(\n        {\n          local!taskToTaskEdges,\n          local!milestoneToTaskEdges,\n          local!taskToMilestoneEdges\n        }\n      ),\n      expression: #\"urn:appian:function:v1:a:update\"(\n        fv!item,\n        \"arrows\",\n        rule!CMGT_NetworkChartField_StandardFormatting(brandingMap: ri!brandingMap).defaultArrow\n      )\n    ),\n    field: \"showWhen\",\n    value: false,\n    filterType: \"REJECT\"\n  ),\n  local!fixNodesEdgesOrder: if(\n    a!isNullOrEmpty(local!activeTasks),\n    a!map(nodes: {}, edges: {}),\n    rule!CMGT_NetworkChartField_FixNodeEdgeOrder_Logic(\n      nodes: local!milestoneNodes,\n      edges: local!allEdges\n    )\n  ),\n  /*\n  -------\n  local variables that refreshes after load based on selection\n  -------\n  */\n  /*Logic for node selection*/\n  local!selectedTask: rule!CMGT_UTIL_cast(\n    type: recordType!CMGT_WFL_CFG_TaskBlockTask,\n    value: if(\n      a!isNullOrEmpty(ri!selectedTaskBlockTaskUuid),\n      null,\n      rule!CMGT_UTIL_Filter(\n        records: local!activeTasks,\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n        value: ri!selectedTaskBlockTaskUuid\n      )\n    )\n  ),\n  local!finalNodesToDisplay: if(\n    a!isNullOrEmpty(ri!selectedTaskBlockTaskUuid),\n    /*display as it is, if no task node is selected*/\n    local!fixNodesEdgesOrder.nodes,\n    /*Update selected task's border and unrelated task nodes*/\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!fixNodesEdgesOrder.nodes,\n      expression: a!localVariables(\n        local!currentTask: rule!CMGT_UTIL_cast(\n          type: recordType!CMGT_WFL_CFG_TaskBlockTask,\n          value: rule!CMGT_UTIL_Filter(\n            records: local!activeTasks,\n            field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n            value: fv!item.id\n          )\n        ),\n        local!isSelected: touniformstring(ri!selectedTaskBlockTaskUuid) = touniformstring(fv!item.id),\n        local!isRelatedToSelected: or(\n          contains(\n            local!currentTask[recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches.beforeTaskBlockTaskUuid],\n            touniformstring(ri!selectedTaskBlockTaskUuid)\n          ),\n          contains(\n            local!selectedTask[recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches.beforeTaskBlockTaskUuid],\n            touniformstring(fv!item.id)\n          )\n        ),\n        #\"urn:appian:function:v1:a:update\"(\n          fv!item,\n          { \"font\", \"color\", \"shadow\" },\n          {\n            #\"urn:appian:function:v1:a:update\"(\n              fv!item.font,\n              \"color\",\n              if(\n                or(\n                  local!isSelected,\n                  local!isRelatedToSelected\n                ),\n                { ri!brandingMap.BlackColor },\n                { ri!brandingMap.SecondaryTextColor }\n              )\n            ),\n            #\"urn:appian:function:v1:a:update\"(\n              fv!item.color,\n              { \"background\", \"border\" },\n              {\n                if(\n                  or(\n                    local!isSelected,\n                    local!isRelatedToSelected\n                  ),\n                  { fv!item.color.background },\n                  { ri!brandingMap.WhiteColor }\n                ),\n                if(\n                  local!isSelected,\n                  ri!brandingMap.BlackColor,\n                  ri!brandingMap.DividerColor\n                )\n              }\n            ),\n            #\"urn:appian:function:v1:a:update\"(\n              fv!item.shadow,\n              \"color\",\n              if(\n                or(\n                  local!isSelected,\n                  local!isRelatedToSelected\n                ),\n                { fv!item.shadow.color },\n                { ri!brandingMap.WhiteColor }\n              )\n            )\n          }\n        )\n      )\n    )\n  ),\n  local!finalEdgesToDisplay: if(\n    a!isNullOrEmpty(ri!selectedTaskBlockTaskUuid),\n    /*display as it is if no task node is selected*/\n    local!fixNodesEdgesOrder.edges,\n    /*Update edges to selected and related nodes to be black in color*/\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!fixNodesEdgesOrder.edges,\n      expression: if(\n        /*if it is a edge to selected or related node - update color*/\n        contains(\n          touniformstring({ fv!item.from, fv!item.to }),\n          touniformstring(ri!selectedTaskBlockTaskUuid)\n        ),\n        fv!item,\n        {\n          #\"urn:appian:function:v1:a:update\"(\n            data: fv!item,\n            index: { \"font\", \"color\" },\n            value: {\n              #\"urn:appian:function:v1:a:update\"(\n                data: fv!item.font,\n                index: \"color\",\n                value: ri!brandingMap.SecondaryTextColor\n              ),\n              ri!brandingMap.DividerColor\n            }\n          )\n        }\n      )\n    )\n  ),\n  local!validations: a!localVariables(\n    local!isEndNodePresentAndConnected:\n    and(\n    contains(\n      index(local!finalNodesToDisplay, \"label\", \"\"),\n      \"<b>END</b>\"\n    ),\n    contains(\n      touniformstring(index(local!finalEdgesToDisplay, \"to\", \"\")),\n      \"m-\" & if(\n        rule!CMGT_UTIL_IsBlank(local!activeTasks),\n        1,\n        length(local!activeTasks) + 1\n      )\n    )\n    ),\n    {\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:b1c8fa44-5ad7-4c3d-adab-2b29d020ce6f\"(\n          #\"urn:appian:translation-variable:v1:7202908f-19dc-44a8-a741-9d1f47227cbe\": ri!additionalValidationConditions.taskNamesInViolation\n        ),\n        validateAfter: \"SUBMIT\",\n        showWhen: rule!CMGT_UTIL_IsNotBlank(\n          ri!additionalValidationConditions.taskNamesInViolation\n        )\n      ),\n      /*display validation message if there are no tasks mapped to START*/\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:459be6ff-55b0-47f3-81fc-6c7386747126\",\n        validateAfter: \"SUBMIT\",\n        showWhen: and(\n          rule!CMGT_UTIL_IsBlank(\n            ri!additionalValidationConditions.tasksMappedtoStart\n          ),\n          ri!additionalValidationConditions.doesNonStartTasksExist\n        )\n      ),\n      /*display validation message if there is not end node*/\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:2c2e7b04-c771-4f76-94e6-06f65f4c162f\",\n        validateAfter: \"SUBMIT\",\n        showWhen: and(\n\n          not(local!isEndNodePresentAndConnected),\n          count(\n            index(local!finalNodesToDisplay, \"label\", null)\n          ) > 1\n        )\n      ),\n      /*display validation message if there are tasks with no required precedents*/\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:cb8b665a-6708-48a7-a046-0581dfad9bdd\"(\n          #\"urn:appian:translation-variable:v1:5f1e4161-3b84-4604-a027-ed934750ece6\": joinarray(\n            index(\n              ri!additionalValidationConditions,\n              \"tasksWithNoPrecedents\",\n              null\n            )[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n            \", \"\n          )\n        ),\n        validateAfter: \"SUBMIT\",\n        showWhen: rule!CMGT_UTIL_IsNotBlank(\n          index(\n            ri!additionalValidationConditions,\n            \"tasksWithNoPrecedents\",\n            null\n          )\n        )\n      ),\n      /*display validation message if there are tasks with invalid basic details*/\n      #\"SYSTEM_SYSRULES_validationMessage\"(\n        message: #\"urn:appian:translation-string:v1:1954697c-c9b5-4ac7-b349-d5d298d0f929\"(\n          #\"urn:appian:translation-variable:v1:f8f512c7-0b6c-4d3d-9aaf-482aa193d182\": joinarray(\n            index(\n              index(\n                ri!additionalValidationConditions,\n                \"tasksWithInvalidBasicDetails\",\n                null\n              ),\n              recordType!CMGT_WFL_CFG_TaskBlockTask.taskName,\n              null\n            ),\n            \", \"\n          )\n        ),\n        validateAfter: \"SUBMIT\",\n        showWhen: rule!CMGT_UTIL_IsNotBlank(\n          index(\n            ri!additionalValidationConditions,\n            \"tasksWithInvalidBasicDetails\",\n            null\n          )\n        )\n      )\n    }\n  ),\n  {\n    #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n      showWhen: rule!CMGT_UTIL_IsNotBlank(local!validations),\n      validations: local!validations\n    ),\n    #\"SYSTEM_SYSRULES_cardLayout\"(\n      contents: rule!CMGT_PLUGIN_NetworkChartField(\n        nodes: local!finalNodesToDisplay,\n        edges: local!finalEdgesToDisplay,\n        selectedNodeUuid: ri!selectedTaskBlockTaskUuid,\n        height: if(\n          rule!CMGT_UTIL_IsMobileScreenSize(),\n          \"MEDIUM\",\n          a!defaultValue(ri!height, \"TALL\")\n        ),\n        selectable: ri!selectable,\n        brandingMap: ri!brandingMap,\n        onNodeSelection: a!save(\n          ri!selectedTaskBlockTaskUuid,\n          rule!CMGT_UTIL_cast(\n            typeOf: { \"\" },\n            value: if(\n              touniformstring(ri!selectedTaskBlockTaskUuid) = save!value,\n              {},\n              save!value\n            )\n          )\n        ),\n        showNavButtons: a!defaultValue(ri!showVizNavigationButtons, true)\n      ),\n      style: \"TRANSPARENT\",\n      shape: ri!brandingMap.CardShape,\n      padding: \"EVEN_LESS\",\n      showBorder: false,\n      showShadow: false\n    )\n  }\n)"
    },
    "_a-0000ecac-72b0-8000-9cf2-011c48011c48_3163819": {
      "name": "CMGT_WFL_ConstructTaskBlockTaskBranchMap",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  taskUUID: ri!taskUUID,\n  taskResponseOptionUUID: ri!taskResponseOptionUUID,\n  isRequired: ri!isRequired,\n  isRequirednessValid:a!defaultValue(value: ri!isRequirednessValid,default: true),\n  afterTaskBlockTaskBranches: ri!afterTaskBlockTaskBranches,\n  isActive: ri!isActive\n)"
    },
    "_a-0000eb88-676f-8000-9c81-011c48011c48_1925601": {
      "name": "CMGT_CB_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_MergeMaps(\n  map1: rule!CMGT_UTIL_LoadBrandingMap(),\n  map2: a!localVariables(\n    local!branding: getbrandingconfig(\n      cons!CMGT_WFL_DOC_DEFAULT_BRANDING_CONFIG,\n      true\n    ),\n    local!output: reduce(\n      #\"urn:appian:function:v1:a:update\"(_, _, _),\n      a!map(),\n      merge(\n        {\n          local!branding.defaultBranding.key,\n          local!branding.customBranding.key\n        },\n        {\n          local!branding.defaultBranding.value,\n          local!branding.customBranding.value\n        }\n      )\n    ),\n    local!output\n  )\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673860": {
      "name": "CMGT_WFL_MTR_UserCreatesTaskBlock",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604784": {
      "name": "CMGT_WFL_QR_GetSendEmailTaskBlockTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.sendEmailTaskBlockTaskId,\n      operator: \"in\",\n      value: ri!sendEmailTaskBlockTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTaskId,\n      operator: \"in\",\n      value: ri!taskBlockTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.taskBlockTask,\n    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ea01-8773-8000-9bde-011c48011c48_356157": {
      "name": "CMGT_UTIL_CardGroupHandler",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!maxPerRow: a!defaultValue(ri!maxPerRow, count(ri!cardLayouts)),\n  #\"SYSTEM_SYSRULES_forEach\"(\n    items: enumerate(\n      ceiling(\n        count(ri!cardLayouts) / local!maxPerRow,\n        1\n      )\n    ),\n    expression: a!localVariables(\n      local!rowIndex: fv!index,\n      #\"SYSTEM_SYSRULES_columnsLayout\"(\n        marginBelow: ri!marginBelow,\n        columns: {\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            showWhen: contains({ \"RIGHT\", \"CENTER\" }, ri!align)\n          ),\n          #\"SYSTEM_SYSRULES_forEach\"(\n            items: enumerate(local!maxPerRow),\n            expression: a!localVariables(\n              local!adjustedIndex: (local!rowIndex - 1) * local!maxPerRow + fv!index,\n              local!cardLayout: a!refreshVariable(\n                value: index(ri!cardLayouts, local!adjustedIndex, {}),\n                refreshAlways: true\n              ),\n              #\"SYSTEM_SYSRULES_columnLayout\"(\n                width: ri!columnWidth,\n                contents: local!cardLayout\n              )\n            )\n          ),\n          #\"SYSTEM_SYSRULES_columnLayout\"(\n            showWhen: contains({ \"LEFT\", \"CENTER\" }, ri!align)\n          )\n        },\n        stackWhen: ri!stackWhen,\n        spacing: a!defaultValue(ri!spacing,\"DENSE\")\n      )\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604833": {
      "name": "CMGT_WFL_EmailTemplateAttachment_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!emailTemplateAttachments,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.documentName,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"name\"\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"extension\"\n        )\n      ),\n      a!map(\n        field:  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.size,\n        value: document(\n          fv!item[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n          \"size\"\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604771": {
      "name": "CMGT_WFL_QR_GetSendEmailReferenceTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailReferenceTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.sendEmailReferenceTaskId,\n      operator: \"in\",\n      value: ri!sendEmailReferenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTaskId,\n      operator: \"in\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailReferenceTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.referenceTask,\n    recordType!CMGT_WFL_CFG_SendEmailReferenceTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000eb92-18b7-8000-9c91-011c48011c48_2021668": {
      "name": "CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_TaskList",
      "type": "Interface",
      "sail_code": "{\n  #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n    buttons: {\n      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n        label: #\"urn:appian:translation-string:v1:c512b062-c487-4b59-a5d9-e009552303aa\",\n        icon: \"plus-circle\",\n        saveInto: a!save(ri!currentWorkflowStep, \"ADD_REF_TASKS\"),\n        size: \"SMALL\",\n        color: \"SECONDARY\"\n      )\n    },\n    align: \"START\",\n    marginAbove: \"STANDARD\",\n    marginBelow: \"NONE\"\n  ),\n  #\"SYSTEM_SYSRULES_gridLayout\"(\n    label:#\"urn:appian:translation-string:v1:0d2803b8-e051-4704-b4d5-c637b0568ff3\",\n    labelPosition: \"COLLAPSED\",\n    emptyGridMessage: #\"urn:appian:translation-string:v1:9541cbd3-719b-4809-bfdc-ee599f8cbab7\",\n    headerCells: {\n      #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(),\n      #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(),\n      #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"(),\n      #\"SYSTEM_SYSRULES_gridLayoutHeaderCell\"()\n    },\n    columnConfigs: {\n      #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\"),\n      #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"DISTRIBUTE\"),\n      #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\"),\n      #\"SYSTEM_SYSRULES_gridLayoutColumnConfig\"(width: \"ICON\")\n    },\n    rows: #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!visibleTaskBlockTasks,\n      expression: a!localVariables(\n        local!thisTask: fv!item,\n        local!taskBlockTaskName: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n        local!afterTaskBranchIndices: rule!CMGT_UTIL_Filter(\n          records: a!flatten(\n            ri!taskBlockTaskBranchMaps.afterTaskBlockTaskBranches\n          ),\n          fieldValuePairs: {\n            a!map(\n              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n              value: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n            ),\n            a!map(\n              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n              value: { true, null }\n            )\n          },\n          filterType: \"MATCH_INDICES\"\n        ),\n        local!afterTasks: rule!CMGT_UTIL_Filter(\n          records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][ri!visibleTaskBlockTaskIndices],\n          field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n          value: index(\n            a!flatten(\n              ri!taskBlockTaskBranchMaps.afterTaskBlockTaskBranches\n            )[local!afterTaskBranchIndices],\n            recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n            null\n          )\n        ),\n        local!dependents: joinarray(\n          local!afterTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n          \", \"\n        ),\n        local!countOfDependents: if(\n          a!isNotNullOrEmpty(local!dependents),\n          length(local!afterTasks),\n          0\n        ),\n        local!tasksWithInvalidBasicDetails: index(\n          ri!additionalValidationConditions,\n          \"tasksWithInvalidBasicDetails\",\n          \" \"\n        ),\n        local!hasInvalidBasicDetails: and(\n          rule!CMGT_UTIL_IsNotBlank(local!tasksWithInvalidBasicDetails),\n          contains(\n            index(\n              local!tasksWithInvalidBasicDetails,\n              recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n              {}\n            ),\n            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n          )\n        ),\n        local!tasksWithNoPrecendents: index(\n          index(\n            ri!additionalValidationConditions,\n            \"tasksWithNoPrecedents\",\n            \" \"\n          ),\n          recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n          \" \"\n        ),\n        local!isOrphanedTask: and(\n          rule!CMGT_UTIL_IsNotBlank(local!tasksWithNoPrecendents),\n          contains(\n            local!tasksWithNoPrecendents,\n            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n          )\n        ),\n        #\"SYSTEM_SYSRULES_gridRowLayout\"(\n          id: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n          contents: {\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: if(\n                fv!isFirst,\n                {\n                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                    icon: \"play-circle\",\n                    altText: #\"urn:appian:translation-string:v1:419ef7cc-f846-4e8d-9805-f45d76f7ff16\",\n                    size: \"MEDIUM\"\n                  )\n                },\n                {\n                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                    icon: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.icon],\n                    caption: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.label],\n                    color: if(\n                      ri!selectedTaskBlockTaskUuid = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                      ri!brandingMap.WhiteColor,\n                      if(\n                        fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n                        ri!brandingMap.AccentColor,\n                        ri!brandingMap.SecondaryTextColor\n                      )\n                    ),\n                    size: \"MEDIUM\"\n                  )\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: {\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: local!taskBlockTaskName,\n                  style: \"STRONG\"\n                ),\n                char(32),\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"exclamation-triangle\",\n                  altText: #\"urn:appian:translation-string:v1:00414da3-9e85-41c6-8a51-73f3335484d9\",\n                  caption: joinarray(\n                    {\n                      if(\n                        or(\n                          local!hasInvalidBasicDetails = true,\n                          local!isOrphanedTask = true,\n\n                        ),\n                        #\"urn:appian:translation-string:v1:9875b168-85bf-4637-9363-49206253f2de\",\n                        null\n                      )\n                    },\n                    \", \"\n                  ),\n                  color: if(\n                    ri!selectedTaskBlockTaskUuid = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                    ri!brandingMap.WhiteColor,\n                    ri!brandingMap.NegativeAccentColor\n                  ),\n                  showWhen: or(\n                    local!isOrphanedTask,\n                    local!hasInvalidBasicDetails\n                  )\n                ),\n                char(10),\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"arrow-right\",\n                  altText: #\"urn:appian:translation-string:v1:6fa1bc00-eaf5-45d0-966b-16d2a592ccaf\",\n                  caption: local!dependents,\n                  color: if(\n                    ri!selectedTaskBlockTaskUuid = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                    ri!brandingMap.WhiteColor,\n                    ri!brandingMap.SecondaryTextColor\n                  ),\n                  size: \"SMALL\"\n                ),\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: \" \"),\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: concat(\n                    #\"urn:appian:translation-string:v1:0b9b52cc-25f5-4444-90b3-6d70a4491713\",\n                    \" \",\n                    local!countOfDependents,\n                    \" \",\n                    if(\n                      local!countOfDependents = 1,\n                      #\"urn:appian:translation-string:v1:ff90d701-0b1a-40fb-b846-5e5609b7283f\",\n                      #\"urn:appian:translation-string:v1:6a03a109-bb8c-4486-b129-c2b0214b1c9f\"\n                    )\n                  ),\n                  color: if(\n                    ri!selectedTaskBlockTaskUuid = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                    ri!brandingMap.WhiteColor,\n                    ri!brandingMap.SecondaryTextColor\n                  ),\n                  size: \"SMALL\"\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              buttons: {\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: \"\",\n                  icon: \"caret-up\",\n                  saveInto: if(\n                    fv!isFirst,\n                    {},\n                    a!localVariables(\n                      local!thisIndex: ri!visibleTaskBlockTaskIndices[fv!index],\n                      local!swapIndex: ri!visibleTaskBlockTaskIndices[fv!index - 1],\n                      local!thisTaskBlockTask: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                      local!swapTaskBlockTask: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!swapIndex],\n                      {\n                        a!save(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!swapIndex],\n                          local!thisTaskBlockTask\n                        ),\n                        a!save(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                          local!swapTaskBlockTask\n                        )\n                      }\n                    )\n                  ),\n                  size: \"SMALL\",\n                  style: \"LINK\",\n                  /* start will be the first task by default. Hence disabling the icons for first and second tasks*/\n                  disabled: or(fv!isFirst, fv!index = 2),\n                  showWhen: not(fv!isFirst),\n                  accessibilityText: #\"urn:appian:translation-string:v1:405f03e4-77b7-4ccd-b468-abd1132cf6cc\"(\n                    #\"urn:appian:translation-variable:v1:d357a1dd-9637-43f4-84b3-5ef76459c645\": local!taskBlockTaskName\n                  )\n                ),\n                #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                  label: \"\",\n                  icon: \"caret-down\",\n                  saveInto: if(\n                    fv!isLast,\n                    {},\n                    a!localVariables(\n                      local!thisIndex: ri!visibleTaskBlockTaskIndices[fv!index],\n                      local!swapIndex: ri!visibleTaskBlockTaskIndices[fv!index + 1],\n                      local!thisTaskBlockTask: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                      local!swapTaskBlockTask: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!swapIndex],\n                      {\n                        a!save(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!swapIndex],\n                          local!thisTaskBlockTask\n                        ),\n                        a!save(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                          local!swapTaskBlockTask\n                        )\n                      }\n                    )\n                  ),\n                  size: \"SMALL\",\n                  style: \"LINK\",\n                  /* start will be the first task by default. Hence disabling the icons for first and last tasks*/\n                  disabled: or(fv!isLast, fv!isFirst),\n                  showWhen: not(fv!isFirst),\n                  accessibilityText: #\"urn:appian:translation-string:v1:a49810cb-02df-496e-9546-1299833280e9\"(\n                    #\"urn:appian:translation-variable:v1:1473025b-e8a1-454d-949a-c499f18c2193\": local!taskBlockTaskName\n                  )\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n              buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                label: \"\",\n                icon: \"close\",\n                saveInto: a!localVariables(\n                  local!thisIndex: ri!visibleTaskBlockTaskIndices[fv!index],\n                  {\n                    a!save(\n                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                      #\"urn:appian:function:v1:a:update\"(\n                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                        recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n                        false\n                      )\n                    ),\n                    /* Mark the removed task block task as Inactive in create case task block task*/\n                    a!save(\n                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                      #\"urn:appian:function:v1:a:update\"(\n                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                        recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.isActive,\n                        false\n                      )\n                    ),\n                    /* Mark the removed task block task as Inactive in send email task block task*/\n                    a!save(\n                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                      #\"urn:appian:function:v1:a:update\"(\n                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!thisIndex],\n                        recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.isActive,\n                        false\n                      )\n                    ),\n                    /* Clear any dependents for task that is removed */\n                    a!save(\n                      ri!taskBlockTaskBranchMaps,\n                      #\"SYSTEM_SYSRULES_forEach\"(\n                        items: ri!taskBlockTaskBranchMaps,\n                        expression: a!localVariables(\n                          local!filteredTaskBranchIndex: a!flatten(\n                            {\n                              rule!CMGT_UTIL_Filter(\n                                records: fv!item.afterTaskBlockTaskBranches,\n                                fieldValuePairs: {\n                                  a!map(\n                                    field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                    value: local!thisTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n                                  )\n                                },\n                                filterType: \"MATCH_INDICES\"\n                              ),\n                              rule!CMGT_UTIL_Filter(\n                                records: fv!item.afterTaskBlockTaskBranches,\n                                fieldValuePairs: {\n                                  a!map(\n                                    field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n                                    value: local!thisTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n                                  )\n                                },\n                                filterType: \"MATCH_INDICES\"\n                              )\n                            }\n                          ),\n                          #\"urn:appian:function:v1:a:update\"(\n                            fv!item,\n                            \"afterTaskBlockTaskBranches\",\n                            if(\n                              rule!CMGT_UTIL_IsNotBlank(local!filteredTaskBranchIndex),\n                              #\"urn:appian:function:v1:a:update\"(\n                                fv!item.afterTaskBlockTaskBranches,\n                                local!filteredTaskBranchIndex,\n                                #\"urn:appian:function:v1:a:update\"(\n                                  data: index(\n                                    fv!item.afterTaskBlockTaskBranches,\n                                    local!filteredTaskBranchIndex,\n                                    null\n                                  ),\n                                  index: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                  value: false\n                                )\n                              ),\n                              fv!item.afterTaskBlockTaskBranches\n                            )\n                          )\n                        )\n                      )\n                    )\n                  }\n                ),\n                size: \"SMALL\",\n                style: \"LINK\",\n                color: if(\n                  ri!selectedTaskBlockTaskUuid = fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                  ri!brandingMap.WhiteColor,\n                  ri!brandingMap.NegativeAccentColor\n                ),\n                disabled: fv!isFirst,\n                showWhen: not(fv!isFirst),\n                accessibilityText: #\"urn:appian:translation-string:v1:d544b739-290e-4c0b-8e08-ae1ea9b5d578\"(\n                  #\"urn:appian:translation-variable:v1:75d491f3-ed1b-4279-affd-0ef9d51760a3\": local!taskBlockTaskName\n                )\n              )\n            )\n          }\n        )\n      )\n    ),\n    selectionValue: ri!selectedTaskBlockTaskUuid,\n    selectionSaveInto: {\n      a!save(\n        ri!selectedTaskBlockTaskUuid,\n        index(reverse(save!value), 1, null)\n      ),\n      /*The task branch has to populated for each response for decision question.It is taking time to refresh the value of this local\n                  when value is initialized in top. So the below logic which is dependent on this is not getting the value and is NULL at\n                  the time when the below logics are executed. So the value is assigned in this save */\n      a!save(\n        ri!selectedTaskBlockTask,\n        rule!CMGT_UTIL_Filter(\n          records: ri!visibleTaskBlockTasks,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n          value: ri!selectedTaskBlockTaskUuid,\n          filterType: \"FIRST_MATCH\"\n        )\n      ),\n      /*For the selected task in the middle pane*/\n      a!save(\n        ri!taskResponseOptions,\n        ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions]\n      ),\n      /*Populate the response options for decision tasks when there is no*/\n      if(\n        rule!CMGT_UTIL_IsNotBlank(input: ri!taskResponseOptions),\n        a!save(\n          ri!taskBlockTaskBranchMaps,\n          append(\n            ri!taskBlockTaskBranchMaps,\n            #\"SYSTEM_SYSRULES_forEach\"(\n              items: difference(\n                ri!taskResponseOptions[recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid],\n                touniformstring(\n                  rule!CMGT_UTIL_Filter(\n                    records: ri!taskBlockTaskBranchMaps,\n                    fieldValuePairs: {\n                      a!map(\n                        field: \"taskUUID\",\n                        value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n                      ),\n                      a!map(field: \"isActive\", value: { true, null })\n                    }\n                  ).taskResponseOptionUUID\n                )\n              ),\n              expression: rule!CMGT_WFL_ConstructTaskBlockTaskBranchMap(\n                taskUuid: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                taskResponseOptionUUID: fv!item,\n                isRequired: true,\n                isRequirednessValid: true,\n                isActive: toboolean(null),\n                afterTaskBlockTaskBranches: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch(\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired: true,\n                  /*Note, defaulting this to NULL until an actual selection is made so that the network renderer doesn't think there's a task*/\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive: null,\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskResponseOptionUuid: fv!item,\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskResponseOption: rule!CMGT_UTIL_Filter(\n                    records: ri!taskResponseOptions,\n                    field: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid,\n                    value: fv!item\n                  )\n                )\n              )\n            )\n          )\n        ),\n        {}\n      )\n    },\n    selectable: true,\n    selectionStyle: \"ROW_HIGHLIGHT\",\n    validations: {},\n    shadeAlternateRows: false,\n    borderStyle: \"LIGHT\"\n  )\n}"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_58807": {
      "name": "CMGT_UTIL_TruncateText",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(isnull(ri!text), isnull(ri!maxLength)),\n  ri!text,\n  if(\n    len(ri!text) > ri!maxLength,\n    left(\n      ri!text,\n      max(\n        search(\" \", ri!text, ri!maxLength + 1) - 1,\n        ri!maxLength\n      )\n    ) & \"...\",\n    ri!text\n  )\n)"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1695280": {
      "name": "CMGT_WFL_MTR_UserCreatesTaskBlockTask",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604826": {
      "name": "CMGT_WFL_EmailTemplate_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!emailTemplates,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments,\n        value: rule!CMGT_WFL_EmailTemplateAttachment_SetMetaData(\n          emailTemplateAttachments: fv!item[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ed52-9ecc-8000-9d40-011c48011c48_3654312": {
      "name": "CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_CreateEmailTemplate",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_paneLayout\"(\n  panes: {\n    #\"SYSTEM_SYSRULES_pane\"(\n      backgroundColor: ri!brandingMap.TertiaryBackgroundColor,\n      padding: \"MORE\",\n      contents: {\n        #\"SYSTEM_SYSRULES_columnsLayout\"(\n          columns: {\n            #\"SYSTEM_SYSRULES_columnLayout\"(width: \"2X\"),\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              width: \"WIDE_PLUS\",\n              contents: {\n                #\"SYSTEM_SYSRULES_cardLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_cardLayout\"(\n                      showBorder: false,\n                      padding: \"NONE\",\n                      marginBelow: \"NONE\",\n                      contents: rule!CMGT_WFL_SUB_CreateEmailTemplate(\n                        emailTemplates: ri!emailTemplates,\n                        documentsToDelete: ri!documentsToDelete,\n                        submitSaveInto: {\n                          a!localVariables(\n                            local!indexOfSelectedTask: if(\n                              rule!CMGT_UTIL_IsNotBlank(ri!selectedTaskBlockTaskUuid),\n                              wherecontains(\n                                ri!selectedTaskBlockTaskUuid,\n                                ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                              ),\n                              null\n                            ),\n                            {\n                              a!save(\n                                ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!indexOfSelectedTask][recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid],\n                                save!value[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid]\n                              ),\n                              a!save(\n                                ri!currentWorkflowStep,\n                                \"CONFIGURE_TASK_BLOCK\"\n                              )\n                            }\n                          )\n                        },\n                        cancelSaveInto: {\n                          a!save(\n                            ri!currentWorkflowStep,\n                            \"CONFIGURE_TASK_BLOCK\"\n                          )\n                        },\n                        brandingMap: ri!brandingMap\n                      )\n                    )\n                  },\n                  style: ri!brandingMap.CardBackgroundColor,\n                  shape: ri!brandingMap.CardShape,\n                  marginBelow: \"NONE\",\n                  showBorder: false,\n                  showShadow: ri!brandingMap.CardShowShadow\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_columnLayout\"(width: \"2X\")\n          }\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_25890": {
      "name": "CMGT_UTIL_IsBlank",
      "type": "Expression Rule",
      "sail_code": "length(a!flatten(ri!value)) = 0"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1720975": {
      "name": "CMGT_NCF_updateNodeHorizontalOrderFromIndex",
      "type": "Expression Rule",
      "sail_code": "#\"urn:appian:function:v1:a:update\"(\n  data: ri!currentNode,\n  index: \"horizontalOrder\",\n  value: wherecontains(\n    ri!currentNode,\n    append(ri!sortedNodes, a!map())\n  )[1] * 100 / (length(ri!sortedNodes) + 1)\n)"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1720993": {
      "name": "CMGT_NCF_orderNodesHorizontallyTopDown",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!nodesOnCurrentLevel: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!allNodes,\n      field: \"verticalOrder\",\n      value: ri!level\n    ),\n    refreshAlways: true\n  ),\n  local!eachNodeWithHorizontalOrder: a!refreshVariable(\n    value: apply(\n      rule!CMGT_NCF_setAverageHorizontalOrderOfPrecedents(\n        currentNode: _,\n        /*can pass in just sorted nodes because parents will always be above children*/\n        orderedNodes: ri!orderedNodes,\n        allEdges: ri!allEdges\n      ),\n      local!nodesOnCurrentLevel\n    ),\n    refreshAlways: true\n  ),\n  local!sortedNodesForThisLevel: a!refreshVariable(\n    value: rule!CMGT_UTIL_sortList(\n      records: local!eachNodeWithHorizontalOrder,\n      field: \"horizontalOrder\",\n      ascending: true\n    ),\n    refreshAlways: true\n  ),\n  local!updatedHorizontalOrder: a!refreshVariable(\n    value: apply(\n      rule!CMGT_NCF_updateNodeHorizontalOrderFromIndex(\n        sortedNodes: local!sortedNodesForThisLevel,\n        currentNode: _\n      ),\n      local!sortedNodesForThisLevel\n    ),\n    refreshAlways: true\n  ),\n  {\n    ri!orderedNodes,\n    local!updatedHorizontalOrder\n  }\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568080": {
      "name": "CMGT_WFL_QR_GetTaskBlock",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_TaskBlock,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_TaskBlock.taskBlockId,\n      operator: \"in\",\n      value: ri!taskBlockId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_TaskBlock.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: ri!fields,\n  sort: {\n    a!defaultValue(\n      ri!sort,\n      #\"SYSTEM_SYSRULES_sortInfo\"(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.label,\n        ascending: true\n      )\n    )\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000eacc-8ea8-8000-9c30-011c48011c48_1101766": {
      "name": "CMGT_WFL_TaskBlock_WriteRecordsProperties",
      "type": "Expression Rule",
      "sail_code": "if(\n  ri!isInput,\n  rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord(\n    records: ri!taskBlocks,\n    relationships: {\n      recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n      recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks\n    }\n  ),\n  rule!CMGT_UTIL_MergeWriteRecordIdsToProcessVariable(\n    processData: ri!taskBlocks,\n    recordsUpdated: ri!recordsUpdated,\n    fksToParent: {\n      recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockId\n    }\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_34666": {
      "name": "CMGT_WFL_QR_GetTaskBlockTask",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_TaskBlockTask,\n  executeWhen: ri!executeWhen,\n  returnType: ri!returnType,\n  sort: ri!sort,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockId,\n      operator: \"in\",\n      value: ri!taskBlockId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlock.isActive,\n      operator: \"=\",\n      value: true\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId,\n      operator: \"=\",\n      value: ri!referenceTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId,\n      operator: \"in\",\n      value: ri!taskBlockTaskId\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTask,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlock,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask,\n    #\"urn:appian:record-relationship:v1:671fbea8-6589-4ff6-8271-f692a237f4f4/924d5530-bf9b-4356-a967-499f27089d0d/6ea50f07-345d-4d73-b820-8b224ccbee99/516efecb-7202-4e04-a2fb-1da7c56053df\"\n  },\n  relatedRecordData: {\n    ri!relatedRecordData,\n    #\"SYSTEM_SYSRULES_relatedRecordData\"(\n      relationship:recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions,\n      sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n        field:recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.sortOrder,\n        ascending: true\n      )\n    )\n  },\n  pagingInfo: ri!pagingInfo,\n  triggerRefresh: ri!triggerRefresh,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180568": {
      "name": "CMGT_UTIL_IsNotBlank",
      "type": "Expression Rule",
      "sail_code": "not(rule!CMGT_UTIL_IsBlank(ri!input))"
    },
    "_a-0000eaf1-7a52-8000-9c42-011c48011c48_1227353": {
      "name": "CMGT_UTIL_StripHtmlTags",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!replacedText: substitute(\n    substitute(ri!value, \"<p>\", \"\"),\n    \"</p>\",\n    \"\"\n  ),\n  if(\n    ri!isFormatted,\n    /*The striphtml() will automatically substitue char(10) for <br>*/striphtml(local!replacedText),\n    striphtml(\n      substitute(local!replacedText, \"<br>\", \" \")\n    )\n  )\n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_145769": {
      "name": "CMGT_PLUGIN_NetworkChartField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!formattingOptions: rule!CMGT_UTIL_MergeMaps(\n    map1: rule!CMGT_NetworkChartField_StandardFormatting(brandingMap: ri!brandingMap),\n    map2: ri!formattingOptions\n  ),\n  /*The actual rendering is very hard to predict based on what notes are actually present and their complexity*/\n  /*Therefore, these are 2 parameters, each with 2 options, that drastically impact the rendering*/\n  local!renderingOptions: {\n    a!map(st: \"roots\", te: false),\n    a!map(st: \"roots\", te: true)\n  },\n  /*NOTE: So far this seems the best rendering algorithm that accounts for the most node complexity*/\n  local!selectedRenderingOption: 1,\n  {\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      labelPosition: \"COLLAPSED\",\n      value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n        text: #\"urn:appian:translation-string:v1:638a9b48-01a5-4947-9ef0-ae787ea16196\"\n      ),\n      showWhen: a!isNullOrEmpty(ri!nodes),\n      align: \"CENTER\",\n      marginAbove: \"MORE\",\n      marginBelow: \"MORE\"\n    ),\n    #\"SYSTEM_SYSRULES_radioButtonField_v1\"(\n      choiceLabels: enumerate(count(local!renderingOptions)) + 1,\n      choiceValues: enumerate(count(local!renderingOptions)) + 1,\n      label: rule!CMGT_UTIL_ReplaceArgs(\n        string: #\"urn:appian:translation-string:v1:105f6b59-5f21-49e4-bd84-13d867a2580e\",\n        args: a!map(option: local!selectedRenderingOption)\n      ),\n      labelPosition: \"ADJACENT\",\n      value: local!selectedRenderingOption,\n      saveInto: local!selectedRenderingOption,\n      showWhen: and(\n        /*Decided to hide showing this 'Rendering Algorithm' option going forward, to put it back just remove the `false` below this line*/\n        false,\n        ri!showRenderingToggle,\n        a!isNotNullOrEmpty(ri!nodes)\n      ),\n      choiceLayout: \"COMPACT\"\n    ),\n    fn!networkChartField(\n      labelPosition: \"COLLAPSED\",\n      validations: {},\n      height: a!defaultValue(ri!height, \"TALL\"),\n      showWhen: a!isNotNullOrEmpty(ri!nodes),\n      nodes: ri!nodes,\n      edges: ri!edges,\n      nodeSelectionValue: a!flatten(ri!selectedNodeUuid),\n      nodeSelectionSaveInto: ri!onNodeSelection,\n      edgeOptions: local!formattingOptions.defaultEdge,\n      groups: local!formattingOptions.nodeOptionGroups,\n      layout: local!formattingOptions.layout,\n      interaction: a!map(\n        selectable: a!defaultValue(ri!selectable, true),\n        navigationButtons: a!defaultValue(ri!showNavButtons, true),\n        hover: true\n      ),\n      physics: local!formattingOptions.physics\n    )\n  }\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180583": {
      "name": "CMGT_UTIL_checkIfSingleType",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Boolean',\n  with(\n    local!typeNumber: rule!CMGT_UTIL_returnTypeNumber(\n      type: ri!type,\n      typeOf: ri!typeOf\n    ),\n  \n    and(\n      /*The type of the input equals the type of the input returned as single type*/\n      local!typeNumber = rule!CMGT_UTIL_returnTypeNumber(\n        typeOf: rule!CMGT_UTIL_returnSingleTypeObject(typeOf: cast(local!typeNumber, null))\n      ),\n      \n      /*And the type of the input is not list of variant*/\n      local!typeNumber <> rule!CMGT_UTIL_returnTypeNumber(\n        typeOf: {}\n      )\n    )\n  )\n)"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1720580": {
      "name": "CMGT_NCF_orderNodesHorizontallyBottomUp",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!nodesOnCurrentLevel: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!allNodes,\n      field: \"verticalOrder\",\n      value: ri!level\n    ),\n    refreshAlways: true\n  ),\n  local!eachNodeWithHorizontalOrder: a!refreshVariable(\n    value: apply(\n      rule!CMGT_NCF_setAverageHorizontalOrderOfDependents(\n        currentNode: _,\n        /*can pass in just sorted nodes because parents will always be above children*/\n        orderedNodes: ri!orderedNodes,\n        allEdges: ri!allEdges\n      ),\n      local!nodesOnCurrentLevel\n    ),\n    refreshAlways: true\n  ),\n  local!sortedNodesForThisLevel: a!refreshVariable(\n    value: rule!CMGT_UTIL_sortList(\n      records: local!eachNodeWithHorizontalOrder,\n      field: \"horizontalOrder\",\n      ascending: true\n    ),\n    refreshAlways: true\n  ),\n  local!updatedHorizontalOrder: a!refreshVariable(\n    value: apply(\n      rule!CMGT_NCF_updateNodeHorizontalOrderFromIndex(\n        sortedNodes: local!sortedNodesForThisLevel,\n        currentNode: _\n      ),\n      local!sortedNodesForThisLevel\n    ),\n    refreshAlways: true\n  ),\n  {\n    ri!orderedNodes,\n    local!updatedHorizontalOrder\n  }\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180552": {
      "name": "CMGT_UTIL_cast",
      "type": "Expression Rule",
      "sail_code": "with(  \n  local!typeNumber: rule!CMGT_UTIL_returnTypeNumber(\n    type: ri!type,\n    typeOf: ri!typeOf\n  ),\n\n  /* If the object is empty, use null or {} depending on if it is array type or not */\n  local!objectToCast: if(\n    rule!CMGT_UTIL_IsNotBlank(ri!value),\n    ri!value,\n    rule!CMGT_UTIL_checkIfSingleType(\n      type: ri!type,\n      typeOf: ri!typeOf\n    ),\n    null,\n    {}\n  ),\n\n  cast(\n    local!typeNumber,\n    local!objectToCast\n  )\n  \n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_145648": {
      "name": "CMGT_UTIL_GetSiteUrl",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!authedPath: cast(\n    'type!{http://www.appian.com/ae/types/2009}Text',\n    extract(linktodocument(0, \"doc\"), \"\"\"\", \"/doc/\")\n  ),\n  local!subdomainWithDomain: extract(local!authedPath, \"//\", \"/suite\")[1],\n  local!subdomain: split(local!subdomainWithDomain, \".\")[1],\n  a!map(\n    subdomain: local!subdomain,\n    authedPath: local!authedPath,\n    subdomainWithDomain: local!subdomainWithDomain\n  )\n)"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1695709": {
      "name": "CMGT_WFL_MTR_TaskBlockTaskCreationWrapper",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskBlockTasks,\n  expression: if(\n    and(\n      a!isNullOrEmpty(\n        fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId]\n      ),\n      fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.isActive]\n    ),\n    rule!CMGT_WFL_MTR_UserCreatesTaskBlockTask(),\n    now()\n  )\n)"
    },
    "_a-0000e990-c462-8000-9ba7-011c48011c48_33778": {
      "name": "CMGT_UTIL_SetRecordFields",
      "type": "Expression Rule",
      "sail_code": "/*\nFuture enhancement ideas:\n1 Parameter to skip update if the field isn't present in the object\n--- This would also apply to nested fields, as in, don't set a relationship field if the entire relationship object isn't there because it will instantiate it\n2 Parameter to overwrite based on more enhanced logic\n3 Allow list types for the `value`\n4 Allow reuse to apply setting metadata for nested relationships, but using their own set metadata rule\n--- e.g. CMGT_Entity_SetMetaData can be used in both the Case process and the individual Entity process\n*/\nif(\n  a!isNullOrEmpty(ri!record),\n  ri!record,\n  a!localVariables(\n    local!allUpdates: rule!CMGT_UTIL_RejectBlank(a!flatten(\n      {\n        ri!alwaysOverwrite,\n        ri!childRelationships,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!neverOverwrite,\n          expression: #\"urn:appian:function:v1:a:update\"(\n            fv!item,\n            \"value\",\n            /*Specifically using this instead of a!defaultValue() to account for the `{null}` value*/\n            if(\n              rule!CMGT_UTIL_IsBlank(ri!record[fv!item.field]),\n              fv!item.value,\n              ri!record[fv!item.field]\n            )\n          )\n        )\n      }\n    )),\n    local!onlyChangedUpdates: a!flatten(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!allUpdates,\n        expression: if(\n          or(\n            tostring(ri!record[fv!item.field]) = tostring(fv!item.value),\n            toboolean(fv!item.applyWhen) = false\n          ),\n          {},\n          fv!item\n        )\n      )\n    ),\n    if(\n      a!isNullOrEmpty(local!onlyChangedUpdates),\n      ri!record,\n      #\"urn:appian:function:v1:a:update\"(\n        data: ri!record,\n        index: local!onlyChangedUpdates.field,\n        value: local!onlyChangedUpdates.value\n      )\n    )\n  )\n)"
    },
    "_a-0000ebea-a421-8000-9cc1-011c48011c48_2337927": {
      "name": "CMGT_WFL_TaskBlock_FindPreviousTreeTasks_Reducer",
      "type": "Expression Rule",
      "sail_code": "with(\n  /*All tasks that are currently not in the tree are considered available  */\n  local!availableTasks: rule!CMGT_UTIL_Filter(\n    filterType: \"REJECT\",\n    records: ri!allTasks,\n    field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n    value: ri!treeTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n  ),\n  /*The existing beforeTaskBranches in the treel  */\n  local!treeTaskBeforeBranches: rule!CMGT_UTIL_Filter(\n    records: ri!taskBlockTaskBranches,\n    fieldValuePairs: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n        value: ri!treeTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n        value: true\n      )\n    }\n  ),\n  /*Identifies the UUIDs of the beforeTask in the tree branches  */\n  local!previousTasksInTreeUuid: a!flatten(\n    local!treeTaskBeforeBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid]\n  ),\n  /*Finds the before task from the available list of tasks  */\n  local!previousTasksInTree: rule!CMGT_UTIL_Filter(\n    records: local!availableTasks,\n    field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n    value: local!previousTasksInTreeUuid\n  ),\n  /*Add the identified tasks to the tree  */\n  if(\n    a!isNullOrEmpty(local!previousTasksInTree),\n    ri!treeTasks,\n    append(ri!treeTasks, local!previousTasksInTree)\n  )\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_19651": {
      "name": "CMGT_QR_GetCaseType",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_CFG_CaseType,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_CaseType.uuid,\n      operator: \"in\",\n      value: ri!caseTypeUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_CFG_CaseType.isCategory,\n      operator: \"=\",\n      value: ri!isCaseCategory\n    )\n  },\n  fields: {\n    ri!fields,\n    if(\n      ri!excludeRelatedRecords,\n      {},\n      recordType!CMGT_CFG_CaseType.parentCaseType\n    )\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: {\n    ri!additionalLogicalExpression,\n    rule!CMGT_CaseTypeActiveLogicalExpression(includeInactive: ri!includeInactive)\n  },\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000ed52-9ecc-8000-9d40-011c48011c48_3642175": {
      "name": "CMGT_WFL_SendEmailTaskBlockTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!sendEmailTaskBlockTask,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.createdOn,\n        value: now()\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplate,\n        value: rule!CMGT_WFL_EmailTemplate_SetMetaData(\n          emailTemplates: fv!item[recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplate],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568180": {
      "name": "CMGT_WFL_TaskBlock_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskBlocks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.isActive,\n        value: true\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n        value: rule!CMGT_WFL_TaskBlockTask_SetMetaData(\n          taskBlockTasks: fv!item[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n          initiator:ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ece2-0128-8000-9bb8-011c48011c48_40224": {
      "name": "CMGT_UTIL_ContructSLAMap",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!slaJson),\n    isvalidjson(ri!slaJson)\n  ),\n  cast(\n    'type!{http://www.appian.com/ae/types/2009}Map',\n    #\"SYSTEM_SYSRULES_fromJson_v1\"(ri!slaJson)\n  ),\n  a!map(\n    days: a!defaultValue(ri!days, tostring(null())),\n    hours: a!defaultValue(ri!hours, tostring(null())),\n    minutes: a!defaultValue(ri!minutes, tostring(null())),\n    isBusinessDays: a!defaultValue(ri!isBusinessDays, false)\n  )\n)"
    },
    "_a-0000ed08-c8b4-8000-9d25-011c48011c48_3446735": {
      "name": "CMGT_WFL_CreateCaseTaskBlockTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!createCaseTaskBlockTask,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field:  recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.createdOn,\n        value: now()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604797": {
      "name": "CMGT_WFL_QR_GetSendEmailCaseTypeWorkflowTasks",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.sendEmailCaseTypeWorkflowTaskId,\n      operator: \"in\",\n      value: ri!sendEmailCaseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTaskId,\n      operator: \"in\",\n      value: ri!caseTypeWorkflowTaskId\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.emailTemplateUuid,\n      operator: \"in\",\n      value: ri!emailTemplateUuid\n    ),\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.isActive,\n      operator: \"=\",\n      value: true,\n      applyWhen: ri!includeInactive <> true\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.caseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_SendEmailCaseTypeWorkflowTask.emailTemplate\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e98b-cfe0-8000-9ba5-011c48011c48_22352": {
      "name": "CMGT_UTIL_QueryRecord",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*Chosen return type*/\n  local!returnType: a!defaultValue(ri!returnType, \"OBJECT_ARRAY\"),\n  /*Determine the query parameters to use by the return type*/\n  local!queryParams: a!match(\n    value: local!returnType,\n    equals: \"OBJECT_ARRAY\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(ri!recordType),\n        'type!{http://www.appian.com/ae/types/2009}Map?list'\n      ),\n      fetchTotalCount: false,\n      isArray: true,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"SINGLE_OBJECT\",\n    then: a!map(\n      castToType: if(\n        a!isNullOrEmpty(ri!groupByFields),\n        ri!recordType,\n        'type!{http://www.appian.com/ae/types/2009}Map'\n      ),\n      fetchTotalCount: false,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: 1,\n        batchSize: 1,\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"DATA_SUBSET\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}DataSubset',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(\n        startIndex: a!defaultValue(ri!pagingInfo.startIndex, 1),\n        batchSize: a!defaultValue(\n          ri!pagingInfo.batchSize,\n          cons!CMGT_INT_BATCH_SIZE_MAX\n        ),\n        sort: { ri!pagingInfo.sort, ri!sort }\n      )\n    ),\n    equals: \"TOTAL_COUNT\",\n    then: a!map(\n      castToType: 'type!{http://www.appian.com/ae/types/2009}Integer',\n      fetchTotalCount: true,\n      isArray: false,\n      pagingInfo: #\"SYSTEM_SYSRULES_pagingInfo\"(startIndex: 1, batchSize: 0)\n    ),\n    default: fn!error(\n      \"Invalid returnType, must be one of: OBJECT_ARRAY, SINGLE_OBJECT, DATA_SUBSET, TOTAL_COUNT\"\n    )\n  ),\n  if(\n    /*Early exit for skip execution*/\n    ri!executeWhen = false,\n    cast(\n      local!queryParams.castToType,\n      if(local!queryParams.isArray, {}, null)\n    ),\n    a!localVariables(\n      /*Run the query*/\n      local!queryResult: a!refreshVariable(\n        value: #\"SYSTEM_SYSRULES_queryRecordType_v2\"(\n          recordType: ri!recordType,\n          fields: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            reject(\n              a!isNullOrEmpty,\n              a!flatten(\n                {\n                  ri!fields,\n                  index(ri!relatedRecordData, \"relationship\", {})\n                }\n              )\n            ),\n            #\"SYSTEM_SYSRULES_aggregationFields\"(\n              groupings: #\"SYSTEM_SYSRULES_forEach\"(\n                items: ri!groupByFields,\n                expression: #\"SYSTEM_SYSRULES_grouping\"(field: fv!item, alias: tostring(fv!item))\n              ),\n              measures: #\"SYSTEM_SYSRULES_measure\"(\n                field: ri!groupByFields[1],\n                function: \"COUNT\",\n                alias: \"count\"\n              )\n            )\n          ),\n          filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n            operator: \"AND\",\n            ignoreFiltersWithEmptyValues: true,\n            logicalExpressions: {\n              ri!logicalExpressions,\n              if(\n                and(\n                  a!isNotNullOrEmpty(ri!searchFields),\n                  a!isNotNullOrEmpty(ri!searchTerm)\n                ),\n                #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                  operator: \"AND\",\n                  logicalExpressions: #\"SYSTEM_SYSRULES_forEach\"(\n                    items: split(trim(ri!searchTerm), \" \"),\n                    expression: a!localVariables(\n                      local!splitSearchTerm: fv!item,\n                      #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"OR\",\n                        filters: #\"SYSTEM_SYSRULES_forEach\"(\n                          items: ri!searchFields,\n                          expression: #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: fv!item,\n                            operator: \"includes\",\n                            value: local!splitSearchTerm\n                          )\n                        )\n                      )\n                    )\n                  )\n                ),\n                {}\n              )\n            },\n            filters: ri!filters\n          ),\n          pagingInfo: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            local!queryParams.pagingInfo,\n            #\"urn:appian:function:v1:a:update\"(\n              local!queryParams.pagingInfo,\n              \"sort\",\n              null\n            )\n          ),\n          fetchTotalCount: local!queryParams.fetchTotalCount,\n          relatedRecordData: if(\n            a!isNullOrEmpty(ri!groupByFields),\n            ri!relatedRecordData,\n            {}\n          )\n        ),\n        refreshOnVarChange: ri!triggerRefresh,\n        refreshAfter: { \"RECORD_ACTION\" }\n      ),\n      /*Format the output*/\n      local!output: a!match(\n        value: local!returnType,\n        equals: \"OBJECT_ARRAY\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"SINGLE_OBJECT\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult.data\n        ),\n        equals: \"DATA_SUBSET\",\n        then: cast(\n          local!queryParams.castToType,\n          local!queryResult\n        ),\n        equals: \"TOTAL_COUNT\",\n        then: local!queryResult.totalCount,\n        default: null\n      ),\n      local!output\n    )\n  )\n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_137280": {
      "name": "CMGT_UTIL_DistinctRecords",
      "type": "Expression Rule",
      "sail_code": "if(\n  or(\n    a!isNullOrEmpty(ri!records),\n    a!isNullOrEmpty(ri!fields)\n  ),\n  ri!records,\n  with(\n    local!indexed: #\"SYSTEM_SYSRULES_forEach\"(\n      items: a!flatten(ri!records),\n      expression: a!map(\n        record: fv!item,\n        distinct: joinarray(\n          apply(\n            index(fv!item, _, null),\n            a!flatten(ri!fields)\n          ),\n          \"|\"\n        )\n      )\n    ),\n    local!distinctItems: union(\n      local!indexed.distinct,\n      local!indexed.distinct\n    ),\n    apply(\n      displayvalue(\n        _,\n        local!indexed.distinct,\n        local!indexed.record,\n        null\n      ),\n      local!distinctItems\n    )\n  )\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673874": {
      "name": "CMGT_WFL_MTR_TaskBlockWrapper",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(\n    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockId]\n  ),\n  rule!CMGT_WFL_MTR_UserCreatesTaskBlock(),\n  rule!CMGT_WFL_MTR_UserEditsTaskBlock()\n)"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_52277": {
      "name": "CMGT_UTIL_HeaderField",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n  label: \"\",\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            if(\n              and(\n                rule!CMGT_UTIL_IsBlank(ri!secondaryText),\n                rule!CMGT_UTIL_IsBlank(ri!labelIcon)\n              ),\n              #\"SYSTEM_SYSRULES_headingField\"(\n                text: rule!CMGT_UTIL_ReplaceArgs(string: ri!label, args: ri!labelArguments),\n                color: a!defaultValue(\n                  value: ri!labelColor,\n                  default: ri!brandingMap.SecondaryHeaderColor\n                ),\n                fontWeight: a!defaultValue(\n                  value: ri!labelFontWeight,\n                  default: ri!brandingMap.SecondaryHeaderFontWeight\n                ),\n                size: a!defaultValue(\n                  value: ri!labelSize,\n                  default: ri!brandingMap.SecondaryHeaderSize\n                ),\n                headingTag: \"H2\",\n                marginAbove: \"LESS\",\n                marginBelow: \"LESS\"\n              ),\n              #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n                label: rule!CMGT_UTIL_ReplaceArgs(string: ri!label, args: ri!labelArguments),\n                contents: {\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: ri!secondaryText,\n                      style: \"EMPHASIS\",\n                      color: a!defaultValue(\n                        value: ri!labelColor,\n                        default: ri!brandingMap.SecondaryTextColor\n                      ),\n                      size: \"SMALL\"\n                    ),\n                    labelPosition: \"COLLAPSED\",\n                    showWhen: a!isNotNullOrEmpty(ri!secondaryText)\n                  )\n                },\n                labelIcon: ri!labelIcon,\n                iconAltText: ri!iconAltText,\n                labelSize: a!defaultValue(value: ri!labelSize, default: \"SMALL\"),\n                labelHeadingTag: \"H2\",\n                labelColor: a!defaultValue(\n                  value: ri!labelColor,\n                  default: ri!brandingMap.SecondaryTextColor\n                ),\n                marginAbove: \"NONE\",\n                marginBelow: \"NONE\"\n              )\n            )\n          },\n          width: if(\n            a!isNotNullOrEmpty(ri!rightSideContents),\n            \"AUTO\",\n            \"MEDIUM\"\n          )\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: ri!rightSideContents,\n          width: \"AUTO\"\n        )\n      },\n      alignVertical: \"MIDDLE\",\n      marginAbove: \"NONE\",\n      marginBelow: \"NONE\",\n      stackWhen: { \"NEVER\" }\n    )\n  },\n  showWhen: a!defaultValue(ri!showWhen, true),\n  divider: a!defaultValue(ri!divider, \"BELOW\"),\n  dividerColor: ri!brandingMap.DividerColor,\n  marginAbove: a!defaultValue(ri!marginAbove, \"NONE\"),\n  marginBelow: a!defaultValue(ri!marginBelow, \"NONE\")\n)"
    },
    "_a-0000ea4b-5b86-8000-9bfd-011c48011c48_721408": {
      "name": "CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_AddTasks",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!selectedReferenceTaskIds: {},\n  local!newTaskBlockTasks: {},\n  local!activeCaseTypes: rule!CMGT_QR_GetCaseType(\n    returnType: \"OBJECT_ARRAY\",\n    includeInactive: false,\n    isCaseCategory: false,\n    fields: recordType!CMGT_CFG_CaseType.uuid\n  ),\n  {\n    #\"SYSTEM_SYSRULES_paneLayout\"(\n      panes: {\n        #\"SYSTEM_SYSRULES_pane\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_columnsLayout\"(\n              columns: {\n                #\"SYSTEM_SYSRULES_columnLayout\"(width: \"1X\"),\n                #\"SYSTEM_SYSRULES_columnLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_cardLayout\"(\n                      contents: {\n                        #\"SYSTEM_SYSRULES_cardLayout\"(\n                          contents: {\n                            rule!CMGT_UTIL_HeaderField(\n                              label: #\"urn:appian:translation-string:v1:c512b062-c487-4b59-a5d9-e009552303aa\",\n                              labelSize: \"MEDIUM\",\n                              divider: \"NONE\",\n                              rightSideContents: {\n                                #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                                  buttons: {\n                                    #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                                      label: #\"urn:appian:translation-string:v1:651cf177-f30b-485b-900f-8aaf47805737\",\n                                      saveInto: {\n                                        if(\n                                          rule!CMGT_UTIL_IsNotBlank(\n                                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks]\n                                          ),\n                                          a!save(\n                                            ri!currentWorkflowStep,\n                                            \"CONFIGURE_TASK_BLOCK\"\n                                          ),\n                                          a!save(\n                                            ri!currentWorkflowStep,\n                                            \"ADD_TASKS_EMPTY_STATE\"\n                                          )\n                                        ),\n                                        a!save(local!selectedReferenceTaskIds, {}),\n                                        a!save(local!newTaskBlockTasks, {})\n                                      },\n                                      size: \"SMALL\",\n                                      width: \"MINIMIZE\",\n                                      style: \"OUTLINE\",\n                                      color: ri!brandingMap.AccentColor\n                                    ),\n                                    #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                                      label: #\"urn:appian:translation-string:v1:9054fda3-d0ac-4d53-8046-6afc52dd8a75\",\n                                      saveInto: {\n                                        /*When new send email reference task is added, the new email template created for that task should be queried to show in\n                                        template dropdown along with new templates added*/\n                                        a!localVariables(\n                                          local!newlyAddedEmailTemplates: if(\n                                            rule!CMGT_UTIL_IsNotBlank(ri!emailTemplates),\n                                            rule!CMGT_UTIL_Filter(\n                                              records: ri!emailTemplates,\n                                              field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId,\n                                              value: null\n                                            ),\n                                            {}\n                                          ),\n                                          local!queriedEmailTemplates: a!refreshVariable(\n                                            value: rule!CMGT_WFL_QR_GetEmailTemplates(\n                                              returnType: \"OBJECT_ARRAY\",\n                                              sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n                                                field: recordType!CMGT_WFL_CFG_EmailTemplate.templateName,\n                                                ascending: true()\n                                              )\n                                            ),\n                                            refreshAlways: true\n                                          ),\n                                          {\n                                            a!save(\n                                              ri!emailTemplates,\n                                              rule!CMGT_UTIL_RejectBlank(\n                                                array: {\n                                                  local!queriedEmailTemplates,\n                                                  local!newlyAddedEmailTemplates\n                                                }\n                                              )\n                                            ),\n                                            a!save(\n                                              ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                              append(\n                                                ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                                local!newTaskBlockTasks\n                                              )\n                                            ),\n                                            a!save(local!selectedReferenceTaskIds, {}),\n                                            a!save(local!newTaskBlockTasks, {}),\n                                            a!save(\n                                              ri!currentWorkflowStep,\n                                              \"CONFIGURE_TASK_BLOCK\"\n                                            )\n                                          }\n                                        )\n                                      },\n                                      size: \"SMALL\",\n                                      width: \"MINIMIZE\",\n                                      style: \"SOLID\",\n                                      color: ri!brandingMap.AccentColor\n                                    )\n                                  },\n                                  align: \"END\",\n                                  marginBelow: \"NONE\"\n                                )\n                              },\n                              brandingMap: ri!brandingMap,\n                              marginBelow: \"NONE\",\n                              labelColor: ri!brandingMap.SecondaryTextColor,\n                              labelFontWeight: \"SEMI_BOLD\"\n                            ),\n                            #\"SYSTEM_SYSRULES_horizontalLine\"()\n                          },\n                          padding: \"NONE\",\n                          marginBelow: \"NONE\",\n                          showBorder: false\n                        ),\n                        #\"SYSTEM_SYSRULES_columnsLayout\"(\n                          columns: {\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n                                contents: {\n                                  #\"SYSTEM_SYSRULES_gridField_v3\"(\n                                    label: #\"urn:appian:translation-string:v1:bf26d917-2cdc-4745-8555-c717ce73c1d5\",\n                                    labelPosition: \"COLLAPSED\",\n                                    emptyGridMessage: #\"urn:appian:translation-string:v1:9541cbd3-719b-4809-bfdc-ee599f8cbab7\",\n                                    data: #\"SYSTEM_SYSRULES_recordData\"(\n                                      recordType: recordType!CMGT_WFL_CFG_ReferenceTask,\n                                      filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                                        operator: \"AND\",\n                                        filters: {\n                                          #\"SYSTEM_SYSRULES_queryFilter\"(\n                                            field: recordType!CMGT_WFL_CFG_ReferenceTask.isActive,\n                                            operator: \"=\",\n                                            value: true\n                                          )\n                                        },\n                                        ignoreFiltersWithEmptyValues: true\n                                      ),\n                                      fields: {\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.referenceTaskId,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.nameLabel,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.questionLabel,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.description,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.defaultGroupAssignee,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask,\n                                        recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask\n                                      }\n                                    ),\n                                    columns: {\n                                      #\"SYSTEM_SYSRULES_gridColumn\"(\n                                        label: #\"urn:appian:translation-string:v1:0bae9b3f-5ddd-4c6a-a4cf-abe8702dac9e\",\n                                        sortField: recordType!CMGT_WFL_CFG_ReferenceTask.nameLabel,\n                                        value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                          value: {\n                                            if(\n                                              fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.isAutomated],\n                                              {\n                                                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                                  icon: fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.icon],\n                                                  caption: #\"urn:appian:translation-string:v1:6f0faf57-3d4b-45c2-a1f8-099820a4ced1\",\n                                                  showWhen: fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.isAutomated]\n                                                ),\n                                                char(32)\n                                              },\n                                              {}\n                                            ),\n                                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                              text: {\n                                                fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.nameLabel]\n                                              },\n                                              style: \"STRONG\"\n                                            ),\n                                            char(10),\n                                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                              text: {\n                                                concat(\n                                                  fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType.label],\n                                                  if(\n                                                    rule!CMGT_UTIL_IsNotBlank(\n                                                      fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.description]\n                                                    ),\n                                                    cons!CMGT_TXT_BULLET_WITH_SPACES,\n                                                    \"\"\n                                                  ),\n                                                  rule!CMGT_UTIL_TruncateText(\n                                                    text: stripwith(\n                                                      striphtml(\n                                                        fv!row[recordType!CMGT_WFL_CFG_ReferenceTask.description]\n                                                      ),\n                                                      char(10)\n                                                    ),\n                                                    maxLength: 50\n                                                  )\n                                                )\n                                              },\n                                              color: ri!brandingMap.SecondaryTextColor,\n                                              size: \"SMALL\"\n                                            )\n                                          }\n                                        ),\n                                        align: \"START\"\n                                      )\n                                    },\n                                    pageSize: 25,\n                                    initialSorts: #\"SYSTEM_SYSRULES_sortInfo\"(\n                                      field: recordType!CMGT_WFL_CFG_ReferenceTask.modifiedOn,\n                                      ascending: false\n                                    ),\n                                    selectable: true,\n                                    selectionStyle: \"CHECKBOX\",\n                                    selectionValue: local!selectedReferenceTaskIds,\n                                    selectionSaveInto: {\n                                      local!selectedReferenceTaskIds,\n                                      /*Add just selected ref tasks*/\n                                      if(\n                                        rule!CMGT_UTIL_IsNotBlank(fv!selectedRows),\n                                        a!save(\n                                          local!newTaskBlockTasks,\n                                          append(\n                                            local!newTaskBlockTasks,\n                                            #\"SYSTEM_SYSRULES_forEach\"(\n                                              items: fv!selectedRows,\n                                              expression: recordType!CMGT_WFL_CFG_TaskBlockTask(\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.referenceTaskId],\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.taskName: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.nameLabel],\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.description: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.description],\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId],\n                                                /*Tasks that are mapped to the start task will set true() while configuring the task workflow*/\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault: false(),\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.isActive: true,\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTask: fv!item,\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid: rule!CMGT_UTIL_GenerateUuid_NonPlugin(),\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.sla: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.defaultSla],\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.defaultGroupAssignee: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.defaultGroupAssignee],\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.questionLabel: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.questionLabel],\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions: #\"SYSTEM_SYSRULES_forEach\"(\n                                                  items: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskResponseOptions],\n                                                  expression: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption(\n                                                    recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.label: fv!item[recordType!CMGT_WFL_CFG_TaskResponseOption.label],\n                                                    recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.sortOrder: fv!item[recordType!CMGT_WFL_CFG_TaskResponseOption.sortOrder],\n                                                    recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n                                                  )\n                                                ),\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorType],\n                                                /*Since we will be populating task branches only when Add Dependent task is clicked it is not required\n                                we need to populate task branches*/\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches: {},\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask: if(\n                                                  fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE,\n                                                  recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask(\n                                                    recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.caseTypeUuid: /*check if the case type is active else pass null*/if(\n                                                      and(\n                                                        fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE,\n                                                        rule!CMGT_UTIL_IsNotBlank(local!activeCaseTypes),\n                                                        rule!CMGT_UTIL_IsBlank(\n                                                          rule!CMGT_UTIL_Filter(\n                                                            records: local!activeCaseTypes,\n                                                            field: recordType!CMGT_CFG_CaseType.uuid,\n                                                            value: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.caseTypeUuid],\n\n                                                          )\n                                                        )\n                                                      ),\n                                                      null,\n                                                      fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.caseTypeUuid],\n\n                                                    ),\n                                                    recordType!CMGT_WFL_CFG_CreateCaseTaskBlockTask.relationshipToOriginalCase: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.createCaseReferenceTask.relationshipToOriginalCase]\n                                                  ),\n                                                  {}\n                                                ),\n                                                recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask: if(\n                                                  fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_SEND_EMAIL,\n                                                  recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask(\n                                                    recordType!CMGT_WFL_CFG_SendEmailTaskBlockTask.emailTemplateUuid: fv!item[recordType!CMGT_WFL_CFG_ReferenceTask.sendEmailReferenceTask.emailTemplateUuid]\n                                                  ),\n                                                  {}\n                                                )\n                                              )\n                                            )\n                                          )\n                                        ),\n                                        {}\n                                      ),\n                                      /*Remove just deselected ref tasks*/\n                                      if(\n                                        rule!CMGT_UTIL_IsNotBlank(fv!deselectedRows),\n                                        a!save(\n                                          local!newTaskBlockTasks,\n                                          remove(\n                                            local!newTaskBlockTasks,\n                                            wherecontains(\n                                              fv!deselectedRows[recordType!CMGT_WFL_CFG_ReferenceTask.referenceTaskId],\n                                              local!newTaskBlockTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTask.referenceTaskId]\n                                            )\n                                          )\n                                        ),\n                                        {}\n                                      )\n                                    },\n                                    validations: {},\n                                    borderStyle: \"LIGHT\",\n                                    shadeAlternateRows: false,\n                                    /*Task Name read out as row header*/\n                                    rowHeader: 1,\n                                    refreshAfter: \"RECORD_ACTION\",\n                                    userFilters: {\n                                      #\"urn:appian:user-filter:v1:3dbe5fed-28bf-4f27-aa59-eb2c940289b4/edf09a91-8ea9-4cd6-8a15-b4a092c60f63\"\n                                    },\n                                    showSearchBox: true,\n                                    showRefreshButton: true,\n                                    recordActions: {\n                                      #\"SYSTEM_SYSRULES_recordActionItem\"(\n                                        action: #\"urn:appian:record-action:v1:3dbe5fed-28bf-4f27-aa59-eb2c940289b4/71706f00-ef33-4ef5-a17b-9d9c2ff7e561\"\n                                      )\n                                    }\n                                  )\n                                },\n                                height: \"EXTRA_TALL\",\n                                marginBelow: \"NONE\",\n                                showBorder: false\n                              ),\n                              width: \"8X\"\n                            ),\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: {\n                                #\"SYSTEM_SYSRULES_cardLayout\"(\n                                  contents: {\n                                    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                      value: {\n                                        #\"SYSTEM_SYSRULES_richTextHeader\"(\n                                          text: {\n                                            #\"urn:appian:translation-string:v1:bd31effd-a144-4cb4-8837-548e3dfec78b\"\n                                          },\n                                          size: \"SMALL\"\n                                        )\n                                      }\n                                    ),\n                                    #\"SYSTEM_SYSRULES_gridField_v3\"(\n                                      label: #\"urn:appian:translation-string:v1:bd31effd-a144-4cb4-8837-548e3dfec78b\",\n                                      labelPosition: \"COLLAPSED\",\n                                      emptyGridMessage: #\"urn:appian:translation-string:v1:9b25c833-d585-4b74-bb09-0613f9a72a06\",\n                                      data: local!newTaskBlockTasks,\n                                      columns: {\n                                        #\"SYSTEM_SYSRULES_gridColumn\"(\n                                          label: #\"urn:appian:translation-string:v1:0bae9b3f-5ddd-4c6a-a4cf-abe8702dac9e\",\n                                          value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                            value: {\n                                              if(\n                                                fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.isAutomated],\n                                                {\n                                                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                                    icon: fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.icon],\n                                                    caption: #\"urn:appian:translation-string:v1:6f0faf57-3d4b-45c2-a1f8-099820a4ced1\",\n                                                    showWhen: fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.isAutomated],\n\n                                                  ),\n                                                  char(32)\n                                                },\n                                                {}\n                                              ),\n                                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                                text: {\n                                                  fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName]\n                                                },\n                                                style: \"STRONG\"\n                                              ),\n                                              char(10),\n                                              #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                                text: {\n                                                  concat(\n                                                    fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.label],\n                                                    if(\n                                                      rule!CMGT_UTIL_IsNotBlank(\n                                                        fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.description]\n                                                      ),\n                                                      cons!CMGT_TXT_BULLET_WITH_SPACES,\n                                                      \"\"\n                                                    ),\n                                                    rule!CMGT_UTIL_TruncateText(\n                                                      text: stripwith(\n                                                        striphtml(\n                                                          fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.description]\n                                                        ),\n                                                        char(10)\n                                                      ),\n                                                      maxLength: 50\n                                                    )\n                                                  )\n                                                },\n                                                color: ri!brandingMap.SecondaryTextColor,\n                                                size: \"SMALL\"\n                                              )\n                                            }\n                                          ),\n                                          width: \"AUTO\"\n                                        ),\n                                        #\"SYSTEM_SYSRULES_gridColumn\"(\n                                          value: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                            value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                              icon: \"times\",\n                                              altText: #\"urn:appian:translation-string:v1:86ca1938-3ee4-4a42-903c-2effa0707745\",\n                                              link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                                saveInto: {\n                                                  a!save(\n                                                    local!selectedReferenceTaskIds,\n                                                    remove(\n                                                      local!selectedReferenceTaskIds,\n                                                      wherecontains(\n                                                        fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId],\n                                                        tointeger(local!selectedReferenceTaskIds)\n                                                      )\n                                                    )\n                                                  ),\n                                                  a!save(\n                                                    local!newTaskBlockTasks,\n                                                    remove(\n                                                      local!newTaskBlockTasks,\n                                                      wherecontains(\n                                                        fv!row[recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId],\n                                                        local!newTaskBlockTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId]\n                                                      )\n                                                    )\n                                                  )\n                                                }\n                                              ),\n                                              linkStyle: \"STANDALONE\",\n                                              color: ri!brandingMap.NegativeAccentColor\n                                            )\n                                          ),\n                                          width: \"ICON\"\n                                        )\n                                      },\n                                      pageSize: 25,\n                                      borderStyle: \"LIGHT\",\n                                      shadeAlternateRows: false,\n                                      rowHeader: 1\n                                    )\n                                  },\n                                  height: \"EXTRA_TALL\",\n                                  marginBelow: \"NONE\",\n                                  showBorder: false\n                                )\n                              },\n                              width: \"10X\"\n                            )\n                          },\n                          marginBelow: \"NONE\",\n                          showDividers: true\n                        )\n                      },\n                      style: ri!brandingMap.CardBackgroundColor,\n                      shape: ri!brandingMap.CardShape,\n                      marginBelow: \"NONE\",\n                      showBorder: false,\n                      showShadow: ri!brandingMap.CardShowShadow\n                    )\n                  },\n                  width: \"WIDE_PLUS\"\n                ),\n                #\"SYSTEM_SYSRULES_columnLayout\"(width: \"1X\")\n              }\n            )\n          },\n          backgroundColor: ri!brandingMap.TertiaryBackgroundColor,\n          padding: \"MORE\"\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000ed5b-d85c-8000-9d42-011c48011c48_3696853": {
      "name": "CMGT_QR_GetEmailTemplateAttachments",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_EmailTemplateAttachments,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field:recordType!CMGT_EmailTemplateAttachments.sendEmailTaskId,\n      operator: \"=\",\n      value: ri!sendEmailTaskId\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_EmailTemplateAttachments.createdByUser,\n    recordType!CMGT_EmailTemplateAttachments.modifiedByUser\n  },\n  pagingInfo: ri!pagingInfo,\n  sort: a!defaultValue(\n    value: ri!sort,\n    default: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field:recordType!CMGT_EmailTemplateAttachments.createdOn,\n      ascending: false\n    )\n  ),\n  relatedRecordData: ri!relatedRecordData,\n  groupByFields: ri!groupByFields,\n  logicalExpressions: ri!additionalLogicalExpression,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000eb2c-b6af-8000-9c5d-011c48011c48_1453742": {
      "name": "CMGT_UTIL_ReplaceArgs",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!args),\n  ri!string,\n  reduce(\n    substitute(_, _, _),\n    ri!string,\n    merge(\n      #\"SYSTEM_SYSRULES_forEach\"(\n        items: a!keys(ri!args),\n        expression: \"@|\" & fv!item & \"|@\"\n      ),\n      touniformstring(ri!args[a!keys(ri!args)])\n    )\n  )\n)"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1719960": {
      "name": "CMGT_NCF_orderNodesBasedOnDistanceFromStart",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!edgesFromOrderedNodes: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!allEdges,\n      field: \"from\",\n      value: ri!orderedNodes.id\n    ),\n    refreshAlways: true\n  ),\n  local!edgesToUnorderedNodes: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      filterType: \"REJECT\",\n      records:local!edgesFromOrderedNodes,\n      field: \"to\",\n      value: ri!orderedNodes.id\n    ),\n    refreshAlways: true\n  ),\n  local!dependentUnorderedNodes: a!refreshVariable(\n    value:  rule!CMGT_UTIL_Filter(\n      records: ri!allNodes,\n      field: \"id\",\n      value: local!edgesToUnorderedNodes.to\n    ),\n    refreshAlways: true\n  ),\n  local!nodesToOrder: a!refreshVariable(\n    value: rule!CMGT_UTIL_cast(\n      typeOf: {a!map()},\n      value: apply(\n        rule!CMGT_NCF_updateNodeOrderBasedOnPrecedents(\n          allEdges: ri!allEdges,\n          currentNode: _,\n          edgesToUnorderedNodes: local!edgesToUnorderedNodes,\n          orderedNodes: ri!orderedNodes\n        ),\n        local!dependentUnorderedNodes\n      )\n    ),\n    refreshAlways: true\n  ),\n  union(ri!orderedNodes, local!nodesToOrder)\n)"
    },
    "_a-0000ecac-72b0-8000-9cf2-011c48011c48_3150763": {
      "name": "CMGT_WFL_GroupTaskBlockTaskBranches",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!activeBranches: rule!CMGT_UTIL_Filter(\n    records: ri!taskBlockTaskBranch,\n    field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n    value: true\n  ),\n  local!distinctBeforeTaskUUID: rule!CMGT_UTIL_Distinct(\n    local!activeBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid]\n  ),\n  local!distinctResponseOptions: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!distinctBeforeTaskUUID,\n      expression: a!localVariables(\n        local!thisUUID: fv!item,\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: rule!CMGT_UTIL_Distinct(\n            rule!CMGT_UTIL_Filter(\n              records: local!activeBranches,\n              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n              value: local!thisUUID\n            )[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskResponseOptionUuid]\n          ),\n          expression: rule!CMGT_WFL_ConstructTaskBlockTaskBranchMap(\n            taskUUID: local!thisUUID,\n            taskResponseOptionUUID: fv!item\n          )\n        )\n      )\n    )\n  ),\n  local!distinctionRequiredness: a!flatten(\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!distinctResponseOptions,\n      expression: a!localVariables(\n        local!thisResponse: fv!item,\n        local!thisTaskBranches: rule!CMGT_UTIL_Filter(\n          records: local!activeBranches,\n          fieldValuePairs: {\n            a!map(\n              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n              value: local!thisResponse.taskUUID\n            ),\n            a!map(\n              field:  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskResponseOptionUuid,\n              value: local!thisResponse.taskResponseOptionUUID\n            )\n          }\n        ),\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: rule!CMGT_UTIL_Distinct(\n            local!thisTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired]\n          ),\n          expression: rule!CMGT_WFL_ConstructTaskBlockTaskBranchMap(\n            taskUUID: local!thisResponse.taskUUID,\n            taskResponseOptionUUID: local!thisResponse.taskResponseOptionUUID,\n            isRequired: fv!item,\n            afterTaskBlockTaskBranches: rule!CMGT_UTIL_Filter(\n              records: local!thisTaskBranches,\n              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n              value: fv!item\n            ),\n            \n          )\n        )\n      )\n    )\n  ),\n  local!distinctRequirednessValid: #\"SYSTEM_SYSRULES_forEach\"(\n    items: local!distinctionRequiredness,\n    expression: a!localVariables(\n      local!thisMap: fv!item,\n      local!startsByDefault_afterTaskBranches: cast(\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n          recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n        ),\n        rule!CMGT_UTIL_Filter(\n          records: local!thisMap.afterTaskBlockTaskBranches,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n          value: index(\n            rule!CMGT_UTIL_Filter(\n              records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n              field: recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault,\n              value: true\n            ),\n            recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n            {}\n          )\n        )\n      ),\n      local!loopBackTasks_afterTaskBranches: cast(\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n          recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n        ),\n        rule!CMGT_UTIL_Filter(\n          records: local!thisMap.afterTaskBlockTaskBranches,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n          value: rule!CMGT_WFL_TaskBlock_FindPreviousTreeTasks(\n            taskBlock: ri!taskBlock,\n            taskUUID: local!thisMap.taskUUID,\n            taskBlockTaskBranches: local!activeBranches\n          )[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n        )\n      ),\n      {\n        /* isRequirednessValid = true         */\n        if(\n          rule!CMGT_UTIL_IsNotBlank(\n            difference(\n              cast(\n                #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n                ),\n                fv!item.afterTaskBlockTaskBranches\n              ),\n              a!flatten(\n                {\n                  local!startsByDefault_afterTaskBranches,\n                  local!loopBackTasks_afterTaskBranches\n                }\n              )\n            )\n          ),\n          rule!CMGT_WFL_ConstructTaskBlockTaskBranchMap(\n            taskUUID: local!thisMap.taskUUID,\n            taskResponseOptionUUID: local!thisMap.taskResponseOptionUUID,\n            isRequired: local!thisMap.isRequired,\n            isRequirednessValid: true,\n            afterTaskBlockTaskBranches: difference(\n              cast(\n                #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n                ),\n                fv!item.afterTaskBlockTaskBranches\n              ),\n              a!flatten(\n                {\n                  local!startsByDefault_afterTaskBranches,\n                  local!loopBackTasks_afterTaskBranches\n                }\n              )\n            ),\n            isActive: fv!item.isActive\n          ),\n          null\n        ),\n        /* isRequirednessValid = false         */\n        if(\n          rule!CMGT_UTIL_IsNotBlank(\n            union(\n              local!startsByDefault_afterTaskBranches,\n              local!loopBackTasks_afterTaskBranches\n            )\n          ),\n          rule!CMGT_WFL_ConstructTaskBlockTaskBranchMap(\n            taskUUID: local!thisMap.taskUUID,\n            taskResponseOptionUUID: local!thisMap.taskResponseOptionUUID,\n            isRequired: local!thisMap.isRequired,\n            isRequirednessValid: false,\n            afterTaskBlockTaskBranches: union(\n              local!startsByDefault_afterTaskBranches,\n              local!loopBackTasks_afterTaskBranches\n            ),\n            isActive: fv!item.isActive\n          ),\n          null\n        )\n      }\n    )\n  ),\n  rule!CMGT_UTIL_RejectBlank(\n    a!flatten(local!distinctRequirednessValid)\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568381": {
      "name": "CMGT_WFL_TaskBlockTask_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskBlockTasks,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.sortOrder,\n        value: fv!index\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.modifiedBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.modifiedOn,\n        value: now()\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n        value: rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n        value: true\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.createdBy,\n        value: ri!initiator\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.createdOn,\n        value: now()\n      )\n    },\n    /*Set metadata for all child relationships*/\n    childRelationships: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches,\n        value: rule!CMGT_WFL_TaskBlockTaskBranch_SetMetaData(\n          taskBlockTaskBranches: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions,\n        value: rule!CMGT_WFL_CFG_TaskBlockTaskResponseOption_SetMetaData(\n          taskResponseOptions: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions]\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask,\n        value: rule!CMGT_WFL_CreateCaseTaskBlockTask_SetMetaData(\n          createCaseTaskBlockTask: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask],\n          initiator: ri!initiator\n        )\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask,\n        value: rule!CMGT_WFL_SendEmailTaskBlockTask_SetMetaData(\n          sendEmailTaskBlockTask: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask],\n          initiator: ri!initiator\n        )\n      )\n    }\n  )\n)"
    },
    "0006ea29-5839-8000-02e7-7f0000014e7a": {
      "name": "CMGT_WFL_TaskBlock_CreateUpdate",
      "type": "Process Model",
      "sail_code": "// Input: ?\n= { rule!CMGT_WFL_MTR_TaskBlockWrapper(taskBlock: pv!taskBlock), rule!CMGT_WFL_MTR_TaskBlockTaskCreationWrapper( taskBlockTasks: index( pv!taskBlock, recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks, null() ) )}\n\n// Output: ?\nrule!CMGT_WFL_TaskBlock_SetMetaData(\n  taskBlocks: pv!taskBlock,\n  initiator: pp!initiator\n)\n\n// Input: ?\na!flatten(pv!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks])\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n\n// Input: ?\nrule!CMGT_WFL_TaskBlock_WriteRecordsProperties(taskBlocks: pv!taskBlock, isInput: true)\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_TaskBlock\n\n// Output: ?\nrule!CMGT_WFL_TaskBlock_WriteRecordsProperties(\n  taskBlocks: pv!taskBlock,\n  recordsUpdated: ac!RecordsUpdated,\n  isInput: false\n)\n\n// Input: ?\n=documentsToDelete\n\n// Input: ?\n=newEmailTemplates\n\n// Input: ?\n=pv!documentsToDelete[tp!instanceindex]"
    },
    "_a-0000eccd-140e-8000-9d02-011c48011c48_3340843": {
      "name": "CMGT_WFL_CFG_TaskBlockTaskResponseOption_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskResponseOptions,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Always set these fields with each update*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.sortOrder,\n        value: fv!index\n      )\n    },\n    /*Only modify these fields if they are currently null*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.isActive,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000ea72-a399-8000-9c0d-011c48011c48_863909": {
      "name": "CMGT_UTIL_ValidateSLA",
      "type": "Expression Rule",
      "sail_code": "{\n  if(\n    /*Allows nulls & integers*/\n    regexmatch(\"^(-?(0|[1-9]\\d*)|)$\", ri!value) <> true(),\n    #\"urn:appian:translation-string:v1:0ab37401-6bd6-43b5-8b4a-484b1b1c7378\",\n    if(\n      and(\n        tointeger(ri!value) < 0,\n        a!isNotNullOrEmpty(ri!value)\n      ),\n      #\"urn:appian:translation-string:v1:f1ea8a38-1904-4cd0-80cc-1f1c119f5abe\",\n      if(\n        and(\n          tointeger(ri!value) > cons!CMGT_MAX_SLA_DAYS,\n          a!isNotNullOrEmpty(ri!value)\n        ),\n        #\"urn:appian:translation-string:v1:2cfd2a67-27ef-4dc4-b0d5-6fb08358e1ee\"(\n          #\"urn:appian:translation-variable:v1:9c7b4738-1840-4d1b-a7ab-0e41ce103e3e\": cons!CMGT_MAX_SLA_DAYS\n        ),\n        null\n      )\n    )\n  )\n}"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_576741": {
      "name": "CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch",
      "type": "Expression Rule",
      "sail_code": "if(\n  cons!CMGT_BOL_AUTOMATION_TESTING_LABEL_SWITCH,\n  ri!testingLabel,\n  ri!shipmentLabel\n)"
    },
    "_a-0000ed5b-d85c-8000-9d42-011c48011c48_3693036": {
      "name": "CMGT_Sub_EmailTemplateAttachmentsCard",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_cardLayout\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: #\"SYSTEM_SYSRULES_cardLayout\"(\n            contents: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Document icon\"),\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: a!defaultValue(\n                    ri!attachment[recordType!CMGT_EmailTemplateAttachments.extensionIcon],\n                    ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extensionIcon]\n                  ),\n                  size: \"MEDIUM_PLUS\",\n                  color: rule!CMGT_Document_IconColorLogic(\n                    documentExtension: a!defaultValue(\n                      ri!attachment[recordType!CMGT_EmailTemplateAttachments.extension],\n                      ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension]\n                    ),\n                    brandingMap: ri!brandingMap\n                  )\n                )\n              },\n              marginBelow: \"NONE\"\n            ),\n            showBorder: false,\n            style: ri!brandingMap.CardBackgroundColor\n          ),\n          width: \"AUTO\",\n\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_cardLayout\"(\n              contents: #\"SYSTEM_SYSRULES_forEach\"(\n                items: rule!CMGT_Sub_EmailTemplateAttachments_SummaryDisplay(\n                  attachment: ri!attachment,\n                  cfgAttachment: ri!cfgAttachment,\n                  brandingMap: ri!brandingMap,\n                  linkColor: ri!linkColor,\n                  isShowNoLink: true(),\n                  sizeAndExtensionColor: ri!sizeAndExtensionColor,\n                  nameStyle: \"STRONG\"\n                ),\n                expression: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                  label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(\n                    testingLabel: \"Email Template Attachment Details\"\n                  ),\n                  labelPosition: \"COLLAPSED\",\n                  value: fv!item,\n                  showWhen: or(\n                    not(fv!isLast),\n                    a!defaultValue(ri!showCreatedOn, true)\n                  ),\n                  preventWrapping: fv!isFirst,\n                  marginAbove: if(fv!isLast, \"LESS\", \"NONE\"),\n                  marginBelow: \"NONE\"\n                )\n              ),\n              style: ri!brandingMap.CardBackgroundColor,\n              showBorder: false\n            )\n          },\n          width: \"WIDE\"\n        )\n      },\n      spacing: \"NONE\",\n      stackWhen: \"NEVER\"\n    )\n  },\n  showWhen: a!isNotNullOrEmpty(\n    a!defaultValue(\n      ri!attachment[recordType!CMGT_EmailTemplateAttachments.appianDocumentId],\n      ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n    )\n  ),\n  link: #\"SYSTEM_SYSRULES_documentDownloadLink\"(\n    document: ri!attachment[recordType!CMGT_EmailTemplateAttachments.appianDocumentId],\n    showWhen: a!defaultValue(ri!showDocumentDownloadLink, false())\n  ),\n  shape: ri!brandingMap.CardShape,\n  showBorder: ri!brandingMap.CardShowBorder,\n  showShadow: ri!brandingMap.CardShowShadow,\n  padding: \"NONE\",\n  style: ri!brandingMap.CardBackgroundColor\n)"
    },
    "_a-0000eab0-e049-8000-9c27-011c48011c48_1011527": {
      "name": "CMGT_UTIL_DropNonWritableRelationshipsFromRecord",
      "type": "Expression Rule",
      "sail_code": "/*\nThe main rule to \"cleanse\" the input of a WriteRecords SS node to remove non-writable relationships.\n\nSTANDARD USAGE:\n- Use this in tandem with rule CMGT_UTIL_MergeWriteRecordIdsToProcessVariable (see that description)\n- In the input of a WriteRecords SS (NOT in a previous script task), do:\n  A - Expressionable input to \"Records\" intput\n  B - rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord(\n        records: pv![the pv to write],\n        relationships: {list of record relationships that are not allowed to be written}\n      )\n\nIMPORTANT GENERAL NOTES: \n- The reason to run this in the input of the WriteRecords SS instead of a previous script task\nis that, when used with CMGT_UTIL_MergeWriteRecordIdsToProcessVariable, you can maintain the relationships\nthat you had to drop before writing.\n  -> For example, if you are writing \"Case\" but it has a child-relationship \"Address\" that cannot be written,\n    - this will drop \"Address\" before attempting to write\n    - if the output is configured properly it will reattach \"Address\" in the output\n    - the overall result is that you basically ran the node as if \"Address\" was ignored, \n      so that you can use it later in the process flow\n*/\n#\"SYSTEM_SYSRULES_forEach\"(\n  items: a!flatten(ri!records),\n  expression: reduce(\n    rule!CMGT_UTIL_DropNonWritableRelationshipsFromRecord_Reducer(\n      record: _,\n      relationship: _\n    ),\n    fv!item,\n    ri!relationships\n  )\n)"
    },
    "_a-0000ea2f-ac11-8000-9bf4-011c48011c48_619938": {
      "name": "CMGT_NetworkChartField_StandardFormatting",
      "type": "Expression Rule",
      "sail_code": "a!map(\n  nodeOptionGroups: a!map(\n    task: a!map(\n      chosen: false,\n      shape: \"box\",\n      shapeProperties: a!map(\n        borderRadius: if(\n          search(\n            \"ROUND\",\n            tostring(ri!brandingMap.CardShape)\n          ),\n          6,\n          0\n        )\n      ),\n      font: a!map(\n        multi: \"html\",\n        align: \"left\",\n        size: 12,\n        vadjust: 2,\n        color: ri!brandingMap.BlackColor,\n        bold: a!map(size: 14, vadjust: - 4, mod: \"bold\")\n      ),\n      color: a!map(\n        border: ri!brandingMap.DividerColor,\n        background: ri!brandingMap.WhiteColor\n      ),\n      margin: 12,\n      widthConstraint: a!map(maximum: 250),\n      heightConstraint: a!map(valign: \"middle\"),\n      /*shadow: a!map(enabled: true, size: 0, x: 0, y: - 5)*/\n    ),\n    terminal: a!map(\n      chosen: false,\n      shape: \"box\",\n      shapeProperties: a!map(\n        borderRadius: if(\n          search(\n            \"ROUND\",\n            tostring(ri!brandingMap.CardShape)\n          ),\n          6,\n          0\n        )\n      ),\n      font: a!map(\n        multi: \"html\",\n        align: \"left\",\n        size: 12,\n        vadjust: 2,\n        color: ri!brandingMap.BlackColor,\n        bold: a!map(size: 14, vadjust: 0, mod: \"bold\")\n      ),\n      margin: 10,\n      color: a!map(\n        border: ri!brandingMap.DividerColor,\n        background: ri!brandingMap.WhiteColor\n      )\n    )\n  ),\n  defaultEdge: a!map(\n    color: ri!brandingMap.SecondaryTextColor,\n    width: 1,\n    dashes: true,\n    chosen: false\n  ),\n  defaultArrow: a!map(to: a!map(enabled: true, scaleFactor: .75)),\n  layout: a!map(\n    improvedLayout: true,\n    clusterThreshold: 1000000,\n    hierarchical: a!map(\n      enabled: true,\n      levelSeparation: 175,\n      nodeSpacing: 250,\n      treeSpacing: 400,\n      blockShifting: true,\n      edgeMinimization: true,\n      parentCentralization: true,\n      direction: \"UD\",\n      sortMethod: \"directed\",\n      shakeTowards: \"roots\"\n    )\n  ),\n  physics: a!map(\n    enabled: true,\n    solver: \"hierarchicalRepulsion\",\n    hierarchicalRepulsion: a!map(avoidOverlap: 1, nodeDistance: 80),\n    maxVelocity: .00001,\n    stabilization: a!map(\n      iterations: 1000000,\n      onlyDynamicEdges: true\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3604539": {
      "name": "CMGT_WFL_DisplayInfoBanner_EmailTemplate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!isCollapsed: true(),\n  local!showWhenForTasks: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!referenceTaskNames),\n    local!isCollapsed = false()\n  ),\n  local!showWhenForTaskBlocks: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!taskBlockNames),\n    local!isCollapsed = false()\n  ),\n  local!showWhenForCaseTypeWorkflows: and(\n    rule!CMGT_UTIL_IsNotBlank(input: ri!caseTypeWorkFlowNames),\n    local!isCollapsed = false()\n  ),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n        items: {\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: {\n                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                  icon: \"info-circle\",\n                  color: ri!brandingMap.InfoAccentColor\n                ),\n                \" \",\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(text: ri!primaryMessage)\n              }\n            )\n          ),\n          #\"SYSTEM_SYSRULES_sideBySideItem\"(\n            item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                icon: if(\n                  local!isCollapsed,\n                  \"angle-down-bold\",\n                  \"angle-up-bold\"\n                ),\n                link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                  saveInto: a!save(\n                    local!isCollapsed,\n                    not(local!isCollapsed)\n                  )\n                ),\n                linkStyle: \"STANDALONE\",\n                color: ri!brandingMap.StandardTextColor,\n                size: \"MEDIUM\"\n              ),\n              align: \"RIGHT\"\n            )\n          )\n        },\n        marginBelow: \"NONE\"\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!referenceTaskNames) = 1,\n              #\"urn:appian:translation-string:v1:0fd1b5e8-27d7-435b-af55-17db70deff8c\",\n              #\"urn:appian:translation-string:v1:b3937399-62c6-489c-9594-fc51cb8074f0\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!referenceTaskNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForTasks,\n        marginBelow: if(\n          or(\n            local!showWhenForCaseTypeWorkflows,\n            local!showWhenForTaskBlocks\n          ),\n          \"NONE\",\n          \"EVEN_LESS\"\n        ),\n        marginAbove: \"NONE\"\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!taskBlockNames) = 1,\n              #\"urn:appian:translation-string:v1:179fc44d-752c-4185-8e1f-775a538abd8d\",\n              #\"urn:appian:translation-string:v1:34b0c22a-1b36-4741-98ff-fffca01ee0e3\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!taskBlockNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForTaskBlocks,\n        marginBelow: if(\n          local!showWhenForCaseTypeWorkflows,\n          \"NONE\",\n          \"EVEN_LESS\"\n        )\n      ),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n        value: {\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: if(\n              length(ri!caseTypeWorkFlowNames) = 1,\n              #\"urn:appian:translation-string:v1:b8af0998-cbb6-4bc1-bfde-d4c65953ab10\",\n              #\"urn:appian:translation-string:v1:c9e8165d-aed0-40d7-a023-d0903986c59c\"\n            ),\n            style: \"STRONG\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n            text: concat(\n              \" \",\n              joinarray({ ri!caseTypeWorkFlowNames }, \", \")\n            )\n          )\n        },\n        showWhen: local!showWhenForCaseTypeWorkflows,\n        marginBelow: \"EVEN_LESS\"\n      )\n    },\n    showWhen: and(\n      ri!showWhen,\n      any(\n        rule!CMGT_UTIL_IsNotBlank,\n        {\n          ri!caseTypeWorkFlowNames,\n          ri!referenceTaskNames,\n          ri!taskBlockNames\n        }\n      )\n    ),\n    style: ri!brandingMap.InfoBackgroundColor,\n    marginBelow: \"STANDARD\",\n    marginAbove: \"NONE\",\n    showBorder: false(),\n    decorativeBarPosition: \"START\"\n  )\n)"
    },
    "0002ed4a-bade-8000-1ea3-7f0000014e7a": {
      "name": "CMGT_WFL_EmailTemplate_CreateUpdate",
      "type": "Process Model",
      "sail_code": "// Input: ?\n= pv!documentsToDelete[tp!instanceindex]\n\n// Input: ?\n=pv!emailTemplates\n\n// Input: ?\n=recordType!CMGT_WFL_CFG_EmailTemplate\n\n// Output: ?\nAC!RecordsUpdated\n\n// Output: ?\nrule!CMGT_WFL_EmailTemplate_SetMetaData(\n  initiator: pp!initiator,\n  emailTemplates: pv!emailTemplates\n)\n\n// Output: ?\na!match(\n  value: pv!documentsToDelete,\n  whenTrue: rule!CMGT_UTIL_IsNotBlank(input: fv!value),\n  then: pv!documentsToDelete,\n  whenTrue: rule!CMGT_UTIL_IsNotBlank(\n    input: a!flatten(\n      pv!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n    )\n  ),\n  then: rule!CMGT_UTIL_Filter(\n    records: a!flatten(\n      pv!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n    ),\n    field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n    value: false\n  )[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId],\n  default: null()\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673899": {
      "name": "CMGT_WFL_MTR_UserInitiatesTaskBlock",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000e9fa-aa45-8000-9bda-011c48011c48_301090": {
      "name": "CMGT_UTIL_DisplayUser",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!user,\n  expression: a!localVariables(\n    local!currentUserRecord: if(\n      isusernametaken(fv!item),\n      rule!CMGT_UTIL_Filter(\n        records: ri!userRecord,\n        field: #\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_username\",\n        value: fv!item\n      ),\n      null()\n    ),\n    cast(\n      'type!{http://www.appian.com/ae/types/2009}Text',\n      if(\n        rule!CMGT_UTIL_IsNotBlank(input: local!currentUserRecord),\n        if(\n          or(\n            local!currentUserRecord[#\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_isServiceAccount\"] = true,\n            #\"urn:appian:function:v1:a:isusermemberofgroup?okey=a!isUserMemberOfGroup\"(\n              username: fv!item,\n              groups: cons!CMGT_GRP_SERVICE_ACCOUNTS\n            )\n          ),\n          cons!CMGT_TXT_AUTOMATED_SYSTEM,\n          local!currentUserRecord[#\"urn:appian:record-field:v1:SYSTEM_RECORD_TYPE_USER/SYSTEM_RECORD_TYPE_USER_FIELD_firstAndLastName\"]\n        ),\n        if(\n          isnull(fv!item),\n          if(\n            ri!returnNullForEmpty,\n            null,\n            cons!CMGT_TXT_EMPTY_VALUE\n          ),\n          fv!item\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_568399": {
      "name": "CMGT_WFL_TaskBlockTaskBranch_SetMetaData",
      "type": "Expression Rule",
      "sail_code": "#\"SYSTEM_SYSRULES_forEach\"(\n  items: ri!taskBlockTaskBranches,\n  expression: rule!CMGT_UTIL_SetRecordFields(\n    record: fv!item,\n    /*Only modify these fields if they are currently null*/\n    alwaysOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n        /*Always set this to false if it's not tied to both a before and after task*/\n        value: if(\n          or(\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid]\n            ),\n            a!isNullOrEmpty(\n              fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n            )\n          ),\n          false,\n          /*Otherwise keep it the same, unless it's null*/\n          a!defaultValue(\n            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive],\n            true\n          )\n        )\n      )\n    },\n    /*Only modify these fields if they are currently null (default value)*/\n    neverOverwrite: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n        value: true\n      )\n    }\n  )\n)"
    },
    "_a-0000e99c-1217-8000-9ba9-011c48011c48_56349": {
      "name": "CMGT_UTIL_FormatDateTime",
      "type": "Expression Rule",
      "sail_code": "if(\n  a!isNullOrEmpty(ri!dateTime),\n  \"\",\n  a!localVariables(\n    /*Converting dateTime to system time zone if  convertToSystemTimeZone is passed true */\n    local!dateTimeToFormat: if(\n      ri!convertToSystemTimeZone,\n      rule!CMGT_UTIL_ConvertDateTimeToTimezone(\n        dateTime: ri!dateTime,\n        timezone: rule!CMGT_UTIL_SystemTimezone()\n      ),\n      ri!dateTime\n    ),\n    if(\n      ri!returnTime,\n      text(local!dateTimeToFormat, \"h:mm a\"),\n      if(\n        ri!includeTime,\n        text(\n          local!dateTimeToFormat,\n          \"mmm d, yyyy h:mm a\"\n        ),\n        if(\n          ri!returnMonthAndDay,\n          text(local!dateTimeToFormat, \"mmm.d\"),\n          text(local!dateTimeToFormat, \"mmm d, yyyy\")\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000e9ca-3659-8000-9bb8-011c48011c48_145917": {
      "name": "CMGT_UTIL_Distinct",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(ri!value),\n  union(\n    a!flatten(ri!value),\n    a!flatten(ri!value)\n  )\n)"
    },
    "_a-0000eb4d-d051-8000-9c68-011c48011c48_1673867": {
      "name": "CMGT_WFL_MTR_UserEditsTaskBlock",
      "type": "Expression Rule",
      "sail_code": "now()"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1720774": {
      "name": "CMGT_NCF_setAverageHorizontalOrderOfDependents",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!dependentEdges: a!refreshVariable(\n    value:rule!CMGT_UTIL_Filter(\n      records: ri!allEdges,\n      field: \"from\",\n      value: ri!currentNode.id\n    ),\n    refreshAlways: true\n  ),\n  local!dependentNodes: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!orderedNodes,\n      field: \"id\",\n      value: local!dependentEdges.to\n    ),\n    refreshAlways: true\n  ),\n  /*setting this as a percent 1-100*/\n  /*if there are no children the score is 50*/\n  local!averageChildHorizontalOrder: a!refreshVariable(\n    value: if(\n      a!isNullOrEmpty(local!dependentNodes),\n      50.0,\n      average(local!dependentNodes.horizontalOrder)\n    ),\n    refreshAlways: true\n  ),\n  #\"urn:appian:function:v1:a:update\"(\n    data: ri!currentNode,\n    index: \"horizontalOrder\",\n    value: local!averageChildHorizontalOrder\n  )\n)"
    },
    "_a-0000edf8-ac88-8000-9d80-011c48011c48_4290472": {
      "name": "CMGT_Document_IconLogic",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: lower(\n   ri!documentExtension\n  ),\n  equals: \"doc\",\n  equals: \"docx\",\n  then: \"file-word-o\",\n  equals: \"txt\",\n  then: \"file-text-o\",\n  equals: \"png\",\n  equals: \"jpg\",\n  then: \"file-image-o\",\n  equals: \"mov\",\n  equals: \"mp4\",\n  then: \"file-movie-o\",\n  equals: \"xls\",\n  equals: \"xlsx\",\n  equals: \"xlsm\",\n  then: \"file-excel-o\",\n  equals: \"pptx\",\n  then: \"file-powerpoint-o\",\n  equals: \"pdf\",\n  then: \"file-pdf-o\",\n  equals: \"zip\",\n  then: \"file-archive-o\",\n  default: \"file-o\"\n),"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1719972": {
      "name": "CMGT_NCF_updateNodeOrderBasedOnPrecedents",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!precedentEdges: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!allEdges,\n      fieldValuePairs: {\n        a!map(field: \"to\", value: ri!currentNode.id)\n      }\n    ),\n    refreshAlways: true\n  ),\n  local!requiredPrecedentEdges: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: local!precedentEdges,\n      fieldValuePairs: { a!map(field: \"dashes\", value: false) }\n    ),\n    refreshAlways: true\n  ),\n  local!precedentEdgesFromSortedNodes: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!edgesToUnorderedNodes,\n      field: \"to\",\n      value: ri!currentNode.id\n    ),\n    refreshAlways: true\n  ),\n  if(\n    /*since the currentNode is sourced from dependentUnorderedNodes, it will always have at least one precedent*/\n    /*if there are no required precedents and the non-required precedents are not sorted, return nothing*/\n    and(\n      a!isNullOrEmpty(local!requiredPrecedentEdges),\n      a!isNullOrEmpty(local!precedentEdgesFromSortedNodes)\n    ),\n    {},\n    or(\n      /*if there are no required precedents and any of the non-required precedents are sorted, give it an order */\n      and(\n        a!isNullOrEmpty(local!requiredPrecedentEdges),\n        a!isNotNullOrEmpty(local!precedentEdgesFromSortedNodes)\n      ),\n      /*if all required precedents are already sorted, give it an order*/\n      a!isNullOrEmpty(\n        difference(\n          local!requiredPrecedentEdges,\n          local!precedentEdgesFromSortedNodes\n        )\n      )\n    ),\n    #\"urn:appian:function:v1:a:update\"(\n      data: ri!currentNode,\n      index: \"verticalOrder\",\n      value: tointeger(\n        max(ri!orderedNodes.verticalOrder) + 1\n      )\n    ),\n    /*if the node has required precedents which are not already sorted, return nothing*/\n    {}\n  )\n)"
    },
    "_a-0000eb57-0ad2-8000-9c6b-011c48011c48_1721000": {
      "name": "CMGT_NCF_setAverageHorizontalOrderOfPrecedents",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!precedentEdges: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!allEdges,\n      field: \"to\",\n      value: ri!currentNode.id\n    ),\n    refreshAlways: true\n  ),\n  local!precedentNodes: a!refreshVariable(\n    value: rule!CMGT_UTIL_Filter(\n      records: ri!orderedNodes,\n      field: \"id\",\n      value: local!precedentEdges.from\n    ),\n    refreshAlways: true\n  ),\n  /*setting this as a percent 1-100*/\n  /*if there are no parents the score is 50*/\n  local!averageParentHorizontalOrder: a!refreshVariable(\n    value: if(\n      a!isNullOrEmpty(local!precedentNodes),\n      50.0,\n      average(local!precedentNodes.horizontalOrder)\n    ),\n    refreshAlways: true\n  ),\n  #\"urn:appian:function:v1:a:update\"(\n    data: ri!currentNode,\n    index: \"horizontalOrder\",\n    value: local!averageParentHorizontalOrder\n  )\n)"
    },
    "_a-0000ece2-0128-8000-9bb8-011c48011c48_40321": {
      "name": "CMGT_UTIL_isEmptySLA",
      "type": "Expression Rule",
      "sail_code": "if(\n  and(\n    a!isNullOrEmpty(ri!slaMap.days),\n    a!isNullOrEmpty(ri!slaMap.hours),\n    a!isNullOrEmpty(ri!slaMap.minutes)\n  ),\n  true,\n  false\n)"
    },
    "_a-0000ecb5-acf8-8000-9cf6-011c48011c48_3212771": {
      "name": "CMGT_WFL_Automation_returnImageURL",
      "type": "Expression Rule",
      "sail_code": "/*By default all automation type tasks should use the OOB images. \nAny additional or task behavior type specific images should be added here*/\na!match(\n  value: ri!taskBehaviorType[recordType!CMGT_CFG_TaskBehaviorType.taskBehaviorTypeId],\n  equals: cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_AUTOMATION,\n  then: a!match(\n    value: ri!taskAction[recordType!CMGT_WFL_CFG_TaskActions.actionCode],\n    equals: cons!CMGT_CFG_TXT_ACT_WORKFLOW_ROUTING,\n    then: if(\n      ri!isSelected,\n      document(\n        cons!CMGT_WFL_DOC_IMAGE_AUTOMATION_WORKFLOW_ROUTING_SELECTED,\n        \"url\"\n      ),\n      document(\n        cons!CMGT_WFL_DOC_IMAGE_AUTOMATION_WORKFLOW_ROUTING_UNSELECTED,\n        \"url\"\n      )\n    ),\n    equals: cons!CMGT_CFG_TXT_ACT_SEND_EMAIL,\n    then: if(\n      ri!isSelected,\n      document(\n        cons!CMGT_WFL_DOC_IMAGE_AUTOMATION_SEND_EMAIL_SELECTED,\n        \"url\"\n      ),\n      document(\n        cons!CMGT_WFL_DOC_IMAGE_AUTOMATION_SEND_EMAIL_UNSELECTED,\n        \"url\"\n      )\n    ),\n    /*Add additional automation type specific images here*/\n    default: if(\n      ri!isSelected,\n      document(\n        cons!CMGT_WFL_DOC_IMAGE_AUTOMATION_WORKFLOW_ROUTING_SELECTED,\n        \"url\"\n      ),\n      document(\n        cons!CMGT_WFL_DOC_IMAGE_AUTOMATION_WORKFLOW_ROUTING_UNSELECTED,\n        \"url\"\n      )\n    )\n  ),\n  /*Add additional task behaviour type specific images here*/\n  default: null\n)"
    },
    "_a-0000eb92-18b7-8000-9c91-011c48011c48_2021935": {
      "name": "CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_ConfigureTask",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!sla: rule!CMGT_UTIL_ContructSLAMap(\n    slaJson: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla]\n  ),\n  local!isEmptySla: rule!CMGT_UTIL_isEmptySLA(slaMap: local!sla),\n  #\"SYSTEM_SYSRULES_cardLayout\"(\n    contents: {\n      if(\n        rule!CMGT_UTIL_IsBlank(ri!selectedTaskBlockTask),\n        /*Empty state section*/\n        #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n          label: \"\",\n          contents: {\n            #\"SYSTEM_SYSRULES_stampField\"(\n              labelPosition: \"COLLAPSED\",\n              icon: \"clipboard-list\",\n              backgroundColor: ri!brandingMap.LoudStampBackgroundColor,\n              contentColor: ri!brandingMap.LoudStampContentColor,\n              align: \"CENTER\",\n              marginBelow: \"MORE\"\n            ),\n            #\"SYSTEM_SYSRULES_headingField\"(\n              text: #\"urn:appian:translation-string:v1:4e053a38-c5e1-4dd7-ab68-9b1c4cd07e99\",\n              size: ri!brandingMap.H2Size,\n              headingTag: \"H1\",\n              fontWeight: \"BOLD\",\n              align: \"CENTER\",\n              marginBelow: \"STANDARD\"\n            ),\n            #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n              labelPosition: \"COLLAPSED\",\n              value: {\n                #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                  text: #\"urn:appian:translation-string:v1:ba66b186-4b04-4d14-bac8-1deff94dfec7\",\n                  color: ri!brandingMap.SecondaryTextColor,\n                  size: \"STANDARD\"\n                )\n              },\n              align: \"CENTER\",\n              marginBelow: \"MORE\"\n            )\n          },\n          marginAbove: \"MORE\",\n          marginBelow: \"MORE\"\n        ),\n        /*Configure task details section*/\n        #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n          contents: a!localVariables(\n            /*For the selected task in the middle pane*/\n            local!isAutomated: or(\n              ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorType.isAutomated]\n            ),\n            /*For the selected task in the middle pane*/\n            local!taskBehaviorTypeId: tointeger(\n              ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId]\n            ),\n            /*For the selected task in the middle pane*/\n            local!afterTaskBranchIndices: rule!CMGT_UTIL_Filter(\n              records: ri!taskBlockTaskBranchMaps,\n              fieldValuePairs: {\n                a!map(\n                  field: \"taskUUID\",\n                  value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n                ),\n                a!map(field: \"isActive\", value: { true, null })\n              },\n              filterType: \"MATCH_INDICES\"\n            ),\n            local!isStartTask: ri!selectedTaskBlockTaskUuid = ri!startTaskUUID,\n            local!previousTasks: rule!CMGT_WFL_TaskBlock_FindPreviousTreeTasks(\n              taskBlock: ri!taskBlock,\n              taskUUID: ri!selectedTaskBlockTaskUuid,\n              taskBlockTaskBranches: a!flatten(\n                ri!taskBlockTaskBranchMaps.afterTaskBlockTaskBranches\n              )\n            ),\n            /*We do not want users to be able to select tasks that have required precedents from other tasks */\n            local!invalidStartTaskUUIDs: if(\n              local!isStartTask,\n              symmetricdifference(\n                touniformstring(\n                  index(\n                    rule!CMGT_UTIL_Filter(\n                      records: a!flatten(\n                        ri!taskBlockTaskBranchMaps.afterTaskBlockTaskBranches\n                      ),\n                      fieldValuePairs: {\n                        a!map(\n                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n                          value: true\n                        ),\n                        a!map(\n                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                          value: true\n                        )\n                      }\n                    ),\n                    recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                    null\n                  )\n                ),\n                touniformstring(\n                  index(\n                    rule!CMGT_UTIL_Filter(\n                      records: a!flatten(\n                        ri!taskBlockTaskBranchMaps.afterTaskBlockTaskBranches\n                      ),\n                      fieldValuePairs: {\n                        a!map(\n                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n                          value: ri!startTaskUUID\n                        ),\n                        a!map(\n                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                          value: true\n                        )\n                      }\n                    ),\n                    recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                    null\n                  )\n                )\n              ),\n              {}\n            ),\n            local!availableTasks: rule!CMGT_UTIL_Filter(\n              records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][ri!visibleTaskBlockTaskIndices],\n              field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n              value: {\n                ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                ri!startTaskUUID,\n                local!invalidStartTaskUUIDs\n              },\n              filterType: \"REJECT\"\n            ),\n            {\n              /*Name*/\n              #\"SYSTEM_SYSRULES_textField\"(\n                label: #\"urn:appian:translation-string:v1:b6952414-89c9-41ca-b623-3904e55c50b0\",\n                value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                saveInto: {\n                  ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                  a!save(\n                    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                    #\"urn:appian:function:v1:a:update\"(\n                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                      /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                      wherecontains(\n                        ri!selectedTaskBlockTaskUuid,\n                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                      ),\n                      /*The updated task block task*/\n                      #\"urn:appian:function:v1:a:update\"(\n                        ri!selectedTaskBlockTask,\n                        recordType!CMGT_WFL_CFG_TaskBlockTask.taskName,\n                        a!defaultValue(\n                          ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                          #\"urn:appian:translation-string:v1:30830477-e9a2-4628-8fcd-40507aa24b3c\"\n                        )\n                      )\n                    )\n                  )\n                },\n                characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n                showCharacterCount: false,\n                required: if(local!isStartTask, false, true),\n                readOnly: if(local!isStartTask, true, false)\n              ),\n              /*Hide Case type, Relationship field, Description Assigned Group and SLA if the selected task is start task*/\n              if(\n                local!isStartTask,\n                {},\n                {\n                  /*Case Type*/\n                  #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                    data: #\"SYSTEM_SYSRULES_recordData\"(\n                      recordType: recordType!CMGT_CFG_CaseType,\n                      filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"AND\",\n                        filters: {\n                          #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: recordType!CMGT_CFG_CaseType.isCategory,\n                            operator: \"=\",\n                            value: false()\n                          ),\n                          #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: recordType!CMGT_CFG_CaseType.isActive,\n                            operator: \"=\",\n                            value: true()\n                          ),\n                          #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: recordType!CMGT_CFG_CaseType.parentCaseType.isActive,\n                            operator: \"=\",\n                            value: true\n                          )\n                        }\n                      )\n                    ),\n                    choiceLabels: recordType!CMGT_CFG_CaseType.fullLabel,\n                    choiceValues: recordType!CMGT_CFG_CaseType.uuid,\n                    label: #\"urn:appian:translation-string:v1:28ea68dc-457f-4863-9e77-b36020dbeb4b\",\n                    placeholder: #\"urn:appian:translation-string:v1:d91269ae-78f6-4736-b22a-ea742a59e80d\",\n                    value: if(\n                      contains(\n                        ri!caseType[recordType!CMGT_CFG_CaseType.uuid],\n                        tostring(\n                          ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid]\n                        )\n                      ),\n                      ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid],\n                      null\n                    ),\n                    saveInto: {\n                      ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid],\n                      a!save(\n                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                        #\"urn:appian:function:v1:a:update\"(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                          /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                          wherecontains(\n                            ri!selectedTaskBlockTaskUuid,\n                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                          ),\n                          /*The updated task block task*/\n                          #\"urn:appian:function:v1:a:update\"(\n                            ri!selectedTaskBlockTask,\n                            recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid,\n                            ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid]\n                          )\n                        )\n                      )\n                    },\n                    showWhen: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE,\n                    required: true(),\n                    requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                      #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:28ea68dc-457f-4863-9e77-b36020dbeb4b\"\n                    )\n                  ),\n                  /*Relationship to orginal case*/\n                  #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                    data: #\"SYSTEM_SYSRULES_recordData\"(\n                      recordType: recordType!CMGT_CFG_RelationshipMapType,\n                      filters: #\"SYSTEM_SYSRULES_queryLogicalExpression\"(\n                        operator: \"AND\",\n                        filters: {\n                          #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: recordType!CMGT_CFG_RelationshipMapType.type,\n                            operator: \"=\",\n                            value: \"CASE_TO_CASE\"\n                          ),\n                          #\"SYSTEM_SYSRULES_queryFilter\"(\n                            field: recordType!CMGT_CFG_RelationshipMapType.isActive,\n                            operator: \"=\",\n                            value: true()\n                          )\n                        }\n                      )\n                    ),\n                    choiceLabels: recordType!CMGT_CFG_RelationshipMapType.relationship.label,\n                    choiceValues: recordType!CMGT_CFG_RelationshipMapType.relationshipMapTypeId,\n                    label: #\"urn:appian:translation-string:v1:f967743d-71a3-4f23-8107-b8f1ebc38396\",\n                    placeholder: #\"urn:appian:translation-string:v1:3831f890-1fc6-41e0-8732-dedfe0749174\",\n                    value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.relationshipToOriginalCase],\n                    saveInto: {\n                      ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.relationshipToOriginalCase],\n                      a!save(\n                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                        #\"urn:appian:function:v1:a:update\"(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                          /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                          wherecontains(\n                            ri!selectedTaskBlockTaskUuid,\n                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                          ),\n                          /*The updated task block task*/\n                          #\"urn:appian:function:v1:a:update\"(\n                            ri!selectedTaskBlockTask,\n                            recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.relationshipToOriginalCase,\n                            ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.relationshipToOriginalCase]\n                          )\n                        )\n                      )\n                    },\n                    showWhen: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE\n                  ),\n                  /*Email Template*/\n                  #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                    items: {\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                          choiceLabels: ri!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n                          choiceValues: ri!emailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid],\n                          label: #\"urn:appian:translation-string:v1:9ee41a2b-9ebc-4f9a-8581-138e2e348ba3\",\n                          placeholder: #\"urn:appian:translation-string:v1:6deffc1a-e4be-4a1b-a899-02820e6ca2bd\",\n                          value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid],\n                          saveInto: {\n                            ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid],\n                            a!save(\n                              ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                              #\"urn:appian:function:v1:a:update\"(\n                                ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                                wherecontains(\n                                  ri!selectedTaskBlockTaskUuid,\n                                  ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                                ),\n                                /*The updated task block task*/\n                                #\"urn:appian:function:v1:a:update\"(\n                                  ri!selectedTaskBlockTask,\n                                  recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid,\n                                  ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid]\n                                )\n                              )\n                            )\n                          },\n                          required: true,\n                          requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                            #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:9ee41a2b-9ebc-4f9a-8581-138e2e348ba3\"\n                          )\n                        ),\n                        width: \"10X\"\n                      ),\n                      #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                        item: #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                          buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                            label: #\"urn:appian:translation-string:v1:8081c5e8-c2e7-4294-af43-28e7a98658e6\",\n                            saveInto: a!save(ri!isEmailTemplatePreview, true),\n                            disabled: rule!CMGT_UTIL_IsBlank(\n                              value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid]\n                            )\n                          ),\n                          align: \"START\",\n                          marginAbove: \"LESS\",\n                          marginBelow: \"NONE\"\n                        ),\n                        width: \"MINIMIZE\"\n                      )\n                    },\n                    alignVertical: \"BOTTOM\",\n                    showWhen: tointeger(\n                      ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId]\n                    ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_SEND_EMAIL,\n                    marginAbove: \"STANDARD\",\n                    marginBelow: \"NONE\"\n                  ),\n                  #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                    buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                      label: #\"urn:appian:translation-string:v1:e2e5d9f2-a4d2-45e2-8011-e195eaeb07f7\",\n                      style: \"LINK\",\n                      icon: \"plus-circle\",\n                      saveInto: a!save(\n                        ri!currentWorkflowStep,\n                        \"CREATE_NEW_EMAIL_TEMPLATE\"\n                      ),\n                      showWhen: tointeger(\n                        ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId]\n                      ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_SEND_EMAIL,\n\n                    ),\n                    align: \"START\",\n                    marginBelow: \"STANDARD\",\n                    marginAbove: \"LESS\"\n                  ),\n                  /*Description*/\n                  #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n                    label: #\"urn:appian:translation-string:v1:0495bd73-7477-4bca-8918-2632c601a60b\",\n                    labelSize: \"EXTRA_SMALL\",\n                    labelColor: \"STANDARD\",\n                    contents: rule!CMGT_UTIL_RichTextField(\n                      value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.description],\n                      readOnly: false(),\n                      maxSize: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE,\n                      label: #\"urn:appian:translation-string:v1:0495bd73-7477-4bca-8918-2632c601a60b\",\n                      labelPosition: \"COLLAPSED\",\n                      height: \"SHORT\",\n                      additionalSaves: {\n                        a!save(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                          #\"urn:appian:function:v1:a:update\"(\n                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                            /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                            wherecontains(\n                              ri!selectedTaskBlockTaskUuid,\n                              ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                            ),\n                            /*The updated task block task*/\n                            #\"urn:appian:function:v1:a:update\"(\n                              ri!selectedTaskBlockTask,\n                              recordType!CMGT_WFL_CFG_TaskBlockTask.description,\n                              ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.description]\n                            )\n                          )\n                        )\n                      }\n                    ),\n                    isCollapsible: true,\n                    marginAbove: \"LESS\"\n                  ),\n                  /*Assigned Group*/\n                  if(\n                    /*Task block task is an \"automated\" task*/\n                    local!isAutomated,\n                    /*Assigned Group is N/A for an automated task*/\n                    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                      label: #\"urn:appian:translation-string:v1:559ce3f6-e852-4bee-b5b2-ca315e1ebbef\",\n                      labelPosition: \"ABOVE\",\n                      value: #\"urn:appian:translation-string:v1:7ed3fef7-c6cd-4516-a123-9883ccf20ac6\",\n                      marginAbove: \"LESS\"\n                    ),\n                    /*Pick an assigned group from CMGT Business Groups*/\n                    #\"SYSTEM_SYSRULES_pickerFieldGroups\"(\n                      label: #\"urn:appian:translation-string:v1:9ef20f7e-d182-48ed-8b39-7a5219d71816\",\n                      labelPosition: \"ABOVE\",\n                      maxSelections: 1,\n                      groupFilter: cons!CMGT_GRP_BUSINESS_GROUPS,\n                      value: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.defaultGroupAssignee],\n                      saveInto: {\n                        ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.defaultGroupAssignee],\n                        a!save(\n                          ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                          #\"urn:appian:function:v1:a:update\"(\n                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                            /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                            wherecontains(\n                              ri!selectedTaskBlockTaskUuid,\n                              ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                            ),\n                            /*The updated task block task*/\n                            #\"urn:appian:function:v1:a:update\"(\n                              ri!selectedTaskBlockTask,\n                              recordType!CMGT_WFL_CFG_TaskBlockTask.defaultGroupAssignee,\n                              ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.defaultGroupAssignee]\n                            )\n                          )\n                        )\n                      }\n                    )\n                  ),\n                  /*SLA*/\n                  if(\n                    /*Task block task is an \"automated\" task*/\n                    local!isAutomated,\n                    /*SLA is N/A for an automated task*/\n                    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                      label: #\"urn:appian:translation-string:v1:9f41e6f7-45b5-4350-af35-58bf2b3af4eb\",\n                      labelPosition: \"ABOVE\",\n                      value: #\"urn:appian:translation-string:v1:7ed3fef7-c6cd-4516-a123-9883ccf20ac6\",\n                      marginAbove: \"LESS\"\n                    ),\n                    {\n                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        labelPosition: \"COLLAPSED\",\n                        value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                          text: #\"urn:appian:translation-string:v1:9f41e6f7-45b5-4350-af35-58bf2b3af4eb\",\n                          style: \"STRONG\"\n                        ),\n                        marginBelow: \"NONE\"\n                      ),\n                      #\"SYSTEM_SYSRULES_columnsLayout\"(\n                        columns: {\n                          #\"SYSTEM_SYSRULES_columnLayout\"(\n                            contents: {\n                              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                  text: #\"urn:appian:translation-string:v1:4794decc-5e8c-4cb6-bf94-0696d49b4fa5\",\n                                  color: ri!brandingMap.SecondaryTextColor\n                                ),\n                                marginBelow: \"EVEN_LESS\"\n                              ),\n                              #\"SYSTEM_SYSRULES_textField\"(\n                                label: #\"urn:appian:translation-string:v1:4794decc-5e8c-4cb6-bf94-0696d49b4fa5\",\n                                labelPosition: \"COLLAPSED\",\n                                value: index(local!sla, \"days\", \"\"),\n                                saveInto: {\n                                  /*We are storing the value of Business Days to be false if atleast one\n                                  of the value is given*/\n                                  a!save(\n                                    local!sla,\n                                    rule!CMGT_UTIL_ContructSLAMap(\n                                      hours: index(local!sla, \"hours\", \"\"),\n                                      minutes: index(local!sla, \"minutes\", \"\"),\n                                      days: save!value,\n                                      isBusinessDays: index(local!sla, \"isBusinessDays\", \"\")\n                                    )\n                                  ),\n                                  if(\n                                    rule!CMGT_UTIL_isEmptySLA(local!sla),\n                                    a!save(local!sla, null),\n                                    {}\n                                  ),\n                                  a!save(\n                                    ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla],\n                                    if(\n                                      rule!CMGT_UTIL_IsNotBlank(local!sla),\n                                      #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                                      null\n                                    )\n                                  ),\n                                  a!save(\n                                    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                    #\"urn:appian:function:v1:a:update\"(\n                                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                                      wherecontains(\n                                        ri!selectedTaskBlockTaskUuid,\n                                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                                      ),\n                                      /*The updated task block task*/\n                                      #\"urn:appian:function:v1:a:update\"(\n                                        ri!selectedTaskBlockTask,\n                                        recordType!CMGT_WFL_CFG_TaskBlockTask.sla,\n                                        ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla]\n                                      )\n                                    )\n                                  )\n                                },\n                                validations: rule!CMGT_UTIL_ValidateSLA(value: index(local!sla, \"days\", \"\"))\n                              )\n                            }\n                          ),\n                          #\"SYSTEM_SYSRULES_columnLayout\"(\n                            contents: {\n                              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                  text: #\"urn:appian:translation-string:v1:befd59bf-3568-4c2b-9afd-71b7d6f7060a\",\n                                  color: ri!brandingMap.SecondaryTextColor\n                                ),\n                                marginBelow: \"EVEN_LESS\"\n                              ),\n                              #\"SYSTEM_SYSRULES_textField\"(\n                                label: #\"urn:appian:translation-string:v1:befd59bf-3568-4c2b-9afd-71b7d6f7060a\",\n                                labelPosition: \"COLLAPSED\",\n                                value: index(local!sla, \"hours\", \"\"),\n                                saveInto: {\n                                  /*We are storing the value of Business Days to be false if atleast one\n                                  of the value is given*/\n                                  a!save(\n                                    local!sla,\n                                    rule!CMGT_UTIL_ContructSLAMap(\n                                      hours: save!value,\n                                      minutes: index(local!sla, \"minutes\", \"\"),\n                                      days: index(local!sla, \"days\", \"\"),\n                                      isBusinessDays: index(local!sla, \"isBusinessDays\", \"\")\n                                    )\n                                  ),\n                                  if(\n                                    rule!CMGT_UTIL_isEmptySLA(local!sla),\n                                    a!save(local!sla, null),\n                                    {}\n                                  ),\n                                  a!save(\n                                    ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla],\n                                    if(\n                                      rule!CMGT_UTIL_IsNotBlank(local!sla),\n                                      #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                                      null\n                                    )\n                                  ),\n                                  a!save(\n                                    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                    #\"urn:appian:function:v1:a:update\"(\n                                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                                      wherecontains(\n                                        ri!selectedTaskBlockTaskUuid,\n                                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                                      ),\n                                      /*The updated task block task*/\n                                      #\"urn:appian:function:v1:a:update\"(\n                                        ri!selectedTaskBlockTask,\n                                        recordType!CMGT_WFL_CFG_TaskBlockTask.sla,\n                                        ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla]\n                                      )\n                                    )\n                                  )\n                                },\n                                validations: rule!CMGT_UTIL_ValidateSLA(value: index(local!sla, \"hours\", \"\"))\n                              )\n                            }\n                          ),\n                          #\"SYSTEM_SYSRULES_columnLayout\"(\n                            contents: {\n                              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                  text: #\"urn:appian:translation-string:v1:8011a7b9-c1f3-45f4-9f16-99471296e83d\",\n                                  color: ri!brandingMap.SecondaryTextColor\n                                ),\n                                marginBelow: \"EVEN_LESS\"\n                              ),\n                              #\"SYSTEM_SYSRULES_textField\"(\n                                label: #\"urn:appian:translation-string:v1:8011a7b9-c1f3-45f4-9f16-99471296e83d\",\n                                labelPosition: \"COLLAPSED\",\n                                value: index(local!sla, \"minutes\", \"\"),\n                                saveInto: {\n                                  a!save(\n                                    local!sla,\n                                    rule!CMGT_UTIL_ContructSLAMap(\n                                      hours: index(local!sla, \"hours\", \"\"),\n                                      minutes: save!value,\n                                      days: index(local!sla, \"days\", \"\"),\n                                      isBusinessDays: index(local!sla, \"isBusinessDays\", \"\")\n                                    )\n                                  ),\n                                  if(\n                                    rule!CMGT_UTIL_isEmptySLA(local!sla),\n                                    a!save(local!sla, null),\n                                    {}\n                                  ),\n                                  a!save(\n                                    ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla],\n                                    if(\n                                      rule!CMGT_UTIL_IsNotBlank(local!sla),\n                                      #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                                      null\n                                    )\n                                  ),\n                                  a!save(\n                                    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                    #\"urn:appian:function:v1:a:update\"(\n                                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                                      wherecontains(\n                                        ri!selectedTaskBlockTaskUuid,\n                                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                                      ),\n                                      /*The updated task block task*/\n                                      #\"urn:appian:function:v1:a:update\"(\n                                        ri!selectedTaskBlockTask,\n                                        recordType!CMGT_WFL_CFG_TaskBlockTask.sla,\n                                        ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla]\n                                      )\n                                    )\n                                  )\n                                },\n                                validations: rule!CMGT_UTIL_ValidateSLA(value: index(local!sla, \"minutes\", \"\"))\n                              )\n                            }\n                          )\n                        }\n                      ),\n                      #\"SYSTEM_SYSRULES_checkboxField_v1\"(\n                        choiceLabels: #\"urn:appian:translation-string:v1:759245e6-9b85-4710-831f-f11ad593d08a\",\n                        choiceValues: true(),\n                        labelPosition: \"COLLAPSED\",\n                        value: if(\n                          a!isNotNullOrEmpty(index(local!sla, \"isBusinessDays\", null)),\n                          if(\n                            index(local!sla, \"isBusinessDays\", null),\n                            true(),\n                            null\n                          ),\n                          null\n                        ),\n                        saveInto: {\n                          a!save(\n                            local!sla,\n                            rule!CMGT_UTIL_ContructSLAMap(\n                              hours: index(local!sla, \"hours\", \"\"),\n                              minutes: index(local!sla, \"minutes\", \"\"),\n                              days: index(local!sla, \"days\", \"\"),\n                              isBusinessDays: save!value\n                            )\n                          ),\n                          a!save(\n                            ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla],\n                            if(\n                              rule!CMGT_UTIL_IsNotBlank(local!sla),\n                              #\"SYSTEM_SYSRULES_toJson_v1\"(local!sla),\n                              null\n                            )\n                          ),\n                          a!save(\n                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                            #\"urn:appian:function:v1:a:update\"(\n                              ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                              /*Index of the task block task that we want to update in the taskBlockTasks array*/\n                              wherecontains(\n                                ri!selectedTaskBlockTaskUuid,\n                                ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                              ),\n                              /*The updated task block task*/\n                              #\"urn:appian:function:v1:a:update\"(\n                                ri!selectedTaskBlockTask,\n                                recordType!CMGT_WFL_CFG_TaskBlockTask.sla,\n                                ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sla]\n                              )\n                            )\n                          )\n                        },\n                        disabled: local!isEmptySla\n                      )\n                    }\n                  )\n                }\n              ),\n              /*Workflow Settings section*/\n              #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n                label: #\"urn:appian:translation-string:v1:96d1fd87-4a2e-4c28-a946-311726d360a4\",\n                labelSize: \"EXTRA_SMALL\",\n                labelColor: \"STANDARD\",\n                contents: {\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    labelPosition: \"COLLAPSED\",\n                    value: {\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: #\"urn:appian:translation-string:v1:1d75c2e0-04ea-4b38-97fd-62fb1a14f0f4\",\n                        color: ri!brandingMap.SecondaryTextColor\n                      )\n                    },\n                    showWhen: local!taskBehaviorTypeId = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION\n                  ),\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    labelPosition: \"COLLAPSED\",\n                    value: {\n                      #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                        text: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.questionLabel]\n                      )\n                    },\n                    showWhen: local!taskBehaviorTypeId = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                    marginBelow: \"MORE\"\n                  ),\n                  /*List of Dependents*/\n                  #\"SYSTEM_SYSRULES_forEach\"(\n                    items: ri!taskBlockTaskBranchMaps[local!afterTaskBranchIndices],\n                    expression: a!localVariables(\n                      /*For the selected task in the middle pane*/\n                      /*Each respone in decision task can be connected to multiple tasks. So we will be rejecting only\n                                the dependent tasks for current response option of the selected task.\n                                For non - Decision task we need to reject all active task dependents of current task*/\n                      /*For the selected task in the middle pane*/\n                      local!afterTasks: if(\n                        tointeger(local!taskBehaviorTypeId) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION,\n                        rule!CMGT_UTIL_Filter(\n                          records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][ri!visibleTaskBlockTaskIndices],\n                          field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                          value: rule!CMGT_UTIL_Filter(\n                            records: a!flatten(\n                              ri!taskBlockTaskBranchMaps[local!afterTaskBranchIndices].afterTaskBlockTaskBranches\n                            ),\n                            field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskResponseOptionUuid,\n                            value: fv!item.taskResponseOptionUUID\n                          )[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n                        ),\n                        rule!CMGT_UTIL_Filter(\n                          records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][ri!visibleTaskBlockTaskIndices],\n                          field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                          value: rule!CMGT_UTIL_RejectBlank(\n                            a!flatten(\n                              ri!taskBlockTaskBranchMaps[local!afterTaskBranchIndices].afterTaskBlockTaskBranches\n                            )\n                          )[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n                        )\n                      ),\n                      /*For the selected task in the middle pane*/\n                      local!selectableAfterTasks: rule!CMGT_UTIL_Filter(\n                        records: local!availableTasks,\n                        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                        value: {\n                          local!afterTasks[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n                        },\n                        filterType: \"REJECT\"\n                      ),\n                      local!selectableAfterTasks_thisDropdown: rule!CMGT_UTIL_sortList(\n                        records: rule!CMGT_UTIL_RejectBlank(\n                          a!flatten(\n                            {\n                              rule!CMGT_UTIL_Filter(\n                                records: local!afterTasks,\n                                field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                                value: fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n                              ),\n                              local!selectableAfterTasks\n                            }\n                          )\n                        ),\n                        field: recordType!CMGT_WFL_CFG_TaskBlockTask.sortOrder,\n                        ascending: true\n                      ),\n                      local!selectedAfterTasks_thisTask: fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid],\n                      local!selectedAfterTasks_thisTaskRecord: rule!CMGT_UTIL_Filter(\n                        records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                        value: local!selectedAfterTasks_thisTask\n                      ),\n                      local!removedAfterTasks_thisTask: null,\n                      local!removedAfterTasks_thisTaskRecords,\n                      local!newAfterTasks_thisTask: null,\n                      local!newAfterTasks_thisTaskRecords,\n                      local!readdedAfterTaskBranches_thisTask,\n                      /*The required is not valid if the task is connected to start task or there is a\n                    loop backs in the workflow\n                    */\n                      local!isRequirednessValid: if(\n                        or(\n                          local!selectedAfterTasks_thisTaskRecord[recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault],\n                          rule!CMGT_UTIL_IsNotBlank(\n                            rule!CMGT_UTIL_Filter(\n                              records: local!previousTasks,\n                              field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                              value: local!selectedAfterTasks_thisTask\n                            )\n                          )\n                        ),\n                        false,\n                        true\n                      ),\n                      local!thisMap: fv!item,\n                      /*local!removedAfterTaskRecord,*/\n                      /*Dependents*/\n                      {\n                        /*Dropdown \"labels\"*/\n                        #\"SYSTEM_SYSRULES_columnsLayout\"(\n                          columns: {\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: {\n                                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                  labelPosition: \"COLLAPSED\",\n                                  value: {\n                                    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                      text: #\"urn:appian:translation-string:v1:366b4e49-f096-489e-8cf8-16ac4860872d\",\n                                      color: ri!brandingMap.SecondaryTextColor\n                                    )\n                                  }\n                                )\n                              },\n                              width: \"10X\",\n                              showWhen: local!taskBehaviorTypeId = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION\n                            ),\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: {\n                                #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                  labelPosition: \"COLLAPSED\",\n                                  value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                                    text: #\"urn:appian:translation-string:v1:b4ee65f7-13f4-417f-bd89-6fe9fd26151a\",\n                                    color: ri!brandingMap.SecondaryTextColor\n                                  )\n                                )\n                              },\n                              width: \"10X\"\n                            ),\n                            #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"1X\")\n                          },\n                          alignVertical: \"MIDDLE\",\n                          marginAbove: \"NONE\",\n                          marginBelow: \"EVEN_LESS\",\n                          spacing: \"DENSE\",\n                          stackWhen: \"NEVER\"\n                        ),\n                        #\"SYSTEM_SYSRULES_columnsLayout\"(\n                          columns: {\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: #\"SYSTEM_SYSRULES_dropdownField_v1\"(\n                                choiceLabels: ri!taskResponseOptions[recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.label],\n                                choiceValues: ri!taskResponseOptions[recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid],\n                                label: #\"urn:appian:translation-string:v1:366b4e49-f096-489e-8cf8-16ac4860872d\",\n                                labelPosition: \"COLLAPSED\",\n                                placeholder: #\"urn:appian:translation-string:v1:91700f11-b292-41fb-add4-c0a73f8eff53\",\n                                value: fv!item.taskResponseOptionUUID,\n                                saveInto: {\n                                  fv!item.taskResponseOptionUUID,\n                                  a!save(local!isRequirednessValid, true),\n                                  a!save(\n                                    fv!item.afterTaskBlockTaskBranches,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: a!flatten(\n                                        {\n                                          /* Set isActive=false for the removed afterTasks */\n                                          #\"SYSTEM_SYSRULES_forEach\"(\n                                            items: fv!item.afterTaskBlockTaskBranches,\n                                            expression: if(\n                                              a!isNullOrEmpty(\n                                                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskBranchId]\n                                              ),\n                                              #\"urn:appian:function:v1:a:update\"(\n                                                fv!item,\n                                                {\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive\n                                                },\n                                                { null, true, null }\n                                              ),\n                                              #\"urn:appian:function:v1:a:update\"(\n                                                fv!item,\n                                                recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                                false\n                                              )\n                                            )\n                                          )\n                                        }\n                                      ),\n                                      fieldValuePairs: {\n                                        a!map(\n                                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                          value: false()\n                                        ),\n                                        a!map(\n                                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskBranchId,\n                                          value: null\n                                        )\n                                      },\n                                      filterType: \"REJECT\"\n                                    )\n                                  ),\n                                  /*Populating the value for workflow visualization edge labels*/\n                                  a!save(\n                                    fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskResponseOption],\n                                    rule!CMGT_UTIL_Filter(\n                                      records: ri!taskResponseOptions,\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid,\n                                      value: save!value\n                                    )\n                                  )\n                                },\n                                accessibilityText: #\"urn:appian:translation-string:v1:3597d5bb-0e51-4495-99b5-761793e3ad65\"(\n                                  #\"urn:appian:translation-variable:v1:0999d4d2-c1db-4fd3-a6d1-35a4fa1a0019\": fv!index\n                                )\n                              ),\n                              width: \"10X\",\n                              showWhen: local!taskBehaviorTypeId = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_DECISION\n                            ),\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: #\"SYSTEM_SYSRULES_multipleDropdownField_v1\"(\n                                choiceLabels: local!selectableAfterTasks_thisDropdown[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName],\n                                choiceValues: local!selectableAfterTasks_thisDropdown[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                                label: #\"urn:appian:translation-string:v1:b4ee65f7-13f4-417f-bd89-6fe9fd26151a\",\n                                labelPosition: \"COLLAPSED\",\n                                placeholder: #\"urn:appian:translation-string:v1:36adaa76-dce1-43bf-9939-c889275129bd\",\n                                value: rule!CMGT_UTIL_RejectBlank(\n                                  index(\n                                    rule!CMGT_UTIL_Filter(\n                                      records: fv!item.afterTaskBlockTaskBranches,\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                      value: { true(), null }\n                                    ),\n                                    recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                    {}\n                                  )\n                                ),\n                                saveInto: {\n                                  a!save(\n                                    local!selectedAfterTasks_thisTask,\n                                    save!value\n                                  ),\n                                  a!save(\n                                    local!selectedAfterTasks_thisTaskRecord,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                                      value: local!selectedAfterTasks_thisTask\n                                    )\n                                  ),\n                                  a!save(\n                                    local!removedAfterTasks_thisTask,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: fv!item.afterTaskBlockTaskBranches,\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                      value: { save!value, null },\n                                      filterType: \"REJECT\"\n                                    )[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n                                  ),\n                                  a!save(\n                                    local!removedAfterTasks_thisTaskRecords,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                                      value: local!removedAfterTasks_thisTask\n                                    )\n                                  ),\n                                  a!save(\n                                    local!newAfterTasks_thisTask,\n                                    difference(\n                                      save!value,\n                                      touniformstring(\n                                        fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n                                      )\n                                    )\n                                  ),\n                                  a!save(\n                                    local!newAfterTasks_thisTaskRecords,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                                      value: local!newAfterTasks_thisTask\n                                    )\n                                  ),\n                                  a!save(\n                                    local!readdedAfterTaskBranches_thisTask,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: fv!item.afterTaskBlockTaskBranches,\n                                      fieldValuePairs: {\n                                        a!map(\n                                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                          value: false\n                                        ),\n                                        a!map(\n                                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                          value: save!value\n                                        )\n                                      }\n                                    )\n                                  ),\n                                  a!save(\n                                    local!isRequirednessValid,\n                                    if(\n                                      or(\n                                        local!selectedAfterTasks_thisTaskRecord[recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault],\n                                        rule!CMGT_UTIL_IsNotBlank(\n                                          rule!CMGT_UTIL_Filter(\n                                            records: local!previousTasks,\n                                            field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                                            value: local!selectedAfterTasks_thisTask\n                                          )\n                                        )\n                                      ),\n                                      false,\n                                      true\n                                    )\n                                  ),\n                                  a!save(\n                                    fv!item.afterTaskBlockTaskBranches,\n                                    rule!CMGT_UTIL_Filter(\n                                      records: a!flatten(\n                                        {\n                                          /* Set isActive=false for the removed afterTasks */\n                                          #\"SYSTEM_SYSRULES_forEach\"(\n                                            items: rule!CMGT_UTIL_Filter(\n                                              records: fv!item.afterTaskBlockTaskBranches,\n                                              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                              value: local!removedAfterTasks_thisTask\n                                            ),\n                                            expression: if(\n                                              a!isNullOrEmpty(\n                                                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskBranchId]\n                                              ),\n                                              #\"urn:appian:function:v1:a:update\"(\n                                                fv!item,\n                                                {\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive\n                                                },\n                                                { null, true, null }\n                                              ),\n                                              #\"urn:appian:function:v1:a:update\"(\n                                                fv!item,\n                                                recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                                false\n                                              )\n                                            )\n                                          ),\n                                          /* Construct new branches for new tasks */\n                                          #\"SYSTEM_SYSRULES_forEach\"(\n                                            items: local!newAfterTasks_thisTask,\n                                            expression: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch(\n                                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid: local!thisMap.taskUUID,\n                                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskResponseOptionUuid: local!thisMap.taskResponseOptionUUID,\n                                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid: fv!item,\n                                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired: local!isRequirednessValid,\n                                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive: true,\n                                              /*local!thisMap.isRequired,*/\n                                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskResponseOption: rule!CMGT_UTIL_Filter(\n                                                records: ri!taskResponseOptions,\n                                                field: recordType!CMGT_WFL_CFG_TaskBlockTaskResponseOption.taskBlockTaskResponseUuid,\n                                                value: local!thisMap.taskResponseOptionUUID\n                                              )\n                                            )\n                                          ),\n                                          /* Retain exisitng afterTaskBranches */\n                                          rule!CMGT_UTIL_Filter(\n                                            records: fv!item.afterTaskBlockTaskBranches,\n                                            field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                            /* Not Retaining the re-added task as it is added separately below */\n                                            value: difference(\n                                              local!selectedAfterTasks_thisTask,\n                                              touniformstring(\n                                                index(\n                                                  local!readdedAfterTaskBranches_thisTask,\n                                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                                                  null\n                                                )\n                                              )\n                                            )\n                                          ),\n                                          /* Re Added task branches */\n                                          #\"urn:appian:function:v1:a:update\"(\n                                            local!readdedAfterTaskBranches_thisTask,\n                                            recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                            true\n                                          )\n                                        }\n                                      ),\n                                      fieldValuePairs: {\n                                        a!map(\n                                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                          value: false()\n                                        ),\n                                        a!map(\n                                          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskBranchId,\n                                          value: null\n                                        )\n                                      },\n                                      filterType: \"REJECT\"\n                                    )\n                                  ),\n                                  a!save(\n                                    {\n                                      fv!item.isRequired,\n                                      fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired]\n                                    },\n                                    local!isRequirednessValid\n                                  ),\n                                  /* Reset startByDefault */\n                                  /*Set startByDefault = true when task is attached to start task else the value should be false*/\n                                  {\n                                    a!save(\n                                      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      if(\n                                        local!isStartTask,\n                                        #\"urn:appian:function:v1:a:update\"(\n                                          data: #\"urn:appian:function:v1:a:update\"(\n                                            data: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                            index: wherecontains(\n                                              touniformstring(local!removedAfterTasks_thisTask),\n                                              ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                                            ),\n                                            value: #\"urn:appian:function:v1:a:update\"(\n                                              local!removedAfterTasks_thisTaskRecords,\n                                              recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault,\n                                              false\n                                            )\n                                          ),\n                                          index: wherecontains(\n                                            touniformstring(local!newAfterTasks_thisTask),\n                                            ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskUuid]\n                                          ),\n                                          value: #\"urn:appian:function:v1:a:update\"(\n                                            local!newAfterTasks_thisTaskRecords,\n                                            recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault,\n                                            true\n                                          )\n                                        ),\n                                        ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks]\n                                      )\n                                    ),\n                                    a!save(\n                                      local!removedAfterTasks_thisTaskRecords,\n                                      null\n                                    )\n                                  }\n                                },\n                                validations: a!match(\n                                  value: index(\n                                    rule!CMGT_UTIL_Filter(\n                                      records: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                                      value: intersection(\n                                        ri!uniqueAfterTaskUuidsInViolation,\n                                        fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n                                      )\n                                    ),\n                                    recordType!CMGT_WFL_CFG_TaskBlockTask.taskName,\n                                    {}\n                                  ),\n                                  whenTrue: rule!CMGT_UTIL_IsBlank(fv!value),\n                                  then: {},\n                                  whenTrue: length(fv!value) > 1,\n                                  then: #\"urn:appian:translation-string:v1:8ad55d3b-6a21-4a0b-8d44-75cac7217ced\"(\n                                    #\"urn:appian:translation-variable:v1:ed415ae5-b6f9-4eac-a9b2-5b0741279d6a\": joinarray(fv!value, \", \")\n                                  ),\n                                  default: #\"urn:appian:translation-string:v1:705790e9-b65d-43e4-81a4-f7f531ab91b4\"(\n                                    #\"urn:appian:translation-variable:v1:2d1bd79c-13df-483b-bc6b-5389b6e25687\": fv!value\n                                  )\n                                ),\n                                accessibilityText: #\"urn:appian:translation-string:v1:3597d5bb-0e51-4495-99b5-761793e3ad65\"(\n                                  #\"urn:appian:translation-variable:v1:0999d4d2-c1db-4fd3-a6d1-35a4fa1a0019\": fv!index\n                                )\n                              ),\n                              width: \"10X\"\n                            ),\n                            #\"SYSTEM_SYSRULES_columnLayout\"(\n                              contents: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                labelPosition: \"COLLAPSED\",\n                                value: #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                  icon: \"times\",\n                                  altText: #\"urn:appian:translation-string:v1:46d861d2-0082-4686-8b40-b7f6e8e0bed1\"(\n                                    #\"urn:appian:translation-variable:v1:ae4bfca0-5d96-495f-8965-8dc9059a97bc\": fv!index\n                                  ),\n                                  link: #\"SYSTEM_SYSRULES_dynamicLink\"(\n                                    value: false(),\n                                    saveInto: {\n                                      fv!item.isActive,\n                                      fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive]\n                                    }\n                                  ),\n                                  linkStyle: \"STANDALONE\",\n                                  color: ri!brandingMap.NegativeAccentColor,\n                                  size: \"MEDIUM\"\n                                ),\n                                align: \"CENTER\"\n                              ),\n                              width: \"1X\",\n                              showWhen: local!isStartTask = false()\n                            )\n                          },\n                          alignVertical: \"MIDDLE\",\n                          marginBelow: \"LESS\",\n                          spacing: \"DENSE\",\n                          stackWhen: \"NEVER\"\n                        ),\n                        /*\"Required for next task\" selection*/\n                        #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n                          items: {\n                            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                              item: #\"SYSTEM_SYSRULES_checkboxField_v1\"(\n                                choiceLabels: {\n                                  #\"urn:appian:translation-string:v1:00f79a9b-f640-4d17-947d-91cd0c30b346\"\n                                },\n                                choiceValues: { true },\n                                label: #\"urn:appian:translation-string:v1:00f79a9b-f640-4d17-947d-91cd0c30b346\",\n                                labelPosition: \"COLLAPSED\",\n                                value: if(fv!item.isRequired, true, null),\n                                saveInto: {\n                                  a!save(\n                                    {\n                                      fv!item.isRequired,\n                                      fv!item.afterTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired]\n                                    },\n                                    not(\n                                      a!defaultValue(value: fv!item.isRequired, default: false)\n                                    )\n                                  )\n                                },\n                                disabled: not(local!isRequirednessValid),\n                                accessibilityText: #\"urn:appian:translation-string:v1:3597d5bb-0e51-4495-99b5-761793e3ad65\"(\n                                  #\"urn:appian:translation-variable:v1:0999d4d2-c1db-4fd3-a6d1-35a4fa1a0019\": fv!index\n                                )\n                              ),\n                              width: \"MINIMIZE\"\n                            ),\n                            #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                              item: #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                                labelPosition: \"COLLAPSED\",\n                                value: {\n                                  #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                    icon: \"question-circle\",\n                                    caption: if(\n                                      local!isRequirednessValid,\n                                      #\"urn:appian:translation-string:v1:ce76a951-9b08-476e-9b54-f6da21399354\",\n                                      #\"urn:appian:translation-string:v1:7afd3cce-3e29-42a0-9b34-caa91ad8230f\"\n                                    ),\n                                    color: ri!brandingMap.AccentColor\n                                  )\n                                }\n                              ),\n                              width: \"2X\"\n                            )\n                          },\n                          alignVertical: \"MIDDLE\",\n                          showWhen: not(local!isStartTask),\n                          spacing: \"DENSE\",\n                          marginBelow: \"STANDARD\"\n                        )\n                      }\n                    )\n                  ),\n                  a!localVariables(\n                    local!availableTasksExist: if(\n                      a!isNotNullOrEmpty(local!availableTasks),\n                      if(\n                        local!isStartTask,\n                        length(\n                          rule!CMGT_UTIL_Filter(\n                            filterType: \"REJECT\",\n                            records: local!availableTasks,\n                            field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n                            value: index(\n                              rule!CMGT_UTIL_Filter(\n                                records: a!flatten(\n                                  ri!taskBlockTaskBranchMaps.afterTaskBlockTaskBranches\n                                ),\n                                fieldValuePairs: {\n                                  a!map(\n                                    field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired,\n                                    value: true\n                                  ),\n                                  a!map(\n                                    field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n                                    value: true\n                                  )\n                                }\n                              ),\n                              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n                              null\n                            )\n                          )\n                        ) > 0,\n                        true\n                      ),\n                      false\n                    ),\n                    {\n                      #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                        value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                          text: if(\n                            local!availableTasksExist,\n                            #\"urn:appian:translation-string:v1:c03b57d0-b6a1-4ede-8039-d09e78574067\",\n                            #\"urn:appian:translation-string:v1:4401a43e-cce1-4a87-844e-ba908e38a312\"\n                          ),\n                          color: ri!brandingMap.StandardTextColor,\n                          style: \"EMPHASIS\"\n                        ),\n                        showWhen: or(\n                          not(local!availableTasksExist),\n                          rule!CMGT_UTIL_IsBlank(\n                            ri!taskBlockTaskBranchMaps[local!afterTaskBranchIndices].afterTaskBlockTaskBranches\n                          )\n                        )\n                      ),\n                      /*Add Dependent button*/\n                      #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                        buttons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                          label: #\"urn:appian:translation-string:v1:50f0154e-4d77-42df-bcc1-51c02a40a7d9\",\n                          icon: \"plus-circle\",\n                          saveInto: a!save(\n                            ri!taskBlockTaskBranchMaps,\n                            append(\n                              ri!taskBlockTaskBranchMaps,\n                              a!map(\n                                taskUUID: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                                taskResponseOptionId: fn!tointeger(null),\n                                isRequired: true,\n                                isActive: true,\n                                afterTaskBlockTaskBranches: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch(\n                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid: ri!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired: true,\n                                  /*Note, defaulting this to NULL until an actual selection is made so that the network renderer doesn't think there's a task*/\n                                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive: null\n                                )\n                              )\n                            )\n                          ),\n                          style: \"LINK\",\n                          showWhen: local!availableTasksExist,\n                          accessibilityText: #\"urn:appian:translation-string:v1:9e159048-eba6-486b-9a68-0a8e9f01b555\"\n                        ),\n                        showWhen: local!isStartTask = false(),\n                        align: \"START\",\n                        marginBelow: \"NONE\"\n                      )\n                    }\n                  )\n                },\n                marginAbove: \"LESS\",\n                marginBelow: \"EVEN_LESS\"\n              )\n            }\n          ),\n          marginAbove: \"LESS\"\n        )\n      )\n    },\n    shape: \"SEMI_ROUNDED\",\n    padding: \"LESS\",\n    marginAbove: \"STANDARD\",\n    marginBelow: \"NONE\",\n    showBorder: false\n  )\n)"
    },
    "_a-0000e9f4-1323-8000-9bd3-011c48011c48_267840": {
      "name": "CMGT_UTIL_LoadBrandingMap",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!branding: getbrandingconfig(\n    cons!CMGT_DOC_DEFAULT_BRANDING_CONFIG,\n    true\n  ),\n  local!output: reduce(\n    #\"urn:appian:function:v1:a:update\"(_, _, _),\n    a!map(),\n    merge(\n      {\n        local!branding.defaultBranding.key,\n        local!branding.customBranding.key\n      },\n      {\n        local!branding.defaultBranding.value,\n        local!branding.customBranding.value\n      }\n    )\n  ),\n  local!output\n)"
    },
    "_a-0000eafa-b342-8000-9c45-011c48011c48_1299921": {
      "name": "CMGT_UTIL_IsMobileScreenSize",
      "type": "Expression Rule",
      "sail_code": "=#\"SYSTEM_SYSRULES_isPageWidth\"({\"PHONE\", \"TABLET_PORTRAIT\"})"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3602456": {
      "name": "CMGT_WFL_QR_GetEmailTemplates",
      "type": "Expression Rule",
      "sail_code": "rule!CMGT_UTIL_QueryRecord(\n  recordType: recordType!CMGT_WFL_CFG_EmailTemplate,\n  returnType: ri!returnType,\n  triggerRefresh: ri!triggerRefresh,\n  executeWhen: ri!executeWhen,\n  filters: {\n    ri!additionalFilters,\n    #\"SYSTEM_SYSRULES_queryFilter\"(\n      field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId,\n      operator: \"in\",\n      value: ri!emailTemplateId\n    )\n  },\n  fields: {\n    ri!fields,\n    recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailCaseTypeWorkflowTask,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailReferenceTasks,\n    recordType!CMGT_WFL_CFG_EmailTemplate.sendEmailTaskBlockTasks\n  },\n  relatedRecordData: ri!relatedRecordData,\n  pagingInfo: ri!pagingInfo,\n  sort: ri!sort,\n  logicalExpressions: ri!additionalLogicalExpression,\n  groupByFields: ri!groupByFields,\n  searchTerm: ri!searchTerm,\n  searchFields: ri!searchFields\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180560": {
      "name": "CMGT_UTIL_returnTypeNumber",
      "type": "Expression Rule",
      "sail_code": "cast(\n   'type!{http://www.appian.com/ae/types/2009}Integer',\n  if(\n    isnull(ri!type),\n    typeof(ri!typeOf),\n    typeof(cast(ri!type, null))\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612864": {
      "name": "CMGT_WFL_EmailTemplate_Details",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n  contents: {\n    #\"SYSTEM_SYSRULES_columnsLayout\"(\n      columns: {\n        #\"SYSTEM_SYSRULES_columnLayout\"(\n          contents: #\"SYSTEM_SYSRULES_textField\"(\n            label: #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\",\n            labelPosition: \"ABOVE\",\n            value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n            saveInto: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n            characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n            required: true,\n            requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n              #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:fe962919-107c-4fbe-b95f-53eef9152c9f\"\n            )\n          ),\n\n        ),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}, width: \"NARROW\"),\n        #\"SYSTEM_SYSRULES_columnLayout\"(contents: {}),\n\n      }\n    ),\n    #\"SYSTEM_SYSRULES_textField\"(\n      label: #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\",\n      labelPosition: \"ABOVE\",\n      value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      saveInto: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n      characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n      required: true,\n      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\"\n      )\n    ),\n    rule!CMGT_UTIL_RichTextField(\n      label: #\"urn:appian:translation-string:v1:8af4d705-f521-4a97-a2b3-0eb63aff4217\",\n      labelPosition: \"ABOVE\",\n      value: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.body],\n      maxSize: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE,\n      required: true,\n      requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n        #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:8af4d705-f521-4a97-a2b3-0eb63aff4217\"\n      )\n    ),\n    #\"SYSTEM_SYSRULES_fileUploadField_v1\"(\n      label: #\"urn:appian:translation-string:v1:83b3fbbe-7b13-4700-97e6-d9c1c99d26a9\",\n      labelPosition: \"ABOVE\",\n      target: cons!CMGT_WFL_FLD_EMAIL_TEMPLATE_ATTACHMENTS,\n      value: index(\n        rule!CMGT_UTIL_Filter(\n          records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n          value: true\n        ),\n        recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n        null()\n      ),\n      saveInto: {\n        a!save(\n          ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n          a!localVariables(\n            local!allExistingEmailAttachments: rule!CMGT_UTIL_Filter(\n              records: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments],\n              field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateAttachmentId,\n              value: null,\n              filterType: \"REJECT\"\n            ),\n            local!newEmailAttachments: #\"SYSTEM_SYSRULES_forEach\"(\n              items: difference(\n                tointeger(save!value),\n                tointeger(\n                  local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n                )\n              ),\n              expression: a!localVariables(\n                local!documentContent: property(\n                  property(\n                    #\"SYSTEM_SYSRULES_fileUploadField_v1\"(value:fv!item),\n                    \"contents\",\n                    null\n                  ),\n                  \"value\",\n                  null\n                ),\n                local!documentSize: property(\n                  local!documentContent,\n                  \"fileSizeDisplay\",\n                  null\n                ),\n                local!documentExtension: property(local!documentContent, \"extension\", null),\n                local!documentName: property(local!documentContent, \"name\", null),\n                recordType!CMGT_WFL_CFG_EmailTemplateAttachments(\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.emailTemplateId: ri!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId],\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId: fv!item,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.fullName: local!documentName,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.sizeDisplay: local!documentSize,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extension: local!documentExtension,\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.extensionIcon: rule!CMGT_Document_IconLogic(local!documentExtension[1]),\n                  recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive: true\n                )\n              )\n            ),\n            local!deletedAttachmentsDocIds: difference(\n              tointeger(\n                local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              ),\n              tointeger(save!value)\n            ),\n            local!deletedEmailAttachments: if(\n              rule!CMGT_UTIL_IsNotBlank(local!deletedAttachmentsDocIds),\n              #\"urn:appian:function:v1:a:update\"(\n                rule!CMGT_UTIL_Filter(\n                  records: local!allExistingEmailAttachments,\n                  field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n                  value: local!deletedAttachmentsDocIds\n                ),\n                recordType!CMGT_WFL_CFG_EmailTemplateAttachments.isActive,\n                false()\n              ),\n              null()\n            ),\n            local!unmodifiedAttachmentDocsIds: difference(\n              tointeger(\n                local!allExistingEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              ),\n              tointeger(\n                local!deletedEmailAttachments[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId]\n              )\n            ),\n            local!unmodifiedEmailAttachments: rule!CMGT_UTIL_Filter(\n              records: local!allExistingEmailAttachments,\n              field: recordType!CMGT_WFL_CFG_EmailTemplateAttachments.appianDocumentId,\n              value: local!unmodifiedAttachmentDocsIds\n            ),\n            /*Flatten back the maps we modified*/\n            rule!CMGT_UTIL_RejectBlank(\n              a!flatten(\n                {\n                  local!deletedEmailAttachments,\n                  local!unmodifiedEmailAttachments,\n                  local!newEmailAttachments\n                }\n              )\n            )\n          )\n        )\n      },\n      validations: {\n        if(\n          sum(fv!files.size) > 10000000,\n          #\"urn:appian:translation-string:v1:a1087a9c-a240-49a1-9c4b-0bad6508d7e7\",\n          \"\"\n        ),\n        if(\n          contains(upper(fv!files.extension), \"EXE\"),\n          #\"urn:appian:translation-string:v1:5c813578-8c25-4776-ab40-324949c19c6b\"(\n            #\"urn:appian:translation-variable:v1:35c1a6e6-523c-4c14-8060-a99ae8ad0c95\": joinarray(\n              index(\n                fv!files,\n                \"name\",\n                wherecontains(\"EXE\", upper(fv!files.extension))\n              ),\n              \", \"\n            )\n          ),\n          \"\"\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000ed5b-d85c-8000-9d42-011c48011c48_3693313": {
      "name": "CMGT_Sub_EmailTemplateAttachments_SummaryDisplay",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!richTextItems: {\n    /*email template attachments*/\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: a!defaultValue(\n        ri!attachment[recordType!CMGT_EmailTemplateAttachments.fullName],\n        ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.fullName]\n      ),\n      link: if(\n        ri!isShowNoLink,\n        null,\n        #\"SYSTEM_SYSRULES_documentDownloadLink\"(\n          document: ri!attachment[recordType!CMGT_EmailTemplateAttachments.appianDocumentId]\n        ),\n\n      ),\n      color: if(\n        ri!doNoColoring,\n        null,\n        a!defaultValue(\n          ri!linkColor,\n          ri!brandingMap.AccentColor\n        )\n      ),\n      style: a!defaultValue(ri!nameStyle, \"PLAIN\"),\n      linkStyle: \"STANDALONE\",\n      size: a!defaultValue(ri!size, \"STANDARD\")\n    ),\n    /*type and size*/\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: {\n        a!defaultValue(\n          ri!attachment[recordType!CMGT_EmailTemplateAttachments.sizeDisplay],\n          ri!cfgAttachment[recordType!CMGT_WFL_CFG_EmailTemplateAttachments.sizeDisplay]\n        )\n      },\n      color: if(\n        ri!doNoColoring,\n        null,\n        a!defaultValue(\n          ri!sizeAndExtensionColor,\n          ri!brandingMap.SecondaryTextColor\n        )\n      ),\n      size: a!defaultValue(ri!size, \"SMALL\")\n    ),\n    /*created on and by*/\n    #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n      text: {\n        #\"urn:appian:translation-string:v1:4d275ec1-1668-4931-8cb0-d98659946f9e\"(\n          #\"urn:appian:translation-variable:v1:d81439e1-2f47-4876-ba7e-558207d3f9e2\": rule!CMGT_UTIL_FormatDateTime(\n            dateTime: ri!attachment[recordType!CMGT_EmailTemplateAttachments.createdOn]\n          ),\n          #\"urn:appian:translation-variable:v1:0d790051-dbdb-4b06-a22d-793703034e08\": rule!CMGT_UTIL_DisplayUser(\n            user: ri!attachment[recordType!CMGT_EmailTemplateAttachments.createdBy],\n            userRecord: ri!attachment[recordType!CMGT_EmailTemplateAttachments.createdByUser]\n          )\n        )\n      },\n      color: if(\n        ri!doNoColoring,\n        null,\n        ri!brandingMap.SecondaryTextColor\n      ),\n      size: a!defaultValue(ri!size, \"SMALL\")\n    )\n  },\n  if(\n    ri!isSingleRichTextField,\n    #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n      label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Document Details\"),\n      labelPosition: \"COLLAPSED\",\n      value: #\"SYSTEM_SYSRULES_forEach\"(\n        items: local!richTextItems,\n        expression: { fv!item, char(10) }\n      )\n    ),\n    local!richTextItems\n  )\n)"
    },
    "_a-0000ea26-2ced-8000-9bf1-011c48011c48_566582": {
      "name": "CMGT_WFL_TaskBlock_RecordAction_CreateUpdate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*Constructing a dummy placeholder task for start*/\n  local!startTaskUUID: rule!CMGT_UTIL_GenerateUuid_NonPlugin(),\n  local!startTask: recordType!CMGT_WFL_CFG_TaskBlockTask(\n    recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId: 0,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.taskName: \"Start\",\n    recordType!CMGT_WFL_CFG_TaskBlockTask.description: \"<p>This is a dummy placeholder task</p>\",\n    recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid: local!startTaskUUID,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.sortOrder: 1,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.isActive: true,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault: false,\n    recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockId: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockId]\n  ),\n  local!activeCaseTypes: rule!CMGT_QR_GetCaseType(\n    returnType: \"OBJECT_ARRAY\",\n    includeInactive: false,\n    isCaseCategory: false,\n    fields: recordType!CMGT_CFG_CaseType.uuid\n  ),\n  /*Update the case type id as null if the selected case type is inactive in Create Case Tasks*/\n  local!updatedInactiveCaseTypeIdsInCreateCaseTasks: if(\n    a!isNullOrEmpty(\n      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks]\n    ),\n    /*skip the logic if this is create scenario*/\n    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n      expression: if(\n        and(\n          fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId] = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE,\n          rule!CMGT_UTIL_IsNotBlank(local!activeCaseTypes),\n          rule!CMGT_UTIL_IsBlank(\n            rule!CMGT_UTIL_Filter(\n              records: local!activeCaseTypes,\n              field: recordType!CMGT_CFG_CaseType.uuid,\n              value: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid]\n            )\n          )\n        ),\n        #\"urn:appian:function:v1:a:update\"(\n          data: fv!item,\n          index: recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid,\n          value: null\n        ),\n        fv!item\n      )\n    )\n  ),\n  /*mapping existing tasks with startbyDefault as true() to the placeholder start task*/\n  local!updatedTaskBlockTasks: if(\n    a!isNullOrEmpty(\n      ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks]\n    ),\n    /*skip the logic if this is create scenario*/\n    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!updatedInactiveCaseTypeIdsInCreateCaseTasks,\n      expression: if(\n        fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault],\n        #\"urn:appian:function:v1:a:update\"(\n          data: fv!item,\n          index: recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches,\n          /*tasks that start by default may have existing beforeTaskBlockTaskBranches for loopback scenarios*/\n          /*Appending the new branch constructed to the list of existing branches*/\n          value: append(\n            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches],\n            /*constructing one branch for the start task*/\n            recordType!CMGT_WFL_CFG_TaskBlockTaskBranch(\n              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid: local!startTaskUUID,\n              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired: true,\n              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive: true,\n              recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n            )\n          )\n        ),\n        fv!item\n      )\n    )\n  ),\n  /*save local!workFlowTemplate to rule input in the update button*/\n  local!taskBlock: #\"urn:appian:function:v1:a:update\"(\n    data: ri!taskBlock,\n    index: recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n    value: insert(\n      local!updatedTaskBlockTasks,\n      local!startTask,\n      1\n    )\n  ),\n  local!taskBlockTaskOnLoad: a!refreshVariable(\n    value: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n    refreshOnReferencedVarChange: false\n  ),\n  local!brandingMap: rule!CMGT_CB_UTIL_LoadBrandingMap(),\n  local!selectedTaskBlockTaskUuid,\n  local!wizardSteps: {\n    a!map(\n      stepName: #\"urn:appian:translation-string:v1:c0d7d0b9-6396-43cf-bab5-11cfebcffa10\",\n      stepNumber: 1\n    ),\n    a!map(\n      stepName: #\"urn:appian:translation-string:v1:2f4f2cde-9986-47cb-ac2a-1ecfeeddc693\",\n      stepNumber: 2\n    )\n  },\n  local!currentWizardStep: local!wizardSteps[1],\n  /*List of possible workflow steps: ADD_TASKS_EMPTY_STATE, ADD_REF_TASKS, CONFIGURE_TASK_BLOCK*/\n  local!currentWorkflowStep: if(\n    rule!CMGT_UTIL_IsBlank(\n      local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks]\n    ),\n    \"ADD_TASKS_EMPTY_STATE\",\n    \"CONFIGURE_TASK_BLOCK\"\n  ),\n  local!isMobile: rule!CMGT_UTIL_IsMobileScreenSize(),\n  /*\n  Since this UI generally operates on branches AFTER tasks instead of before them,\n  but they are loaded as the 'before' tasks (since the rest of the app prefers that),\n  we store all branches in a flattened map and operate on them independently.\n\n  Since tasks and branches are tied via a UUID generated in SAIL instead of DB foreign keys,\n  it doesn't actually matter what branches are tied to what tasks when sending to the write process,\n  therefore we attach them all to the first task before writing.\n  */\n  local!isCreateTaskBlock: a!isNullOrEmpty(\n    ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks.taskBlockTaskId]\n  ),\n  local!taskBlockTaskBranchMaps: a!refreshVariable(\n    value: rule!CMGT_WFL_GroupTaskBlockTaskBranches(\n      taskBlockTaskBranch: cast(\n        #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n          recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n        ),\n        rule!CMGT_UTIL_RejectBlank(\n          array: a!flatten(\n            {\n              local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n              if(\n                local!isCreateTaskBlock,\n                recordType!CMGT_WFL_CFG_TaskBlockTaskBranch(\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid: local!startTaskUUID,\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isRequired: true,\n                  /*Note, defaulting this to NULL until an actual selection is made so that the network renderer doesn't think there's a task*/\n                  recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive: true\n                ),\n                {}\n              )\n            }\n          )\n        )\n      ),\n      taskBlock: local!taskBlock\n    ),\n    refreshOnReferencedVarChange: false()\n  ),\n  /*\n  See long comment above: This is the final task block we pass to both the process and the network renderer.\n  It doesn't matter what branches are tied to what tasks, as long as ALL of each are included to ensure inactive ones are\n  inactivated.\n  */\n  /*local!finalTaskBlockTaskBranches: rule!CMGT_UTIL_Filter(*/\n  /*filterType: \"REJECT\",*/\n  /*records: local!taskBlockTaskBranchMaps,*/\n  /*field: 'recordType!{5a8d23e1-bc5d-4955-a2d7-4c738b26a294}CMGT_WFL_CFG_TaskBlockTaskBranch.fields.{478041e0-676e-4c0d-8f62-b9df6a886b83}beforeTaskBlockTaskUuid',*/\n  /*value: local!startTaskUUID*/\n  /*),*/\n  local!finalTaskBlockTaskBranches: rule!CMGT_UTIL_Filter(\n    records: rule!CMGT_UTIL_Filter(\n      filterType: \"REJECT\",\n      records: a!flatten(\n        index(\n          local!taskBlockTaskBranchMaps,\n          \"afterTaskBlockTaskBranches\",\n          null\n        )\n      ),\n      field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n      value: local!startTaskUUID\n    ),\n    fieldValuePairs: {\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.taskBlockTaskBranchId,\n        value: null()\n      ),\n      a!map(\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n        value: false()\n      )\n    },\n    filterType: \"REJECT\"\n  ),\n  local!finalTaskBlockRemapped: #\"urn:appian:function:v1:a:update\"(\n    local!taskBlock,\n    recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n    #\"SYSTEM_SYSRULES_forEach\"(\n      items: rule!CMGT_UTIL_Filter(\n        records: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n        fieldValuePairs: {\n          a!map(\n            field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId,\n            value: null()\n          ),\n          a!map(\n            field: recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n            value: false()\n          )\n        },\n        filterType: \"REJECT\"\n      ),\n      expression: #\"urn:appian:function:v1:a:update\"(\n        fv!item,\n        recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches,\n        rule!CMGT_UTIL_Filter(\n          records: local!finalTaskBlockTaskBranches,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n          value: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid]\n        )\n      )\n    )\n  ),\n  /* Metrics*/\n  local!metric: rule!CMGT_WFL_MTR_UserInitiatesTaskBlock(),\n  /*Used for validation that a given task can't be used more than 10 times in a Leads Into\n  ----\n  */\n  local!activeTaskBlockTaskBranches: cast(\n    #\"urn:appian:function:v1:a:listtype?okey=a!listType\"(\n      recordType!CMGT_WFL_CFG_TaskBlockTaskBranch\n    ),\n    rule!CMGT_UTIL_Filter(\n      records: rule!CMGT_UTIL_Filter(\n        records: a!flatten(\n          index(\n            local!taskBlockTaskBranchMaps,\n            \"afterTaskBlockTaskBranches\",\n            null\n          )\n        ),\n        field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n        value: true\n      ),\n      field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n      value: null,\n      filterType: \"REJECT\"\n    )\n  ),\n  local!uniqueAfterTaskUuids: rule!CMGT_UTIL_Distinct(\n    local!activeTaskBlockTaskBranches[recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid]\n  ),\n  /*Return the task uuids that are used in a Leads Into more than 10 times*/\n  local!uniqueAfterTaskUuidsInViolation: rule!CMGT_UTIL_RejectBlank(\n    array: #\"SYSTEM_SYSRULES_forEach\"(\n      items: local!uniqueAfterTaskUuids,\n      expression: if(\n        rule!CMGT_UTIL_Filter(\n          records: local!activeTaskBlockTaskBranches,\n          field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.afterTaskBlockTaskUuid,\n          value: fv!item,\n          filterType: \"MATCH_COUNT\"\n        ) > 10,\n        fv!item,\n        {}\n      )\n    )\n  ),\n  local!visibleTaskBlockTaskIndices: rule!CMGT_UTIL_Filter(\n    records: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n    field: recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n    value: true,\n    filterType: \"MATCH_INDICES\"\n  ),\n  local!visibleTaskBlockTasks: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks][local!visibleTaskBlockTaskIndices],\n  local!selectedTaskBlockTask: rule!CMGT_UTIL_Filter(\n    records: local!visibleTaskBlockTasks,\n    field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n    value: if(\n      local!selectedTaskBlockTaskUuid = \"m-0\",\n      local!startTaskUUID,\n      local!selectedTaskBlockTaskUuid\n    ),\n    filterType: \"FIRST_MATCH\"\n  ),\n  local!taskResponseOptions: local!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskResponseOptions],\n  /*Tasks that have basic invalid basic details like name, description or SLA*/\n  local!invalidBasicTaskDetails: a!refreshVariable(\n    value: #\"SYSTEM_SYSRULES_forEach\"(\n      rule!CMGT_UTIL_Filter(\n        records: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n        value: true()\n      ),\n      a!localVariables(\n        local!sla: rule!CMGT_UTIL_ContructSLAMap(\n          slaJson: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.sla]\n        ),\n        if(\n          or(\n            {\n              len(\n                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.description]\n              ) > cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE,\n              len(\n                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName]\n              ) > cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n              or(\n                rule!CMGT_UTIL_IsNotBlank(\n                  {\n                    rule!CMGT_UTIL_ValidateSLA(local!sla.days),\n                    rule!CMGT_UTIL_ValidateSLA(local!sla.hours),\n                    rule!CMGT_UTIL_ValidateSLA(local!sla.minutes)\n                  }\n                )\n              ),\n              and(\n                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid] = local!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid],\n                rule!CMGT_UTIL_IsNotBlank(local!selectedTaskBlockTask),\n                rule!CMGT_UTIL_IsBlank(\n                  local!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName]\n                )\n              ),\n              and(\n                tointeger(\n                  fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId]\n                ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_CREATE_CASE,\n                rule!CMGT_UTIL_IsBlank(\n                  fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.createCaseTaskBlockTask.caseTypeUuid]\n                )\n              ),\n              and(\n                tointeger(\n                  fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBehaviorTypeId]\n                ) = cons!CMGT_REFID_TASK_BEHAVIOR_TYPE_SEND_EMAIL,\n                rule!CMGT_UTIL_IsBlank(\n                  fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid]\n                )\n              )\n            }\n          ),\n          fv!item,\n          {}\n        )\n      )\n    ),\n    refreshOnReferencedVarChange: true\n  ),\n  local!additionalValidationConditions: a!map(\n    taskNamesInViolation: if(\n      rule!CMGT_UTIL_IsBlank(local!uniqueAfterTaskUuidsInViolation),\n      {},\n      rule!CMGT_UTIL_Filter(\n        records: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n        value: local!uniqueAfterTaskUuidsInViolation\n      )[recordType!CMGT_WFL_CFG_TaskBlockTask.taskName]\n    ),\n    /* Check if there are tasks mapped to start*/\n    tasksMappedtoStart: rule!CMGT_UTIL_Filter(\n      records: local!activeTaskBlockTaskBranches,\n      field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.beforeTaskBlockTaskUuid,\n      value: local!startTaskUUID,\n      filterType: \"FILTER\"\n    ),\n    /*Rejecting start task and tasks that startsByDefault from the tasks with no precedents*/\n    tasksWithNoPrecedents: rule!CMGT_UTIL_Filter(\n      records: rule!CMGT_UTIL_RejectBlank(\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n          expression: a!localVariables(\n            local!activeBeforeTaskBlockTaskBranches: rule!CMGT_UTIL_Filter(\n              records: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.beforeTaskBlockTaskBranches],\n              field: recordType!CMGT_WFL_CFG_TaskBlockTaskBranch.isActive,\n              value: true\n            ),\n            if(\n              and(\n                rule!CMGT_UTIL_IsBlank(\n                  local!activeBeforeTaskBlockTaskBranches\n                ),\n                fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.isActive] = true\n              ),\n              fv!item,\n              null\n            )\n          )\n        )\n      ),\n      fieldValuePairs: {\n        a!map(\n          field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n          value: local!startTaskUUID\n        ),\n        a!map(\n          field: recordType!CMGT_WFL_CFG_TaskBlockTask.startsByDefault,\n          value: true()\n        )\n      },\n      filterType: \"REJECT\",\n      matchingCriteria: \"ANY\"\n    ),\n    doesNonStartTasksExist: length(local!visibleTaskBlockTasks) > 1,\n    tasksWithInvalidBasicDetails: if(\n      rule!CMGT_UTIL_IsBlank(local!invalidBasicTaskDetails),\n      {},\n      local!invalidBasicTaskDetails\n    )\n  ),\n  local!emailTemplates: rule!CMGT_WFL_QR_GetEmailTemplates(\n    returnType: \"OBJECT_ARRAY\",\n    sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n      field: recordType!CMGT_WFL_CFG_EmailTemplate.templateName,\n      ascending: true()\n    )\n  ),\n  local!selectedEmailTemplate: rule!CMGT_UTIL_Filter(\n    records: local!emailTemplates,\n    field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n    value: local!selectedTaskBlockTask[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid]\n  ),\n  local!newEmailTemplates: rule!CMGT_UTIL_Filter(\n    records: local!emailTemplates,\n    field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateId,\n    value: null,\n\n  ),\n  local!nonMappedNewEmailTemplateUuids,\n  local!isEmailTemplatePreview: false(),\n  local!documentsToDelete,\n  local!sendEmailTaskWithNonMappedEmailTemplates,\n  /*\n  ----\n  */\n  a!match(\n    value: local!currentWizardStep.stepNumber,\n    equals: 1,\n    then: #\"SYSTEM_SYSRULES_formLayout_v2\"(\n      titleBar: #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_stampField\"(\n                  icon: \"files-o\",\n                  contentColor: local!brandingMap.StandardStampContentColor,\n                  backgroundColor: local!brandingMap.StandardStampBackgroundColor,\n                  size: \"TINY\",\n                  shape: local!brandingMap.StandardStampShape\n                ),\n                width: \"MINIMIZE\"\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_headingField\"(\n                  text: if(\n                    isnull(\n                      local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockId]\n                    ),\n                    #\"urn:appian:translation-string:v1:a1d372ae-b038-4693-8d65-750595865906\",\n                    #\"urn:appian:translation-string:v1:2ea3afc1-4338-41f2-bb50-887d42e5a81c\"\n                  ),\n                  size: local!brandingMap.H1Size,\n                  headingTag: \"H1\",\n                  fontWeight: \"SEMI_BOLD\",\n                  marginAbove: \"STANDARD\"\n                )\n              )\n            },\n            alignVertical: \"MIDDLE\",\n            spacing: \"STANDARD\",\n            marginBelow: \"NONE\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n              color: local!brandingMap.secondaryTextColor,\n              size: \"SMALL\"\n            )\n          )\n        },\n        padding: \"STANDARD\",\n        showBorder: false()\n      ),\n      showTitleBarDivider: true(),\n      contents: {\n        #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n          contents: {\n            #\"SYSTEM_SYSRULES_columnsLayout\"(\n              columns: {\n                #\"SYSTEM_SYSRULES_columnLayout\"(\n                  contents: {},\n                  width: \"4X\",\n                  showWhen: not(local!isMobile)\n                ),\n                #\"SYSTEM_SYSRULES_columnLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n                      contents: {\n                        #\"SYSTEM_SYSRULES_textField\"(\n                          label: #\"urn:appian:translation-string:v1:e863390c-26e6-43ab-b6a2-9737045ffa59\",\n                          value: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.label],\n                          saveInto: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.label],\n                          characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_SMALL,\n                          showCharacterCount: false,\n                          required: true,\n                          requiredMessage: #\"urn:appian:translation-string:v1:4fab94dc-fcb1-427a-af9f-1239079b2897\"(\n                            #\"urn:appian:translation-variable:v1:3e31b6d5-df20-4d17-80a7-81f3c83ff370\": #\"urn:appian:translation-string:v1:e863390c-26e6-43ab-b6a2-9737045ffa59\"\n                          )\n                        ),\n                        #\"SYSTEM_SYSRULES_paragraphField\"(\n                          label: #\"urn:appian:translation-string:v1:0495bd73-7477-4bca-8918-2632c601a60b\",\n                          value: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.description],\n                          saveInto: local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.description],\n                          characterLimit: cons!CMGT_INT_MAX_CHAR_LIMIT_MEDIUM,\n                          showCharacterCount: false,\n                          height: \"SHORT\"\n                        )\n                      }\n                    )\n                  },\n                  width: \"10X\"\n                ),\n                #\"SYSTEM_SYSRULES_columnLayout\"(\n                  contents: {},\n                  width: \"4X\",\n                  showWhen: not(local!isMobile)\n                )\n              },\n              spacing: \"SPARSE\"\n            ),\n            #\"SYSTEM_SYSRULES_cardLayout\"(height: \"TALL\", showBorder: false)\n          }\n        )\n      },\n      contentsWidth: \"FULL\",\n      buttons: #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: {\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: #\"urn:appian:translation-string:v1:ce78298f-a341-4c00-914f-431122d93f71\",\n            saveInto: a!save(\n              local!currentWizardStep,\n              local!wizardSteps[tointeger(local!currentWizardStep.stepNumber) + 1]\n            ),\n            style: \"SOLID\",\n            color: \"ACCENT\",\n            showWhen: tointeger(local!currentWizardStep.stepNumber) <> length(local!wizardSteps),\n            validate: true\n          )\n        },\n        secondaryButtons: {\n          #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n            label: #\"urn:appian:translation-string:v1:651cf177-f30b-485b-900f-8aaf47805737\",\n            value: true,\n            saveInto: {\n              a!save(local!taskBlock, {}),\n              a!save(ri!taskBlock, {}),\n              a!save(\n                ri!documentsToDelete,\n                append(\n                  local!documentsToDelete,\n                  rule!CMGT_UTIL_RejectBlank(\n                    array: index(\n                      local!newEmailTemplates,\n                      recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId,\n                      null\n                    )\n                  )\n                )\n              ),\n              a!save(ri!newEmailTemplates, null)\n            },\n            submit: true,\n            style: \"OUTLINE\",\n            color: \"ACCENT\",\n            validate: false\n          )\n        }\n      )\n    ),\n    default: {\n      a!match(\n        value: local!currentWorkflowStep,\n        equals: \"ADD_TASKS_EMPTY_STATE\",\n        then: {\n          #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n            contents: {\n              #\"SYSTEM_SYSRULES_stampField\"(\n                icon: \"network-wired\",\n                backgroundColor: local!brandingMap.LoudStampBackgroundColor,\n                contentColor: local!brandingMap.LoudStampContentColor,\n                align: \"CENTER\",\n                marginAbove: \"EVEN_MORE\",\n                marginBelow: \"MORE\"\n              ),\n              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                value: {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:76dcbb52-a34c-42d3-9b00-a107ca4aefee\",\n                    size: \"MEDIUM\",\n                    style: { \"STRONG\" }\n                  )\n                },\n                align: \"CENTER\",\n                marginBelow: \"STANDARD\"\n              ),\n              #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                labelPosition: \"COLLAPSED\",\n                value: {\n                  #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                    text: #\"urn:appian:translation-string:v1:5ce5c4d3-71df-4c7a-8bcc-ffff962999b0\",\n                    size: \"STANDARD\"\n                  )\n                },\n                align: \"CENTER\",\n                marginBelow: \"MORE\"\n              ),\n              #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                buttons: {\n                  #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                    label: #\"urn:appian:translation-string:v1:c512b062-c487-4b59-a5d9-e009552303aa\",\n                    value: \"ADD_REF_TASKS\",\n                    saveInto: local!currentWorkflowStep,\n                    style: \"OUTLINE\",\n                    color: local!brandingMap.AccentColor,\n                    showWhen: local!currentWorkflowStep = \"ADD_TASKS_EMPTY_STATE\"\n                  )\n                },\n                align: \"CENTER\"\n              ),\n              #\"SYSTEM_SYSRULES_cardLayout\"(\n                contents: {},\n                height: \"SHORT_PLUS\",\n                style: \"TRANSPARENT\",\n                marginBelow: \"STANDARD\",\n                showBorder: false\n              )\n            }\n          )\n        },\n        equals: \"ADD_REF_TASKS\",\n        then: rule!CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_AddTasks(\n          taskBlock: local!taskBlock,\n          brandingMap: local!brandingMap,\n          currentWorkflowStep: local!currentWorkflowStep,\n          emailTemplates: local!emailTemplates\n        ),\n        equals: \"CREATE_NEW_EMAIL_TEMPLATE\",\n        then: rule!CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_CreateEmailTemplate(\n          brandingMap: local!brandingMap,\n          emailTemplates: local!emailTemplates,\n          documentsToDelete: local!documentsToDelete,\n          selectedTaskBlockTaskUuid: local!selectedTaskBlockTaskUuid,\n          taskBlock: local!taskBlock,\n          currentWorkflowStep: local!currentWorkflowStep\n        ),\n        whenTrue: local!isEmailTemplatePreview,\n        then: rule!CMGT_EmailTemplate_Preview(\n          emailTemplateName: local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.templateName],\n          subject: local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.subject],\n          body: local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.body],\n          isPreview: local!isEmailTemplatePreview,\n          cfgAttachments: rule!CMGT_UTIL_RejectBlank(\n            local!selectedEmailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments]\n          ),\n          brandingMap: local!brandingMap\n        ),\n        default: {\n          #\"SYSTEM_SYSRULES_paneLayout\"(\n            panes: {\n              #\"SYSTEM_SYSRULES_pane\"(\n                padding: \"LESS\",\n                contents: {\n                  rule!CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_TaskList(\n                    currentWorkflowStep: local!currentWorkflowStep,\n                    visibleTaskBlockTasks: local!visibleTaskBlockTasks,\n                    taskBlockTaskBranchMaps: local!taskBlockTaskBranchMaps,\n                    taskBlock: local!taskBlock,\n                    visibleTaskBlockTaskIndices: local!visibleTaskBlockTaskIndices,\n                    selectedTaskBlockTaskUuid: local!selectedTaskBlockTaskUuid,\n                    brandingMap: local!brandingMap,\n                    selectedTaskBlockTask: local!selectedTaskBlockTask,\n                    taskResponseOptions: local!taskResponseOptions,\n                    additionalValidationConditions: local!additionalValidationConditions,\n\n                  )\n                },\n                accessibilityText: #\"urn:appian:translation-string:v1:0d2803b8-e051-4704-b4d5-c637b0568ff3\"\n              ),\n              #\"SYSTEM_SYSRULES_pane\"(\n                backgroundColor: local!brandingMap.TertiaryBackgroundColor,\n                contents: {\n                  #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                    labelPosition: \"COLLAPSED\",\n                    value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                      text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n                      color: local!brandingMap.secondaryTextColor,\n                      size: \"SMALL\"\n                    ),\n                    marginBelow: \"NONE\",\n                    showWhen: and(\n                      rule!CMGT_UTIL_IsNotBlank(local!selectedTaskBlockTask),\n                      local!selectedTaskBlockTaskUuid <> local!startTaskUUID\n                    )\n                  ),\n                  rule!CMGT_WFL_TaskBlock_RecordAction_CreateUpdate_ConfigureTask(\n                    taskBlockTaskBranchMaps: local!taskBlockTaskBranchMaps,\n                    taskBlock: local!taskBlock,\n                    visibleTaskBlockTaskIndices: local!visibleTaskBlockTaskIndices,\n                    selectedTaskBlockTaskUuid: local!selectedTaskBlockTaskUuid,\n                    brandingMap: local!brandingMap,\n                    selectedTaskBlockTask: local!selectedTaskBlockTask,\n                    taskResponseOptions: local!taskResponseOptions,\n                    uniqueAfterTaskUuidsInViolation: local!uniqueAfterTaskUuidsInViolation,\n                    startTaskUUID: local!startTaskUUID,\n                    caseType: local!activeCaseTypes,\n                    isEmailTemplatePreview: local!isEmailTemplatePreview,\n                    emailTemplates: local!emailTemplates,\n                    currentWorkflowStep: local!currentWorkflowStep\n                  )\n                },\n                accessibilityText: #\"urn:appian:translation-string:v1:d78e45bb-a2e8-476f-bb61-87deab262a92\"\n              ),\n              #\"SYSTEM_SYSRULES_pane\"(\n                contents: {\n                  #\"SYSTEM_SYSRULES_ButtonArrayLayout\"(\n                    align: \"END\",\n                    marginAbove: \"STANDARD\",\n                    buttons: {\n                      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                        label: #\"urn:appian:translation-string:v1:415e6029-5b1a-4b03-9061-acdafc2d8d45\",\n                        saveInto: a!save(\n                          local!currentWizardStep,\n                          local!wizardSteps[tointeger(local!currentWizardStep.stepNumber) - 1]\n                        ),\n                        style: \"OUTLINE\",\n                        color: \"ACCENT\",\n                        disabled: local!currentWorkflowStep = \"ADD_REF_TASKS\",\n                        showWhen: tointeger(local!currentWizardStep.stepNumber) <> 1,\n                        validate: false\n                      ),\n                      #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                        label: if(\n                          isnull(\n                            local!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockId]\n                          ),\n                          #\"urn:appian:translation-string:v1:8109f456-b575-47d2-8f0f-097db1743e6b\",\n                          #\"urn:appian:translation-string:v1:06dbafc7-e085-40de-a68a-c83054c1d7ec\"\n                        ),\n                        saveInto: {\n                          a!save(\n                            local!nonMappedNewEmailTemplateUuids,\n                            difference(\n                              touniformstring(\n                                local!newEmailTemplates[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid]\n                              ),\n                              rule!CMGT_UTIL_RejectBlank(\n                                touniformstring(\n                                  rule!CMGT_UTIL_Filter(\n                                    records: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                    field: recordType!CMGT_WFL_CFG_TaskBlockTask.isActive,\n                                    value: true\n                                  )[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid]\n                                )\n                              )\n                            )\n                          ),\n                          if(\n                            rule!CMGT_UTIL_IsNotBlank(local!nonMappedNewEmailTemplateUuids),\n                            {\n                              a!save(\n                                local!documentsToDelete,\n                                rule!CMGT_UTIL_RejectBlank(\n                                  append(\n                                    local!documentsToDelete,\n                                    a!flatten(\n                                      rule!CMGT_UTIL_Filter(\n                                        records: local!newEmailTemplates,\n                                        field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n                                        value: local!nonMappedNewEmailTemplateUuids\n                                      )[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId]\n                                    )\n                                  )\n                                )\n                              ),\n                              a!save(\n                                local!sendEmailTaskWithNonMappedEmailTemplates,\n                                rule!CMGT_UTIL_Filter(\n                                  records: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                  field: recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid,\n                                  value: local!nonMappedNewEmailTemplateUuids,\n\n                                )\n                              ),\n                              if(\n                                rule!CMGT_UTIL_IsNotBlank(\n                                  local!sendEmailTaskWithNonMappedEmailTemplates\n                                ),\n                                a!save(\n                                  local!finalTaskBlockRemapped,\n                                  #\"urn:appian:function:v1:a:update\"(\n                                    data: local!finalTaskBlockRemapped,\n                                    index: recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n                                    value: #\"SYSTEM_SYSRULES_forEach\"(\n                                      items: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                      expression: if(\n                                        contains(\n                                          tointeger(\n                                            local!sendEmailTaskWithNonMappedEmailTemplates[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId]\n                                          ),\n                                          tointeger(\n                                            fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId]\n                                          )\n                                        ),\n                                        #\"urn:appian:function:v1:a:update\"(\n                                          data: fv!item,\n                                          index: recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid,\n                                          value: rule!CMGT_UTIL_Filter(\n                                            records: local!taskBlockTaskOnLoad,\n                                            field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId,\n                                            value: fv!item[recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskId]\n                                          )[recordType!CMGT_WFL_CFG_TaskBlockTask.sendEmailTaskBlockTask.emailTemplateUuid]\n                                        ),\n                                        fv!item\n                                      )\n                                    )\n                                  )\n                                ),\n                                {}\n                              )\n                            },\n                            {}\n                          ),\n                          a!save(\n                            ri!taskBlock,\n                            #\"urn:appian:function:v1:a:update\"(\n                              data: local!finalTaskBlockRemapped,\n                              index: recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks,\n                              value: rule!CMGT_UTIL_Filter(\n                                filterType: \"REJECT\",\n                                records: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                                field: recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId,\n                                value: 0\n                              )\n                            )\n                          ),\n                          a!save(\n                            ri!newEmailTemplates,\n                            rule!CMGT_UTIL_Filter(\n                              records: local!newEmailTemplates,\n                              field: recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n                              value: local!nonMappedNewEmailTemplateUuids,\n                              filterType: \"REJECT\"\n                            )\n                          ),\n                          a!save(\n                            ri!documentsToDelete,\n                            local!documentsToDelete\n                          )\n                        },\n                        submit: true,\n                        style: \"SOLID\",\n                        color: \"ACCENT\",\n                        showWhen: tointeger(local!currentWizardStep.stepNumber) = length(local!wizardSteps),\n                        validate: true\n                      )\n                    }\n                  ),\n                  rule!CMGT_WFL_TaskBlock_Visualization(\n                    brandingMap: local!brandingMap,\n                    selectedTaskBlockTaskUuid: local!selectedTaskBlockTaskUuid,\n                    startTaskUuid: local!startTaskUUID,\n                    selectable: true,\n                    showVizNavigationButtons: true,\n                    tasks: rule!CMGT_UTIL_Filter(\n                      filterType: \"REJECT\",\n                      records: local!finalTaskBlockRemapped[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n                      field: recordType!CMGT_WFL_CFG_TaskBlockTask.referenceTaskId,\n                      value: 0\n                    ),\n                    additionalValidationConditions: local!additionalValidationConditions\n                  )\n                },\n                accessibilityText: #\"urn:appian:translation-string:v1:5d803e4f-7706-4b83-8460-9eae2a6a629a\"\n              )\n            }\n          )\n        }\n      )\n    }\n  )\n)"
    },
    "_a-0000ec7e-4d3b-8000-9ce6-011c48011c48_2997534": {
      "name": "CMGT_Document_IconColorLogic",
      "type": "Expression Rule",
      "sail_code": "a!match(\n  value: lower(ri!documentExtension),\n  /* red4*/\n  equals: \"pdf\",\n  then: ri!brandingMap.NegativeTextColor,\n  equals: \"img\",\n  equals: \"png\",\n  equals: \"mov\",\n  equals: \"jpg\",\n  /* red3*/\n  then: ri!brandingMap.NegativeAccentColor,\n  equals: \"xlsx\",\n  equals: \"xls\",\n  equals: \"xlsm\",\n  /* green4*/\n  then: ri!brandingMap.PositiveTextColor,\n  equals: \"ppt\",\n  equals: \"pptx\",\n  /* orange3*/\n  then: ri!brandingMap.TaskStatusInProgressAccentColor,\n  equals: \"doc\",\n  equals: \"docx\",\n  equals: \"txt\",\n  equals: \"properties\",\n  /* blue3*/\n  then: ri!brandingMap.InfoAccentColor,\n  default: ri!brandingMap.SecondaryTextColor\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180481": {
      "name": "CMGT_UTIL_RejectBlank",
      "type": "Expression Rule",
      "sail_code": "cast(\n  runtimetypeof(a!flatten(ri!array)),\n  reject(a!isNullOrEmpty(_), a!flatten(ri!array))\n)"
    },
    "_a-0000ebea-a421-8000-9cc1-011c48011c48_2337999": {
      "name": "CMGT_WFL_TaskBlock_FindPreviousTreeTasks",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  local!allTasks: ri!taskBlock[recordType!CMGT_WFL_CFG_TaskBlock.taskBlockTasks],\n  if(\n    a!isNullOrEmpty(ri!taskUUID),\n    {},\n    reduce(\n      rule!CMGT_WFL_TaskBlock_FindPreviousTreeTasks_Reducer(\n        allTasks: local!allTasks,\n        taskBlockTaskBranches: ri!taskBlockTaskBranches,\n        treeTasks: _,\n        index: _\n      ),\n      rule!CMGT_UTIL_Filter(\n        records: local!allTasks,\n        field: recordType!CMGT_WFL_CFG_TaskBlockTask.taskBlockTaskUuid,\n        value: ri!taskUUID\n      ),\n      enumerate(length(local!allTasks))\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612621": {
      "name": "CMGT_EmailTemplate_Preview",
      "type": "Interface",
      "sail_code": "#\"SYSTEM_SYSRULES_paneLayout\"(\n  panes: {\n    #\"SYSTEM_SYSRULES_pane\"(\n      backgroundColor: ri!brandingMap.TertiaryBackgroundColor,\n      accessibilityText: #\"urn:appian:translation-string:v1:25a115a1-c8b3-436c-981c-0e111a5a1275\",\n      padding: \"MORE\",\n      contents: {\n        #\"SYSTEM_SYSRULES_columnsLayout\"(\n          columns: {\n            #\"SYSTEM_SYSRULES_columnLayout\"(width: \"2X\"),\n            #\"SYSTEM_SYSRULES_columnLayout\"(\n              width: \"WIDE\",\n              contents: {\n                #\"SYSTEM_SYSRULES_cardLayout\"(\n                  contents: {\n                    #\"SYSTEM_SYSRULES_cardLayout\"(\n                      showBorder: false,\n                      padding: \"NONE\",\n                      marginBelow: \"NONE\",\n                      contents: {\n                        #\"SYSTEM_SYSRULES_headingField\"(\n                        text: #\"urn:appian:translation-string:v1:fda6abad-ccd8-4f13-8a77-1ae7e871680c\"(\n                        #\"urn:appian:translation-variable:v1:7d7177ba-ec92-4d05-8b0d-665eba6cd2f9\": ri!emailTemplateName\n                        ),\n                        size: \"MEDIUM\",\n                        headingTag: \"H4\",\n                        marginBelow: \"LESS\",\n                        marginAbove: \"STANDARD\",\n                        fontWeight: \"BOLD\",\n                        color: ri!brandingMap.StandardTextColor\n                        ),\n\n                        #\"SYSTEM_SYSRULES_horizontalLine\"(),\n                        /* Subject */\n                        #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n                          label: rule!CMGT_UTIL_ReturnLabelGivenAutomationTestingSwitch(testingLabel: \"Preview Email Template\"),\n                          labelPosition: \"COLLAPSED\",\n                          value: {\n                            #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n                              text: {\n                                #\"SYSTEM_SYSRULES_richTextIcon\"(\n                                  icon: \"envelope\",\n                                  color: ri!BrandingMap.SecondaryTextColor,\n                                  caption: #\"urn:appian:translation-string:v1:0238b081-2003-447d-9ddc-7d2e03c1b756\"\n                                ),\n                                char(32),\n                                ri!subject\n                              },\n                              style: \"STRONG\"\n                            )\n                          }\n                        ),\n                        /* Body */\n                        rule!CMGT_UTIL_RichTextField(value: ri!body, readOnly: true),\n                        /* Attachments */\n                        rule!CMGT_UTIL_CardGroupHandler(\n                          maxPerRow: 3,\n                          cardLayouts: {\n                            #\"SYSTEM_SYSRULES_forEach\"(\n                              items: a!defaultValue(ri!attachments, ri!cfgAttachments),\n                              expression: rule!CMGT_Sub_EmailTemplateAttachmentsCard(\n                                brandingMap: ri!brandingMap,\n                                linkColor: ri!brandingMap.StandardTextColor,\n                                attachment: if(\n                                  rule!CMGT_UTIL_IsBlank(ri!attachments),\n                                  null,\n                                  fv!item\n                                ),\n                                cfgAttachment: if(\n                                  rule!CMGT_UTIL_IsBlank(ri!cfgAttachments),\n                                  null,\n                                  fv!item\n                                ),\n                                showCreatedOn: false\n                              )\n                            )\n                          }\n                        ),\n                        #\"SYSTEM_SYSRULES_horizontalLine\"(),\n                        #\"SYSTEM_SYSRULES_ButtonLayout\"(\n                          primaryButtons: {\n                            #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n                              label: #\"urn:appian:translation-string:v1:5fff53df-8d97-4610-a492-2c37db32f302\",\n                              saveInto: a!save(ri!isPreview, false()),\n                              style: \"SOLID\",\n                              loadingIndicator: true\n                            )\n                          }\n                        )\n                      }\n                    )\n                  },\n                  style: ri!brandingMap.CardBackgroundColor,\n                  shape: ri!brandingMap.CardShape,\n                  marginBelow: \"NONE\",\n                  showBorder: false,\n                  showShadow: ri!brandingMap.CardShowShadow\n                )\n              }\n            ),\n            #\"SYSTEM_SYSRULES_columnLayout\"(width: \"2X\")\n          }\n        )\n      }\n    )\n  }\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_175235": {
      "name": "CMGT_NetworkChartField_FixNodeEdgeOrder_Logic",
      "type": "Expression Rule",
      "sail_code": "a!localVariables(\n  /*\n  Since the chart will graph dependent on the actual order of nodes\n  this logic will just reorder the nodes based on what don't have edges, what those point to, etc.\n  */\n  /*since nodes are passed in in a parent-child pattern, this pulls all of the nodes out and flattens*/\n  local!allNodes: rule!CMGT_UTIL_cast(\n    typeOf: { a!map() },\n    value: rule!CMGT_UTIL_RejectBlank(\n      a!flatten(\n        #\"SYSTEM_SYSRULES_forEach\"(\n          items: ri!nodes,\n          expression: {\n            remove(fv!item, \"children\"),\n            fv!item.children\n          }\n        )\n      )\n    )\n  ),\n  /*sorting nodes vertically so nodes which are closest to the start node are first in line*/\n  local!nodesOrderedVertically: reduce(\n    rule!CMGT_NCF_orderNodesBasedOnDistanceFromStart(\n      orderedNodes: _,\n      index: _,\n      allNodes: local!allNodes,\n      allEdges: ri!edges\n    ),\n    /*start with \"start\" node*/\n    #\"urn:appian:function:v1:a:update\"(\n      data: rule!CMGT_UTIL_Filter(\n        records: local!allNodes,\n        field: \"id\",\n        value: ri!nodes[1].id\n      ),\n      index: \"verticalOrder\",\n      value: 1\n    ),\n    enumerate(length(local!allNodes))\n  ),\n  /*stray nodes are nodes with no precedents or nodes that are unreachable*/\n  local!strayNodes: rule!CMGT_UTIL_Filter(\n    records: local!allNodes,\n    field: \"id\",\n    value: local!nodesOrderedVertically.id,\n    filterType: \"REJECT\"\n  ),\n  local!nodesSortedVertically: rule!CMGT_UTIL_sortList(\n    records: {\n      local!nodesOrderedVertically,\n      #\"urn:appian:function:v1:a:update\"(\n        local!strayNodes,\n        \"verticalOrder\",\n        repeat(length(local!strayNodes), 2)\n      )\n    },\n    field: \"verticalOrder\",\n    ascending: true\n  ),\n  /*using the \"verticalOrder\" property given to each node, goes through each \"level\" and sorts nodes*/\n  /*horizontally based on the horizontalOrder of their dependents to help prevent edge intersections*/\n  /*sorting from bottom first helps alleviate crossing lines that form from arbitrary sort from top*/\n  local!nodesSortedHorizontallyFromBottom: rule!CMGT_UTIL_sortList(\n    records: rule!CMGT_UTIL_sortList(\n      records: reduce(\n        rule!CMGT_NCF_orderNodesHorizontallyBottomUp(\n          orderedNodes: _,\n          level: _,\n          allNodes: local!nodesSortedVertically,\n          allEdges: ri!edges\n        ),\n        {},\n        rule!CMGT_UTIL_Distinct(\n          local!nodesSortedVertically.verticalOrder\n        )\n      ),\n      field: \"horizontalOrder\",\n      ascending: true\n    ),\n    field: \"verticalOrder\",\n    ascending: true\n  ),\n  /*using the \"verticalOrder\" property given to each node, goes through each \"level\" and sorts nodes*/\n  /*horizontally based on the horizontalOrder of their precedents to help prevent edge intersections*/\n  /*doing this sort last provides the best visual results*/\n  local!nodesSortedHorizontallyFromTop: rule!CMGT_UTIL_sortList(\n    records: rule!CMGT_UTIL_sortList(\n      records: reduce(\n        rule!CMGT_NCF_orderNodesHorizontallyTopDown(\n          orderedNodes: _,\n          level: _,\n          allNodes: local!nodesSortedHorizontallyFromBottom,\n          allEdges: ri!edges\n        ),\n        {},\n        rule!CMGT_UTIL_Distinct(\n          local!nodesSortedHorizontallyFromBottom.verticalOrder\n        )\n      ),\n      field: \"horizontalOrder\",\n      ascending: true\n    ),\n    field: \"verticalOrder\",\n    ascending: true\n  ),\n  local!fixNodesOrder: local!nodesSortedHorizontallyFromTop,\n  local!maxVerticalSort: todecimal(\n    rule!CMGT_UTIL_returnLastIndexOfArray(array: local!fixNodesOrder).verticalOrder\n  ),\n  /*\n  Since the chart will inaccurately graph if edges point back to previous nodes,\n  this logic will update the ordering of edges so that they always point to \"next\" nodes\n\n  If the edge \"from\" points to a \"to\" that is before it, it just swaps the \"from\" and \"to\" of both the object and the arrow\n  */\n  local!fixEdgesOrder: #\"SYSTEM_SYSRULES_forEach\"(\n    items: ri!edges,\n    expression: a!localVariables(\n      /*to help \"fix\" direction of loopback edges*/\n      local!fromNodeIndex: cast(\n        1,\n        wherecontains(\n          tostring(fv!item.from),\n          touniformstring(local!fixNodesOrder.id)\n        )\n      ),\n      local!toNodeIndex: cast(\n        1,\n        wherecontains(\n          tostring(fv!item.to),\n          touniformstring(local!fixNodesOrder.id)\n        )\n      ),\n      local!switchToAndFromIds: and(\n        a!isNotNullOrEmpty(local!fromNodeIndex),\n        a!isNotNullOrEmpty(local!toNodeIndex),\n        local!toNodeIndex < local!fromNodeIndex\n      ),\n      /*to allow for curved edges between distant nodes*/\n      local!fromNode: local!fixNodesOrder[local!fromNodeIndex],\n      local!toNode: local!fixNodesOrder[local!toNodeIndex],\n      local!horizontalOrderSign: sign(\n        local!fromNode.horizontalOrder - local!toNode.horizontalOrder\n      ),\n      /*to allow for multiple curved edges between two nodes when there are multiple branches*/\n      local!matchingEdgeIndices: rule!CMGT_UTIL_Filter(\n        records: ri!edges,\n        fieldValuePairs: {\n          a!map(field: \"from\", value: fv!item.from),\n          a!map(field: \"to\", value: fv!item.to)\n        },\n        filterType: \"MATCH_INDICES\"\n      ),\n      #\"urn:appian:function:v1:a:update\"(\n        fv!item,\n        { \"from\", \"to\", \"arrows\", \"smooth\", \"font\" },\n        {\n          /*from*/\n          if(\n            local!switchToAndFromIds,\n            fv!item.to,\n            fv!item.from\n          ),\n          /*to*/\n          if(\n            local!switchToAndFromIds,\n            fv!item.from,\n            fv!item.to\n          ),\n          /*arrows*/\n          cast(\n            252,\n            if(\n              and(\n                local!switchToAndFromIds,\n                a!isNotNullOrEmpty(fv!item.arrows)\n              ),\n              #\"urn:appian:function:v1:a:update\"(\n                fv!item.arrows,\n                { \"from\", \"to\" },\n                { fv!item.arrows.to, fv!item.arrows.from }\n              ),\n              fv!item.arrows\n            )\n          ),\n          /*smooth*/\n          a!match(\n            value: true,\n            /*allow for multiple curved edges between two nodes when there are multiple branches*/\n            whenTrue: length(local!matchingEdgeIndices) > 1,\n            then: a!map(\n              enabled: true,\n              type: \"curvedCW\",\n              roundness: a!localVariables(\n                local!normalizedMatchingEdgeIndices: enumerate(count(local!matchingEdgeIndices)),\n                local!normalizedCurrentIndex: cast(\n                  1,\n                  wherecontains(fv!index, local!matchingEdgeIndices)\n                ) - 1,\n                local!unadjustedCurve: (\n                  local!normalizedCurrentIndex - median(local!normalizedMatchingEdgeIndices)\n                ) / count(local!matchingEdgeIndices),\n                /*for some reason, negative curve values need to start at -2*/\n                local!adjustedCurve: if(\n                  local!unadjustedCurve < 0,\n                  local!unadjustedCurve - 2,\n                  local!unadjustedCurve\n                ),\n                local!adjustedCurve\n              )\n            ),\n            /*allow for curved edges between distant nodes*/\n            whenTrue: (\n              local!toNode.verticalOrder - local!fromNode.verticalOrder\n            ) <> 1,\n            then: a!map(\n              enabled: true,\n              type: \"curvedCW\",\n              roundness: (\n                local!toNode.verticalOrder - local!fromNode.verticalOrder\n              ) / (local!maxVerticalSort - 1) * 0.5 * a!match(\n                value: 0,\n                whenTrue: local!horizontalOrderSign <> 0,\n                then: local!horizontalOrderSign,\n                whenTrue: sign(local!fromNode.horizontalOrder - 50.0) <> 0,\n                then: sign(local!fromNode.horizontalOrder - 50.0),\n                default: 1\n              )\n            ),\n            default: a!map(enabled: false)\n          ),\n          /*font*/\n          cast(\n            252,\n            /*if there are multiple branches between two nodes update label alignment to handle crowdedness*/\n            if(\n              length(local!matchingEdgeIndices) > 1,\n              #\"urn:appian:function:v1:a:update\"(fv!item.font, \"align\", \"middle\"),\n              fv!item.font\n            )\n          )\n        }\n      )\n    )\n  ),\n  a!map(\n    nodes: rule!CMGT_UTIL_DistinctRecords(\n      records: rule!CMGT_UTIL_RejectBlank(local!fixNodesOrder),\n      fields: \"id\"\n    ),\n    edges: rule!CMGT_UTIL_DistinctRecords(\n      records: rule!CMGT_UTIL_RejectBlank(local!fixEdgesOrder),\n      fields: { \"from\", \"to\", \"arrows\", \"title\" }\n    )\n  )\n)"
    },
    "_a-0000ed49-63d5-8000-9d3e-011c48011c48_3612963": {
      "name": "CMGT_WFL_SUB_CreateEmailTemplate",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  local!emailTemplate: cast(\n    recordType!CMGT_WFL_CFG_EmailTemplate,\n    null()\n  ),\n  #\"SYSTEM_SYSRULES_sectionLayout_v1\"(\n    labelColor: \"STANDARD\",\n    labelSize: \"LARGE\",\n    contents: {\n      #\"SYSTEM_SYSRULES_cardLayout\"(\n        contents: {\n          #\"SYSTEM_SYSRULES_sideBySideLayout\"(\n            items: {\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_stampField\"(\n                  icon: \"envelope-open-text\",\n                  contentColor: ri!brandingMap.StandardStampContentColor,\n                  backgroundColor: ri!brandingMap.StandardStampBackgroundColor,\n                  size: \"TINY\",\n                  shape: ri!brandingMap.StandardStampShape\n                ),\n                width: \"MINIMIZE\"\n              ),\n              #\"SYSTEM_SYSRULES_sideBySideItem\"(\n                item: #\"SYSTEM_SYSRULES_headingField\"(\n                  text: #\"urn:appian:translation-string:v1:46b8e7eb-9250-4bc1-87ba-785b0eb505a2\",\n                  headingTag: \"H1\",\n                  fontWeight: \"SEMI_BOLD\",\n                  size: ri!brandingMap.H1Size,\n                  marginAbove: \"STANDARD\"\n                )\n              )\n            },\n            alignVertical: \"MIDDLE\",\n            spacing: \"STANDARD\",\n            marginAbove: \"NONE\",\n            marginBelow: \"NONE\"\n          ),\n          #\"SYSTEM_SYSRULES_richTextDisplayField\"(\n            value: #\"SYSTEM_SYSRULES_richTextItem_v1\"(\n              text: #\"urn:appian:translation-string:v1:4e55001e-fef0-492e-9eee-42b9010b7b6d\",\n              color: ri!brandingMap.secondaryTextColor,\n              size: \"SMALL\"\n            )\n          )\n        },\n        showBorder: false(),\n        padding: \"NONE\",\n        marginBelow: \"STANDARD\"\n      ),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      rule!CMGT_WFL_EmailTemplate_Details(emailTemplate: local!emailTemplate),\n      #\"SYSTEM_SYSRULES_richTextDisplayField\"(),\n      #\"SYSTEM_SYSRULES_horizontalLine\"(),\n      #\"SYSTEM_SYSRULES_ButtonLayout\"(\n        primaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:8109f456-b575-47d2-8f0f-097db1743e6b\",\n          /* Setting uuids for the new generated templates */\n          value: #\"urn:appian:function:v1:a:update\"(\n            local!emailTemplate,\n            recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateUuid,\n            rule!CMGT_UTIL_GenerateUuid_NonPlugin()\n          ),\n          saveInto: {\n            a!save(\n              ri!emailTemplates,\n              rule!CMGT_UTIL_RejectBlank(\n                array: append(ri!emailTemplates, save!value)\n              )\n            ),\n            ri!submitSaveInto,\n            a!save(\n              local!emailTemplate,\n              cast(\n                recordType!CMGT_WFL_CFG_EmailTemplate,\n                null()\n              )\n            )\n          },\n          style: \"SOLID\",\n          validate: true\n        ),\n        secondaryButtons: #\"SYSTEM_SYSRULES_buttonWidget_v1\"(\n          label: #\"urn:appian:translation-string:v1:edd4df67-d878-46d6-ab67-732a3700a588\",\n          saveInto: {\n            a!save(\n              ri!documentsToDelete,\n              append(\n                ri!documentsToDelete,\n                local!emailTemplate[recordType!CMGT_WFL_CFG_EmailTemplate.emailTemplateAttachments.appianDocumentId]\n              )\n            ),\n            ri!cancelSaveInto,\n            a!save(\n              local!emailTemplate,\n              cast(\n                recordType!CMGT_WFL_CFG_EmailTemplate,\n                null()\n              )\n            )\n          },\n          style: \"OUTLINE\",\n          validate: false\n        )\n      )\n    }\n  )\n)"
    },
    "_a-0000ea1d-36f5-8000-9bef-011c48011c48_538451": {
      "name": "CMGT_UTIL_GenerateUuid_NonPlugin",
      "type": "Expression Rule",
      "sail_code": "/*Reference:\nhttps://community.appian.com/w/the-appian-playbook/846/generating-uuids-guids*/\nfn!lower(\n  concat(\n    {\n      dec2hex(tointeger(rand(4) * 256), 2),\n      /*8 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(2) * 256), 2),\n      /*4 hex digits*/\n      \"-4\",\n      /*version 4 = completely random*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      bin2hex(\"10\" & dec2bin(rand(1) * 4, 2), 1),\n      /*1 hex digit = Variant: 1st 2 bits=10=[ISO/IEC] + 2 rand bits*/\n      dec2hex(rand(3) * 256, 1),\n      /*3 hex digits*/\n      \"-\",\n      dec2hex(tointeger(rand(6) * 256), 2),\n      /*12 hex digits*/\n      \n    }\n  )\n)"
    },
    "af326a29-a1c8-4399-a28d-996f85819d9e": {
      "name": "CMGT_UTIL_Filter",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!fieldValuePairs: a!defaultValue(\n    ri!fieldValuePairs,\n    apply(\n      rule!CMGT_UTIL_Filter_CreateFieldValuePair(\n        field: _,\n        value: ri!value,\n        allFields: a!flatten(ri!field)\n      ),\n      a!flatten(ri!field)\n    )\n  ),\n  local!matchingCriteria: a!defaultValue(\n    value: ri!matchingCriteria,\n    default: \"ALL\"\n  ),\n  local!matchType: a!defaultValue(value: ri!matchType, default: \"EXACT\"),\n  local!matchIndices: if(\n    a!isNullOrEmpty(a!flatten(ri!records)),\n    tointeger({}),\n    reduce(\n      rule!CMGT_UTIL_Filter_Reducer(\n        matchingCriteria: local!matchingCriteria,\n        previousIndices: _,\n        records: a!flatten(ri!records),\n        fieldValuePair: _,\n        matchType: local!matchType\n      ),\n      a!match(\n        value: local!matchingCriteria,\n        equals: \"ALL\",\n        then: enumerate(count(a!flatten(ri!records))) + 1,\n        equals: \"ANY\",\n        then: {},\n        default: fn!error(\n          \"Invalid matchingCriteria, must be one of: ALL, ANY\"\n        )\n      ),\n      local!fieldValuePairs\n    )\n  ),\n  local!rejectIndices: difference(\n    if(\n      a!isNullOrEmpty(ri!records),\n      tointeger({}),\n      enumerate(count(a!flatten(ri!records))) + 1\n    ),\n    local!matchIndices\n  ),\n  local!matches: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!matchIndices, {})\n  ),\n  local!rejects: cast(\n    runtimetypeof(ri!records),\n    index(ri!records, local!rejectIndices, {})\n  ),\n  local!output: a!match(\n    value: a!defaultValue(ri!filterType, \"FILTER\"),\n    equals: \"FILTER\",\n    then: local!matches,\n    equals: \"REJECT\",\n    then: local!rejects,\n    equals: \"FIRST_MATCH\",\n    then: index(local!matches, 1, null),\n    equals: \"FIRST_REJECT\",\n    then: index(local!rejects, 1, null),\n    equals: \"MATCH_COUNT\",\n    then: count(local!matchIndices),\n    equals: \"REJECT_COUNT\",\n    then: count(local!rejectIndices),\n    equals: \"MATCH_INDICES\",\n    then: local!matchIndices,\n    equals: \"REJECT_INDICES\",\n    then: local!rejectIndices,\n    equals: \"FULL_RESULT\",\n    then: a!map(\n      matches: local!matches,\n      rejects: local!rejects,\n      firstMatch: index(local!matches, 1, null),\n      firstReject: index(local!rejects, 1, null),\n      matchCount: count(local!matchIndices),\n      rejectCount: count(local!rejectIndices),\n      matchIndices: local!matchIndices,\n      rejectIndices: local!rejectIndices\n    ),\n    default: fn!error(\n      \"Invalid filterType, must be one of: FILTER, REJECT, FIRST_MATCH, FIRST_REJECT, MATCH_COUNT, REJECT_COUNT, MATCH_INDICES, REJECT_INDICES, FULL_RESULT\"\n    )\n  ),\n  local!output\n)"
    },
    "bd8f3e49-406c-4eab-a3a4-ce119dfbb5ce": {
      "name": "CMGT_UTIL_RichTextField",
      "type": "Interface",
      "sail_code": "a!localVariables(\n  /*\n  This should never be above 4000 characters as it will go over the amount allowed in synced records\n  If using the RTE in other places for customization, the field length should be 4000 characters to allow for additional HTML to be added.\n  The RTE calculates the max length allowed on the front end for the end-user, but will not go over that amount on the back-end\n  */\n  local!maxSize: a!defaultValue(\n    value: ri!maxSize,\n    default: cons!CMGT_INT_MAX_CHAR_LIMIT_EXTRA_LARGE\n  ),\n  if(\n    cons!CMGT_BOL_AUTOMATION_TESTING_LABEL_SWITCH,\n    #\"SYSTEM_SYSRULES_paragraphField\"(\n      label: ri!label,\n      labelPosition: if(rule!CMGT_UTIL_IsBlank(ri!label),\"COLLAPSED\",ri!labelPosition),\n      instructions: ri!instructions,\n      helpTooltip: ri!helpToolTip,\n      placeholder: ri!placeholder,\n      value: rule!CMGT_UTIL_StripHtmlTags(value: ri!value, isFormatted: true),\n      saveInto: a!save(\n        ri!value,\n        \"<p>\" & substitute(save!value, char(10), \"<br>\") & \"</p>\"\n      ),\n      refreshAfter: ri!refreshAfter,\n      characterLimit: local!maxSize,\n      height: ri!height,\n      showWhen: ri!showWhen,\n      required: ri!required,\n      requiredMessage: ri!requiredMessage,\n      readOnly: ri!readOnly,\n      disabled: ri!disabled\n    ),\n    #\"SYSTEM_SYSRULES_styledTextEditorField\"(\n      label: ri!label,\n      labelPosition: if(rule!CMGT_UTIL_IsBlank(ri!label),\"COLLAPSED\",ri!labelPosition),\n      instructions: ri!instructions,\n      helpTooltip: ri!helpToolTip,\n      placeholder: ri!placeholder,\n      value: ri!value,\n      saveInto: {\n        ri!value,\n        ri!additionalSaves\n      },\n      sizeLimit: local!maxSize,\n      height: a!defaultValue(ri!height, \"SHORT_PLUS\"),\n      showWhen: ri!showWhen,\n      required: ri!required,\n      requiredMessage: ri!requiredMessage,\n      readOnly: ri!readOnly,\n      disabled: ri!disabled,\n      validations: ri!validations\n    )\n  )\n)"
    },
    "_a-0000eb32-20f6-8000-9c60-011c48011c48_1532719": {
      "name": "CMGT_UTIL_sortList",
      "type": "Expression Rule",
      "sail_code": "cast(\n  typeof(ri!records),\n  if(\n    a!isNullOrEmpty(ri!field),\n    ri!records,\n    with(\n      local!dataSortedByField: todatasubset(\n        ri!records,\n        #\"SYSTEM_SYSRULES_pagingInfo\"(\n          startIndex: 1,\n          batchSize: - 1,\n          sort: #\"SYSTEM_SYSRULES_sortInfo\"(\n            field: ri!field,\n            ascending: a!defaultValue(ri!ascending, true)\n          )\n        )\n      ).data,\n      if(\n        a!isNullOrEmpty(ri!nullsFirst),\n        local!dataSortedByField,\n        with(\n          local!nullsAggregated: rule!CMGT_UTIL_Filter(\n            records: local!dataSortedByField,\n            field: ri!field,\n            value: null,\n            filterType: \"FULL_RESULT\"\n          ),\n          if(\n            ri!nullsFirst,\n            append(\n              local!nullsAggregated.matches,\n              local!nullsAggregated.rejects\n            ),\n            append(\n              local!nullsAggregated.rejects,\n              local!nullsAggregated.matches\n            )\n          )\n        )\n      )\n    )\n  )\n)"
    },
    "_a-0000e9d3-70bf-8000-9bbd-011c48011c48_180598": {
      "name": "CMGT_UTIL_returnSingleTypeObject",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!typeOf: if(\n    isnull(ri!type),\n    ri!typeOf,\n    cast(\n      ri!type,\n      {}\n    )\n  ),\n\n  index(\n    cast(\n      typeof({local!typeOf}), \n      updatearray({local!typeOf}, 1, {})\n    ), \n    1,\n    {}\n  )\n)"
    },
    "8af695e2-f3e1-4fe7-9755-ff66a47ce843": {
      "name": "CMGT_UTIL_MergeMaps",
      "type": "Expression Rule",
      "sail_code": "with(\n  local!value1_keyed: if(\n    isnull(ri!key),\n    ri!map1,\n    index(ri!map1, ri!key, null)\n  ),\n  local!value2_keyed: if(\n    isnull(ri!key),\n    ri!map2,\n    index(ri!map2, ri!key, null)\n  ),\n  local!newValue: if(\n    and(\n      runtimetypeof(local!value1_keyed) = 'type!{http://www.appian.com/ae/types/2009}Map',\n      runtimetypeof(local!value2_keyed) = 'type!{http://www.appian.com/ae/types/2009}Map'\n    ),\n    reduce(\n      rule!CMGT_UTIL_MergeMaps(\n        previous: _,\n        key: _,\n        map1: local!value1_keyed,\n        map2: local!value2_keyed\n      ),\n      a!map(),\n      union(\n        a!keys(local!value1_keyed),\n        a!keys(local!value2_keyed)\n      )\n    ),\n    a!defaultValue(local!value2_keyed, local!value1_keyed)\n  ),\n  if(\n    isnull(ri!key),\n    local!newValue,\n    #\"urn:appian:function:v1:a:update\"(ri!previous, ri!key, local!newValue)\n  )\n)"
    },
    "_a-0000ebaa-19ba-8000-9ca6-011c48011c48_2093172": {
      "name": "CMGT_UTIL_returnLastIndexOfArray",
      "type": "Expression Rule",
      "sail_code": "index(\n  ri!array,\n  count(ri!array),\n  rule!CMGT_UTIL_returnSingleTypeObject(typeOf: ri!array)\n)"
    }
  }
}